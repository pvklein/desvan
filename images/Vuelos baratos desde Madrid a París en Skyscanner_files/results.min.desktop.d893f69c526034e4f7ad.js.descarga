!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var i,r,s,o,a,l,u,c,p,d,h,f,g,m,y,v,b,k,w;n(1),n(2),n(3),i=n(4),r=n(229),d=n(53),g=n(230),l=n(8),u=n(231).default,a=n(10).applyConfig(n(232)),b=n(25),k=n(233),v=n(234).default,o=n(133),s=n(27),c=n(236),f=n(21),w=n(23),p=n(19)("initial_query"),h=n(237),m=n(64),y=n(238),function(t,e){var n,x,S,P,C,A,D,T,M,O,F,I,R,q,j,B,L,V,E,N,U,Q,G,X,H,W,z,J,Y,K,Z,tt,et,nt,it,rt,st,ot,at,lt,ut,ct,_t,pt;return null==t.FSS&&(t.FSS={}),t.FSS.loaded=!0,E=t.config,lt=E.featureTests,M=E.globalConfig,et=E.remoteConfiguration.FlightSearch||{},nt=E.remoteConfiguration.HotelsWebFrontEnd||{},pt=E.zendesk||{},ct=t.Api.urlBuilder,L=t.Api.localisation,at=t.signals,A=t.Api.componentContext(),_t=t.Api.traveller.getUtid(),C=t.FSS.config,Q=t.Api.queryParameters(),b.set("endpoints.slipstream",null!=(G=E.tracking)?G.grapplerSlipstreamEndpoint:void 0),A.cabinclass=o.normalize(A.cabinclass),it=t.Api.tracking.getRequestId(),v(A,C,"Results"),P=!w.isMultiDestination()&&"economy"===A.cabinclass,ot={Length:m.getLength(A.originDestinationDistance)},et.fss_dayview_canned_data&&a.switchOn("dayview_canned_data",et.fss_dayview_canned_data),et.fss_dayview_canned_data_delay&&a.switchOn("dayview_canned_data_delay",et.fss_dayview_canned_data_delay),et.fss_booking_canned_data&&a.switchOn("booking_canned_data",et.fss_booking_canned_data),et.fss_booking_canned_data_delay&&a.switchOn("booking_canned_data_delay",et.fss_booking_canned_data_delay),et.fss_flexible_days===!0&&a.switchOn("flexible_days"),et.fss_partner_promotion===!0&&a.switchOn("partner_promotion"),et.fss_fab_cta_colour&&a.switchOn("fab_cta_colour",et.fss_fab_cta_colour),et.fss_fab_cta_fabcopy===!0&&a.switchOn("fab_cta_fabcopy"),et.fss_bp_collapse_itineraries===!0&&a.switchOn("bp_collapse_itineraries"),et.fss_bp_scroll_to_price===!0&&a.switchOn("bp_scroll_to_price"),et.fss_show_airport_transfers===!1&&a.switchOff("show_airport_transfers"),"b"!==(X=lt.Fss_NewSkippy)&&"c"!==X&&"d"!==X||a.switchOn("new_skippy"),"a"!==(H=lt.Fss_NewSkippy)&&"b"!==H&&"c"!==H&&"d"!==H||a.switchOn("new_skippy_variant",lt.Fss_NewSkippy),et.fss_fb_bot!==!0&&"fb_messenger"!==Q.utm_source&&"bots"!==Q.utm_medium||a.switchOn("is_app_bot"),(ut=u(et.fss_expiry_timer,0))>0&&a.switchOn("expiry_timer",ut),et.fss_aa_website_id&&a.switchOn("aa_website_id",et.fss_aa_website_id),(S=u(et.fss_max_ajax_allowed_time,0))>0&&a.switchOn("max_ajax_allowed_time",S),(x=u(et.fss_max_ajax_allowed_count,0))>0&&a.switchOn("max_ajax_allowed_count",x),et.fss_prevent_auto_price_alerts===!0&&a.switchOn("prevent_auto_price_alerts"),et.fss_highlight_airline===!0&&a.switchOn("highlight_airline"),"0"!==nt.FlightsClickoutTTL&&a.switchOn("xsell_clickout_ttl",nt.FlightsClickoutTTL),"b"===lt.Fss_Perf&&a.switchOn("performance_stats"),"b"===lt.Fss_SJAltSellPanel&&a.switchOn("sj_alt_sell_panel"),"b"!==(W=lt.Fss_PriceAlertsOnceADay)&&"c"!==W||a.switchOn("price_alerts_once_a_day",lt.Fss_PriceAlertsOnceADay),"b"===lt.Fss_DirectFlightOptionOnPriceAlertPopup&&a.switchOn("price_alerts_show_direct_only_option"),"b"!==(z=lt.Fss_PriceAlertsPriceInsight)&&"c"!==z||a.switchOn("price_alerts_show_price_insight",lt.Fss_PriceAlertsPriceInsight),et.fss_save_filters===!0&&a.switchOn("save_filters",et.fss_save_filters),"b"===lt.Gti420_Messenger_Price_Alerts&&a.switchOn("fb_messenger_button"),"b"===lt.glu_springclean&&a.switchOn("spring_clean"),et.fss_compact_springclean===!0&&a.switchOn("compact_spring_clean"),et.fss_less_affordance_springclean===!0&&a.switchOn("less_affordance_spring_clean"),et.fss_bp_full_leg_info===!0&&a.switchOn("bp_full_leg_info"),et.fss_prod_bp_springclean===!0&&a.switchOn("prod_bp_spring_clean"),"b"===lt.RPE_SEOAirlineFilter&&a.switchOn("seo_airline_filter",lt.RPE_SEOAirlineFilter),"b"!==(J=et.fss_cta_button)&&"c"!==J&&"d"!==J||a.switchOn("cta_button",et.fss_cta_button),(E.remoteConfiguration.APACRegionalFeature||{}).ShowIntercomLiveChat&&a.switchOn("show_intercom_live_chat"),"b"!==(Y=et.fss_installments)&&"c"!==Y||a.switchOn("installments",et.fss_installments),(B=function(){try{return JSON.parse(et.fss_br_installments_partners_list)}catch(t){}}())&&a.switchOn("installments_partners_list",B),"b"!==(K=et.fss_jp_customer_support)&&"c"!==K||a.switchOn("jp_customer_support",et.fss_jp_customer_support),(j=function(){try{return JSON.parse(et.fss_jp_customer_support_partners)}catch(t){}}())&&a.switchOn("jp_customer_support_partners",j),(n=function(){try{return JSON.parse(et.fss_airline_travel_alert)}catch(t){}}())&&a.switchOn("airline_travel_alert",n),(U=u(et.fss_pqs_increment,0))>=0&&a.switchOn("pqs_increment",U),et.fss_ticket_style_results===!0&&a.switchOn("ticket_style_results"),et.fss_show_avg_price_indicator===!0&&a.switchOn("show_avg_price_indicator"),et.fss_combined_bp===!0&&a.switchOn("combined_bp"),m.validate(et.fss_fqs_ui,ot)&&a.switchOn("fqs_ui"),et.fss_downrank_indirects===!0&&a.switchOn("downrank_indirects"),"b"===lt.Sj_DepartReturnLabel&&a.switchOn("jp_depart_return_label"),"b"!==(Z=et.highlight_brand_or_airline)&&"c"!==Z||a.switchOn("highlight_brand_or_airline",et.highlight_brand_or_airline),T=_.findKey(lt,function(t){return function(t,e){return"a"!==t&&"Fss_CustomInlineXSell_"===e.substring(0,22)}}(this)),T&&a.switchOn("custom_inline_xsell",T.substring(22)),T&&a.switchOn("custom_inline_xsell_variant",lt[T]),et.fss_custom_inline_xsell_endpoint&&a.switchOn("custom_inline_xsell_endpoint",et.fss_custom_inline_xsell_endpoint),et.fss_results_cta_label&&a.switchOn("results_cta_label",et.fss_results_cta_label),et.fss_booking_panel_cta_label&&a.switchOn("booking_panel_cta_label",et.fss_booking_panel_cta_label),et.fss_price_messaging_fees_dv&&a.switchOn("price_messaging_fees_dv",et.fss_price_messaging_fees_dv),et.alternative_destinations===!0&&"true"!==Q.recommended&&a.switchOn("alternative_destinations"),(N=function(){try{return JSON.parse(et.fss_partner_currency)}catch(t){}}())&&a.switchOn("partner_currency",N),V=e.Callbacks(),null!=(tt=SS.advertData)&&(tt.onPriceUpdate=function(t){return V.add(t)}),F=_.once(function(t){var e;return e=window.Skyscanner.Common.observer,e&&e.subscribe("sponsored-slots",function(n){return function(){var n;return n=t.getAdsContract().getSlots(),e.publish("sponsored-slots-result",n)}}(this))}),R=_.once(function(e){var n;if(d)return $("#content-main").append(d.getShadowContainer()),t.Common.observer.subscribe("gpt-ready",function(){return d.fetchData()}),t.Common.observer.subscribe("adslot-rendered",function(t){return d.onAdIframeReady(t)}),t.Common.observer.subscribe("fss-re-render",function(t){return e.channel("re-render").publish(t)}),d.getBus().channel("inline-ad-clicked").subscribe(function(){return e.channel("load-upsell").publish()}),null!=(n=SS.advertData)?n.flightInlineTmpl=d.getRemoteTemplate():void 0}),q=_.once(function(){var t;if(y&&P&&!M.disableRouteSponsors)return t=$("#route-sponsors-section").removeClass("hidden"),t.is(":visible")?y({market:A.market,currency:A.currency,locale:A.locale,adults:f.get("adults",!0),children:f.get("children",!0),infants:f.get("infants",!0),departPlace:A.originId,returnPlace:A.destinationId,departDate:A.outboundDate,returnDate:A.inboundDate,isReturn:w.isReturn(),requestId:it,logosDomain:E.logoStaticContentDomain,$section:t}):void t.addClass("hidden")}),D=function(t){var e;return w.isMultiDestination()?"":(e=function(t){return l.formatDate(L.parseDate(t),"yyyy-mm")},t.outboundDate&&(t.outboundDate=e(t.outboundDate)),t.inboundDate&&(t.inboundDate=e(t.inboundDate)),""+ct.buildUrl(t))},I=function(){var e,n,o;return e=new i({nodeName:C.nodeName||"",logosDomain:E.logoStaticContentDomain,deviceType:t.Api.contextValue("deviceType"),departNearby:C.outboundAltsEnabled,returnNearby:C.inboundAltsEnabled,alertPrice:Q.alertprice,alertPriceChecked:Q.alertpricechecked,previousPrice:Q.qp_prevprice,previousProvider:Q.qp_prevprovider,previousCurrency:Q.qp_prevcurrency,encryptedTimestamp:A.encryptedTimestamp,priceSourceId:Q.pricesourceid||"",browserName:A.browserName,isLoggedIn:t.Api.user.isLoggedIn,SJLookUpResolver:function(){return t.FSS.SJAltSellLookUps||{}},partnerAttributes:function(){return t.FSS.PartnerAttributes||null},showNoResultsOptions:!w.isMultiDestination()&&"economy"===A.cabinclass,airportTransfers:M.enableAirportTransfers&&!w.isMultiDestination(),displayCityNames:!1,destinationCityName:A.destinationCityName,utid:_t,requestId:it,mixpanelId:(null!=(n=t.mixpanel)?n.getIdentity():void 0)||null,ssTrackId:(null!=(o=new t.Common.Cookie("sstrack"))?o[0]:void 0)||null,monthViewUrl:D(t.Api.componentContext()),helpUrl:c(pt.language||A.locale),passengerCountReset:A.passengerCountReset,legs:A.legs,distance:A.originDestinationDistance,cabinClass:A.cabinclass,urlPath:w.isMultiDestination()?ct.buildUrlPath({tripType:"multi-destination",legs:_.map(p.get("legs"),function(t){return{originId:t.origin,destinationId:t.destination,date:t.date}})}):""}),p.set("options",{include_unpriced_itineraries:!0,include_mixed_booking_options:a.isOn("combined_bp")}),e.setLocalisationApi(L),e.setOfflineHandler(),e.initialize(),F(e),R(e),e.channel("tracking-event").subscribe(function(e){return t.Common.observer.publish("tracking-event",e)}),e.channel("open-search-controls").subscribe(function(){return t.Common.observer.publish("open-search-controls")}),e.channel("close-search-controls").subscribe(function(){return t.Common.observer.publish("close-search-controls")}),t.Common.observer.subscribe("flights-search-controls-rendered",function(){return e.channel("search-controls-rendered").publish()}),e.channel("open-passenger-controls").subscribe(function(){return t.Common.observer.publish("flights-toggle-passenger-controls",{scrollToElement:!0})}),e.channel("hide-date-nudgers").subscribe(function(){return t.Common.observer.publish("hide-date-nudgers")}),e.channel("show-date-nudgers").subscribe(function(){return t.Common.observer.publish("show-date-nudgers")}),e.channel("flights-navigate").subscribe(function(e){return t.Common.observer.publish("flights-navigate",_.merge(A,e))}),e.channel("flights-navigate-with-options").subscribe(function(e){var n,i;return i=e.overrides,n=e.extraUrlParams,t.Common.observer.publish("flights-navigate-with-options",{context:_.merge(A,i),extraUrlParams:n||null})}),e.channel("log-error").subscribe(function(e){return t.Common.observer.publish("log-error",e)}),e.channel("best-prices").subscribe(function(t){var e;return null!=(e=SS.advertData)&&(e.prices=t),V.fire(t)}),at.channel("get-ad-best-prices").subscribe(function(t){return e.channel("get-best-item-for-agent").publish(t)}),e.channel("best-item-for-agent-ready").subscribe(function(t){return at.channel("get-ad-best-prices-data").publish(t)}),e.channel("itineraries-rendered").subscribe(function(){return t.Common.observer.publish("fss-results-post-render")}),e.channel("init-route-sponsors").subscribe(function(){return q()}),e.channel("newsletter-signup").subscribe(function(e){return t.Common.observer.publish("tron-newsletter-signup",e)}),a.isOff("prevent_auto_price_alerts")&&r.checkShow(_.pick(A,"browserName","browserVersion"),$(window).width(),e.getPendingRoute(),e.router,function(){return e.channel("auto-open-price-alert").publish()}),e.channel("xsell-store-flights-clickout").subscribe(function(t){return t.data.expiration=t.expiration,s.getLocalStorage("hotels_xsell").trySetValue("xfco",t.data)}),e.channel("uncheck-direct").subscribe(function(){var e,n;return null!=(e=t.Common.observer)&&e.publish("flights-searchcontrols-uncheck-direct"),null!=(n=t.Common.observer)?n.publish("flights-searchsummary-uncheck-direct"):void 0}),$(window).on("storage",_.partial(k,_.bind(e.channel,e),e.getApplicationId())),t.FSS.app=e},rt=function(t,e,n){return t&&h?h({place_id:e,locale:A.locale,radius:M.nearbyAltsRadiusInKm,exclude:n}):$.Deferred().resolve(null).promise()},st=function(t,e){return $.when(rt("true"===(Q.outboundaltsenabled||"").toLowerCase(),t,e),rt("true"===(Q.inboundaltsenabled||"").toLowerCase(),e,t)).then(function(t,e){return{origins:t,destinations:e}})},O=function(){var t;return w.isMultiDestination()?I():(t=p.get("legs"),st(t[0].origin,t[0].destination).then(function(e){var n,i;if((i=e.origins)&&(t[0].alternative_origins=i.split(",")),n=e.destinations)return t[0].alternative_destinations=n.split(",")}).always(function(){return p.set("legs",t),I()}))},t.documentReady.addHandler(function(){return O(),g()},t.documentReady.IMMEDIATE_EXECUTION)}(Skyscanner,jQuery)},function(t,e){"use strict";window.__hasProp__={}.hasOwnProperty,window.__slice__=[].slice,window.__indexOf__=[].indexOf||function(t){var e,n,i;for(e=n=0,i=this.length;0<=i?n<i:n>i;e=0<=i?++n:--n)if(e in this&&this[e]===t)return e;return-1},window.__imgErrReplace__=function(t){var e;return e=$(t),e.replaceWith(e.attr("alt"))},window.__logoReplace__=function(t){var e;return e=$(t),e.parent().replaceWith($('<span class="text">'+e.attr("alt")+"</span>"))},window.__imgErrRemove__=function(t){return $(t).remove()},window.__bind__=function(t,e){return function(){return t.apply(e,arguments)}},window.__extend__=function(t,e){var n,i;for(i in e)window.__hasProp__.call(e,i)&&(t[i]=e[i]);return n=function(){function e(){this.constructor=t}return e}(),n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t}},function(t,e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};/*! noUiSlider - 7.0.10 - 2014-12-27 14:50:46 */
!function(){function t(t){return t.split("").reverse().join("")}function e(t,e){return t.substring(0,e.length)===e}function i(t,e){return t.slice(-1*e.length)===e}function r(t,e,n){if((t[e]||t[n])&&t[e]===t[n])throw Error(e)}function s(t){return"number"==typeof t&&isFinite(t)}function o(t,e){var n=Math.pow(10,e);return(Math.round(t*n)/n).toFixed(e)}function a(e,n,i,r,a,l,u,c,_,p,d,h){var f,g,m,y=h,v="",b="";return l&&(h=l(h)),!!s(h)&&(e!==!1&&0===parseFloat(h.toFixed(e))&&(h=0),h<0&&(f=!0,h=Math.abs(h)),e!==!1&&(h=o(h,e)),h=""+h,h.indexOf(".")!==-1?(g=h.split("."),m=g[0],i&&(v=i+g[1])):m=h,n&&(m=t(m).match(/.{1,3}/g),m=t(m.join(t(n)))),f&&c&&(b+=c),r&&(b+=r),f&&_&&(b+=_),b+=m,b+=v,a&&(b+=a),p&&(b=p(b,y)),b)}function l(t,n,r,o,a,l,u,c,_,p,d,h){var f,g="";return d&&(h=d(h)),!(!h||"string"!=typeof h)&&(c&&e(h,c)&&(h=h.replace(c,""),f=!0),o&&e(h,o)&&(h=h.replace(o,"")),_&&e(h,_)&&(h=h.replace(_,""),f=!0),a&&i(h,a)&&(h=h.slice(0,-1*a.length)),n&&(h=h.split(n).join("")),r&&(h=h.replace(r,".")),f&&(g+="-"),g+=h,g=g.replace(/[^0-9\.\-.]/g,""),""!==g&&(g=+g,u&&(g=u(g)),!!s(g)&&g))}function u(t){var e,n,i,s={};for(e=0;e<p.length;e+=1)if(n=p[e],i=t[n],void 0===i)"negative"!==n||s.negativeBefore?"mark"===n&&"."!==s.thousand?s[n]=".":s[n]=!1:s[n]="-";else if("decimals"===n){if(!(i>=0&&i<8))throw Error(n);s[n]=i}else if("encoder"===n||"decoder"===n||"edit"===n||"undo"===n){if("function"!=typeof i)throw Error(n);s[n]=i}else{if("string"!=typeof i)throw Error(n);s[n]=i}return r(s,"mark","thousand"),r(s,"prefix","negative"),r(s,"prefix","negativeBefore"),s}function c(t,e,n){var i,r=[];for(i=0;i<p.length;i+=1)r.push(t[p[i]]);return r.push(n),e.apply("",r)}function _(t){return this instanceof _?void("object"===(void 0===t?"undefined":n(t))&&(t=u(t),this.to=function(e){return c(t,a,e)},this.from=function(e){return c(t,l,e)})):new _(t)}var p=["decimals","thousand","mark","prefix","postfix","encoder","decoder","negativeBefore","negative","edit","undo"];window.wNumb=_}(),function(t){function e(e){return e instanceof t||t.zepto&&t.zepto.isZ(e)}function n(e,n){if("string"==typeof e&&0===e.indexOf("-inline-"))return this.method=n||"html",this.target=this.el=t(e.replace("-inline-","")||"<div/>"),!0}function i(e){if("string"==typeof e&&0!==e.indexOf("-")){this.method="val";var n=document.createElement("input");return n.name=e,n.type="hidden",this.target=this.el=t(n),!0}}function r(t){if("function"==typeof t)return this.target=!1,this.method=t,!0}function s(t,n){if(e(t)&&!n)return t.is("input, select, textarea")?(this.method="val",this.target=t.on("change.liblink",this.changeHandler)):(this.target=t,this.method="html"),!0}function o(t,n){if(e(t)&&("function"==typeof n||"string"==typeof n&&t[n]))return this.method=n,this.target=t,!0}function a(e,n,i){var r=this,s=!1;if(this.changeHandler=function(e){var n=r.formatInstance.from(t(this).val());return n===!1||isNaN(n)?(t(this).val(r.lastSetValue),!1):void r.changeHandlerMethod.call("",e,n)},this.el=!1,this.formatInstance=i,t.each(c,function(t,i){return s=i.call(r,e,n),!s}),!s)throw new RangeError("(Link) Invalid Link.")}function l(t){this.items=[],this.elements=[],this.origin=t}function u(e,n,i,r){0===e&&(e=this.LinkDefaultFlag),this.linkAPI||(this.linkAPI={}),this.linkAPI[e]||(this.linkAPI[e]=new l(this));var s=new a(n,i,r||this.LinkDefaultFormatter);s.target||(s.target=t(this)),s.changeHandlerMethod=this.LinkConfirm(e,s.el),this.linkAPI[e].push(s,s.el),this.LinkUpdate(e)}var c=[n,i,r,s,o];a.prototype.set=function(t){var e=Array.prototype.slice.call(arguments),n=e.slice(1);this.lastSetValue=this.formatInstance.to(t),n.unshift(this.lastSetValue),("function"==typeof this.method?this.method:this.target[this.method]).apply(this.target,n)},l.prototype.push=function(t,e){this.items.push(t),e&&this.elements.push(e)},l.prototype.reconfirm=function(t){var e;for(e=0;e<this.elements.length;e+=1)this.origin.LinkConfirm(t,this.elements[e])},l.prototype.remove=function(t){var e;for(e=0;e<this.items.length;e+=1)this.items[e].target.off(".liblink");for(e=0;e<this.elements.length;e+=1)this.elements[e].remove()},l.prototype.change=function(t){if(this.origin.LinkIsEmitting)return!1;this.origin.LinkIsEmitting=!0;var e,n=Array.prototype.slice.call(arguments,1);for(n.unshift(t),e=0;e<this.items.length;e+=1)this.items[e].set.apply(this.items[e],n);this.origin.LinkIsEmitting=!1},t.fn.Link=function(e){var n=this;if(e===!1)return n.each(function(){if(this.linkAPI){t.map(this.linkAPI,function(t){t.remove()});try{delete this.linkAPI}catch(t){}}});if(void 0===e)e=0;else if("string"!=typeof e)throw Error("Flag must be string.");return{to:function(t,i,r){return n.each(function(){u.call(this,e,t,i,r)})}}}}(window.jQuery||window.Zepto),function(t){function e(e){return t.grep(e,function(n,i){return i===t.inArray(n,e)})}function i(t,e){return Math.round(t/e)*e}function r(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function s(t){var e=Math.pow(10,7);return+(Math.round(t*e)/e).toFixed(7)}function o(t,e,n){t.addClass(e),setTimeout(function(){t.removeClass(e)},n)}function a(t){return Math.max(Math.min(t,100),0)}function l(e){return t.isArray(e)?e:[e]}function u(t){var e=t.split(".");return e.length>1?e[1].length:0}function c(t,e){return 100/(e-t)}function _(t,e){return 100*e/(t[1]-t[0])}function p(t,e){return _(t,t[0]<0?e+Math.abs(t[0]):e-t[0])}function d(t,e){return e*(t[1]-t[0])/100+t[0]}function h(t,e){for(var n=1;t>=e[n];)n+=1;return n}function f(t,e,n){if(n>=t.slice(-1)[0])return 100;var i,r,s,o,a=h(n,t);return i=t[a-1],r=t[a],s=e[a-1],o=e[a],s+p([i,r],n)/c(s,o)}function g(t,e,n){if(n>=100)return t.slice(-1)[0];var i,r,s,o,a=h(n,e);return i=t[a-1],r=t[a],s=e[a-1],o=e[a],d([i,r],(n-s)*c(s,o))}function m(t,e,n,r){if(100===r)return r;var s,o,a=h(r,t);return n?(s=t[a-1],o=t[a],r-s>(o-s)/2?o:s):e[a-1]?t[a-1]+i(r-t[a-1],e[a-1]):r}function y(t,e,n){var i;if("number"==typeof e&&(e=[e]),"[object Array]"!==Object.prototype.toString.call(e))throw Error("noUiSlider: 'range' contains invalid value.");if(i="min"===t?0:"max"===t?100:parseFloat(t),!r(i)||!r(e[0]))throw Error("noUiSlider: 'range' value isn't numeric.");n.xPct.push(i),n.xVal.push(e[0]),i?n.xSteps.push(!isNaN(e[1])&&e[1]):isNaN(e[1])||(n.xSteps[0]=e[1])}function v(t,e,n){return!e||void(n.xSteps[t]=_([n.xVal[t],n.xVal[t+1]],e)/c(n.xPct[t],n.xPct[t+1]))}function b(t,e,n,i){this.xPct=[],this.xVal=[],this.xSteps=[i||!1],this.xNumSteps=[!1],this.snap=e,this.direction=n;var r,s=[];for(r in t)t.hasOwnProperty(r)&&s.push([t[r],r]);for(s.sort(function(t,e){return t[0]-e[0]}),r=0;r<s.length;r++)y(s[r][1],s[r][0],this);for(this.xNumSteps=this.xSteps.slice(0),r=0;r<this.xNumSteps.length;r++)v(r,this.xNumSteps[r],this)}function k(t,e){if(!r(e))throw Error("noUiSlider: 'step' is not numeric.");t.singleStep=e}function w(e,i){if("object"!==(void 0===i?"undefined":n(i))||t.isArray(i))throw Error("noUiSlider: 'range' is not an object.");if(void 0===i.min||void 0===i.max)throw Error("noUiSlider: Missing 'min' or 'max' in 'range'.");e.spectrum=new b(i,e.snap,e.dir,e.singleStep)}function x(e,n){if(n=l(n),!t.isArray(n)||!n.length||n.length>2)throw Error("noUiSlider: 'start' option is incorrect.");e.handles=n.length,e.start=n}function S(t,e){if(t.snap=e,"boolean"!=typeof e)throw Error("noUiSlider: 'snap' option must be a boolean.")}function P(t,e){if(t.animate=e,"boolean"!=typeof e)throw Error("noUiSlider: 'animate' option must be a boolean.")}function C(t,e){if("lower"===e&&1===t.handles)t.connect=1;else if("upper"===e&&1===t.handles)t.connect=2;else if(e===!0&&2===t.handles)t.connect=3;else{if(e!==!1)throw Error("noUiSlider: 'connect' option doesn't match handle count.");t.connect=0}}function A(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw Error("noUiSlider: 'orientation' option is invalid.")}}function D(t,e){if(!r(e))throw Error("noUiSlider: 'margin' option must be numeric.");if(t.margin=t.spectrum.getMargin(e),!t.margin)throw Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function T(t,e){if(!r(e))throw Error("noUiSlider: 'limit' option must be numeric.");if(t.limit=t.spectrum.getMargin(e),!t.limit)throw Error("noUiSlider: 'limit' option is only supported on linear sliders.")}function M(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1,t.connect=[0,2,1,3][t.connect];break;default:throw Error("noUiSlider: 'direction' option was not recognized.")}}function O(t,e){if("string"!=typeof e)throw Error("noUiSlider: 'behaviour' must be a string containing options.");var n=e.indexOf("tap")>=0,i=e.indexOf("drag")>=0,r=e.indexOf("fixed")>=0,s=e.indexOf("snap")>=0;t.events={tap:n||s,drag:i,fixed:r,snap:s}}function F(t,e){if(t.format=e,"function"==typeof e.to&&"function"==typeof e.from)return!0;throw Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function I(e){var n,i={margin:0,limit:0,animate:!0,format:K};return n={step:{r:!1,t:k},start:{r:!0,t:x},connect:{r:!0,t:C},direction:{r:!0,t:M},snap:{r:!1,t:S},animate:{r:!1,t:P},range:{r:!0,t:w},orientation:{r:!1,t:A},margin:{r:!1,t:D},limit:{r:!1,t:T},behaviour:{r:!0,t:O},format:{r:!1,t:F}},e=t.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},e),t.each(n,function(t,n){if(void 0===e[t]){if(n.r)throw Error("noUiSlider: '"+t+"' is required.");return!0}n.t(i,e[t])}),i.style=i.ort?"top":"left",i}function R(t,e,n){var i=t+e[0],r=t+e[1];return n?(i<0&&(r+=Math.abs(i)),r>100&&(i-=r-100),[a(i),a(r)]):[i,r]}function q(t){0!==t.type.indexOf("touchstart")&&t.preventDefault();var e,n,i=0===t.type.indexOf("touch"),r=0===t.type.indexOf("mouse"),s=0===t.type.indexOf("pointer"),o=t;return 0===t.type.indexOf("MSPointer")&&(s=!0),t.originalEvent&&(t=t.originalEvent),i&&(e=t.changedTouches[0].pageX,n=t.changedTouches[0].pageY),(r||s)&&(s||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),e=t.clientX+window.pageXOffset,n=t.clientY+window.pageYOffset),o.points=[e,n],o.cursor=r,o}function j(e,n){var i=t("<div><div/></div>").addClass(Y[2]),r=["-lower","-upper"];return e&&r.reverse(),i.children().addClass(Y[3]+" "+Y[3]+r[n]),i}function $(t,e,n){switch(t){case 1:e.addClass(Y[7]),n[0].addClass(Y[6]);break;case 3:n[1].addClass(Y[6]);case 2:n[0].addClass(Y[7]);case 0:e.addClass(Y[6])}}function B(t,e,n){var i,r=[];for(i=0;i<t;i+=1)r.push(j(e,i).appendTo(n));return r}function L(e,n,i){return i.addClass([Y[0],Y[8+e],Y[4+n]].join(" ")),t("<div/>").appendTo(i).addClass(Y[1])}function V(e,n,i){function r(){return D[["width","height"][n.ort]]()}function s(t){var e,n=[M.val()];for(e=0;e<t.length;e+=1)M.trigger(t[e],n)}function c(t){return 1===t.length?t[0]:n.dir?t.reverse():t}function _(t){return function(e,n){M.val([t?null:n,t?n:null],!0)}}function p(e){var n=t.inArray(e,j);M[0].linkAPI&&M[0].linkAPI[e]&&M[0].linkAPI[e].change(I[n],T[n].children(),M)}function d(e,i){var r=t.inArray(e,j);return i&&i.appendTo(T[r].children()),n.dir&&n.handles>1&&(r=1===r?0:1),_(r)}function h(){var t,e;for(t=0;t<j.length;t+=1)this.linkAPI&&this.linkAPI[e=j[t]]&&this.linkAPI[e].reconfirm(e)}function f(t,e,i,r){return t=t.replace(/\s/g,z+" ")+z,e.on(t,function(t){return!M.attr("disabled")&&(!M.hasClass(Y[14])&&(t=q(t),t.calcPoint=t.points[n.ort],void i(t,r)))})}function g(t,e){var n,i=e.handles||T,o=!1,a=100*(t.calcPoint-e.start)/r(),l=i[0][0]!==T[0][0]?1:0;n=R(a,e.positions,i.length>1),o=k(i[0],n[l],1===i.length),i.length>1&&(o=k(i[1],n[l?0:1],!1)||o),o&&s(["slide"])}function m(e){t("."+Y[15]).removeClass(Y[15]),e.cursor&&t("body").css("cursor","").off(z),H.off(z),M.removeClass(Y[12]),s(["set","change"])}function y(e,n){1===n.handles.length&&n.handles[0].children().addClass(Y[15]),e.stopPropagation(),f(J.move,H,g,{start:e.calcPoint,handles:n.handles,positions:[O[0],O[T.length-1]]}),f(J.end,H,m,null),e.cursor&&(t("body").css("cursor",t(e.target).css("cursor")),T.length>1&&M.addClass(Y[12]),t("body").on("selectstart"+z,!1))}function v(e){var i,a=e.calcPoint,l=0;e.stopPropagation(),t.each(T,function(){l+=this.offset()[n.style]}),l=a<l/2||1===T.length?0:1,a-=D.offset()[n.style],i=100*a/r(),n.events.snap||o(M,Y[14],300);var u=function(t){return t.replace(/\s/g,".allowScroll ")+".allowScroll"},c=u(J.move),_=u(J.end);D.on(c,function(t){t.preventDefault(),D.off(_).off(c)}).on(_,function(t){t.preventDefault(),k(T[l],i),s(["slide","set","change"]),D.off(_).off(c)}),n.events.snap&&y(e,{handles:[T[l]]})}function b(t){var e,n;if(!t.fixed)for(e=0;e<T.length;e+=1)f(J.start,T[e].children(),y,{handles:[T[e]]});t.tap&&f(J.start,D,v,{handles:T}),t.drag&&(n=D.find("."+Y[7]).addClass(Y[10]),t.fixed&&(n=n.add(D.children().not(n).children())),f(J.start,n,y,{handles:T}))}function k(t,e,i){var r=t[0]!==T[0][0]?1:0,s=O[0]+n.margin,o=O[1]-n.margin,l=O[0]+n.limit,u=O[1]-n.limit;return T.length>1&&(e=r?Math.max(e,s):Math.min(e,o)),i!==!1&&n.limit&&T.length>1&&(e=r?Math.min(e,l):Math.max(e,u)),e=F.getStep(e),e=a(parseFloat(e.toFixed(7))),e!==O[r]&&(t.css(n.style,e+"%"),t.is(":first-child")&&t.toggleClass(Y[17],e>50),O[r]=e,I[r]=F.fromStepping(e),p(j[r]),!0)}function w(t,e){var i,r,s;for(n.limit&&(t+=1),i=0;i<t;i+=1)r=i%2,s=e[r],null!==s&&s!==!1&&("number"==typeof s&&(s+=""),s=n.format.from(s),(s===!1||isNaN(s)||k(T[r],F.toStepping(s),i===3-n.dir)===!1)&&p(j[r]))}function x(t){if(M[0].LinkIsEmitting)return this;var e,i=l(t);return n.dir&&n.handles>1&&i.reverse(),n.animate&&O[0]!==-1&&o(M,Y[14],300),e=T.length>1?3:1,1===i.length&&(e=1),w(e,i),s(["set"]),this}function S(){var t,e=[];for(t=0;t<n.handles;t+=1)e[t]=n.format.to(I[t]);return c(e)}function P(){t(this).off(z).removeClass(Y.join(" ")).empty();try{delete this.LinkUpdate,delete this.LinkConfirm,delete this.LinkDefaultFormatter,delete this.LinkDefaultFlag,delete this.reappend,delete this.vGet,delete this.vSet,delete this.getCurrentStep,delete this.getInfo,delete this.destroy}catch(t){}return i}function C(){var e=t.map(O,function(t,e){var n=F.getApplicableStep(t),i=u(n[2]+""),r=I[e],s=100===t?null:n[2],o=+(r-n[2]).toFixed(i),a=0===t?null:o>=n[1]?n[2]:n[0]||!1;return[[a,s]]});return c(e)}function A(){return i}var D,T,M=t(e),O=[-1,-1],F=n.spectrum,I=[],j=["lower","upper"].slice(0,n.handles);if(n.dir&&j.reverse(),e.LinkUpdate=p,e.LinkConfirm=d,e.LinkDefaultFormatter=n.format,e.LinkDefaultFlag="lower",e.reappend=h,M.hasClass(Y[0]))throw Error("Slider was already initialized.");D=L(n.dir,n.ort,M),T=B(n.handles,n.dir,D),$(n.connect,M,T),b(n.events),e.vSet=x,e.vGet=S,e.destroy=P,e.getCurrentStep=C,e.getOriginalOptions=A,e.getInfo=function(){return[F,n.style,n.ort]},M.val(n.start)}function E(t){var e=I(t,this);return this.each(function(){V(this,e,t)})}function N(e){return this.each(function(){if(!this.destroy)return void t(this).noUiSlider(e);var n=t(this).val(),i=this.destroy(),r=t.extend({},i,e);t(this).noUiSlider(r),this.reappend(),i.start===r.start&&t(this).val(n)})}function U(){return this[0][arguments.length?"vSet":"vGet"].apply(this[0],arguments)}function Q(e,n,i,r){if("range"===n||"steps"===n)return e.xVal;if("count"===n){var s,o=100/(i-1),a=0;for(i=[];(s=a++*o)<=100;)i.push(s);n="positions"}return"positions"===n?t.map(i,function(t){return e.fromStepping(r?e.getStep(t):t)}):"values"===n?r?t.map(i,function(t){return e.fromStepping(e.getStep(e.toStepping(t)))}):i:void 0}function G(n,i,r,s){var o=n.direction,a={},l=n.xVal[0],u=n.xVal[n.xVal.length-1],c=!1,_=!1,p=0;return n.direction=0,s=e(s.slice().sort(function(t,e){return t-e})),s[0]!==l&&(s.unshift(l),c=!0),s[s.length-1]!==u&&(s.push(u),_=!0),t.each(s,function(e){var o,l,u,d,h,f,g,m,y,v,b=s[e],k=s[e+1];if("steps"===r&&(o=n.xNumSteps[e]),o||(o=k-b),b!==!1&&void 0!==k)for(l=b;l<=k;l+=o){for(d=n.toStepping(l),h=d-p,m=h/i,y=Math.round(m),v=h/y,u=1;u<=y;u+=1)f=p+u*v,a[f.toFixed(5)]=["x",0];g=t.inArray(l,s)>-1?1:"steps"===r?2:0,!e&&c&&(g=0),l===k&&_||(a[d.toFixed(5)]=[l,g]),p=d}}),n.direction=o,a}function X(e,n,i,r,s,o){function a(t,e){return["-normal","-large","-sub"][t]}function l(t,n,i){return'class="'+n+" "+n+"-"+c+" "+n+a(i[1],i[0])+'" style="'+e+": "+t+'%"'}function u(t,e){i&&(t=100-t),e[1]=e[1]&&s?s(e[0],e[1]):e[1],_.append("<div "+l(t,"noUi-marker",e)+"></div>"),e[1]&&_.append("<div "+l(t,"noUi-value",e)+">"+o.to(e[0])+"</div>")}var c=["horizontal","vertical"][n],_=t("<div/>");return _.addClass("noUi-pips noUi-pips-"+c),t.each(r,u),_}var H=t(document),W=t.fn.val,z=".nui",J=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},Y=["noUi-target","noUi-base","noUi-origin","noUi-handle","noUi-horizontal","noUi-vertical","noUi-background","noUi-connect","noUi-ltr","noUi-rtl","noUi-dragable","","noUi-state-drag","","noUi-state-tap","noUi-active","","noUi-stacking"];b.prototype.getMargin=function(t){return 2===this.xPct.length&&_(this.xVal,t)},b.prototype.toStepping=function(t){return t=f(this.xVal,this.xPct,t),this.direction&&(t=100-t),t},b.prototype.fromStepping=function(t){return this.direction&&(t=100-t),s(g(this.xVal,this.xPct,t))},b.prototype.getStep=function(t){return this.direction&&(t=100-t),t=m(this.xPct,this.xSteps,this.snap,t),this.direction&&(t=100-t),t},b.prototype.getApplicableStep=function(t){var e=h(t,this.xPct),n=100===t?2:1;return[this.xNumSteps[e-2],this.xVal[e-n],this.xNumSteps[e-n]]},b.prototype.convert=function(t){return this.getStep(this.toStepping(t))};var K={to:function(t){return t.toFixed(2)},from:Number};t.fn.val=function(e){function n(t){return t.hasClass(Y[0])?U:W}if(!arguments.length){var i=t(this[0]);return n(i).call(i)}var r=t.isFunction(e);return this.each(function(i){var s=e,o=t(this);r&&(s=e.call(this,i,o.val())),n(o).call(o,s)})},t.fn.noUiSlider=function(t,e){switch(t){case"step":return this[0].getCurrentStep();case"options":return this[0].getOriginalOptions()}return(e?N:E).call(this,t)},t.fn.noUiSlider_pips=function(e){var n=e.mode,i=e.density||1,r=e.filter||!1,s=e.values||!1,o=e.format||{to:Math.round},a=e.stepped||!1;return this.each(function(){var e=this.getInfo(),l=Q(e[0],n,s,a),u=G(e[0],i,n,l);return t(this).append(X(e[1],e[2],e[0].direction,u,r,o))})}}(window.jQuery||window.Zepto)},function(t,e){"use strict";(function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}};null==window.Skyscanner&&(window.Skyscanner={}),null==(e=window.Skyscanner).Components&&(e.Components={}),window.Skyscanner.Components.Tooltip=t=function(){function t(t,e){this.toggle=n(this.toggle,this),this.type=this.options=this.$element=null,this.init("tooltip",t,e)}return t.VERSION="1.0.0",t.CLASS_PREFIX="wc-tooltip",t.CLASS_ICON="wc-icon-info",t.DEFAULTS={placement:"top",trigger:"hover focus",title:"",message:"",html:!1,container:!1,icon:!1,animations:!0,viewport:{selector:"body",padding:0}},t.prototype.init=function(t,e,n){var i,r,s,o,a,l,u;for(this.type=t,this.uid=this.getUID(t),this.$element=$(e),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&$(this.options.viewport.selector||this.options.viewport),l=this.options.trigger.split(" "),u=[],o=0,a=l.length;o<a;o++)s=l[o],"click"===s?u.push(this.$element.on("click."+this.type,$.proxy(this.toggle,this))):"manual"!==s?(i="hover"===s?"mouseenter":"focusin",r="hover"===s?"mouseleave":"focusout",this.$element.on(""+i+"."+t,$.proxy(this.show,this)),u.push(this.$element.on(""+r+"."+t,$.proxy(this.hide,this)))):u.push(void 0);return u},t.prototype.getUID=function(t){return""+t+"_"+~~(1e6*Math.random())},t.prototype.show=function(){var t,e,n,i,r,s,o,a,l,u;if($.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]))return this.setContent(),a=this.options.placement,u=this.getClassPrefix(),e=this.tip().detach().css({top:0,eft:0,display:"block"}).addClass(""+u+"-"+a).attr("id",this.uid),this.$element.attr("aria-describedby",this.uid),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element),l=this.getPosition(),i=e[0].offsetWidth,n=e[0].offsetHeight,o=a,t=this.options.container?$(this.options.container):this.$element.parent(),s=this.getPosition(t),a="bottom"===a&&l.bottom+n>s.bottom?"top":"top"===a&&l.top-n<s.top?"bottom":"right"===a&&l.right+i>s.width?"left":"left"===a&&l.left-i<s.left?"right":a,e.removeClass(""+u+"-"+o).addClass(""+u+"-"+a),r=this.getCalculatedOffset(a,l,i,n),this.applyPlacement(r,a),this.getWindow().on("resize."+this.uid,$.proxy(this.hide,this))},t.prototype.applyPlacement=function(t,e){var n,i,r,s,o,a,l,u,c;return n=this.tip(),c=n[0].offsetWidth,l=n[0].offsetHeight,$.offset.setOffset(n[0],$.extend({using:function(t){return n.css({top:Math.round(t.top),left:Math.round(t.left)})}},t),0),r=n[0].offsetWidth,i=n[0].offsetHeight,"top"===e&&i!==l&&(t.top=t.top+l-i),a=this.getViewportAdjustedDelta(e,t,r,i),a.left?t.left+=a.left:t.top+=a.top,u=/top|bottom/.test(e),s=u?2*a.left-c+r:2*a.top-l+i,o=u?"offsetWidth":"offsetHeight","top"===e&&(t.top-=10),"bottom"===e&&(t.top+=10),"left"===e&&(t.left-=10),"right"===e&&(t.left+=10),n.offset(t),this.replaceArrow(s,n[0][o],u),n.addClass("in")},t.prototype.replaceArrow=function(t,e,n){return this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},t.prototype.setContent=function(){var t,e,n,i;return t=function(t,e){return t?e?"html":"text":"remove"},n=this.getClassPrefix(),i=this.getTitle(),e=this.getMessage(),this.tip().find("h3")[t(i,this.options.html)](i||null).end().find("p")[t(e,this.options.html)](e||null).end().removeClass(""+n+"-top "+n+"-bottom "+n+"-left "+n+"-right")},t.prototype.hide=function(){return this.getWindow().off("resize."+this.uid),this.$element.removeAttr("aria-describedby"),this.tip().removeClass("in").detach()},t.prototype.getPosition=function(t){var e,n,i,r,s,o;return t=t||this.$element,e=t[0],r="BODY"===e.tagName,i=e.getBoundingClientRect(),null==i.width&&(i=$.extend({},i,{width:i.right-i.left,height:i.bottom-i.top})),n=r?{top:0,left:0}:t.offset(),o={scroll:r?document.documentElement.scrollTop||document.body.scrollTop||t.scrollTop():void 0},s=r?{width:$(window).width(),height:$(window).height()}:null,$.extend({},i,o,s,n)},t.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"===t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"===t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"===t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},t.prototype.getViewportAdjustedDelta=function(t,e,n,i){var r,s,o,a,l,u,c;return s={top:0,left:0},this.$viewport?(c=this.options.viewport&&this.options.viewport.padding||0,u=this.getPosition(this.$viewport),/right|left/.test(t)?(l=e.top-c-u.scroll,r=e.top+c-u.scroll+i,l<u.top?s.top=u.top-l:r>u.top+u.height&&(s.top=u.top+u.height-r)):(o=e.left-c,a=e.left+c+n,o<u.left?s.left=u.left-o:a>u.width&&(s.left=u.left+u.width-a)),s):s},t.prototype.getTitle=function(){return this.options.title},t.prototype.getMessage=function(){return this.options.message},t.prototype.getClassPrefix=function(){return t.CLASS_PREFIX},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return $.extend({},this.getDefaults(),t)},t.prototype.tip=function(){var e,n;return n=t.CLASS_PREFIX,e=[""+n],this.options.icon&&e.push(""+n+"-with-icon"),this.options.animations||e.push(""+n+"-no-animations"),this.$tip||(this.$tip=$("<div class='"+e.join(" ")+"' role=tooltip> "+(this.options.icon?"<span aria-hidden='true' class='"+n+"-info "+t.CLASS_ICON+"' />":"")+" <h3 /><p /> <span aria-hidden='true' class="+n+"-arrow1 /> <span aria-hidden='true' class="+n+"-arrow2 /> </div>"))},t.prototype.getWindow=function(){return this.$window||(this.$window=$(window))},t.prototype.arrow=function(){var t;return t=this.getClassPrefix(),this.$arrow=this.$arrow||this.tip().find("."+t+"-arrow1,."+t+"-arrow2")},t.prototype.toggle=function(){return this.tip().hasClass("in")?this.hide():this.show()},t.prototype.destroy=function(){return this.hide(),this.$element.off("."+this.type)},t}()}).call(void 0)},function(t,e,n){var i,r,s,o,a,l,u,c,p,d,h,f,g,m,y,v,b;r=n(5),h=n(6),l=n(7),c=n(8),d=n(9),u=n(10),y=n(11),s=n(13),a=n(224),i=n(159),m=n(19)("options"),p=n(19)("initial_query"),o=n(225),b=n(46),v=n(44),g=n(226),f=n(227),t.exports=function(){function t(t){v.setApplicationId(""+_.random(0,1e10)),v.setIsMobile(_.contains(["mobile","tablet"],t.deviceType)),m.setStorage(t),l.setCannedDataConfig({dayview_canned_data:u.getVariant("dayview_canned_data"),dayview_canned_data_delay:u.getVariant("dayview_canned_data_delay"),booking_canned_data:u.getVariant("booking_canned_data"),booking_canned_data_delay:u.getVariant("booking_canned_data_delay")}),l.setHeaders({"X-Skyscanner-MixPanelId":t.mixpanelId,"X-Skyscanner-TrackId":t.ssTrackId,"X-Skyscanner-DeviceDetection-IsMobile":"mobile"===t.deviceType,"X-Skyscanner-DeviceDetection-IsTablet":"tablet"===t.deviceType,"X-Skyscanner-ViewId":t.requestId,"X-Skyscanner-Traveller-Context":t.utid}),l.addResponseInclude("pqs"),u.isOn("flexible_days")&&l.addResponseInclude("_flights_availability"),this.bus=new r,b.setChannel(_.bind(this.channel,this)),b.setCommonPropertiesFn(f.getAll)}return t.prototype.getControllerOptions=function(){return this.ctor_options||(this.ctor_options={$body:$("body"),$window:$(window)})},t.prototype.channel=function(){return this.bus.channel.apply(this.bus,_.toArray(arguments))},t.prototype.setOption=function(t,e){return m.set(t,e),this},t.prototype.setLocalisationApi=function(t){return h.setLocalisationApi(t),this},t.prototype.getSandbox=function(){return this.sandbox||(this.sandbox={bus:this.bus,router:this.router,carhire:new i("carhire"),hotels:new i("hotels")})},t.prototype.getApplicationId=function(){return v.getApplicationId()},t.prototype.getPendingRoute=function(){return v.getPendingRoute()},t.prototype.initialize=function(){return y.init(),this.controller=new s(this,this.getControllerOptions()),this.router=new a(this.controller),this.controller.setSandbox(this.getSandbox()),this.getResults(),this.startNavigation(),new o,this},t.prototype.getAdsContract=function(){return this.controller.getAdsContract()},t.prototype.getResults=function(){return _.filter(p.getStorage().legs,function(t){return c.isDateInThePast(t.date)}).length?this.controller.showErrorPage("dates_in_the_past"):this.controller.getResults(),this},t.prototype.startNavigation=function(){return Backbone.history.start({pushState:!1}),this.router.isOnPriceAlert()||this.router.navigate("results",{trigger:!1,replace:!0}),this},t.prototype.setOfflineHandler=function(){return g.initialize(),this},t.prototype.restart=function(t){return this.controller.restart(t),this},t.prototype.refresh=function(t){return this.controller.refresh(_.assign({create_new_session:!1},t)),this},t.prototype.shutdown=function(){return this.controller.shutdown(),this},t}()},function(t,e){t.exports=function(){function t(){}return t.prototype.channel=function(t){var e,n;return this.channels||(this.channels={}),n=t&&this.channels[t],n||(e=jQuery.Callbacks(),n={publish:e.fire,subscribe:e.add,unsubscribe:e.remove},t&&(this.channels[t]=n)),n},t}()},function(t,e){var n,i,r,s,o,a,l,u,c;u={},c=function(t){return u=t},n=function(t){return u.formatCurrency(t)},i=function(t){return u.formatCurrencyFull(t)},r=function(t,e){return null==t&&(t=""),null==e&&(e="d"),u.formatDate(t,e)},o=function(t,e){return u.formatTime(t,e)},s=function(t,e){return u.formatDateTime(t,e)},a=function(t){var e;return e=u.monthNames("abbreviated"),e[t]||""},l=function(){return u.formatTime(new Date(2016,0,0,23)).indexOf("23")!==-1},t.exports={setLocalisationApi:c,formatCurrency:n,formatCurrencyFull:i,formatDate:r,formatTime:o,formatDateTime:s,getMonthNameAbbr:a,is24HourFormat:l}},function(t,e,n){var i,r,s,o,a,l,u,c,p,d,h,f,g,m,y,v,b,k,w,x;s={},f={"X-Skyscanner-ChannelId":"website","X-Distil-Ajax":"azezcavtdrrxfqrtbw"},v={geo_schema:"skyscanner",carrier_schema:"skyscanner",response_include:["query","deeplink","segment","stats","fqs"]},i="/dataservices/flights/pricing/v3.0/search/",r=function(t){return v.response_include.push(t)},w=function(t){return f=_.extend({},f,t)},k=function(t){return s=t},x=function(t,e){return v[t]=e},h=function(){return"?"+$.param(_.transform(v,function(t,e,n){return"response_include"===n&&(e=e.join(";")),t[n]=e}))},c=function(t){try{return JSON.parse(t).message}catch(t){return null}},l=function(t,e){var n;return n=e.getResponseHeader("X-Skyscanner-ETag"),n&&(t.etag=n),t},p=function(t){var e;return e=_.assign({},f),t&&(e["X-Skyscanner-If-None-Match"]=t),e},b=function(t,e,n,i){var r,s;return null==n&&(n=null),null==i&&(i=null),r=$.Deferred(),s=_.uniqueId("ajx_"),window[s]=$.ajax({type:t,url:e,data:n,headers:p(i),dataType:"JSON",cache:!1,contentType:"application/json; charset=utf-8"}).always(function(t,e,n){var i,o,a,l;i=window[s].state(),a="resolved"===i?[n,t]:[t,n],o=a[0],l=a[1];try{delete window[s]}catch(t){window[s]=void 0}return r.resolve(o,l)}),r.promise()},y=function(t,e){var n;return n=$.Deferred(),b("POST",t,e).done(function(t,e){var i,r,s;switch(r=t.status,s=t.statusText,i=t.responseText,r){case 200:return n.resolve({data:l(e,t),status:r,responseText:i});default:return n.reject({status:r,statusText:s,message:c(t.responseText),fullMessage:t.responseText})}}),n.promise()},o=function(t,e){var n;return n=$.Deferred(),b("GET",t,null,e).done(function(t,e){var i,r,s;switch(r=t.status,s=t.statusText,i=t.responseText,r){case 200:return n.resolve({data:l(e,t),status:r,responseText:i});case 304:return n.resolve({status:r});default:return n.reject({status:r,statusText:s,message:c(t.responseText),fullMessage:t.responseText})}}),n.promise()},a=function(t){return"/canned_data/"+t+"/"+s[t+"_canned_data"]+"?delay="+(s[t+"_canned_data_delay"]||0)},d=function(t){var e;return e=s.dayview_canned_data?a("dayview"):""+i+h(),y(e,t)},m=function(t,e){var n;return n=s.dayview_canned_data?a("dayview"):""+i+t+h(),o(n,e)},u=function(t,e){var n;return n=s.booking_canned_data?a("booking"):""+i+t+"/booking"+h(),y(n,e)},g=function(t,e,n){var r;return r=s.booking_canned_data?a("booking"):""+i+t+"/booking/"+e+h(),o(r,n)},t.exports={setHeaders:w,setCannedDataConfig:k,setQueryStringParam:x,addResponseInclude:r,getResults:d,pollForResults:m,getDetails:u,pollForDetails:g}},function(t,e){var n,i,r,s,o,a,l,u,c,_,p,d,h,f,g,m,y,v,b,k,w;m=6e4,b=0,y=function(){return new Date},d=function(){return Math.floor(b)},v=function(t){var e,n,i;return n=t.split("T"),e=(n[0]||"").split("-"),i=(n[1]||"").split(":"),new Date(~~e[0],~~e[1]-1,~~e[2],~~i[0],~~i[1],~~i[2],~~i[3])},a=function(t,e){return t&&e?e-t:null},l=function(t,e){return Math.floor((e-t)/1e3)},h=function(t){var e,n;return e=Math.floor(t/60),n=t-60*e,v("2000-01-01T"+("0"+e).slice(-2)+":"+("0"+n).slice(-2)+":00")},f=function(t){return v("2000-01-01T"+t.split("T")[1])},s=function(t){var e,n,i;return e=y(),i=t.getTime(),n=60*t.getTimezoneOffset()*1e3,e.setTime(i-n),e},o=function(t,e){var n,i;return t&&e?(n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=new Date(e.getFullYear(),e.getMonth(),e.getDate()),Math.floor((i-n)/864e5)):null},w=function(t,e){return Math.floor(o(t,e)/7)},r=function(t,e){var n;return n=new Date(t),n.setDate(n.getDate()+e),n},c=function(t,e){var n;return(n=o(t,e))?""+(n>0?"+":"")+n:null},u=function(t,e){var n,i,r;return r=t.getFullYear(),i=("0"+(t.getMonth()+1)).slice(-2),n=("0"+t.getDate()).slice(-2),"yyyy-mm"===e?r+"-"+i:r+"-"+i+"-"+n},g=function(t){var e,n;return n=v(u(y())),e=v(t),e<n},_=function(t){return{0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat"}[t.getDay()]},p=function(t){return{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}[t.getMonth()+1]},k=function(t){return Date.prototype.toISOString?t.toISOString():t.getUTCFullYear()+"-"+this._pad(t.getUTCMonth()+1)+"-"+this._pad(t.getUTCDate())+"T"+this._pad(t.getUTCHours())+":"+this._pad(t.getUTCMinutes())+":"+this._pad(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z";
},n=function(t){return t<10?"0"+t:t},i=function(t){return b+=t/m,setTimeout(i,t,t)},i(m/2),t.exports={now:y,diffInSeconds:l,diffInMilliseconds:a,parseDateTime:v,formatDate:u,getSliderDateTime:h,getSliderDateTimeFromStr:f,getDateOffsetStr:c,convertLocalTime:s,daysBetweenDates:o,weeksBetweenDates:w,addDays:r,isDateInThePast:g,getDayOfWeek:_,getMonthName:p,toISOString:k,getSessionTime:d}},function(t,e){t.exports=function(t){return/.+001$/.test(t||"")}},function(t,e){var n,i,r,s,o,a,l;i={},o=function(t){return"on"===(i[t]||{}).status},s=function(t){return"off"===(i[t]||{}).status},l=function(t,e){return i[t]={status:"on",variant:e},this},a=function(t){return i[t]={status:"off",variant:null},this},r=function(t){return(i[t]||{}).variant},n=function(t){var e,n;for(e in t)n=t[e],"on"===n?l(e):a(e);return this},t.exports={isOn:o,isOff:s,switchOn:l,switchOff:a,getVariant:r,applyConfig:n}},function(t,e,n){var i,r,s,o,a,l,u,c,p,d;p=n(12),u=[],i=null,r=1e3,o={is_dismissible:!0},d=function(){var t,e,n;return i.removeAttr("style"),e=0===u.length?["addClass",r]:["removeClass",100*u.length+r],t=e[0],n=e[1],i[t]("hide").css("zIndex",n)},l=function(t,e,n){var i,r,s;for(null==e&&(e=!1),r=t.dismiss_all,s=t.dismiss_callback,s&&e&&s(n);u.length&&r;)"function"==typeof(i=u.pop()).dismiss_callback&&i.dismiss_callback(n);return d()},a=function(t){return p.setTimeout(function(){var e;if(0!==u.length)return e=u.pop(),e.is_dismissible===!0?l(e,!0,t):void 0},10)},c=function(){return u=[],null!=i?i:i=$('<div id="fss-overlay">').addClass("lightbox darkbg hide").css("zIndex",r).on("click.overlay",a).appendTo("body")},s=function(t){if(t&&t.overlay_id)return t=_.extend({},o,t),{show:function(){return u.push(t),$("[data-overlay='"+t.overlay_id+"']").css("zIndex",parseInt(i.css("zIndex"),10)+150),d()},hide:function(t){var e;if(e=_.remove(u,function(e){return e.overlay_id===t}),e.length)return l(e[0])}}},t.exports={init:c,create:s}},function(t,e){t.exports={setTimeout:function(t,e){return window.setTimeout(t,e)},setInterval:function(t,e){return window.setInterval(t,e)},clearTimeout:function(t){return window.clearTimeout(t)},clearInterval:function(t){return window.clearInterval(t)}}},function(t,e,n){var i,r,s,o,a,l,u,c,p,d,h,f,g,m,y,v,b,k,w,x,S,P,C,A,D,T,M,O,F,I,R,q,j,B,L,V,E,N,U=function(t,e){return function(){return t.apply(e,arguments)}},Q=function(t,e){function n(){this.constructor=t}for(var i in e)G.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},G={}.hasOwnProperty;o=n(14),M=n(16),V=n(26),g=n(27),x=n(8),f=n(28),A=n(21),N=n(23),D=n(30),l=n(31),d=n(66),r=n(169),b=n(200),c=n(201),u=n(202),a=n(206),k=n(52),O=n(41),q=n(50),R=n(44),C=n(19)("options"),S=n(19)("initial_query"),L=n(47),j=n(12),B=n(46),P=n(6),v=n(10),w=n(25),s=n(220),y=n(133),T=n(173),h=n(221),m=n(198)("results"),I=n(40),F=n(167),E=n(98),i=n(222).AdsContract,p=n(223).Recommendations,t.exports=function(t){function e(t,n){var i;this.app=t,this.onFatalError=U(this.onFatalError,this),e.__super__.constructor.apply(this,arguments),this.retry=1,this.renderMainView(),this.filtersController=new l(n),this.resultsController=new d(n),this.bookingController=new r(n),this.itineraries=new u,this.filters=new a,i=_.debounce(_.bind(this.onResize,this),400),this.cachedWindowWidth=n.$window.width(),n.$window.on("resize.dayview",i),n.$window.on("orientationchange.dayview",i),g.allowMouseEvents(".day-content, .fss-mobile-panel, .fss-popup-container, .price-alerts-popup")}return Q(e,t),e.prototype.setSandbox=function(t){return e.__super__.setSandbox.apply(this,arguments),this.filtersController.setSandbox(this.getSandbox(t)).initialize(),this.resultsController.setSandbox(this.getSandbox(t)).initialize(),this.bookingController.setSandbox(this.getSandbox(t)).initialize(),this.initialize(),this},e.prototype.getSandbox=function(t){return this.sandbox||(this.sandbox=_.assign({},t,{itineraries:this.itineraries,filters:this.filters}))},e.prototype.initialize=function(){var t;if(j.setTimeout(function(){return B.trackMixpanel("Flight Day View Loaded",{"From SEO Airline Page":F.isFromSEOAirlinePage()})},0),t=M.getBus(),t.channel("data").subscribe(_.bind(this.onResultsData,this)),t.channel("fatal-error").subscribe(_.bind(this.onFatalError,this)),t.channel("session-created").subscribe(_.bind(this.onSessionCreated,this)),this.bus.channel("re-render").subscribe(_.bind(this.render,this)),this.bus.channel("re-apply-data").subscribe(_.bind(this.onReApplyData,this)),this.bus.channel("restart-app").subscribe(_.bind(this.restart,this)),this.bus.channel("refresh-app").subscribe(_.bind(this.refresh,this)),this.bus.channel("get-best-item-for-agent").subscribe(_.bind(this.getBestItemForAgent,this)),this.bus.channel("show-pqs").subscribe(function(t){return function(e,n,i){var r;return null==i&&(i="results"),r=t.router.isOnDetails()&&"details"===i,t.bus.channel("show-pqs-on-"+(r?"details":"results")).publish(e,n)}}(this)),this.bus.channel("search-controls-rendered").subscribe(function(){return R.setSearchControlsRendered(!0)}),this.bus.channel("redirect-started-timestamp").subscribe(function(t){return g.getSessionStorage().trySetValue("redirect_started_timestamp",t)}),T.init($("#content")),this.adsContract=new i(this.bus),v.isOn("alternative_destinations")&&(this.bus.channel("get-recommendations").subscribe(function(t){return function(e){return R.setRecommendations(e),t.bus.channel("re-render").publish({filters:!1,results:!0,trigger:"recommendations"})}}(this)),(new p).setBus(this.bus).loadRecommendations()),v.isOn("airline_travel_alert"))return E.setup(v.getVariant("airline_travel_alert"))},e.prototype.getAdsContract=function(){return this.adsContract},e.prototype.render=function(t){var e,n,i,r;v.isOn("performance_stats")&&D.eventStart("fss.render"),v.isOn("fqs_ui")&&this.enableFqs(),r=this.sortable(t.trigger)?this.itineraries.getSortedItineraries():this.itineraries.get("itineraries").models,i=this.filters.getItineraries(r),n=this.itineraries.getPaginatedItineraries(i),e={complete:this.isLoadingComplete(),total:this.itineraries.get("itineraries").length,qualified:i,itineraries:n,trigger:t.trigger},n.length&&!R.getFirstVisibleItinerary()&&R.setFirstVisibleItinerary(n[0]),t.filters&&this.filtersController.render(e),t.results&&this.resultsController.render(e),v.isOn("performance_stats")&&D.eventEnd("fss.render")},e.prototype.renderMainView=function(){return this.mainView=new c({controller:this,el:$("#content-main"),template:b}).render({is_adult_passenger_search:A.isAdultOnlySearch(),show_month_view:!N.isMultiDestination()&&"economy"===S.get("cabin_class"),trip_type:N.getType(),is_multidestination:N.isMultiDestination(),is_fqs_tab_sorting:v.isOn("fqs_ui"),avg_price_help_link:C.get("helpUrl")("avg_price")})},e.prototype.onReApplyData=function(){var t;if(t=R.getLastPricingServiceData())return this.onResultsData(t)},e.prototype.onResultsData=function(t){var e,n,i,r;if(r=t.response,e=t.complete,i=t.request_number,this.retry=1,r.query&&(r.query.cabin_class=y.normalize(r.query.cabin_class)),k.setStorage(r.context||{}),O.setStorage(r.query||{}),q.setStorage(r.stats||{}),R.setPollingRequestNumber(i),R.setResults((null!=(n=r.itineraries)?n.length:void 0)||0),R.setLastPricingServiceData({response:t.response,complete:t.complete,request_number:1}),w.set("loading_complete",e),m(_.assign(_.pick(r,"agents","carriers","legs","places","segments"),{alliances:h})),this.itineraries.build(r,this.adsContract&&this.adsContract.getReducer()),r.stats&&this.filters.build({stats:r.stats,alliances:h}),this.renderResultsData(r,i),this.setItineraryPosition(),this.adjustRoute(this.itineraries.get("itineraries").length,e),N.isMultiDestination()||this.publishBestPrices(),this.bus.channel("itineraries-data").publish({response:t.response,request_number:null}),e&&!N.isMultiDestination())return f(s,s.updateBrowsePrices)},e.prototype.renderResultsData=function(t,e){var n;if(this.mainView.removeSearching(),0===e&&this.resultsController.buildFlexibleDays(t.flights_availability),n=this.resultsController.canShowFlexibleDays(e),n&&this.isFlexibleDaysEnabled()?(this.bus.channel("close-search-controls").publish(),this.bus.channel("hide-date-nudgers").publish(),this.resultsController.showFlexibleDays(),R.setPendingRoute(null),this.router.navigateTo("results")):(0===e&&this.mainView.showResults(),this.render({filters:!0,results:!0,trigger:"service-data"}),0===e&&this.bus.channel("init-need-alts").publish()),0===e)return f(this.resultsController,this.resultsController.onFlexibleDaysCompletedMX,n,this.isFlexibleDaysEnabled())},e.prototype.isFlexibleDaysEnabled=function(){return v.isOn("flexible_days")},e.prototype.adjustRoute=function(t,e){if(!this.router.isOnPriceAlert())return R.getPendingRoute()&&(this.isAppBot()||t)?(this.router.navigateTo(R.getPendingRoute(),{replace:this.isAppBot()}),void R.setPendingRoute(null)):!t&&(R.getPendingRoute()||this.router.navigateTo("results"),e)?R.setPendingRoute(null):void 0},e.prototype.getResults=function(){return M.getResults(this.getPSQuery(S.getStorage()))},e.prototype.getPSQuery=function(t){var e;return e=_.assign({},t),e.legs=_.map(t.legs,function(t){return _.pick(t,["origin","destination","date","return_date","alternative_origins","alternative_destinations"])}),e},e.prototype.showErrorPage=function(t){return w.set("loading_complete",!0),R.setResults(0),this.mainView.showError(),this.mainView.removeSearching(),this.resultsController.showErrorPage(t),this.filtersController.render({complete:!0,total:0})},e.prototype.refresh=function(t){var e,n,i;return i=t||{},e=i.create_new_session,n=i.reason,e&&"light_redirect_lu_error"===n&&B.trackMixpanel("Flight Day View Restarted",{Reason:"Light Redirect"}),e?void this.reloadResults():M.refreshResults(S.getStorage())},e.prototype.restart=function(t){var e;return e=(t||{}).reason,B.trackMixpanel("Flight Day View Restarted",{Reason:function(){switch(e){case"retry_error":return"Results Retry Error";case"booking_panel_lu_error":case"manual_lu_error":return"Expired Session";case"results_expired":return"User Reload After Results Expired";default:return"Unknown"}}()}),this.resultsController.hideFlexibleDays(),this.reloadResults()},e.prototype.reloadResults=function(){var t,e;return e=this.router.getCurrent(),t=this.router.isOnDetails(),this.shutdown(),t&&R.setPendingRoute(e),this.getResults()},e.prototype.shutdown=function(){return M.clear(),w.set("loading_complete",!1),R.setResults(0),R.setHighlightedItinerary(null),R.resetCrossSell(),R.setPendingRoute(null),R.setSelectedItineraryRef(null),this.filters.shutdown(),this.itineraries.shutdown(),this.router.navigateTo("results"),this.shutdownControllers()},e.prototype.shutdownControllers=function(){this.filtersController.shutdown(),this.resultsController.shutdown(),this.bookingController.shutdown()},e.prototype.onRouteDefault=function(){return this.closePanels(this.router.isOnPriceAlert()?"price_alert":null)},e.prototype.closePanels=function(t){if(null==t&&(t=null),this.resultsController.closeUpsellPanel(),N.isMultiDestination()||"price_alert"!==t&&this.resultsController.closePriceAlertPanel(),"filters"!==t&&this.filtersController.closePanel(),"sort"!==t&&this.resultsController.closePanel(),"avg_price"!==t&&this.resultsController.removeAvgPriceIndicator(),"details"!==t&&this.bookingController)return this.bookingController.closePanel()},e.prototype.onRouteSort=function(){if(!this.preventDefaultRoute()&&(this.closePanels("sort"),!this.filtersController.isInlinePanelVisible()))return this.itineraries.get("itineraries").length?this.resultsController.showPanel():this.isLoadingComplete()?void 0:R.setPendingRoute("sort")},e.prototype.onRouteFilters=function(){if(!this.preventDefaultRoute()&&(this.closePanels("filters"),!this.filtersController.isInlinePanelVisible()))return this.itineraries.get("itineraries").length?this.filtersController.showPanel():this.isLoadingComplete()?void 0:R.setPendingRoute("filters")},e.prototype.onRouteDetails=function(t,e){if(!this.preventDefaultRoute())return this.closePanels("details"),R.setBpItineraryId(t),this.setItineraryPosition(),null===R.getBookingPanelReason()&&R.setBookingPanelReason(["reopen"]),this.itineraries.get("itineraries").length||this.isAppBot()&&k.get("session_id")?this.bookingController.showPanel(t,"booking"===e?e:null):this.isLoadingComplete()||t.indexOf("SPONSORED")!==-1?void 0:R.setPendingRoute("details/"+t)},e.prototype.onRoutePriceAlert=function(t){if(!this.preventDefaultRoute())return N.isMultiDestination()?void 0:C.get("isLoggedIn")()?void this.router.navigate("results",{replace:!0}):(this.closePanels("price_alert"),this.resultsController.createPriceAlert(t))},e.prototype.onRouteAvgPrice=function(){if(!this.preventDefaultRoute())return this.closePanels("avg_price"),this.resultsController.navigateToExpandedToast()},e.prototype.onResize=function(){var t;if((t=$(window)).width()!==this.cachedWindowWidth)return this.cachedWindowWidth=t.width(),this.filtersController.onResize(),this.resultsController.onResize(),this.bookingController.onResize(),$(document).trigger("global-dismiss"),_.contains(["filters","sort"],this.router.getCurrent())&&this.filtersController.isInlinePanelVisible()?this.router.goBack():void 0},e.prototype.onFatalError=function(){return this.retry++>=5?window.location.href="/500.ashx":setTimeout(function(t){return function(){return t.restart({reason:"retry_error"})}}(this),1e3)},e.prototype.onSessionCreated=function(){return R.setSessionCreatedTime(x.now()),this.bus.channel("session-created").publish(),this.bus.channel("init-route-sponsors").publish()},e.prototype.publishBestPrices=function(){return this.bus.channel("best-prices").publish(_.transform(this.itineraries.collectBestPrices(),function(t,e,n){return t[n]=P.formatCurrency(e)}))},e.prototype.getBestItemForAgent=function(t){var e;if(e=this.itineraries.getBestItemForAgent(t))return this.bus.channel("best-item-for-agent-ready").publish({id:t,price:e.getPrice(),url:e.get("url")})},e.prototype.setDefaultSortBy=function(t){if(!this.itineraries.get("itineraries").sort_modified)return this.itineraries.get("itineraries").sort_modified=!0,this.itineraries.get("itineraries").sort_by=t},e.prototype.enableFqs=function(){if(this.setDefaultSortBy("fqs"),v.isOn("downrank_indirects"))return this.itineraries.get("itineraries").setFqsSorter("fqsdirects")},e.prototype.sortable=function(t){return!_.contains(t,"filter")&&!_.contains(t,"pagination")},e.prototype.isLoadingComplete=function(){return w.get("loading_complete")===!0},e.prototype.preventDefaultRoute=function(){return C.get("passengerCountReset")},e.prototype.isAppBot=function(){return v.isOn("is_app_bot")},e.prototype.setItineraryPosition=function(){var t,e;if((t=R.getBpItineraryId())&&this.itineraries.get("itineraries"))return R.setSelectedItineraryPosition(null!=(e=this.itineraries.get("itineraries").get(t))?e.get("position"):void 0)},e}(o)},function(t,e,n){var i;i=n(15),t.exports=function(){function t(){i(this,this.mixins)}return t.prototype.mixins=[],t.prototype.setSandbox=function(t){return _.assign(this,t),this},t.prototype.initialize=function(){},t.prototype.shutdown=function(){},t.prototype.render=function(){},t}()},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){var i,r,s,o,a,l;for(l=[],i=0,r=e.length;i<r;i++)o=e[i],l.push(function(){var e,i;e=o.prototype,i=[];for(a in e)n.call(e,a)&&(s=e[a],"mixins"===a||a in t?i.push(void 0):i.push(t[a]=s));return i}());return l}},function(t,e,n){var i,r,s,o,a,l,u,c,p,d,h,f,g,m,y,v,b,k,w,x,S;i=n(5),o=n(7),S=n(12),g=n(17).default,w=0,a=0,x=null,l=null,d=!1,s=function(){return w=0,a=0,x=null,l=null,d=!1,m.session_id=null,y.session_id=null},r=new i,u=function(){return r},v=function(t,e){return r.channel(t).publish(e)},h=function(t){return d=_.all(t.agents,function(t){return"current"===t.update_status})},p=function(){switch(!1){case!(w<5):return 1e3;case!(w<10):return 2e3;case!(w<15):return 3e3;default:return 4e3}},f=function(t,e){return g.error({message:"JS Log",fields:{"Error Message":t,"Error Payload":e}})},m=function(t,e,n,i){var r;if(m.session_id===e){if(0===w&&v("session-created"),t){if(t instanceof Error)return void f("Wrong PS data type",i);t.context||f("Incomplete PS data",{keys:_.keys(t),query:t.query,context:t.context,itineraries_length:(t.itineraries||{}).length,request_number:w,response_text:i}),t.etag&&(l=t.etag),x=t.context.session_id,r=h(t),v("data",{response:t,complete:r,request_number:w})}return d||r||S.setTimeout(function(){return k(e,n)},p()),w++,a=0}},y=function(t,e,n){if(y.session_id===e)return 0===w?v("fatal-error",t):3===a++?v("fatal-error",t):(v("error",t),S.setTimeout(function(){return k(e,n)},1e3))},k=function(t,e){var n,i,r;return r=0===w?["getResults",[JSON.stringify(e)]]:["pollForResults",[x,l]],i=r[0],n=r[1],o[i].apply(o,n).done(function(n){return m(n.data,t,e,n.responseText)}).fail(function(n){return y(n,t,e)}).always(function(t){return v("ps-response",{status:t.status,type:"results"})})},c=function(t){var e;return w=0,a=0,x=null,l=null,d=!1,e=(new Date).getTime(),m.session_id=e,y.session_id=e,k(e,t)},b=function(t){var e;return a=0,e=(new Date).getTime(),m.session_id=e,y.session_id=e,k(e,t)},t.exports={getResults:c,refreshResults:b,clear:s,getBus:u}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(18),s=i(r),o=n(24),a=i(o),l={error:"ERR",warn:"WARN",info:"INFO",debug:"DEBUG"},u=function(t,e,n){var i=_.merge((0,s.default)(),n.fields);i=_.forEach(i,function(t,e){"string"!=typeof t&&(i[e]=JSON.stringify(t))});var r={event_header:{produced_by:"FLIGHTS_DAYVIEW"},severity:l[t],message:n.message,fields:i};e(r)},c=_.reduce(["error","warn","info","debug"],function(t,e){return t[e]=function(t){u(e,(0,a.default)("applog"),t)},t},{});e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(19),s=i(r),o=n(21),a=i(o),l=n(22),u=n(23),c=(0,s.default)("options");e.default=function(){return{"Flight Search Node":c.get("nodeName").toUpperCase(),"Cabin Class":c.get("cabinClass"),"Trip Type":(0,u.getType)(),Adults:a.default.get("adults"),Children:a.default.get("children"),Infants:a.default.get("infants"),"Page Url":window.location.href,Referrer:document.referrer||null,"Time Since Page Loaded":(0,l.toMilliseconds)()}}},function(t,e,n){var i,r;i=n(20),r={},t.exports=function(t){return r[t]||(r[t]=new i)}},function(t,e){t.exports=function(){function t(){this.data={}}return t.prototype.get=function(t,e){var n,i,r,s,o;for(o=this.data,s=t.split("."),n=0,i=s.length;n<i;n++){if(r=s[n],!(_.isObject(o)&&r in o))return e;o=o[r]}return o},t.prototype.set=function(t,e){var n,i,r,s,o,a,l;for(o=t.split("."),s=o.length,l=this.data,i=n=0,r=o.length;n<r;i=++n)a=o[i],i===s-1&&(l[a]=e),l=a in l?l[a]:l[a]={};return this},t.prototype.has=function(t){var e;return e=this.get(t),void 0!==e&&null!==e},t.prototype.setStorage=function(t){return this.data=t},t.prototype.getStorage=function(){return this.data},t}()},function(t,e,n){var i,r,s,o,a,l,u,c,p,d,h,f,g,m,y;i=n(10),s={adults:0,children:0,infants:0},y=0,f={},h={},r={},g={},m=function(t,e){return null==e&&(e=16),_.countBy(t,function(t){return t>=e?"adults":t<e&&t>1?"children":"infants"})},p=function(t){var e,n,i,o,a,l,u,c,p,d,v,b;return e=null!=(c=t.adults)?c:0,o=null!=(p=t.child_ages)?p:[],n=null!=(d=t.adults_v1)?d:0,a=null!=(v=t.children_v1)?v:0,l=null!=(b=t.infants_v1)?b:0,u={adults:n,children:a,infants:l},i=o.slice(0),_.times(e,function(){return i.push(30)}),_.assign(r,{adults:e,child_ages:o}),_.assign(g,u),_.assign(f,s,m(i,12)),_.assign(h,s,m(i)),y=i.length},o=function(t,e){return null==e&&(e=!1),(e?f:h)[t]||0},l=function(t){return g[t]||0},u=function(){return r},a=function(t){return r[t]||0},c=function(){return y},d=function(t){var e;return null==t&&(t=!1),e=t?l:o,e("children")+e("infants")===0},t.exports={init:p,getTotal:c,get:o,getData:a,getOriginal:l,getQuery:u,isAdultOnlySearch:d}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.toSeconds=e.toMilliseconds=void 0;var r=n(8),s=i(r),o=function(t){return t(window["adrum-start-time"],s.default.now())||"No Start Time"},a=function(){return o(s.default.diffInMilliseconds)},l=function(){return o(s.default.diffInSeconds)};e.toMilliseconds=a,e.toSeconds=l},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="",i=function(t){return n===t},r=function(t){return n=t},s=function(){return i("multi-destination")},o=function(){return i("return")},a=function(){return i("one-way")},l=function(){return n};e.init=r,e.isMultiDestination=s,e.isReturn=o,e.isOneWay=a,e.getType=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(25),s=i(r);e.default=_.curry(function(t,e){if(t&&_.isObject(e)){var n="https:"+s.default.get("endpoints.slipstream")+"/"+t;if("XDomainRequest"in window&&null!==window.XDomainRequest){var i=new XDomainRequest;return i.open("post",n),i.send(JSON.stringify(e))}return $.ajax({type:"POST",url:n,data:JSON.stringify(e),dataType:"json"})}})},function(t,e,n){t.exports=new(n(20))},function(t,e){t.exports=function(t,e){var n,i,r,s;r=(("undefined"!=typeof Skyscanner&&null!==Skyscanner&&null!=(i=Skyscanner.FSS)?i.translations:void 0)||{})[t]||t;for(n in e)s=e[n],r=r.replace(RegExp("@@"+n+"@@","g"),s);return r}},function(t,e,n){var i,r,s,o,a,l,u,c,p,d,h,f,g,m,y,v,b,k,w,x,S,P,C,A,D,T,M;P=n(19)("options"),c=function(t){var e,n;return null==t&&(t="fss"),(n="undefined"!=typeof Skyscanner&&null!==Skyscanner&&null!=(e=Skyscanner.Api)?e.localStorage:void 0)?n.init(t):{tryGetValue:function(){},trySetValue:function(){},tryDeleteValue:function(){}}},g=function(){var t;return t=c(),{trySetValue:function(e,n){return t.trySetValue(e,n,!1,!0)},tryGetValue:function(e){return t.tryGetValue(e,!1,!0)},tryDeleteValue:function(e){return t.tryDeleteValue(e,!1,!0)}}},p=function(t){return navigator[t]},a=function(t){var e;return null==t&&(t=p("userAgent")),e=t.toLowerCase().match(/android\s([0-9\.]*)/),(null!=e?e[1]:void 0)||null},v=function(t){return null==t&&(t=p("userAgent")),t.indexOf("Mozilla/5.0")>-1&&t.indexOf("Android ")>-1&&t.indexOf("AppleWebKit")>-1&&t.indexOf("Chrome")===-1},k=function(t){var e;return null==t&&(t=p("userAgent")),e=$(window),/iPhone/i.test(t)&&/Safari/i.test(t)&&!/(CriOS|OPiOS|Chrome|Edge|Firefox|FxiOS)/i.test(t)&&(i(e)||r(e))},x=function(t){return null==t&&(t=p("userAgent")),(/iPhone/i.test(t)||/iPad/i.test(t))&&"Safari"===P.get("browserName")},b=function(){var t,e,n;return n=Skyscanner.Api.componentContext(),t=n.browserName,e=n.browserVersion,"internet explorer"===t.toLowerCase()&&"9"===e.substring(0,1)},w=function(){return k()&&i($(window))},S=function(){return navigator.onLine},i=function(t){return 414===t.height()&&90===Math.abs(t[0].orientation)},r=function(t){return 414===t.width()&&0===t[0].orientation},D=function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch},o=function(t){if(!D())return $(t).addClass("fss-no-touch")},u=function(){return $("#css-content").width()||NaN},m=function(t,e){return t?t+e.charAt(0).toUpperCase()+e.substring(1):e},d=function(){return null!==T?{isVisible:"visible"===document[m(T,"visibilityState")],changeEventName:T+"visibilitychange"}:{isVisible:null,changeEventName:null}},M=function(){var t,e,n;t=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]},f=function(t){return null==t&&(t=""),_.chain(t.replace(/^\?/,"").split("&")).invoke("split","=").reduce(function(t,e){return e[0]?(t[(e[0]||"").toLowerCase()]=_.escape(decodeURIComponent(e[1])),t):t},{}).value()},h=function(t){return f(window.location.search)[t]||null},A=function(t,e){var n,i,r;if(null==t&&(t=""),null==e&&(e=[]),i=t.substring(0,t.indexOf("?")),r=t.substring(t.indexOf("?")+1),!i||!r)return t;n=f(r);try{_.forEach(e,function(t){return delete n[t]})}catch(t){}return""+i+(_.isEmpty(n)?"":"?"+$.param(n))},C=function(t){return document.location.href=t},s=function(t,e,n){return t?e&&n?t.indexOf("?")>=0?t.replace(/(\?[^#]+)/,"$1&"+e+"="+n):t.replace(/((\/)*[^#]*|(.*)$)/,"$1?"+e+"="+n):t:null},T=function(){var t,e,n,i;for(n=["","moz","ms","webkit"],t=0,e=n.length;t<e;t++)if(i=n[t],m(i,"hidden")in document)return i;return null}(),y=function(t,e){var n,i;return i=document.createElement("script"),i.type=t.type||"text/javascript",i.async=!0,e&&(i.onload=e),t.anonymous&&(i.crossOrigin="anonymous"),i.src=0===t.src.indexOf("//")||0===t.src.indexOf("http")?t.src:""+("https:"===document.location.protocol?"https://":"http://")+document.location.host+t.src,n=document.getElementsByTagName("script")[0],n.parentNode.insertBefore(i,n)},l=function(t){var e;return null==t&&(t=""),(null!=(e=new Skyscanner.Common.Cookie(t))?e[0]:void 0)||null},t.exports={getLocalStorage:c,getSessionStorage:g,getNavigator:p,isAndroid:v,getAndroidVersion:a,isIphoneSixPlus:k,isIphoneSixPlusLandscape:w,isMobileSafari:x,isIe9:b,isOnline:S,supportsTouch:D,allowMouseEvents:o,getCssMaxWidth:u,getPageVisibility:d,whichTransitionEvent:M,getQueryStringParams:f,getQueryStringParam:h,addQueryStringParam:s,removeURLParams:A,redirect:C,injectScript:y,getCookieValue:l}},function(t,e,n){var i,r=[].slice;i=n(29),t.exports=function(){var t,e,n,s;e=arguments[0],s=arguments[1],t=3<=arguments.length?r.call(arguments,2):[];try{return s.apply(e,t)}catch(t){return n=t,i.log({"Error Message":n.message||"Try Catch error","Error Stacktrace":n.stack||null})}}},function(t,e){var n;n=6,t.exports=new(function(){function t(){this.events=[],this.load_time=null,this.log_handlers=[]}return t.prototype.log=function(t){return _.extend(t,{"Error Url":window.location.href,"Error Referrer":document.referrer||null,"Error Event Stack":this.events,"Error Time Since Load":this.load_time?this.formatTime(this.now()-this.load_time)+"s":null}),_.invoke(this.log_handlers,"call",this,t)},t.prototype.addLogHandler=function(t){return this.log_handlers.push(t),this},t.prototype.filterFiles=function(t){return this.acceptedFiles=t,this},t.prototype.initialize=function(){var t;return this.load_time=this.now(),t=window.onerror,window.onerror=function(e){return function(n,i,r,s,o){var a,l;return t&&t.apply(e,arguments),a="Script error",!_.contains([a,a+"."],n)&&(!!e.acceptedFiles.test(i)&&(window.event&&(!r&&window.event.lineno&&(r=window.event.lineno),!s&&window.event.colno&&(s=window.event.colno),!o&&window.event.error&&(o=window.event.error),!s&&window.event.errorCharacter&&(s=window.event.errorCharacter)),l={"Error Type":o?o.name:null,"Error Message":n,"Error File":i,"Error Line Number":r||null,"Error Column Number":s||null,"Error Stacktrace":o?e.getStacktraceFromException(o):e.generateStacktrace()},e.log(l),!1))}}(this)},t.prototype.addEvent=function(t){if(this.events.unshift(this.formatTime(this.now())+"  "+t),this.events.length>n)return this.events.length=n},t.prototype.now=function(){var t;return(null!=(t=window.performance)&&"function"==typeof t.now?t.now():void 0)||("function"==typeof Date.now?Date.now():void 0)||(new Date).valueOf()||null},t.prototype.formatTime=function(t){return Math.round(t/10)/100},t.prototype.getStacktraceFromException=function(t){return t.stack||t.backtrace||t.stacktrace},t.prototype.generateStacktrace=function(){var t,e,n,i,r,s,o;e=10,t=/function\s*([\w\-$]+)?\s*\(/i;try{throw Error("")}catch(t){i=t,o=stacktraceFromException(i)}if(o)return o;for(s=[],n=arguments.callee.caller.caller;n&&s.length<e;)r=t.test(""+n)?RegExp.$1||"[anonymous]":"[anonymous]",s.push(r),n=n.caller;return o=s.join("\n")},t}())},function(t,e){t.exports=new(function(){function t(){this.events={}}return t.prototype.hasUserTiming=function(){var t;return t=window.performance,!!(t.now&&t.measure&&t.mark)},t.prototype.eventStart=function(t){return this.hasUserTiming()?performance.mark(t+"_start"):this.events[t]={start:(new Date).getTime()}},t.prototype.eventEnd=function(t){return this.hasUserTiming()?performance.mark(t+"_end"):this.events[t].start?this.events[t].end=(new Date).getTime():null},t.prototype.eventTiming=function(t){var e,n;return this.hasUserTiming()?(performance.measure("measure_"+t,t+"_start",t+"_end"),n=performance.getEntriesByName("measure_"+t),e=_.last(n).duration):e=this.events[t].end-this.events[t].start,Math.ceil(e)},t}())},function(t,e,n){var i,r,s,o,a,l,u,c,p,d,h,f,g,m,y,v=function(t,e){function n(){this.constructor=t}for(var i in e)b.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},b={}.hasOwnProperty;m=n(26),u=n(8),a=n(28),c=n(6),l=n(10),p=n(21),y=n(23),r=n(14),s=n(32),h=n(41),g=n(44),d=n(42)("results"),f=n(40),i=n(45),o=n(65),t.exports=function(t){function e(t){e.__super__.constructor.apply(this,arguments),this.inlineFilters=new s({controller:this,mode:"inline",el:$("#filter-controls")}),this.mobileFilters=new s({controller:this,mode:"modal",el:$("#mobile-filter-controls"),$body:t.$body})}return v(e,t),e.prototype.mixins=[i],e.prototype.initialize=function(){return this.bus.channel("reset-filters").subscribe(_.bind(this.resetFilters,this)),this.bus.channel("change-filter").subscribe(_.bind(this.onFilterChanged,this)),this.filters.resetInteractions()},e.prototype.shutdown=function(){return this.closePanel(),this.inlineFilters.setNoResultsLock(!1),this.inlineFilters.setCoverVisibility(!0),this.inlineFilters.shutdown(),this.mobileFilters.shutdown()},e.prototype.isInlinePanelVisible=function(){return this.inlineFilters.$el.is(":visible")},e.prototype.isMobilePanelVisible=function(){return this.mobileFilters.$el.is(":visible")},e.prototype.render=function(t){var e,n,i,r;return e=t.complete,i=t.total,n=t.qualified,r=t.trigger,i<=0?void(e&&(this.inlineFilters.setNoResultsLock(!0),this.inlineFilters.setCoverVisibility(!1))):(this.renderInfo(i,n.length),"stops-filter"!==r&&"departure-times-filter"!==r&&"airports-filter"!==r&&"duration-filter"!==r?this.renderPanels(this.isInlinePanelVisible(),this.isMobilePanelVisible()):void 0)},e.prototype.closePanel=function(){if(this.isMobilePanelVisible())return _.some(this.filters.get("interactions"),function(t,e){return t&&"with_header"!==e})&&this.bus.channel("blink-curtain").publish(),this.filters.resetInteractions(),this.mobileFilters.hide()},e.prototype.showPanel=function(){return this.renderPanels(!1,!0),this.mobileFilters.show(),a(this,this.onShowFiltersMX)},e.prototype.resetFilters=function(){return this.filters.get("interactions").with_reset_filters=!0,this.filters.get("stops").setAllModified(),this.filters.resetUserChanges(),this.reRender("filter-reset"),f.deleteSessionFilters()},e.prototype.resetAirlineHighlight=function(){return this.filters.get("airlines").resetHighlight()},e.prototype.onResize=function(){if(g.hasResults())return this.renderPanels(this.isInlinePanelVisible(),!1)},e.prototype.renderPanels=function(t,e){if(t&&this.inlineFilters.setCoverVisibility(!1),(t||e)&&this.renderStops(t,e),(t||e)&&this.renderDepartureTimes(t,e),(t||e)&&this.renderAirlines(t,e),(t||e)&&this.renderAirports(t,e),t||e)return this.renderDuration(t,e)},e.prototype.renderInfo=function(t,e){return this.mobileFilters.renderInfo({shown:e,shown_total:m("ktxtDayView_Filters_ShownTotal",{shown:e,total:t}),reset_all:m("ktxtDayView_Filters_ResetAllFilters"),disable:e===t})},e.prototype.renderDepartureTimes=function(t,e){var n;if(n={collapsed:this.filters.get("departure_times_collapsed"),departure_times:this.filters.get("departure_times").map(function(t,e){return{title:this.getDepartureTimeTitle(e),cid:t.cid,min:t.get("min"),max:t.get("max"),step:t.get("step"),default_min:t.defaults.min,default_max:t.defaults.max}},this)},t&&this.inlineFilters.renderDepartureTimes(n),e)return this.mobileFilters.renderDepartureTimes(n)},e.prototype.renderStops=function(t,e){
var n;if(n={title:m("ktxtDayView_Filters_Stops"),collapsed:this.filters.get("stops_collapsed"),stops:this.filters.get("stops").map(function(t){var e;return{title:this.getStopTitle(t.get("id")),id:t.get("id"),enable:t.isEnabled(),check:t.isChecked(),price:(e=t.getPrice(p.getTotal()))?c.formatCurrency(e):t.getCount()?"&nbsp;":m("ktxtDayViewResultsNoneShort")}},this)},t&&this.inlineFilters.renderStops(n),e)return this.mobileFilters.renderStops(n)},e.prototype.renderDuration=function(t,e){var n,i;if(i=this.filters.get("duration"),n={collapsed:this.filters.get("duration_collapsed"),cid:i.cid,min:i.get("min"),max:i.get("max"),step:i.get("step"),current:i.get("current")},t&&this.inlineFilters.renderDuration(n),e)return this.mobileFilters.renderDuration(n)},e.prototype.getDepartureTimeTitle=function(t){var e,n,i;return y.isMultiDestination()?(n=h.get("legs")[t],i=d.get(n.origin),"Airport"===i.type&&(i=d.get(i.parent_id)),e=d.get(n.destination),"Airport"===e.type&&(e=d.get(e.parent_id)),t+1+". "+i.name+" - "+e.name):0===t?m("ktxt_filter_outbound"):1===t?m("ktxt_filter_return"):""},e.prototype.renderAirlines=function(t,e){var n,i,r;if(n=this.filters.get("airlines"),i=this.filters.get("alliances"),r={collapsed:this.filters.get("airlines_collapsed"),title:m("ktxtDayView_Tabs_Airlines"),select_all:m("ktxtDayView_Filters_SelectAll"),clear_all:m("ktxtDayView_Filters_ClearAll"),select_disabled:n.all(function(t){return t.isChecked()}),clear_disabled:n.all(function(t){return!t.isChecked()}),airlines:n.map(function(t){var e;return{id:t.get("id"),name:"multi"===t.get("id")?m("ktxt_airline_combinations"):t.get("name"),check:t.isChecked(),price:(e=t.getPrice(p.getTotal()))?c.formatCurrency(e):null,highlight:t.get("highlight")}}),alliances:_.sortBy(i.map(function(t){return{id:t.get("id"),name:o(t.get("name")),name_no_results:m("ktxtDayViewResults_AirlineAlliances_None",{alliance_name:o(t.get("name"))}),disabled:t.get("disabled"),check:t.get("check")}}),function(t){return t.name.toLowerCase()})},t&&this.inlineFilters.renderAirlines(r),e)return this.mobileFilters.renderAirlines(r)},e.prototype.renderAirports=function(t,e){var n,i,r,s,o;if(n=this.filters.get("airports"),i=this.filters.get("change_airport"),o=this.filters.get("mixed_airports"),n.isShown()||i.get("visible")||o.get("visible"))return r={},s={collapsed:this.filters.get("airports_collapsed"),title:m("ktxtDayView_Filters_Airports"),change_airport:{visible:i.get("visible"),label:m("ktxt_airports_ChangeAirport"),checked:i.get("checked")},mixed_airports:{visible:o.get("visible"),label:m("ktxt_airports_SameAirport"),checked:o.get("checked")},airports:n.map(function(t,e){var n,i;return n=t.get("city").info,n.name||(n.name=m(1===n.id?"ktxtDayView_Filters_DepartFrom":"ktxtDayView_Filters_ArriveAt")),i=!1,_.has(r,n.id)||(r[n.id]=i=!0),{is_shown:t.isShown(),id:t.get("id"),city_name:n.name,show_city:i,display_code:t.get("display_code"),check:t.isChecked(),disabled:t.isDisabled(),name:"City"===t.get("type")?m("ktxtDayView_Filters_PlaceAny",{place:t.get("name")}):t.get("name")}})},t&&this.inlineFilters.renderAirports(s),e?this.mobileFilters.renderAirports(s):void 0},e.prototype.getStopTitle=function(t){return{direct:m("ktxtDayViewResults_NonStop"),one_stop:m("ktxt_results_journeynotes_1stop_short"),two_plus_stops:m("ktxtDayViewResults_TwoPlusStops")}[t]},e.prototype.changeStop=function(t,e){var n;return this.filters.get("stops").get(t).set("check",e).set("is_user_modified",!0),f.isEnabled()&&this.bus.channel("uncheck-direct").publish(),this.onFilterChanged("stops-filter"),this.filters.get("interactions").with_stops=!0,a(this,this.trackGA,t+"_"+this._showOrHide(e)),n=this.filters.get("stops").getUnchecked(),_.isEmpty(n)?f.removeSavedFiltersFor("stops"):f.saveFilters({stops:n})},e.prototype.changeAlliances=function(t,e){var n,i,r;return n=this.filters.get("airlines"),i=this.filters.get("alliances"),this.filters.get("interactions").with_alliances=!0,i.get(t).set("check",e),n.resetHighlight(),this.filters.applyAlliancesFilterChange(n,i,t,e),this.onFilterChanged("alliances-filter"),r=i.getCheckedAlliances(),_.isEmpty(r)?f.removeSavedAllianceFilter():(f.saveFilters({alliances:r}),f.removeSavedAirlineFilter())},e.prototype.selectAlliances=function(t){return this.filters.get("alliances").resetUserChanges()},e.prototype.changeAirlines=function(t,e){var n,i;return this.selectAlliances(!1),n=this.filters.get("airlines"),n.resetHighlight(),n.get(t).set("check",e),this.onFilterChanged("airlines-filter"),this.filters.get("interactions").with_airlines=!0,"multi"===t?a(this,this.trackGA,"airline_combination_"+this._showOrHide(e)):a(this,this.trackGA,"airline_"+this._showOrHide(e)),i=n.getUnchecked(),_.isEmpty(i)?f.removeSavedAirlineFilter():(f.saveFilters({airlines:i}),f.removeSavedAllianceFilter())},e.prototype.selectAirlines=function(t){return this.filters.get("airlines")[t?"resetUserChanges":"unselectAll"](),a(this,this.trackGA,t?"airline_select_all":"airline_clear_all"),this.onFilterChanged("airlines-filter")},e.prototype.changeAirports=function(t,e){var n;return this.filters.get("airports").get(t).set("check",e),this.onFilterChanged("airports-filter"),this.filters.get("interactions").with_airports=!0,a(this,this.trackGA,"airport_"+this._showOrHide(e)),n=this.filters.get("airports").getUnchecked(),_.isEmpty(n)?f.removeSavedFiltersFor("airports"):f.saveFilters({airports:n})},e.prototype.onClickChangeAirport=function(t){var e;return e=this.filters.get("change_airport"),e.set("checked",t),e.set("modified",!0),this.onFilterChanged("change-airport-filter"),this.filters.get("interactions").with_change_airport=!0,a(this,this.trackGA,"change_airport_"+this._showOrHide(!t)),e.isModified()?f.saveFilters({change_airport:t}):f.removeSavedFiltersFor("change_airport")},e.prototype.onClickChangeMixedAirports=function(t){var e;return e=this.filters.get("mixed_airports"),e.set("checked",t),e.set("modified",!0),this.onFilterChanged("mixed-airports-filter"),this.filters.get("interactions").with_mixed_airports=!0,a(this,this.trackGA,"mixed_airports_"+this._showOrHide(!t)),e.isModified()?f.saveFilters({mixed_airports:t}):f.removeSavedFiltersFor("mixed_airports")},e.prototype.setDepartureTimesPosition=function(t,e){return t.set("min",e.left),t.set("max",e.right)},e.prototype.onRenderDepartureTimes=function(t,e){var n;return n=this.filters.get("departure_times").get(t),this.setDepartureTimesPosition(n,e)},e.prototype.onChangeDepartureTime=function(t,e){var n,i,r;return r=this.filters.get("departure_times").get(t),this.setDepartureTimesPosition(r,e),this.onFilterChanged("departure-times-filter"),this.filters.get("interactions").with_departure_time=!0,i=this.filters.get("departure_times").findIndex({cid:t})+1,y.isMultiDestination()?a(this,this.trackGA,"outbounddeparttime_leg"+i):a(this,this.trackGA,(1===i?"out":"in")+"bounddeparttime"),n=this.filters.get("departure_times").getUserChanges(),_.isEmpty(n)?f.removeSavedFiltersFor("departure_times"):f.saveFilters({departure_times:n})},e.prototype.setDurationPosition=function(t){return this.filters.get("duration").set("current",t.right)},e.prototype.onChangeDuration=function(t){var e,n;return n=this.filters.get("duration"),this.setDurationPosition(t),this.onFilterChanged("duration-filter"),this.filters.get("interactions").with_duration=!0,a(this,this.trackGA,"duration"),e=n.getUserChanges(),null===e?f.removeSavedFiltersFor("duration"):f.saveFilters({duration:e})},e.prototype.onClickHeader=function(t){return this.filters.get("interactions").with_header=!0,this.filters.set(t+"_collapsed",!this.filters.get(t+"_collapsed"))},e.prototype.getDurationSliderLabel=function(t){return this.formatSliderDuration(t.left)+"  "+this.formatSliderDuration(t.right,!0)},e.prototype.getTimeSliderLabel=function(t){return this.formatSliderTime(t.left)+"  "+this.formatSliderTime(t.right)},e.prototype.formatSliderTime=function(t){return c.formatTime(u.getSliderDateTime(t),"short")},e.prototype.formatSliderDuration=function(t,e){var n;return null==e&&(e=!1),0===t?n=0:(n=t/60*10,n=(e?Math.ceil(n):Math.floor(n))/10),1===n?m("ktxt_time_hour_long",{hours:n}):m("ktxt_time_hours_long",{hours:n})},e.prototype.onFilterChanged=function(t){return this.isMobilePanelVisible()?this.reRender(t,!0,!1):(this.reRender(t),this.bus.channel("blink-curtain").publish()),a(this,this.trackFiltersChanged,t),$(".seo-airline-filter-info").remove(),g.setShownSEOAirlineInfo(!0)},e.prototype.onClickDone=function(){return this.reRender("close-mobile-panel",!1,!0),a(this,this.onClickDoneMX),this.router.goBack()},e.prototype.reRender=function(t,e,n){return null==e&&(e=!0),null==n&&(n=!0),this.bus.channel("reset-pagination").publish(),this.bus.channel("re-render").publish({filters:e,results:n,trigger:t})},e.prototype._showOrHide=function(t){return t?"show":"hide"},e}(r)},function(t,e,n){var i,r,s,o,a,l,u,c,p=function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;a=n(27),r=n(33),i=n(34),c=n(36),l=n(37),s=n(38),o=n(39),u=n(40),t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.mode=this.options.mode,this.stops=new r({el:this.$(".mobile-filters-stops"),template:c}),this.info=new r({el:this.$(".total-results"),template:l}),this.airlines=new r({el:this.$(".mobile-filters-airlines"),template:s}),this.airports=new r({el:this.$(".mobile-filters-airports"),template:o}),this.needsScrollFix()&&this.fixScroll()}return p(e,t),e.prototype.events={"click dt a":"onClickSectionHeader","click .mobile-filters-stops input":"onClickStops","click header nav button":"onClickDone","click .total-results button":"onClickReset","click .mobile-filters-airlines .airlines input":"onClickAirlines","click .mobile-filters-airlines .alliances input":"onClickAlliances","animationend .airlines .highlight-airline label":"onAirlineAnimationEnd","webkitAnimationEnd .airlines .highlight-airline label":"onAirlineAnimationEnd","click .mobile-filters-airports .airport input":"onClickAirports","click .mobile-filters-airports .change-airport input":"onClickChangeAirport","click .mobile-filters-airports .mixed-airports input":"onClickChangeMixedAirports","click .mobile-filters-airlines button.select-all":"onClickSelectAllAirlines","click .mobile-filters-airlines button.clear-all":"onClickClearAllAirlines"},e.prototype.fixScroll=function(){var t,e,n,i;return t=this.$el.find(".flight-controls-content"),e=!1,i=0,n=0,this.$el.on("touchend",".flight-controls-content",function(){return e=!1,!0}).on("touchstart",".flight-controls-content",function(r){return e=!0,n=t.scrollTop(),i=r.originalEvent.changedTouches[0].pageY,!0}).on("touchmove",".flight-controls-content",function(e){var r;return r=i-e.originalEvent.changedTouches[0].pageY,t.scrollTop(n+r),!0})},e.prototype.needsScrollFix=function(){var t,e;return"modal"===this.mode&&(e=a.isAndroid(),t=a.getAndroidVersion(),e&&t&&2===parseInt(t,10))},e.prototype.shutdown=function(){return this.$(".noUi-target").each(function(t,e){return e.destroy(),$(e).removeAttr("data-cid")}),this.$(".mobile-filters-departure-times, .mobile-filters-airports, .mobile-filters-journey-duration, .mobile-filters-airlines").addClass("hidden"),this.collapsedAction(this.stops.$el,!1)},e.prototype.collapsedAction=function(t,e){return t[e?"addClass":"removeClass"]("filter-hidden")},e.prototype.setCoverVisibility=function(t){return this.$(".flight-controls-cover")[t?"removeClass":"addClass"]("hidden"),this},e.prototype.setNoResultsLock=function(t){return this.$(".mobile-filters-stops").attr("data-no-results",t).find("dt a")[t?"addClass":"removeClass"]("no-results")},e.prototype.renderStops=function(t){return t.two_lines="inline"===this.mode,this.collapsedAction(this.stops.$el,t.collapsed),this.stops.render(t).show()},e.prototype.renderDepartureTimes=function(t){var e;return e=this.$(".mobile-filters-departure-times").removeClass("hidden"),_.forEach(t.departure_times,function(t,n){var i;return i=e.find(".filter-opts").eq(n).removeClass("hidden").find("h4").text(t.title).end().find(".departure-times-slider").attr("data-cid",t.cid).noUiSlider({start:[t.min,t.max],step:t.step,connect:!0,margin:60,range:{min:[t.default_min],max:[t.default_max]}},!0).off().on("slide",function(t){return function(e){var n,i,r,s;return n=$(e.currentTarget),s=n.val(),i=n.attr("data-cid"),r={left:parseFloat(s[0]),right:parseFloat(s[1])},t.controller.onRenderDepartureTimes(i,r),t.renderDepartureTimesLabel(i,r)}}(this)).on("change",function(t){return function(e){var n,i;return n=$(e.currentTarget),i=n.val(),t.controller.onChangeDepartureTime(n.attr("data-cid"),{left:parseFloat(i[0]),right:parseFloat(i[1])})}}(this)),this.renderDepartureTimesLabel(i.attr("data-cid"),{left:t.min,right:t.max})},this),this.collapsedAction(e,t.collapsed)},e.prototype.renderDuration=function(t){var e;if(t.min!==t.max)return e=this.$(".mobile-filters-journey-duration").removeClass("hidden"),e.find(".duration-slider").noUiSlider({start:[t.current||t.max],step:t.step,connect:"lower",range:{min:[t.min],max:[t.max]}},!0).off().on("change",function(e){return function(n){return e.controller.onChangeDuration({left:t.min,right:parseFloat($(n.currentTarget).val())})}}(this)).on("slide",function(e){return function(n){var i,r;return r=$(n.currentTarget).val(),i={left:t.min,right:isNaN(r)?t.max:parseFloat(r)},e.controller.setDurationPosition(i),e.renderDurationLabel(i)}}(this)),this.collapsedAction(e,t.collapsed),this.renderDurationLabel({left:t.min,right:t.current||t.max})},e.prototype.renderInfo=function(t){return this.info.render(t).$el[t.shown<1?"addClass":"removeClass"]("no-results")},e.prototype.renderDepartureTimesLabel=function(t,e){var n;return n=this.controller.getTimeSliderLabel(e),this.$(".mobile-filters-departure-times").find(".departure-times-slider[data-cid='"+t+"']").prev(".time-range").text(n)},e.prototype.renderAirlines=function(t){return t.two_lines="inline"===this.mode,this.collapsedAction(this.airlines.$el,t.collapsed),this.airlines.render(t).show()},e.prototype.renderDurationLabel=function(t){return this.$(".mobile-filters-journey-duration").find(".time-range").text(this.controller.getDurationSliderLabel(t))},e.prototype.renderAirports=function(t){return t.two_lines="inline"===this.mode,this.collapsedAction(this.airports.$el,t.collapsed),this.airports.render(t).show()},e.prototype.onClickSectionHeader=function(t){var e,n,i,r;if(t.preventDefault(),n=$(t.currentTarget).closest("dl"),e=this.$el.find(".flight-controls-content"),i=n.attr("data-id"),"true"!==n.attr("data-no-results"))return n.hasClass("filter-hidden")&&(r=n.position().top+e.scrollTop()-+e.css("paddingTop")||0,e.animate({scrollTop:r},"300")),n.toggleClass("filter-hidden"),this.controller.onClickHeader(i)},e.prototype.onClickStops=function(t){var e,n;return e=$(t.currentTarget),n=e.closest("li").attr("data-id"),this.controller.changeStop(n,e.prop("checked"))},e.prototype.onClickAlliances=function(t){var e,n;return e=$(t.currentTarget),n=e.closest("li").attr("data-id"),this.controller.changeAlliances(n,e.prop("checked"))},e.prototype.onAirlineAnimationEnd=function(t){return this.controller.resetAirlineHighlight()},e.prototype.onClickAirlines=function(t){var e,n;return e=$(t.currentTarget),n=e.closest("li").attr("data-id"),this.controller.changeAirlines(n,e.prop("checked"))},e.prototype.onClickSelectAllAirlines=function(t){return this.controller.selectAlliances(!1),this.controller.selectAirlines(!0),u.removeSavedAirlineFilter(),u.removeSavedAllianceFilter()},e.prototype.onClickClearAllAirlines=function(t){return this.controller.selectAlliances(!1),this.controller.selectAirlines(!1),u.removeSavedAirlineFilter(),u.removeSavedAllianceFilter()},e.prototype.onClickAirports=function(t){var e,n;return e=$(t.currentTarget),n=e.closest("li").attr("data-id"),this.controller.changeAirports(n,e.prop("checked"))},e.prototype.onClickChangeAirport=function(t){return this.controller.onClickChangeAirport($(t.currentTarget).prop("checked"))},e.prototype.onClickChangeMixedAirports=function(t){return this.controller.onClickChangeMixedAirports($(t.currentTarget).prop("checked"))},e.prototype.onClickDone=function(){return this.controller.onClickDone()},e.prototype.onClickReset=function(){return this.controller.resetFilters()},e}(i)},function(t,e,n){var i;i=n(15),t.exports=function(){function t(t){var e;null==t&&(t={}),this.options=t,this.cid=_.uniqueId("view_"),_.extend(this,_.pick(t,["model","collection","controller","template"])),t.el?this.setElement(t.el):(e={},t.id&&(e.id=t.id),t.className&&(e.class=t.className),this.setElement(document.createElement(t.tagName||"div")),this.$el.attr(e)),i(this,this.mixins),this.delegateEvents()}return t.prototype.mixins=[],t.prototype.events={},t.prototype.$=function(t){return this.$el.find(t)},t.prototype.delegateEvents=function(){var t,e,n,i;i=_.result(this,"events");for(t in i)n=i[t],e=t.match(/^(\S+)\s*(.*)$/),this.$el.on(e[1]+".delegate_"+this.cid,e[2],_.bind(this[n],this));return this},t.prototype.undelegateEvents=function(){return this.$el.off(".delegate_"+this.cid),this},t.prototype.setElement=function(t){return this.$el=$(t),this.el=this.$el[0],this},t.prototype.destroy=function(){return this.undelegateEvents(),this.destroyTooltips(),this.remove()},t.prototype.noop=function(){return this},t.prototype.getHtml=function(t){return this.template(t)},t.prototype.render=function(t){return this.$el.html(this.getHtml(t)),this},t.prototype.show=function(){return this.$el.removeClass("hidden"),this},t.prototype.hide=function(){return this.$el.addClass("hidden"),this},t.prototype.remove=function(){return this.$el.remove(),this},t.prototype.isVisible=function(){return!this.$el.hasClass("hidden")},t.prototype.scrollToTop=function(){return $(window).scrollTop()},t.prototype.onStopPropagation=function(t){return t.stopPropagation(),$(document).trigger("global-dismiss",t)},t.prototype.onPreventDefault=function(t){return t.preventDefault()},t}()},function(t,e,n){var i,r,s,o,a,l=function(t,e){function n(){this.constructor=t}for(var i in e)u.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;r=n(33),s=n(27),i=n(35),a=n(11),o=n(15),t.exports=function(t){function e(t){e.__super__.constructor.apply(this,arguments),o(this,[i]),this.initPanel(),this.overlay=a.create({overlay_id:this.$el.attr("data-overlay"),dismiss_callback:_.bind(this.onClickDone,this)})}return l(e,t),e.prototype.show=function(){return this.overlay.show(),this.showPanel()},e.prototype.hide=function(){return this.overlay.hide(this.$el.attr("data-overlay")),this.hidePanel()},e.prototype.onClickDone=function(){},e}(r)},function(t,e,n){var i,r;i=n(27),r=n(10),t.exports=function(){function t(){}return t.prototype.initPanel=function(){return this.panel_pages=0,this.panel_current_page=0,this.page_offset=0},t.prototype.showPanel=function(){return this.__isVisible=!0,this.options.$body.css({height:"100%",width:"100%",overflow:"hidden",position:"fixed",top:"-"+(this.page_offset=window.pageYOffset)+"px"}),this.$el.removeClass("hidden"),i.isMobileSafari()&&this.$(".split-panel-content").on("scroll",function(t){return function(e){var n;if(n=t.$(".split-panel-content"),n.scrollTop()<2)return n.scrollTop(2)}}(this)),setTimeout(function(t){return function(){return t.$el.addClass("panel-visible"),t.onShow()}}(this),1),(this.zen_tab=$("#zenbox_tab")).hide(),this.$el.find(".fss-panel-"+this.panel_current_page).addClass("visible-page")},t.prototype.hidePanel=function(){var t;if(this.__isVisible)return this.__isVisible=!1,$("html").removeClass("sixplus"),this.$(".split-panel-content").off("scroll"),this.options.$body.removeAttr("style").scrollTop(this.page_offset),this.$el.removeClass("panel-visible"),setTimeout(function(t){return function(){return t.$el.addClass("hidden"),t.onHide()}}(this),100),null!=(t=this.zen_tab)?t.show():void 0},t.prototype.nextPage=function(){if(!(this.panel_pages<=1||this.panel_current_page+1>this.panel_pages))return this.$el.find(".fss-panel-"+this.panel_current_page).removeClass("visible-page"),this.$el.find(".fss-panel-"+ ++this.panel_current_page).css({right:"0px",zIndex:this.panel_current_page-1}).addClass("visible-page")},t.prototype.prevPage=function(){if(!(this.panel_current_page<=1))return this.$el.find(".fss-panel-"+this.panel_current_page).removeClass("visible-page").removeAttr("style"),this.$el.find(".fss-panel-"+--this.panel_current_page).addClass("visible-page")},t.prototype.addPage=function(t,e){var n;return n=$("<div class='fss-panel-page fss-panel-"+ ++this.panel_pages+"'></div>"),e||n.addClass("fss-panel-page-extra"),n.html(t),this.$el.append(n),this.panel_current_page=this.panel_current_page||1},t.prototype.onShow=function(){if(i.isMobileSafari()&&this.$(".split-panel-content").scrollTop(2),i.isIphoneSixPlus()&&($("html").addClass("sixplus"),$(window).on("orientationchange.mobilepanel",function(t){return function(){if(i.isIphoneSixPlusLandscape())return t.options.$body.scrollTop(0)}}(this)),i.isIphoneSixPlusLandscape()))return this.options.$body.scrollTop(0)},t.prototype.onHide=function(){return $(window).off("orientationchange.mobilepanel")},t}()},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<dt><a href="#" class="clearfix"><span>'+(null==(__t=title)?"":__t)+'</span><span class="chevron" aria-hidden="true"></span></a></dt><dd class="filter-opts"><ol>',_.forEach(stops,function(t){__p+='<li data-id="'+(null==(__t=t.id)?"":__t)+'"><label class="clearfix ',t.enable||(__p+="disabled"),__p+=" ",two_lines&&(__p+="two-line"),__p+='"><span class="label-text">'+(null==(__t=t.title)?"":__t)+'</span><input type="checkbox" ',t.check&&(__p+='checked="checked"'),__p+=" ",t.enable||(__p+='disabled="disabled"'),__p+='><span class="filter-sub">'+(null==(__t=t.price)?"":__t)+"</span></label></li>"}),__p+="</ol></dd>";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+="<span>"+(null==(__t=shown_total)?"":__t)+"</span><button ",disable&&(__p+='disabled="disabled"'),__p+=">"+(null==(__t=reset_all)?"":__t)+"</button>";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<dt><a href="#" class="clearfix"><span>'+(null==(__t=title)?"":__t)+'</span><span class="chevron" aria-hidden="true"></span></a></dt><dd class="filter-opts"><div class="secondary-options helper-nav"><button class="select-all" ',select_disabled&&(__p+=" disabled "),__p+=">"+(null==(__t=select_all)?"":__t)+'</button><button class="clear-all"  ',clear_disabled&&(__p+=" disabled "),__p+=">"+(null==(__t=clear_all)?"":__t)+'</button></div><ol class="alliances">',_.forEach(alliances,function(t){__p+='<li data-id="'+(null==(__t=t.id)?"":__t)+'"><input type="checkbox" id="alliance'+(null==(__t=t.id)?"":__t)+'" ',t.disabled&&(__p+="disabled"),__p+=" ",t.check&&(__p+='checked="checked"'),__p+='><label for="alliance'+(null==(__t=t.id)?"":__t)+'" ',t.disabled&&(__p+='class="disabled"'),__p+=">",__p+=t.disabled?null==(__t=t.name_no_results)?"":__t:" "+(null==(__t=t.name)?"":__t),__p+="</label></li>"}),__p+='</ol><ol class="airlines">',_.forEach(airlines,function(t){__p+='<li data-id="'+(null==(__t=t.id)?"":__t)+'" ',t.highlight&&(__p+='class="highlight-airline"'),__p+='  ><label class="clearfix ',two_lines&&(__p+="two-line"),__p+='"><span class="label-text">'+(null==(__t=t.name)?"":__t)+'</span><input type="checkbox" ',t.check&&(__p+='checked="checked"'),__p+='><span class="filter-sub">'+(null==(__t=t.price||"&nbsp;")?"":__t)+"</span></label></li>"}),__p+="</ol></dd>";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<dt><a href="#" class="clearfix"><span>'+(null==(__t=title)?"":__t)+'</span><span class="chevron" aria-hidden="true"></span></a></dt><ol class="filter-opts">',mixed_airports.visible&&(__p+='<li class="mixed-airports"><label class="clearfix"><span class="label-text">'+(null==(__t=mixed_airports.label)?"":__t)+'</span><input type="checkbox" ',mixed_airports.checked&&(__p+='checked="checked"'),__p+="></label></li>"),__p+="",change_airport.visible&&(__p+='<li class="change-airport"><label class="clearfix"><span class="label-text">'+(null==(__t=change_airport.label)?"":__t)+'</span><input type="checkbox" ',change_airport.checked&&(__p+='checked="checked"'),__p+="></label></li>"),__p+="",_.forEach(airports,function(t){__p+="",t.is_shown&&(__p+="",t.show_city&&(__p+='<div class="subtitle">'+(null==(__t=t.city_name)?"":__t)+"</div>"),__p+='<li data-id="'+(null==(__t=t.id)?"":__t)+'" class="airport"><label class="clearfix two-line ',t.disabled&&(__p+="disabled"),__p+='"><span class="label-text">'+(null==(__t=t.display_code)?"":__t)+'</span><input type="checkbox"',t.check&&(__p+='checked="checked"'),__p+=" ",t.disabled&&(__p+='disabled="disabled"'),__p+='><span class="filter-sub">'+(null==(__t=t.name)?"":__t)+"</span></label></li>")}),__p+="</ol>";return __p}},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.hasSessionFilters=e.deleteSessionFilters=e.removeSavedStopsFilter=e.removeSavedAirlineFilter=e.removeSavedAllianceFilter=e.removeSavedFiltersFor=e.loadSessionFilters=e.saveFilters=e.isEnabled=void 0;var s=n(27),o=r(s),a=n(10),l=r(a),u=n(23),c=i(u),p=null,d=null,h=null,f=function(){return l.default.isOn("save_filters")&&!c.isMultiDestination()},g=function(t){if(f()){var e=m(),n=_.extend(e||{},t);return(d=o.default.getSessionStorage())?d.trySetValue("apacrfs_saved_filters",JSON.stringify(n)):null}},m=function(){if(!f()||!(h=o.default.getSessionStorage().tryGetValue("apacrfs_saved_filters")))return null;try{return JSON.parse(h)}catch(t){return null}},y=function(t){f()&&(h=m())&&(d=o.default.getSessionStorage())&&(delete h[t],d.trySetValue("apacrfs_saved_filters",JSON.stringify(h)))},v=function(){return y("alliances")},b=function(){return y("airlines")},k=function(){return y("stops")},w=function(){f()&&o.default.getSessionStorage().tryDeleteValue("apacrfs_saved_filters")},x=function(){return p=m(),!_.isEmpty(p)};e.isEnabled=f,e.saveFilters=g,e.loadSessionFilters=m,e.removeSavedFiltersFor=y,e.removeSavedAllianceFilter=v,e.removeSavedAirlineFilter=b,e.removeSavedStopsFilter=k,e.deleteSessionFilters=w,e.hasSessionFilters=x},function(t,e,n){var i,r,s,o,a=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;i=n(20),s=n(42)("results"),r=n(21),o=n(26),t.exports=new(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.getLegAt=function(t){return this.get("legs")[t]||null},e.prototype.getSortOptions=function(t,e){var n;return null==e&&(e={}),n=["fqs","price","duration","outbound_departure_time","return_departure_time","airlines","stops"],_(n).filter(function(n){return function(i){return n.hasSortOption(t,i)&&e[i]!==!1}}(this)).map(function(t){return function(e){return[e,t.getSortLabel(e)]}}(this)).value()},e.prototype.hasSortOption=function(t,e){return!!_.contains(["fqs","price","duration","airlines","stops"],e)||("outbound_departure_time"===e&&"multi-destination"!==t||"return_departure_time"===e&&"return"===t)},e.prototype.getSortLabel=function(t){switch(t){case"price":return o(r.isAdultOnlySearch()?"ktxtDayViewResults_PricePerAdult":"ktxtDayViewResults_PricePerPerson");case"fqs":return o("ktxt_fqs_BestValue");case"duration":return o("ktxtDayView_SortOption_TotalJourneyTime");case"outbound_departure_time":return o("ktxtDayView_SortOption_OutboundDepartureTime");case"return_departure_time":return o("ktxtDayView_SortOption_ReturnDepartureTime");case"airlines":return o("ktxtDayView_SortOption_Airline");case"stops":return o("ktxtDayView_SortOption_Stops");case"more":return o("ktxt_fqs_tab_More");default:return""}},e.prototype.getCrossSellQuery=function(t){var e,n,i;return n=this.getLegAt(0),i=this.getLegAt(1),e={target:t,market:this.get("market"),locale:this.get("locale"),currency:this.get("currency"),checkInDate:n.date.split("T")[0],locationId:s.get(n.destination).alt_id,adults:r.get("adults")+r.get("children"),origin:s.get(n.origin),destination:s.get(n.destination)},i&&(e.checkOutDate=i.date.split("T")[0]),e},e}(i))},function(t,e,n){var i,r;i=n(43),r={},t.exports=function(t){return r[t]||(r[t]=new i)}},function(t,e){t.exports=function(){function t(){this.data={}}return t.prototype.set=function(t){return this.data=_.indexBy(t,"id"),this},t.prototype.get=function(t){return this.data[t]||null},t}()},function(t,e){var n,i,r,s,o,a,l,u,c,_,p,d,h,f,g,m,y,v,b,k,w,x,S,P,C,A,D,T,M,O,F,I,R,q,j,$,B,L,V,E,N,U,Q,G,X,H,W,z,J,Y,K,Z,tt,et,nt,it,rt,st,ot,at,lt,ut,ct,_t,pt,dt,ht,ft,gt,mt,yt,vt,bt,kt,wt,xt,St,Pt,Ct,At,Dt,Tt,Mt,Ot,Ft,It,Rt,qt;n=0,nt=0,Z=0,K=0,Q=!1,X=!1,z=60,B={4:{type:"hotels",position:null,closed:!1,rendered:!1},8:{type:"carhire",position:null,closed:!1,rendered:!1}},G={highlighted:null,pqs_form:null,first_visible:null,reference:null},ot=null,H=null,W=null,s=null,i=null,r=0,rt=!1,L=null,it=!1,st=null,o=null,q=null,a=null,qt=!1,It=function(t){return qt=t},F=function(){return qt},gt=function(t){return q=t},m=function(){return q},_t=function(t){return a=t},d=function(){return a},J=null,Y=!1,et=function(){return it=!1},Dt=function(t){return it=t},D=function(){return it},R=function(){return nt>0},At=function(t){return nt=t},k=function(){return Z},kt=function(t){return Z=t},A=function(){return K},j=function(){return K++},S=function(){return z},St=function(t){return z=t},tt=function(){var t,e;e=[];for(t in B)B[t].closed=!1,e.push(B[t].rendered=!1);return e},E=function(t){return B[t].rendered},ht=function(t,e){return B[t].rendered=e},V=function(t){return B[t].closed},pt=function(t,e){return B[t].closed=e},h=function(){return B},f=function(t){return B[t].position||+t},dt=function(t,e){return B[t].position=e},y=function(){return G.highlighted},mt=function(t){return G.highlighted=t},M=function(){return G.reference},Ot=function(t){return G.reference=t},at=function(t){return n=t},l=function(){return n},w=function(){return G.pqs_form},wt=function(t){return G.pqs_form=t},g=function(){return G.first_visible},ft=function(t){return G.first_visible=t},N=function(){return Q},yt=function(t){return Q=t},Ft=function(t){return ot=t},O=function(){return ot},bt=function(t){return H=t},b=function(){return H},vt=function(t){return X=t},v=function(){return X},ut=function(t){return s=t},c=function(){return s},lt=function(t){return i=t},u=function(){return i},xt=function(t){return W=t},x=function(){return W},Tt=function(t){return rt=t},U=function(){return rt},Rt=function(t){return L=t},I=function(){return L},ct=function(t){return o=t},_=function(){return o},Mt=function(t){return st=t},T=function(){return st},p=function(){return r},$=function(){return r++},Pt=function(t){return J=t},P=function(){return J},Ct=function(t){return Y=t},C=function(){return Y},t.exports={hasResults:R,setResults:At,getPollingRequestNumber:k,setPollingRequestNumber:kt,getRenderCount:A,incRenderCount:j,getPriceUpdateTimer:S,setPriceUpdateTimer:St,resetCrossSell:tt,getCrossSellConfig:h,isCrossSellClosed:V,setCrossSellClosed:pt,
isCrossSellRendered:E,setCrossSellRendered:ht,getCrossSellPosition:f,setCrossSellPosition:dt,getHighlightedItinerary:y,setHighlightedItinerary:mt,getSelectedItineraryRef:M,setSelectedItineraryRef:Ot,setApplicationId:at,getApplicationId:l,getPqsFormItineraryId:w,setPqsFormItineraryId:wt,getFirstVisibleItinerary:g,setFirstVisibleItinerary:ft,isMobile:N,setIsMobile:yt,setSessionCreatedTime:Ft,getSessionCreatedTime:O,setPendingRoute:bt,getPendingRoute:b,setLastPricingServiceData:vt,getLastPricingServiceData:v,setBookingPanelReason:ut,getBookingPanelReason:c,getBookingPanelCloseMethod:u,setBookingPanelCloseMethod:lt,setPqsFormView:xt,getPqsFormView:x,isSearchControlsRendered:U,setSearchControlsRendered:Tt,setVisibleInlineUpsell:Rt,getVisibleInlineUpsell:I,resetSavedFilter:et,setSavedFilter:Dt,getSavedFilter:D,setShownSEOAirlineInfo:It,getShownSEOAirlineInfo:F,setHasSEOAirlineInResults:gt,getHasSEOAirlineInResults:m,setChosenSEOAirline:_t,getChosenSEOAirline:d,setBpItineraryId:ct,getBpItineraryId:_,setSelectedItineraryPosition:Mt,getSelectedItineraryPosition:T,incrementBpOpenCount:$,getBpOpenCount:p,setRecommendations:Pt,getRecommendations:P,setRecommendationsClosed:Ct,getRecommendationsClosed:C}},function(t,e,n){var i,r,s,o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;i=n(14),r=n(46),s=n(47),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.onShowFiltersMX=function(){return r.trackMixpanel("Flight Day View Filter Opened",s.getResultContextData(this.itineraries.get("itineraries"),this.itineraries.get("pagination"),this.filters))},e.prototype.onClickDoneMX=function(){return r.trackMixpanel("Flight Day View New Filters Used",{"Interaction With Filter Heading":this.filters.get("interactions").with_header,"Filter departure times of any leg modified":this.filters.get("interactions").with_departure_time,"Filter Change Airport Modified":this.filters.get("interactions").with_change_airport,"Filter Mixed Airports Modified":this.filters.get("interactions").with_mixed_airports,"Filter Alliances Modified":this.filters.get("interactions").with_alliances,"Filter Alliances Number Selected":this.filters.get("alliances").getTotalChecked()})},e.prototype.trackGA=function(t,e){return null==e&&(e=!0),r.trackGA({action:"filters",label:t,trackOnce:e})},e.prototype.trackFiltersChanged=function(t){return r.trackMixpanel("Flight Day View Filter Changed",{"Interaction with Filter":t})},e}(i)},function(t,e,n){var i,r,s,o,a,l,u,c,p=[].slice;i=null,r=function(){return{}},s=function(t){return i=t,this},o=function(t){return r=t,this},l=function(t){return null==t&&(t={}),t.category||(t.category="day-view"),i("tracking-event").publish({ga:[t]}),this},c=function(t,e){return null==e&&(e={}),i("tracking-event").publish({mixpanel:[{name:t,props:_.extend(e,r(t))}]}),this},u=function(t,e,n){var s;return null==n&&(n={}),s=function(){var t;return t=("function"==typeof n?n():void 0)||n,_.extend(t,r(e))},i("tracking-event").publish({mixpanel:[{name:e,props:s,track_links:t}]}),this},a=function(){var t;return t=1<=arguments.length?p.call(arguments,0):[],i("tracking-event").publish({facebook:t}),this},t.exports={setChannel:s,setCommonPropertiesFn:o,trackGA:l,trackMixpanel:c,trackLinksMixpanel:u,trackFacebook:a}},function(t,e,n){var i,r,s,o,a,l,u,c,p,d,h,f,g,m,y,v,b,k,w,x,S,P,C,A,D,T,M,O,F,I,R,q,j,$,B,L,V,E,N,U,Q,G,X,H,W,z,J,Y,K,Z,tt,et,nt,it;Y=n(19)("options"),c=n(48)("results"),p=n(49),nt=n(44),W=n(19)("initial_query"),Z=n(51),g=n(25),f=n(52),z=n(53),v=n(60),h=n(10),K=n(21),it=n(23),tt=n(61),Q=n(63),et=n(64),d=n(27),S=function(t){var e,n,i,r,s;return r=t.get("stops"),n=t.get("departure_times"),s=W.get("trip_type"),i={},r.isModified()&&_.extend(i,{"Filter Stops Direct":o(r.get("direct")),"Filter Stops 1 Stop":o(r.get("one_stop")),"Filter Stops 2+ Stops":o(r.get("two_plus_stops"))}),it.isMultiDestination()?n.isModified()&&n.forEach(function(t,e){if(t.isModified())return i["Filter Departure Times Leg "+(e+1)+" Modified"]=!0}):((e=n.at(0))&&e.isModified()&&(i["Filter Departure Times Outbound Modified"]=!0),"return"===s&&(e=n.at(1))&&e.isModified()&&(i["Filter Departure Times Return Modified"]=!0)),t.get("duration").isModified()&&(i["Filter Journey Duration Modified"]=!0),t.get("airlines").isModified()&&(i["Filter Airlines Modified"]=!0),t.get("airports").isModified()&&(i["Filter Airports Modified"]=!0),t.get("change_airport").isChecked()&&(i["Filter Change Airport Checked"]=!0),_.isEmpty(i)&&(i.Filter="No filters applied"),i},A=function(t,e,n){var r,s,o,a,l,u;return r=t.get(e),o=r.get("legs"),u=o.getUniqueMarketingCarriers(),a=r.get("pricing_options"),s=a.hasMultiTicket(),l={"Has Multi-part Booking":s,"Mutli-part Booking Count":s?a.getMutliTicketOption().numberOfBookingsRequired():null,"Multi-part Booking Agents":s?a.getMutliTicketOption().get("agent_ids"):null,"Has Non-Protected Self Transfer Option":r.hasNPT(),"Has Protected Self Transfer Option":r.hasPST(),"Self Transfer Leg Count":o.getSelfTransferLegCount(),"Provider Count":a.length,"Max Stop Count":o.getMaxNumberOfStops(),Airlines:_.pluck(u,"alt_id"),"Is Multi-Airline":u.length>1,"Flight Duration":i(r),"Any Partner With Different Currency":X(a.getUniqueAgentIds())},n&&_.extend(l,{"Priced By Airline":a.getPricedByAirline(),"Is Sponsored":r.isSponsored()}),_.extend(l,x(t,r),F(a,n)),l},I=function(t,e,n,r){var s,o,a,l,u,c,p,d,h;return o=t.get(e),l=o.get("legs"),h=l.getUniqueMarketingCarriers(),p=o.get("pricing_options"),a=p.hasMultiTicket(),u=n.isMultiTicket(),c=[],d={"Is Multi-part Booking":u,"Multi-part Booking Index":u?r+1:null,"Mutli-part Booking Count":a?p.getMutliTicketOption().numberOfBookingsRequired():null,"Multi-part Booking Agents":a?p.getMutliTicketOption().get("agent_ids"):null,"Has Non-Protected Self Transfer Option":o.hasNPT(),"Has Protected Self Transfer Option":o.hasPST(),"Self Transfer Leg Count":l.getSelfTransferLegCount(),"Provider Count":p.length,"Max Stop Count":l.getMaxNumberOfStops(),Airlines:_.pluck(h,"alt_id"),"Is Multi-Airline":h.length>1,"Flight Duration":i(o)},n&&(_.extend(d,{"Provider Position":n.get("position")+1,"Agent Id":u?null:n.getUniqueAgentIds()[0],Priced:!n.isUnpriced(),"Is Facilitated":n.isFacilitatedBooking(),"Is Airline":n.hasCarrierAgent(),"Priced By Airline":p.getPricedByAirline(),"Is Sponsored":n.isSponsored()||o.isSponsored()}),n.isOptimisedForMobile()&&c.push("Is Mobile Friendly"),X(p.getUniqueAgentIds())&&c.push("Any Partner With Different Currency"),X(n.getUniqueAgentIds())&&c.push("This Partner With Different Currency"),_.extend(d,{"Partner Meta Data":c}),(s=n.get("click_origin"))&&_.extend(d,{"Click Origin":s}),n.isUnpriced()||_.extend(d,{"Quote Age":n.getQuoteAge(),"Final Price":n.getPrice()})),_.extend(d,x(t,o),F(p,n)),d},F=function(t,e){var n,i,r,s,o,a;return e?(n=t.getBestPQSScoreOption(),r=t.getCheapest(),i=r&&r.getMainItem().getAgentPQSData(),o=e.getMainItem().getAgentPQSData(),s=_.map(t.getUniqueAgentIds(),function(t){return c.getPQSData(t)||{}}),a={"PQS Of Cheapest Agent":i?Z.getProperty(i,"rating"):null,"Cheapest And Best PQS":e===r&&e===n,"Cheapest Price":r?r.getPrice():null},o&&_.extend(a,{PQS:Z.getProperty(o,"rating"),"PQS Star Rank":Z.getOverallRank(s,o.rating,o.rating_status),"Number Of PQS Reviews":Z.getProperty(o,"feedback_count")}),a):{}},x=function(t,e){var n,i,r,s,o,a;return i=t.getBestFQS(),s=t.getCheapest(),o=e.getPrice(),r=s&&s.getPrice(),n=i&&i.getFQSScore(),o&&r?(a=100*(o-r)/r,a=a>0?Math.ceil(a):Math.floor(a)):a=null,{FQS:e.getFQSScore(),"FQS Rank":t.getFQSRank(e),"Cheapest And Best FQS":(!r||r===o)&&n===e.getFQSScore(),"Price Delta Percentage Vs Cheapest":a}},P=function(t,e){var n,i;return n=Y.get("previousCurrency"),i={"Poll Count":e,"First Visible Price Delta Percent":p.getCheapestVisiblePriceDelta(t),"First Visible Price Is NPT":null!=t?t.hasNPT():void 0},n&&n===W.get("currency")&&_.extend(i,{"First Visible Price Ratio":p.getCheapestVisiblePriceRatio(t)}),i},y=function(t,e,n,i,s,o){var a,l,u,h,f,g,y,v;return a=p.getAlertPrice(),u=Y.get("previousCurrency"),l=t.getFirstDirect(),h={"Lowest Price":p.getCheapestPrice(),"Previous Price":isNaN(Y.get("previousPrice"))?null:parseInt(Y.get("previousPrice"),10),"Cheapest Price Delta Percent":p.getCheapestPriceDelta(),"Cheapest Visible Price Delta Percent":p.getCheapestVisiblePriceDelta(n[0]),"Itinerary Count Total":t.length,"Itinerary Count Qualified":i,"Itinerary Count Per Page":e.get("per_page"),"Is FaB Available":t.hasFacilitatedBooking(),"Cheapest Price is NPT":null!=(f=t.getCheapest())?f.hasNPT():void 0,"Cheapest Visible Price Is NPT":null!=(g=n[0])?g.hasNPT():void 0,"No Direct Result Found":s,"Direct Shown On First Page":o,"Dynamic Ad Id":z.getTrackingData().airline,"Dynamic Ad Visible":z.getTrackingData().rendered,"Price Source Id":Y.get("priceSourceId"),"Percentage PQS Unavailable":c.getTotal()>0?Math.floor(100*_.size(c.getWithPQSStatus("unavailable"))/c.getTotal()):null,"SEO Airline in Results":nt.getHasSEOAirlineInResults(),"SEO Airline Code":nt.getChosenSEOAirline(),"Route Type":r(t.models,t.getSortName()),"First Page Of Results":r(_.take(t.models,10),t.getSortName())},"true"!==d.getQueryStringParam("flexible_origin")||it.isMultiDestination()||_.extend(h,m(t),{"Referred From Flexibility Service":["Shift Dates For Direct"]}),null!=u&&u===W.get("currency")&&_.extend(h,{"Cheapest Price Ratio":p.getCheapestPriceRatio(),"Cheapest Visible Price Ratio":p.getCheapestVisiblePriceRatio(n[0]),"Promoted Price Provider":Y.get("previousProvider")}),a&&_.extend(h,{"Alert Price":a,"Alert Price Checked":p.getAlertPriceChecked(),"Alert Price Delta Percent":p.getAlertPriceDelta(),"Alert Price Age (Hours)":p.getAlertPriceAgeInHours()}),n[0]&&_.extend(h,{"Lowest Visible Price":n[0].getPrice(),"Lowest Visible Depart City Id":n[0].getFirstLeg().getDepartureCityAltId(),"Lowest Visible Arrive City Id":n[0].getFirstLeg().getArrivalCityAltId()}),l&&_.extend(h,{"First Direct Price":l.getPrice(),"First Direct Depart City Id":null!=(y=l.getFirstLeg())?y.getDepartureCityAltId():void 0,"First Direct Arrive City Id":null!=(v=l.getFirstLeg())?v.getArrivalCityAltId():void 0}),_.extend(h,V()),h},N=function(t,e,n){var i;return i=t.length,_.extend(S(n),{"Itinerary Count":i,"Page Number":e.get("page"),"Page Count":Math.ceil(i/e.get("per_page")),"Results Loaded":g.get("loading_complete")===!0,Sort:s(t.getSortName(),t.isSortModified())})},U=function(t,e,n,s,o,a,l){var u,c,p,d;return null==a&&(a="Day View"),p=t.get(s),d=I(t,s,o,l),_.extend(d,S(n),N(t,e,n),{"Itinerary Position":p.get("position")+1,"Filter Change Airport Checked":n.get("change_airport").isChecked(),"Duration Delta Percentage Vs Shortest":v(i(p),i(t.getFastest())),"Price Delta Percentage Vs Cheapest Direct":(c=t.getCheapestDirect())?v(p.getPrice(),c.getPrice()):null,"Itinerary Sort Position":_.findIndex(t.models,function(t){return t.id===s})+1,"Itinerary Screen Position":p.get("screen_position"),"Provider List":q(p.get("pricing_options")),"Provider Prices":j(p.get("pricing_options")),"Provder PQS Scores":B(p.get("pricing_options")),"Agent Pre Redirect ID":tt.getId(),"Session Id":f.get("session_id"),"Event Origin":a}),u=n.get("alliances"),_.extend(d,{"Filter Alliances Modified":n.get("interactions").with_alliances,"Filter Alliances Number Selected":u.getTotalChecked(),"Route Type":r(t.models,t.getSortName()),"First Page Of Results":r(_.take(t.models,10),t.getSortName())}),_.extend(d,V()),d},M=function(t,e,n,i,r,s,o){var a,l;return null==s&&(s="Day View"),l=U(t,e,n,i,r,s,o),a=r.get("items"),_.extend(l,{"Multi-part Agent PQS Scores":$(a),"Multi-part Agent Prices":L(a)}),l},E=function(t,e,n){return{"Redirected From":t,"Priced By Airline":e.getPricedByAirline(),"Is Facilitated":n.isFacilitatedBooking(),"Agent Pre Redirect ID":tt.getId()}},w=function(t,e,n){var i,s,o;return i=t.get(n),s=i.get("pricing_options").getMainPricingOption(),o=A(t,n,s),o["Itinerary Position"]=_.isNumber(e)?e+1:null,o["Itinerary Screen Position"]=i.get("screen_position"),o["Provider List"]=q(i.get("pricing_options")),o["Provider Prices"]=j(i.get("pricing_options")),o["Provider PQS Scores"]=B(i.get("pricing_options")),o["Prior Booking Panels"]=nt.getBpOpenCount(),o.Reason=_.map(b(s),function(t){switch(t){case"manual":return"Manual";case"more-agents":return"View All Agents";case"automatic":return"Automatic";case"multiticket-booking":return"Multiticket Booking";case"GDS-cost-save":return"Update On Booking Panel";case"price-has-age":return"Price Not Live";case"no-deeplink":return"Missing Deeplink";case"self-transfer":return"Protected Self Transfer";case"reopen":return"Reopen";case"baggage-information":return"Baggage Information";case"itinerary-button":return"Itinerary Button Clicked";case"itinerary-body":return"Itinerary Body Clicked";default:return"Unknown"}}),o["Route Type"]=r(t.models,t.getSortName()),o["First Page Of Results"]=r(_.take(t.models,10),t.getSortName()),o},T=function(t,e,n,i){var r,s;return s=w(t,e,i),r=n.get("items"),_.extend(s,{"Provider Position":n.get("position")+1,"Multi-part Agent PQS Scores":$(r),"Multi-part Agent Prices":L(r)}),s},k=function(t){var e,n,i;return n=t.getMain().get("pricing_options"),e=n.getMainPricingOption(),i=_.omit(A(t,t.getMain().get("id"),e),["Provider Position","Agent Id"]),_.extend(i,{"Quote Agents":n.getUniqueAgentIds()}),i},b=function(t){var e,n;return n=nt.getBookingPanelReason(),e=n.slice(),_.contains(n,"automatic")&&(t.isMultiTicket()&&e.push("multiticket-booking"),t.hasPriceForBookingOnly()&&e.push("GDS-cost-save"),t.hasPST()&&e.push("self-transfer"),t.isLive()&&!t.hasAgeExceeded()||e.push("price-has-age"),1!==e.length||t.getDeeplink()||e.push("no-deeplink")),_.contains(n,"more-agents")&&e.unshift("automatic"),e},G=function(t){return t=t.charAt(0).toUpperCase()+t.substring(1),t=function(){switch(t){case"Airlines":return"Airline";case"Duration":return"TotalDuration";case"Outbound_departure_time":return"OutboundDep";case"Return_departure_time":return"ReturnDep";case"FQS":return"Best";default:return t}}(),t+"_asc"},O=function(){var t,e;return e=W.get("trip_type"),t=W.get("legs"),"multi-destination"!==e?t[0].origin+"_"+t[0].destination:null},q=function(t){return t.map(function(t){return t.isMultiTicket()?"multipart_booking":t.getUniqueAgentIds()[0]})},j=function(t){return t.map(function(t){return t.getPrice(K.getTotal())})},B=function(t){return t.map(function(t){return t.isMultiTicket()?t.get("items").getLowestPQSRating():t.getMainItem().getAgentPQSRating()})},$=function(t){return t.map(function(t){return t.getAgentPQSRating()})},L=function(t){return t.map(function(t){return t.getPrice()})},C=function(t,e,n){var i,r;return!t&&e?"Prevented":e?(i=n.getSelectedDepart().isDirect(),n.isReturn()?(r=n.getSelectedReturn().isDirect(),i&&r?"Directs Available Both Legs":i&&!r?"Direct Available Depart":!i&&r?"Direct Available Return":"No Directs Available"):i?"Direct Available Depart":"No Directs Available"):n.hasData()?n.directsExist()?"Directs Exist":n.alternativesExist()?void 0:"No Alternatives":"No Data"},X=function(t){var e;return!!h.isOn("partner_currency")&&(e=_.intersection(t,_.keys(h.getVariant("partner_currency").agents)),e.length>0)},o=function(t){return t.isEnabled()?t.isChecked()?"Checked":"Unchecked":"Disabled"},s=function(t,e){return e?{price:"Price",duration:"Total Journey Time",airlines:"Airline",stops:"Stops",outbound_departure_time:"Outbound Departure Time",return_departure_time:"Return Departure Time",fqs:"Best"}[t]||"Unknown":"No Sort Option Used"},i=function(t){return t.getTotalDuration()/60},m=function(t,e,n){return null==e&&(e=J),null==n&&(n=D),_.reduce(_.range(it.isReturn()?2:1),function(i,r){var s;return s=d.getQueryStringParam("flexible_"+(0===r?"depart":"return")),i["Directs Service Accuracy Leg "+(r+1)]=[s,e(n(t,r),s)?"correct":"incorrect"],i},{})},J=function(t,e){return 0===t&&"direct"===e||t>0&&"indirect"===e},D=function(t,e){var n;return 0===t.length?null:_.isNumber(e)&&(n=t.min(function(t){return t.getStopCountForLeg(e)}))?n.getStopCountForLeg(e):null},H=function(t){return!!t.length&&_.every(t,function(t){return Z.getRank(t.rating)<3})},R=function(t,e){var n,i;return t&&t.length?(t=_.filter(t,function(t){if(t.getPrice())return t}),"price"!==e&&(t=_.sortBy(t,function(t){return t.getPrice()})),t.length?(i=_.first(t).getPrice(),n=_.last(t).getPrice(),Math.floor((n-i)/i*100)):0):0},a=function(t){return _.filter(t,function(t){return t.hasChangeAirport()}).length},l=function(t){return _.filter(t,function(t){return t.hasNPT()}).length},u=function(t){return _.filter(t,function(t){return t.hasUnpricedOptionsOnly()}).length},r=function(t,e){var n,i,r,s,o,p;return o=t.length,0===o?null:(i=_.size(_.filter(t,function(t){return t.containsMaxStopsOf(0)})),r=_.size(_.filter(t,function(t){return t.containsMaxStopsOf(2)})),n=a(t),s=l(t),p=u(t),["Length: "+et.getLength(Y.get("distance")),"Directs: "+Math.floor(i/o*100),"Multi-stop: "+Math.floor(r/o*100),"Change airport: "+Math.floor(n/o*100),"NPST: "+Math.floor(s/o*100),"Unpriced: "+Math.floor(p/o*100),"Poor PQS: "+H(c.getWithPQS()),"Price delta: "+R(t,e)])},V=function(){return"true"===d.getQueryStringParam("recommended")?{Recommended:!0}:{}},t.exports={getItinerary:A,getPartnerSelectedItinerary:I,getFQSData:x,getFirstResultShown:P,getDayViewCompleted:y,getResultContextData:N,getResultSelected:U,getMultiPartResultSelected:M,getRedirectStarted:E,getDetailsLoaded:w,getMultiPartDetailsLoaded:T,getDetailsLiveUpdate:k,getDetailsLabels:b,getFilters:S,getProviderList:q,getProviderPricesList:j,getProvidersPqsList:B,getProvidersPqsFromItems:$,getProvidersPricesFromItems:L,getSortLabelGA:G,getNoResultLabelGA:O,getAccuracyText:m,isAvailabilityAccurate:J,getMinStopCountForLeg:D,hasPoorPqs:H,getPriceDelta:R,hasPartnerWithDifferentCurrency:X,getFlexibleDaysReason:C}},function(t,e,n){var i,r,s,o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;r=n(43),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.getTotal=function(){return _.size(this.data)},e.prototype.getPending=function(){return _.reduce(this.data,function(t,e){return"pending"===e.update_status&&t.push(e.name||"Unknown"),t},[])},e.prototype.getPQSData=function(t){var e;return e=this.get(t)||{},"undefined"===e.rating_status?null:_.pick(e,"rating","feedback_count","rating_breakdown","rating_status")},e.prototype.getWithPQS=function(){return _.filter(this.data,function(t){return null!==this.getPQSData(t.id)},this)},e.prototype.getWithPQSStatus=function(t){return _.filter(this.data,function(e){return(e||{}).rating_status===t})},e}(r),s={},t.exports=function(t){return s[t]||(s[t]=new i)}},function(t,e,n){var i,r,s,o,a,l,u,c,_,p,d,h,f,g,m;f=n(19)("options"),m=n(50),g=n(21),c=function(t){var e;return t?(e=f.get("previousPrice"),isNaN(e)?h(e):p(parseInt(e,10),t.getPrice(g.getTotal()))):null},_=function(t){var e;return t?(e=f.get("previousPrice"),isNaN(e)?h(e):d(parseInt(e,10),t.getPrice(g.getTotal()))):null},a=function(){var t;return t=m.get("itineraries.total.min_price"),t?t/g.getTotal():null},l=function(t){var e;return null==t&&(t=a),e=f.get("previousPrice"),isNaN(e)?h(e):p(parseInt(e,10),t())},u=function(t){var e;return null==t&&(t=a),e=f.get("previousPrice"),isNaN(e)?h(e):d(parseInt(e,10),t())},i=function(){return f.get("alertPrice")},o=function(){var t;return t=i(),isNaN(t)?null:p(parseInt(t,10),Math.ceil(a()))},s=function(){return f.get("alertPriceChecked")},r=function(){var t;return t=Date.parse(s()),isNaN(t)?null:parseFloat(((Date.now()-t)/36e5).toFixed(2))},p=function(t,e){var n;return t&&e?(n=(t-e)/e*100,n>0?Math.ceil(n):Math.floor(n)):null},d=function(t,e){var n;return t&&e?(n=100*(e-t)/t,n>0?Math.ceil(n):Math.floor(n)):null},h=function(t){var e;return e={OneWayNone:"One-way date unpriced",ReturnOnePrice:"Return one date unpriced",ReturnNoPrices:"Return both dates unpriced"},e[t]||null},t.exports={getCheapestVisiblePriceDelta:c,getCheapestVisiblePriceRatio:_,getCheapestPrice:a,getCheapestPriceDelta:l,getCheapestPriceRatio:u,getAlertPrice:i,getAlertPriceDelta:o,getAlertPriceChecked:s,getAlertPriceAgeInHours:r,getPriceDeltaPercent:p,getPriceRatio:d,getUnpricedMessage:h}},function(t,e,n){t.exports=new(n(20))},function(t,e){var n,i,r,s,o,a;s=function(t){return null==t?null:0===t?.5:t>5?5:Math.round(2*t)/2},o=function(t){return null==t?null:""+t.toFixed(1)},a=function(t){return _(t).map(function(t){return s(t.rating)}).compact().uniq().sort().reverse().value()},i=function(t,e,n){return"unavailable"===n?n:_.indexOf(a(t),s(e))+1},n=function(t,e,n,i){var r,a,l,u;return null==i&&(i=0),u=t||{},r=u.feedback_count,a=u.rating,l=u.rating_status,e===n?null:"unavailable"===l?null:(r||(r=0),a||(a=0),{rating:Math.min(5,a+i),feedback_count:r,feedback_label:""+r,rank:o(s(a+i))})},r=function(t,e){var n;return t?(n=t.rating_status,"unavailable"===n?n:t[e]):null},t.exports={getRank:s,getUniqueRatings:a,getDisplayData:n,getOverallRank:i,getProperty:r}},function(t,e,n){t.exports=new(n(20))},function(t,e,n){var i,r,s,o,a,l,u,c,p,d,h,f,g,m,y,v;v=n(26),y=n(46),i=n(5),o=n(10),h=n(54),u=n(59),m="sponsored-shadow",a="sponsored-top",f="maybe",r=null,g=null,p=!1,c=10,s=new i,l=function(){return $("#"+m+" > div > iframe").contents().find("body")},d=function(t){return function(t){return y.trackMixpanel("Flight Day View Dynamic Ad Clicked",{Priced:$(t.currentTarget).parents(".dynamic-ad").find("#price").is(":visible")}),s.channel("inline-ad-clicked").publish()}}(this),t.exports={insertAdInline:function(t){return function(t){var e,n,i;if(g=g||t,"yes"===f&&g&&0===g.find(".dynamic-ad").length)return n=l(),p||(r=n.find(".result-sponsored").data("airline")||null,y.trackMixpanel("Flight Day View Dynamic Ad Loaded",{"Dynamic Ad Id":r}),p=!0),e=n.clone(!1),i=e.find("#click-through").attr("href"),g.prepend($(u({divId:a})).html(e.find(".dynamic-ad"))),g.find(".tap-anywhere-ad").attr("href",i).on("click",d)}}(this),onAdIframeReady:function(t){var e;if(t.containerId===m)return e=setInterval(function(t){return function(){var n;if("yes"===f||0===c){if(clearInterval(e),0===c)return f="no"}else if(c-=1,n=l(),n.find(".card").length&&(f="yes",t.insertAdInline()),n.length)return $("#"+m).hide()}}(this),300)},getRemoteTemplate:function(){var t;return t={select:v("ktxt_select"),sponsored:"Sponsored"},_(["airline","reasons","headline","loading","airline_logo"]).forEach(function(e){return t[""+e]="<%="+e+"%>"}),h(t)},getShadowContainer:function(){return"<div id='"+m+"' class='sponsored-cloak'></div>"},fetchData:function(){return Skyscanner.Common.observer.publish("fetch-advert",[{containerId:m,advertType:"flightsInline",dimensions:[[1024,66]],pageLocation:"inline"}]),this},getTrackingData:function(){return{airline:r,rendered:f}},getBus:function(){return s}}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<article class="card result-sponsored clearfix" data-airline="'+(null==(__t=airline)?"":__t)+'"><a class="tap-anywhere-ad" href="javascript:void(0)" target="_blank"><div class="card-body clearfix"><header class="sponsored-header clearfix"><div class="airline-logo"><img src="'+(null==(__t=airline_logo)?"":__t)+'" alt="'+(null==(__t=airline)?"":__t)+'"/></div><div class="sponsored-badge"><small>'+(null==(__t=sponsored)?"":__t)+'</small></div><div class="airline-copy"><h3>'+(null==(__t=headline)?"":__t)+"</h3><h5>"+(null==(__t=reasons)?"":__t)+'</h5></div></header></div><aside class="notch-holder"></aside><div class="mainquote clearfix"><div class="mainquote-total" aria-hidden="true"></div><div class="mainquote-wrapper clearfix"><span class="mainquote-price gray select-action"><span class="total-sponsored-price"></span></span><span class="mainquote-price big"><span id="loading" class="sponsored-loading">'+(null==(__t=loading)?"":__t)+'</span><span id="price" class="sponsored-price"></span></span><div class="mainquote-select clearfix">'+(null==(__t=__webpack_require__(55)({is_selected:!1,has_icon:!0,has_pointer:!0,extra_class:"expand-cba",text:select}))?"":__t)+'</div><span class="ticketing-agent mainquote-agent">'+(null==(__t=airline)?"":__t)+'</span></div></div><div class="mainquote-minimal call-to-action"><div class="mainquote-minimal-wrapper clearfix"><span class="mainquote-minimal-select clearfix" title="'+(null==(__t=select)?"":__t)+'"><div class="clearfix">'+(null==(__t=__webpack_require__(55)({is_selected:!1,has_icon:!0,has_pointer:!0,extra_class:"expand-cba",text:select}))?"":__t)+'<div class="button-helper"><div class="mainquote-price big"><div id="loading" class="sponsored-loading">'+(null==(__t=loading)?"":__t)+'</div><div id="price" class="sponsored-price"></div></div><div class="mainquote-minimal-price"><div id="price" class="total-sponsored-price"></div></div><span class="ticketing-agent mainquote-agent">'+(null==(__t=airline)?"":__t)+'</span></div></div></span></div></div><div class="details clearfix"><div class="details-booking"></div><div class="details-group clearfix"><div class="sponsored-badge"><small>'+(null==(__t=sponsored)?"":__t)+"</small></div></div></div></a></article>";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj){obj.has_pointer&&(obj.has_icon=!0),__p+="";var getDomAttributes=__webpack_require__(56).default,extra_data=getDomAttributes(obj.extra_data,"data-"),extra_attrs=getDomAttributes(obj.extra_attrs);obj=_.assign({extra_class:"",is_large:!1,is_selected:!1,is_disabled:!1,has_icon:!1,is_secondary:!1,open_in_new_window:!0,extra_data:extra_data,extra_attrs:extra_attrs,onclick:!1,options:{},is_link:!1,icon_type:"pointer"},obj),__p+=""+(null==(__t=__webpack_require__(57)(obj))?"":__t)}return __p}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return _.isEmpty(t)?"":_.reduce(t,function(t,n,i){return""+t+e+i+'="'+n+'"'}," ")}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj){var bpk_class="bpk-button"+(is_large?" bpk-button--large":"")+(is_secondary?" bpk-button--secondary":"")+(is_selected?" bpk-button--selected":"")+(is_link?" bpk-button--link":"")+(extra_class?" "+extra_class:"");__p+="",obj.deeplink?(__p+='<a class="'+(null==(__t=bpk_class)?"":__t)+'" href="'+(null==(__t=deeplink.url)?"":__t)+'" title="'+(null==(__t=obj.title?title:text)?"":__t)+'" ',deeplink.type&&(__p+='data-deeplink="'+(null==(__t=deeplink.type)?"":__t)+'"'),extra_data&&(__p+=" "+(null==(__t=extra_data)?"":__t)),extra_attrs&&(__p+=" "+(null==(__t=extra_attrs)?"":__t)),open_in_new_window&&(__p+='target="_blank"'),__p+=(null==(__t=is_disabled?' disabled="disabled"':"")?"":__t)+">"):(__p+='<button class="'+(null==(__t=bpk_class)?"":__t)+'"',onclick&&(__p+=' onclick="'+(null==(__t=onclick)?"":__t)+'"'),__p+=null==(__t=is_disabled?' disabled="disabled"':"")?"":__t,extra_data&&(__p+=" "+(null==(__t=extra_data)?"":__t)),extra_attrs&&(__p+=" "+(null==(__t=extra_attrs)?"":__t)),__p+=">"),__p+="",__p+=options.cta_button_info?""+(null==(__t=__webpack_require__(58)({options:options,extra_class:"",has_icon:has_icon}))?"":__t):'<span class="bpk-text">'+(null==(__t=text)?"":__t)+"&nbsp;</span>",__p+="",has_icon&&(__p+='<span class="bpk-icon-'+(null==(__t=is_large?"lg":"sm")?"":__t)+" bpk-icon-"+(null==(__t=icon_type)?"":__t)+" bpk-icon-"+(null==(__t=is_large?"lg":"sm")?"":__t)+'--align-to-button"></span>'),__p+="",__p+=obj.deeplink?"</a>":"</button>",__p+=""}return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj){var cta=options.cta_button_info;__p+='<span class="'+(null==(__t=extra_class)?"":__t)+" cta-small-text",has_icon&&(__p+=" has-cta-icon"),__p+='">'+(null==(__t=cta.ctaText)?"":__t)+'&nbsp;</span><span class="'+(null==(__t=extra_class)?"":__t)+' visibility-hidden">'+(null==(__t=cta.longestText)?"":__t)+"&nbsp;</span>"}return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<li id="'+(null==(__t=divId)?"":__t)+'" class="day-list-item sponsored-item clearfix"></li>';return __p}},function(t,e){t.exports=function(t,e){var n;return t&&e?(n=(t-e)/e*100,n>0?Math.ceil(n):Math.floor(n)):null}},function(t,e,n){var i,r,s,o,a;s=n(62).default,i=n(27),r=n(10),o=null,a=function(){return o=s()},t.exports={regenUrl:function(t,e){return a(),"light"===e||r.isOn("new_skippy")?i.addQueryStringParam(t,"pre_redirect_id",o):t},getId:function(){return o}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}},function(t,e){t.exports=function(t){return t.hasNPT()?"non-protected":t.hasPST()?"protected":null}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,n){var i=t/724;return i>e&&i<=n},i=function(t){return n(t,0,3)},r=function(t){return n(t,3,6)},s=function(t){return n(t,6,1/0)},o=function(t){var e=null;return i(t)?e="Short":r(t)?e="Medium":s(t)&&(e="Long"),e?e+" Haul":null},a=function(t,e){var n={},i=!1;try{n=JSON.parse(t)}catch(t){}return _.forIn(n,function(t,n){(_.contains(t,e[n])||_.contains(t,"All"))&&(i=!0)}),i};e.isShortHaul=i,e.isMediumHaul=r,e.isLongHaul=s,e.getLength=o,e.validate=a},function(t,e,n){var i;i=n(26),t.exports=function(t){switch(t){case"Star Alliance":return i("ktxtDayViewResults_AirlineAlliances_StarAlliance");case"oneworld":return i("ktxtDayViewResults_AirlineAlliances_Oneworld");case"SkyTeam":return i("ktxtDayViewResults_AirlineAlliances_SkyTeam");default:return""}}},function(t,e,n){var i,r,s,o,a,l,u,c,p,d,h,f,g,m,y,v,b,k,w,x,S,P,C,A,D,T,M,O,F,I,R,q,j,B,L,V,E,N,U,Q,G,X,H,W,z,J,Y,K,Z,tt,et,nt,it,rt,st,ot,at=function(t,e){return function(){return t.apply(e,arguments)}},lt=function(t,e){function n(){this.constructor=t}for(var i in e)ut.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},ut={}.hasOwnProperty;R=n(8),U=n(6),rt=n(26),j=n(67),o=n(14),C=n(27),S=n(28),H=n(21),ot=n(23),J=n(68),w=n(48)("results"),W=n(42)("results"),D=n(69)("results"),M=n(10),et=n(50),Y=n(41),O=n(52),G=n(19)("options"),V=n(19)("initial_query"),tt=n(44),v=n(70),b=n(100),k=n(101),f=n(105),p=n(107),g=n(110),d=n(111),y=n(128),r=n(129),m=n(130),u=n(136),c=n(137),i=n(143),P=n(146),s=n(147).default,L=n(148).getLegs,nt=n(46),z=n(51),q=n(150),F=n(25),A=n(133),Q=n(149),I=n(153),X=n(154),B=n(155),E=n(156),it=n(157).default,T=n(158),a=n(159),h=n(163),l=n(164),x=n(165),Z=n(40),K=n(167),st=n(98),N=n(168),t.exports=function(t){function e(t){this.getTotalItinerariesLabel=at(this.getTotalItinerariesLabel,this),e.__super__.constructor.apply(this,arguments),this.flexibleDays=new c({controller:this,el:$("#day-flexible-days-section")}),this.results=new v({controller:this,el:$("#day-section"),$body:t.$body,is_mobile:tt.isMobile()}),this.sort=new b({controller:this,el:$("#mobile-sort-controls"),$body:t.$body}),this.upsell=new k({controller:this,el:$("#upsell-panel"),$body:t.$body,transfer:G.get("airportTransfers")}),this.fqsTabs=new p({controller:this,el:$("#fqs-info"),$body:t.$body}),M.isOn("expiry_timer")&&(this.expiryChecker=new u({
el:$("#session-expiry-panel"),$wrapper:$("#content-wrap"),$body:t.$body})),G.get("passengerCountReset")&&(this.apdMessage=new i({legs:G.get("legs"),el:$("#apd-popup-section")})),ot.isMultiDestination()||(this.priceAlert=new m({el:$("#price-alerts-section"),$body:t.$body}))}return lt(e,t),e.prototype.mixins=[g,d,y,r],e.prototype.initialize=function(){var t,e;if(this.bus.channel("blink-curtain").subscribe(_.bind(this.blinkCurtain,this)),this.bus.channel("auto-open-price-alert").subscribe(_.bind(this.autoOpenPriceAlert,this)),this.bus.channel("booking-panel-exit").subscribe(_.bind(this.saveAttachHomePageCookie,this)),this.bus.channel("show-pqs-on-results").subscribe(function(t){return function(e,n){return t.loadPqsAfterLR(t.getItineraryFromCid(e),n,"results",t.results)}}(this)),this.bus.channel("load-upsell").subscribe(_.bind(this.loadUpsellPanel,this)),this.bus.channel("reset-pagination").subscribe(_.bind(this.resetPagination,this)),this.bus.channel("cancel-session-expiry").subscribe(function(t){return function(){return t.expiryChecker&&t.expiryChecker.resetTimer()}}(this)),this.inlineCrossSell=this._createInlineCrossSell(),this.fqsTabModel=this.itineraries.get("fqsTabs"),ot.isMultiDestination()||(t=$("#price-alert-button1,#price-alert-button2"),this.priceAlert.getBus().channel("click-done").subscribe(_.bind(function(){return this.router.goBack()},this)),this.priceAlert.getBus().channel("button-state-change").subscribe(_.bind(function(e){return t.removeClass("error adding added").addClass(e).prop("disabled","error"===e).find(".price-alerts-message").text(this.getAlertButtonLabel(e))},this)),this.priceAlert.getBus().channel("newsletter-signup").subscribe(_.bind(function(t){return this.bus.channel("newsletter-signup").publish({email:t})},this))),null!=(e=this.expiryChecker)&&e.getBus().channel("restart-app").subscribe(this.bus.channel("restart-app").publish),G.get("passengerCountReset"))return this.bus.channel("cancel-session-expiry").publish(),this.apdMessage.getBus().channel("open-passenger-controls").subscribe(function(t){return function(e){return G.set("passengerCountReset",!1),tt.isSearchControlsRendered()?(e.resolve(),t.bus.channel("open-passenger-controls").publish()):(t.bus.channel("open-search-controls").publish(),t.bus.channel("search-controls-rendered").subscribe(function(){return e.resolve(),t.bus.channel("open-passenger-controls").publish()}))}}(this)),this.apdMessage.getBus().channel("reload").subscribe(function(t){return function(){return G.set("passengerCountReset",!1),t.bus.channel("flights-navigate").publish({adultsV2:H.getOriginal("adults")})}}(this))},e.prototype._createInlineCrossSell=function(){var t,e,n,i,r;return e=tt.getCrossSellConfig(),_.forEach(e,function(t){return function(n,i){return e[i].provider=t[n.type]}}(this)),r=null,M.isOn("custom_inline_xsell")&&(n=M.getVariant("custom_inline_xsell"),i=M.getVariant("custom_inline_xsell_variant"),t=M.getVariant("custom_inline_xsell_endpoint"),r=new l(n,i,e,t)),new h(e,r)},e.prototype.hideFlexibleDays=function(){var t;return this.flexibleDays.hide(),this.results.show(),this.results.changeFooterMsgVisibility(!0),null!=(t=this.expiryChecker)&&t.startTimer(),this.bus.channel("re-render").publish({filters:!0,results:!0,trigger:"flexible-days"}),this.bus.channel("show-date-nudgers").publish(),this.bus.channel("init-need-alts").publish()},e.prototype.buildFlexibleDays=function(t){if(null==t&&(t={}),t.leg1)return this.flexibleDays.build(t)},e.prototype.canShowFlexibleDays=function(t){var e,n,i,r;return!(t>0)&&(!ot.isMultiDestination()&&("true"!==C.getQueryStringParam("flexible_origin")&&(("home"===(r=C.getQueryStringParam("ref"))||"flights_seo_landing_page"===r||"day-view"===r)&&(e=this.flexibleDays.dataAllowsDisplay(),e&&(i=V.getStorage(),n=B.hasBeenShown(i),B.saveRoute(i)),e&&!n))))},e.prototype.showFlexibleDays=function(){return this.flexibleDays.render(!0).show(),this.results.hide(),this.bus.channel("cancel-session-expiry").publish(),this.results.changeFooterMsgVisibility(!1)},e.prototype.redirectToNewSearch=function(t,e,n){return n?this.hideFlexibleDays():this.bus.channel("flights-navigate-with-options").publish({overrides:t,extraUrlParams:e})},e.prototype.shutdown=function(){return this.closePanel(),this.renderItinerariesInfo(0,0),this.renderLoading([]),this.renderItinerariesHeader(0,!0),this.results.applyStateResultsClass("no-results"),this.results.applyStateLoadingClass("loading"),ot.isMultiDestination()||this.priceAlert.hidePanel(),M.isOn("expiry_timer")&&this.expiryChecker.shutdown(),this.renderItinerariesHeader.complete=!1,this.fqsTabs.shutdown(),tt.resetSavedFilter(),tt.setHasSEOAirlineInResults(null)},e.prototype.shouldAnimatePlaneOnItinerary=function(t,e){return M.isOn("ticket_style_results")&&(t&&!this.completedEventSent||_.any(["pagination","close-mobile-panel","filter"],function(t){return _.contains(e,t)}))},e.prototype.navigateToExpandedToast=function(){if(this.avgPriceToast)return this.avgPriceToast.show()},e.prototype.removeAvgPriceIndicator=function(){return this.avgPriceToast?this.avgPriceToast.dismiss():this.results.dismissAvgPriceTooltip()},e.prototype.renderAvgPriceIndicator=function(t){return _.delay(function(e){return function(){if(!e.avg_price_indicator_shown&&e.results.$el.is(":visible")&&P.canShow(_.first(t),"results"===e.router.getCurrent()))return P.saveShown(),e.avg_price_indicator_shown=!0,C.getCssMaxWidth()<=600?(e.avgPriceToast=new s({el:"#fss-avg-price-toast",controller:e})).show():e.results.renderAvgPriceTooltip(G.get("helpUrl")("avg_price")),S(e,e.onAvgPriceMessageShown)}}(this),1e3)},e.prototype.onExpandedToastDismissed=function(){return this.router.navigateTo("results",{replace:!0})},e.prototype.onAvgPriceInteractionMX=function(t){return S(this,this.onAvgPriceInteraction,t)},e.prototype.render=function(t){var e,n,i,r,s,o,a,l;if(e=t.complete,a=t.total,s=t.qualified,r=t.itineraries,l=t.trigger,l&&"pagination"===l&&this.closePqsForm(),this.results.applyStateResultsClass(a?"results":"no-results"),this.results.applyStateLoadingClass(e?"loading-completed":"loading"),this.renderItinerariesInfo(a,s.length,e),this.renderItinerariesHeader(r.length),this.renderItinerariesHeader.complete|=e,r.length?(this.renderItineraries(r,s.length,this.shouldAnimatePlaneOnItinerary(e,l)),this.renderAvgPriceIndicator(r),e&&void 0!==Z&&!tt.getSavedFilter()&&(Z.hasSessionFilters()&&this.results.renderAppliedFilterInfo(),tt.setSavedFilter(!0))):e?this.renderNoResults(a):this.renderLoading(w.getPending()),(i=this.getShowIndirectInfoType(e,r))&&this.renderIndirectInfo(i),M.isOn("fqs_ui")&&(this.getPricedItineraries(s).length>1?setTimeout(function(t){return function(){return t.renderFQSTabs(s)}}(this),0):this.hideFQSTabs()),e&&(K.isFromSEOAirlinePage()&&(this.loadFromSEOAirlinePageEvents(),!K.isTestEnabled()||"full"!==(o=tt.getHasSEOAirlineInResults())&&"none"!==o||tt.getShownSEOAirlineInfo()||this.results.renderSEOAirlineInfo()),this.completedEventSent||(n=this.getFlexibleDaysStatus(_.take(r,10),"direct"===C.getQueryStringParam("flexible_depart"),"direct"===C.getQueryStringParam("flexible_return")),S(this,this.onCompletedMX,r,s.length,"default"===i,n),this.completedEventSent=!0)),M.isOn("show_intercom_live_chat")&&e)return N.show()},e.prototype.loadFromSEOAirlinePageEvents=function(){return S(this,this.onLoadFromSEOAirlineGA)},e.prototype.showErrorPage=function(t){return this.results.applyStateResultsClass("no-results"),this.results.applyStateLoadingClass("loading-completed"),this.renderItinerariesHeader(0),this.results.renderErrorPage({title:rt("ktxt_results_old_search"),message_1:rt("ktxt_results_dates_have_passed"),message_2:rt("ktxt_results_search_again"),new_search:rt("ktxt_results_new_search")})},e.prototype.getShowIndirectInfoType=function(t,e){if(t&&e.length&&!et.get("filter_hints.enable_direct_filter")){if(Y.get("prefer_directs"))return"default";if(this.flexibleDirectDays())return"flexible"}return null},e.prototype.flexibleDirectDays=function(){var t;return"multi-destination"===V.get("trip_type")?null:(t="direct"===C.getQueryStringParam("flexible_depart"),"one-way"===V.get("trip_type")?t:t&&"direct"===C.getQueryStringParam("flexible_return"))},e.prototype.getFlexibleDaysStatus=function(t,e,n){return"multi-destination"===V.get("trip_type")?null:"one-way"===V.get("trip_type")?!!e&&_.any(t,function(t){return t.firstLegDirect()}):e&&n?_.any(t,function(t){return t.firstLegDirect()&&t.secondLegDirect()}):e?_.any(t,function(t){return t.firstLegDirect()}):!!n&&_.any(t,function(t){return t.secondLegDirect()})},e.prototype.renderIndirectInfo=function(t){var e;return e=rt("flexible"===t?"ktxt_direct_days_not_available":"ktxtNoDirectResultsFound"),this.results.displayIndirectsInfo(e)},e.prototype.renderItinerariesInfo=function(t,e,n){var i,r,s,o;return null==n&&(n=!0),s=w.getPending(),r=s.length?_.last(s):null,o=w.getTotal(),i=o-s.length,this.results.renderInfo({complete:n,total:t,qualified:e,total_label:this.getTotalItinerariesLabel(t,e),current:rt("ktxtSelectedFlights_ProgressBarCheckedProviders",{index:i,providerlength:o}),providers:r?rt("ktxtSelectedFlights_ProgressBarSearchingProviders",{provider:r}):null,percentage:~~(100*i/o)+"%"})},e.prototype.renderItinerariesHeader=function(t,e){var n,i;if(null==e&&(e=!1),!this.renderItinerariesHeader.complete||e)return i={show_bags:t,new_window:rt("ktxtOpensInNewWindow"),bags_title:rt("ktxtFeeInfo_CheckingBags"),additional_fees:rt("ktxt_results_AdditionalBagFeesMayApply"),cabin_class:null,month_view:null},n=Y.get("cabin_class"),"multi-destination"===V.get("trip_type")||"economy"!==n?i.cabin_class=A.format(n):i.month_view=rt("ktxt_month_view_show_whole_month",{url:G.get("monthViewUrl")}),this.results.renderHeader(i),S(this,this.onClickMonthViewButtonMX,".header-month-view-btn a")},e.prototype.renderItineraries=function(t,e,n){var i,r,s,o,a,l;return s=null,this.results.shouldDisplayXsell()&&(i=Y.getCrossSellQuery("inline"),s=this.inlineCrossSell.getAll(i)),r=function(t){return function(){var t;return t=["fss-tap-anywhere","tap-b"],M.isOn("ticket_style_results")&&t.push("fss-ticket-style"),n&&t.push("animate-plane"),t.join(" ")}}(this)(),this.results.destroyTooltips(),a=this.itineraries.get("pagination"),o={top:a.get("top"),data:this.getPaginationData(e)},this.results.renderItineraries({extraClass:r,stripes:Y.get("legs").length>3,itineraries:this.getItinerariesData(t),inline_cross_sell:s,pqsForm:tt.getPqsFormItineraryId()?_.extend({},this.itineraries.get("pqsForm").data,this.getPqsData()):void 0,recommendations:this.getRecommendations(tt.getRecommendations())},o),null!=(l=tt.getVisibleInlineUpsell())&&l.show(),F.get("loading_complete")===!0&&a.get("page")*a.get("per_page")>=e&&(this.renderNoResults(this.itineraries.get("itineraries").length,e),S(this,this.onLastPageMX,a.get("page"))),this.bus.channel("itineraries-rendered").publish()},e.prototype.renderNoResults=function(t,e){var n,i,r;return null==e&&(e=0),r=V.get("trip_type"),n=Y.get("cabin_class"),this.results.destroyTooltips(),i={filtered:t>e&&e>0,multiple_itineraries:t>1,too_many_filters:t>0,alternatives:A.formatAlternatives(n),cabin_class:n,trip_type:r,cabin_class_label:rt("ktxtDayViewResults_SorryNoResultsClass",{cabinclass:A.format(n)}),show_all:rt("ktxtDayViewResults_ChangeFilterSettingsOrShowAllXResults",{count:t}),show_one:rt("ktxtDayViewResults_ChangeFilterSettingsOrShowThe1Result"),no_results_title:this.getNoResultsTitle(r),no_results_message:this.getNoResultsMessage(r),new_search_label:this.getNewSearchLabel(r)},G.get("showNoResultsOptions")&&_.extend(i,this._getNoResultsOptions(t)),0===e?(this.results.renderNoResults(i),S(this,this.onNoResultsMX),S(this,this.onNoResultsGA)):G.get("showNoResultsOptions")?(i.too_many_filters=!1,i.no_results_title=rt("ktxtDayViewResults_MoreResultsMessage"),this.results.renderAltSearchOpts(i)):void 0},e.prototype.getNoResultsTitle=function(t){switch(t){case"multi-destination":return rt("ktxt_results_none_title",{tag1:"<em>",tag2:"</em>"});case"return":return rt("ktxtDayViewResults_SorryNoResultsDates");case"one-way":return rt("ktxtDayViewResults_SorryFoundNoResultsThisDate");default:return""}},e.prototype.getNoResultsMessage=function(t){return"multi-destination"===t?rt("ktxt_results_no_whole_route")+" "+rt("ktxt_results_widen_search",{tag1:"<em>",tag2:"</em>",tag3:"<em>",tag4:"</em>"}):rt("ktxtDayViewResults_TryWideningSearch")},e.prototype.getNewSearchLabel=function(t){return"multi-destination"===t?rt("ktxt_results_new_search"):rt("ktxtDayViewResults_SearchWholeMonthYear",{monthURL:G.get("monthViewUrl")})},e.prototype.getAlertButtonLabel=function(t){switch(t){case"adding":return rt("ktxtPriceAlerts_Adding");case"added":return rt("ktxtPriceAlerts_AddedToPriceAlerts");case"error":return rt("ktxtPriceAlerts_SorryPleaseTryAgain");default:return""}},e.prototype.renderLoading=function(t){return this.results.destroyTooltips(),this.removeAvgPriceIndicator(),this.results.renderSearching({providers:t})},e.prototype.getSelfTransferLabel=function(t){return"st"===t?rt("ktxt_results_SelfTransfer"):"npst"===t?rt("ktxt_results_NonProtectedSelfTransfer"):""},e.prototype.getJpDepartReturnLabels=function(t,e){return t<2?[]:e||t>2?_.range(1,t+1):["",""]},e.prototype.getItineraryData=function(t){var e,n,i,r,s,o,a,l,u;return a=t.get("pricing_options"),r=a.getMainPricingOption(),e=r.get("items"),n=t.get("legs"),i=L(n,G),o=r.getPrice(H.getTotal()),l=r.getTotalPrice(),u=it(a),q={url:"#",type:"details"},s=ot.isMultiDestination(),{selected:tt.getHighlightedItinerary()===t.get("id"),id:t.get("id"),cid:t.cid,deeplink:q,show_total_price:o!==l,total_price:rt("ktxtDayViewResults_PriceTotal",{price:U.formatCurrency(l)}),price:o?U.formatCurrency(o):null,agent:this.getQuoteAgentText(a),has_multi_ticket_only:a.hasMultiTicketOnly(),has_two_bookings:a.hasTwoBookingTicketOnly(),self_transfer_type:u,self_transfer_label:this.getSelfTransferLabel(u),has_operator:_.some(i,"operator"),is_unpriced:r.isUnpriced(),progress:r.isPending(),still_loading:F.get("loading_complete")!==!0,logo_domain:G.get("logosDomain"),logo_data:this.getAirlineLogoData(r,n),main_select:M.isOn("results_cta_label")?M.getVariant("results_cta_label"):rt("ktxt_select"),details_title:rt("ktxtResults_Details_Tooltip"),details:rt("ktxtDetails"),estimated:rt("ktxt_lu_estimated"),non_protected_transfers:rt("ktxtDayViewResults_MultiBooking"),legs:i,multi_dest:s,deals_from:1===a.length?rt("ktxtCompResults_OneDeal",{number:a.length}):rt("ktxtCompResults_ManyDealsFrom",{number:a.length}),better_tooltips:M.isOn("stops_tooltip"),is_12hr_format:!U.is24HourFormat(),display_price_fees:!r.isUnpriced()&&M.isOn("price_messaging_fees_dv"),price_fees_text:rt("ktxt_results_price_messaging_fees"),sponsorship:t.get("sponsorship")||!1,jp_dept_retn_labels:M.isOn("jp_depart_return_label")?this.getJpDepartReturnLabels(i.length,s):null,airline_travel_alert:st.titleForItinerary(t)}},e.prototype.getItinerariesData=function(t){return _.map(t,this.getItineraryData,this)},e.prototype.getItineraryFromCid=function(t){return this.itineraries.get("itineraries").get(t)},e.prototype.getTotalItinerariesLabel=function(t,e){return t<=0?rt("ktxtDayViewResults_0Results"):1===t?rt("ktxtResult"):t!==e?rt("ktxtDayView_ResultsShowAllFilter",{numVisibleItineraries:e,totalNumberItineraries:t,showAllClass:"show-all"}):rt("ktxtResults",{X:t})},e.prototype.getPaginationData=function(t){var e,n,i,r;return n=this.itineraries.get("pagination"),e=n.get("page"),i=n.get("per_page"),r=t?Math.ceil(t/i):0,{label:this.getPaginationLabel(t),items:this.getPaginationItems(e,r),selected:e,previous_page:rt("ktxtDayView_Paging_PreviousPage"),next_page:rt("ktxtDayView_Paging_NextPage")}},e.prototype.getPaginationLabel=function(t){var e,n,i,r,s,o,a,l;return t?(r=this.itineraries.get("pagination"),i=r.get("page"),s=r.get("per_page"),e=_.min([(i-1)*s+1,t]),n="<strong>"+e+"</strong>",o=_.min([t,i*s]),a="<strong>"+o+"</strong>",l="<strong>"+t+"</strong>",1===t?rt("ktxtDayView_Paging_CurrentResult",{from_cnt:n,to_cnt:a,total_cnt:l}):rt("ktxtDayView_Paging_CurrentResults",{from_cnt:n,to_cnt:a,total_cnt:l})):rt("ktxtDayViewResults_0Results")},e.prototype.getPaginationItems=function(t,e){var n;return t&&e&&1!==e?(n=null,_.reduce(_.range(1,e+1),function(i,r){var s;return s=function(){switch(!1){case!_.contains([1,t-1,t,t+1,e],r):return r;case!(t<3&&3===r):return 3;case!(t>e-2&&r===e-2):return e-2;default:return"..."}}(),s!==n&&i.push(s),n=s,i},[])):[]},e.prototype.getAirlineLogoData=function(t,e){var n;return n=e.getUniqueMarketingCarrierIds(),{name:e.getCombinedArlineName().join(" + "),image:function(){var e;return t.isUnpriced()?null:1!==n.length?null:(e=D.get(n[0]),{src:e.alt_id+".png",alt:e.name})}()}},e.prototype.getQuoteAgentText=function(t,e){var n,i,r,s;if(null==e&&(e="select-action"),r=t.getMainPricingOption(),n=r.getUniqueAgentNames()[0],s={carrier_name:n,tag1:"<a class='"+e+" unpriced-agent' target='_blank' href='"+r.getDeeplink()+"'>",tag2:"</a>"},r.isUnpriced()&&"altquotes-action"===e)return _.unescape(rt("ktxt_unpriced_checkAvailability",s));if(r.isUnpriced())return _.unescape(rt("ktxt_unpriced_checkThisPrice",s));if(i=r.get("items"),M.isOn("combined_bp")){if(t.hasMultiTicketOnly())return rt("ktxt_multi_booking",{x:i.length})}else{if(i.hasNPT())return rt("ktxtDayViewResults_MultiBooking");if(i.areMultipleBookingsRequired())return rt("ktxt_multiple_bookings")}return r.isFacilitatedBooking()?rt("ktxtDayViewResults_AgentBookOnSkyscanner",{agentName:n}):n},e.prototype.getArrivesOnTooltip=function(t,e){var n;return n=this.getItineraryFromCid(t).get("legs").at(e).getArrivalTime(),rt("ktxt_arrives_on",{date:U.formatDate(n,"full")})},e.prototype.getStationData=function(t){var e,n,i;return i=W.get(t),e="City"===i.type?i:W.get(i.parent_id),n=W.get(e.parent_id),{station_name:i.name,station_code:i.display_code,country_name:(null!=n?n.name:void 0)||null}},e.prototype.getStationTooltip=function(t){return this.getStationData(t)},e.prototype.setHighlighted=function(t){var e;return tt.setHighlightedItinerary(t&&(null!=(e=this.getItineraryFromCid(t))?e.get("id"):void 0)||null)},e.prototype.showDetails=function(t,e){var n;return n=this.getItineraryFromCid(t),tt.setBookingPanelReason(e),tt.setSelectedItineraryRef(n),n&&n.get("id")?this.navigateTo("details/"+n.get("id")):this.navigateTo("details/not_available")},e.prototype.showSponsorship=function(t){var e,n;if(e=this.getItineraryFromCid(t),e&&(n=e.get("sponsorship")))return window.open(n.url,"_blank"),n.onclickCallback?n.onclickCallback():void 0},e.prototype.saveAttachHomePageCookie=function(){return T.storeExit(this.bus,"results")},e.prototype.setScreenPosition=function(t,e){var n;return(n=this.getItineraryFromCid(t))?n.set("screen_position",e):null},e.prototype.paginationChanged=function(t,e){var n,i;return i=this.itineraries.get("pagination"),n=i.get("page"),"next"===t&&(t=n+1),"prev"===t&&(t=n-1),i.set("top",!0),i.set("page",t),this.bus.channel("re-render").publish({filters:!1,results:!0,trigger:"pagination"}),S(this,this.onPaginationChangeGA,t)},e.prototype.onUpsellRendered=function(t){if(this.results.shouldDisplayXsell())return S(this,this.onUpsellRenderGA,t)},e.prototype.onInlineCrossSellRendered=function(t,e,n){return tt.isCrossSellRendered(t)||S(this,this.onInlineCrossSellRenderGA,t,e,n),tt.setCrossSellRendered(t,!0)},e.prototype.selectCrossSell=function(t,e,n,i){var r,s,o;return i=i||("inline"===e?this.inlineCrossSell.getSlotByType(t):void 0)||"none",o=function(){switch(t){case"carhire":return"car hire";case"hotels":return"hotels";case"sj-alt-sell":return"SJ Alt Sell";default:return"custom-"+t}}(),S(this,this.onCrossSellSelectedMX,{Vertical:o,Position:i,Source:e}),"upsell_panel"===e?(r="upsell-panel",s="hotels"===t?"custom_bottom":"small"):s="custom_"+e+"_"+i+"_price="+n,S(this,this.onCrossSellSelectedGA,t,r,s)},e.prototype.closeCrossSell=function(t,e){var n;return n=this.inlineCrossSell.getSlotByType(t),tt.setCrossSellClosed(n,!0),nt.trackGA({action:t+"_xsellClose",label:"custom_inline_"+tt.getCrossSellPosition(n)+"_price="+e,trackOnce:!1})},e.prototype.resetPagination=function(){return this.itineraries.resetPagination()},e.prototype.resetFilters=function(){return this.resetPagination(),this.bus.channel("reset-filters").publish(),this.bus.channel("blink-curtain").publish(),nt.trackGA({action:"filters",label:"show-all",trackOnce:!0}),$(".seo-airline-filter-info").remove(),tt.setShownSEOAirlineInfo(!0),S(this,this.onResetFiltersMX)},e.prototype.onFirstResultShown=function(t){return S(this,this.onFirstResultMX,t)},e.prototype.blinkCurtain=function(){return this.results.blinkCurtain()},e.prototype.closePanel=function(){return this.sort.hide(),F.get("interactions.sort")&&this.bus.channel("blink-curtain").publish(),F.set("interactions.sort",null)},e.prototype.closeUpsellPanel=function(t){return null==t&&(t=this.upsell),t.isVisible&&S(this,this.onCloseUpsellMX),t.hide()},e.prototype.closePriceAlertPanel=function(){if(!ot.isMultiDestination()&&(this.priceAlert.hidePanel(),this.router.isOnPriceAlert(tt.getPendingRoute())))return tt.setPendingRoute(null)},e.prototype.showPanel=function(){return this.sort.render(this.itineraries.get("itineraries").sort_by),this.sort.show(),S(this,this.onShowSortPanelMX)},e.prototype.goBack=function(){return this.router.goBack()},e.prototype.navigateTo=function(t){return this.router.navigateTo(t)},e.prototype.setSortBy=function(t){return this.itineraries.get("itineraries").sort_modified=!0,this.itineraries.get("itineraries").sort_by=t,this.resetPagination()},e.prototype.onChangeSort=function(t,e){if("fqs"!==t||M.isOn("fqs_ui"))return this.setSortBy(t),this.bus.channel("re-render").publish({filters:!1,results:!0,trigger:"sort"}),e||this.bus.channel("blink-curtain").publish(),S(this,this.onChangeSortGA,t),e?F.set("interactions.sort",!0):void 0},e.prototype.onBagsClick=function(){return nt.trackGA({action:"baggage-fees-click",trackOnce:!1})},e.prototype.onResize=function(){var t;if(tt.hasResults())return t=this.itineraries.get("itineraries").sort_by,M.isOn("fqs_ui")?this.updateFQSSortOnResize(t):this.results.renderSort(t)},e.prototype._resolveUpsell=function(t,e){return"panel"===e?this.upsell:new f({tagName:"li",className:"fss-inline-upsell",itinerary_id:t,controller:this,transfer:G.get("airportTransfers")})},e.prototype._hideVisibleUpsell=function(t){var e;if(null!=(e=tt.getVisibleInlineUpsell())&&e.hide(),"inline-panel"===t)return this.upsell.hide()},e.prototype.loadUpsellPanel=function(t,e){var n,i;return null==e&&(e="panel"),this._hideVisibleUpsell(e),i=this._resolveUpsell(t,e),i.show(),t&&S(this,this.renderAirportTransfers,t,i),S(this,this.onLoadUpsellMX),n=Y.getCrossSellQuery("dvpanel"),M.isOn("sj_alt_sell_panel")&&"panel"===e?i.renderCrossSell(x.getContent(Y.getLegAt(0).destination),"sj-alt-sell",1):i.renderCrossSell(this.carhire.getContent("upsell-"+e,n),"carhire",1),i.renderCrossSell(this.hotels.getContent("upsell-"+e,n),"hotels",0)},e.prototype.renderAirportTransfers=function(t,e){var n;return n=this.getItineraryFromCid(t).get("legs").at(0).getArrivalPlace(),e.renderAirportTransfers(n.display_code,n.name)},e.prototype.onClearFilters=function(){return nt.trackMixpanel("Flight Day View No Results Button",{button:"clear filter"}),this.resetPagination(),this.resetFilters()},e.prototype.onNewSearch=function(){return nt.trackMixpanel("Flight Day View No Results Button",{button:"new search"}),this.bus.channel("open-search-controls").publish()},e.prototype.onChangeDate=function(t){var e,n,i;return n=+t,e=V.get("legs")[0],i={outboundDate:R.formatDate(R.addDays(e.date,n))},e.return_date&&(i.inboundDate=R.formatDate(R.addDays(e.return_date,n))),nt.trackMixpanel("Flight Day View No Results Option",{button:"date",delta:t}),_.delay(function(t){return function(){return t.bus.channel("flights-navigate").publish(i)}}(this),500)},e.prototype.onAddNearby=function(){return nt.trackMixpanel("Flight Day View No Results Option",{button:"nearby"}),_.delay(function(t){return function(){return t.bus.channel("flights-navigate").publish({outboundAlts:!0,inboundAlts:!0})}}(this),500)},e.prototype.changeCabinClass=function(t){return this.bus.channel("flights-navigate").publish({cabinclass:t})},e.prototype.autoOpenPriceAlert=function(){if(!G.get("isLoggedIn")())return tt.setPendingRoute("price-alert/auto")},e.prototype.openPriceAlert=function(){return G.get("isLoggedIn")()?this.createPriceAlert(!1):this.router.navigateTo("price-alert")},e.prototype.createPriceAlert=function(t){var e,n,i,r;if(!ot.isMultiDestination())return n=V.get("legs")[0],r=H.getTotal(),i=this.itineraries.get("itineraries"),this.priceAlert.createPriceAlert({auto_popup:t,market:V.get("market"),locale:V.get("locale"),currency:V.get("currency"),cabin_class:V.get("cabin_class"),prefer_directs:this.getPreferDirectsForPriceAlert(),passenger_info:H.getQuery(),is_authenticated:G.get("isLoggedIn")(),origin:n.origin,origin_name:n.origin_name,destination:n.destination,destination_name:n.destination_name,outbound_date:n.date,inbound_date:n.return_date?n.return_date:null,passengers:r,carriers:(e=i.getCheapest())?e.get("legs").getUniqueMarketingCarriers():null,min_price:F.get("loading_complete")===!0?et.get("itineraries.total.min_price")/r:null})},e.prototype.getPreferDirectsForPriceAlert=function(){var t,e,n;return n=this.filters.get("stops"),t=n.any(function(t){return t.get("is_user_modified")}),t?(e=n.byId,e.direct.isChecked()&&!e.one_stop.isChecked()&&!e.two_plus_stops.isChecked()):V.get("prefer_directs")},e.prototype._formatAltSearchDates=function(t,e,n){var i;return i=function(t){return U.formatDate(R.addDays(t,n),"monthDayAbbr")},""+i(t)+(e?" - "+i(e):"")},e.prototype._formatDateDelta=function(t){return(t<=0?"":"+")+t},e.prototype._getDateDelta=function(t){return R.addDays(R.now(),1)<t?[-1,1]:[1,2]},e.prototype._getNoResultsOptions=function(t){var e,n,i,r,s,o,a;return n={"-1":rt("ktxtDayViewResults_NoResultPreviousDay"),"+1":rt("ktxtDayViewResults_NoResultNextDay"),"+2":rt("ktxtDayViewResults_NoResult2Days"),"-7":rt("ktxtDayViewResults_NoResultPreviousWeek"),"+7":rt("ktxtDayViewResults_NoResultNextWeek"),"+14":rt("ktxtDayViewResults_NoResult2Weeks")},i=V.get("legs")[0],e=R.parseDateTime(i.date),a=!!i.return_date&&R.parseDateTime(i.return_date),o=this._getDateDelta(e),s=o[0],r=o[1],{no_results_message:rt("ktxtDayViewResults_NoResultOptionsMessage"),change_date_lbl:rt("ktxtDayViewResults_NoResultChangeDatesLabel"),prev:this._formatDateDelta(s),next:this._formatDateDelta(r),prev_duration_btn:n[this._formatDateDelta(s)],next_duration_btn:n[this._formatDateDelta(r)],prev_date_btn:this._formatAltSearchDates(e,a,s),next_date_btn:this._formatAltSearchDates(e,a,r),show_nearby:!(G.get("departNearby")&&G.get("returnNearby")),add_nearby_lbl:rt("ktxtDayViewResults_NoResultNearbyLabel",{iataFrom:i.origin_iata,iataTo:i.destination_iata}),add_nearby_btn:rt("ktxtDayViewResults_NoResultNearbyButton"),start_search_lbl:rt("ktxtDayViewResults_NoResultNewSearchLabel"),start_search_btn:rt("ktxtDayViewResults_NoResultNewSearchButton"),filter_lbl:rt("ktxtDayView_Filters_ResetAllFilters"),filter_btn:rt("ktxtDayViewResults_NoResultShowAllXResults",{count:t})}},e.prototype.getPricedItineraries=function(t){return _.filter(t,function(t){return t.getPrice()})},e.prototype.onDocumentVisible=function(){var t,e;if(e=C.getSessionStorage(),t=e.tryGetValue("redirect_started_timestamp")||null)return S(this,this.onReturnFromRedirectMX,Date.now()-t),e.trySetValue("redirect_started_timestamp",null)},e}(o)},function(t,e){t.exports=function(t,e,n,i){var r;return r=_.filter(e,n,i),r.length?t(r,n,i):_.first(e)||null}},function(t,e,n){var i;i=n(26),t.exports=function(t){switch(t){case"sponsored":return i("ktxt_promotion_sponsored");case"cheapest":return i("ktxt_promotion_cheapest");case"airline":return i("ktxt_promotion_airline");case"best":return i("ktxt_promotion_best_rated");default:return""}}},function(t,e,n){var i,r;i=n(43),r={},t.exports=function(t){return r[t]||(r[t]=new i)}},function(t,e,n){var i,r,s,o,a,l,u,c,p,d,h,f,g,m,y,v,b,k,w,x,S,P,C,A,D,T,M,O,F,I,R=function(t,e){function n(){this.constructor=t}for(var i in e)q.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},q={}.hasOwnProperty;T=n(26),o=n(71),u=n(10),l=n(27),I=n(72),w=n(61),b=n(19)("options"),O=n(23),i=n(73),r=n(82),s=n(83),f=n(53),k=n(84),h=n(85),x=n(86),y=n(87),p=n(88),d=n(89),A=n(90),g=n(91),S=n(92),v=n(93),F=n(94),c=n(25),C=n(44),D=n(12),a=n(95),P=n(40),M=n(98),m=n(99),t.exports=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),this.itineraries=new i({el:this.$(".day-list")}).setParentView(this),this.header=new o({el:this.$(".day-header"),template:d}),this.paginationTop=new o({el:this.$(".pagination-top"),template:k}),this.paginationBottom=new o({el:this.$(".info-bottom"),template:k}),this.searching=new s({el:this.$(".day-searching"),template:x}),this.noResults=new o({el:this.$(".fss-no-results"),template:this.noResultsTemplateVariant()}),this.error=new o({el:this.$(".fss-no-results"),template:p}),this.info=new r({el:this.$(".day-list-info.info-top"),template:h}),(t=l.getPageVisibility().changeEventName)&&$(document).on(t,_.bind(this.onVisibilityChange,this))}return R(e,t),e.prototype.events=function(){var t;return t={"click .day-list-item":"onClickItinerary","click .change-class":"onClickCabinClass","click .select-action":"onClickSelect","click .details-action":"onClickDetails","click .day-list-pagination button":"onClickPagination","click .fss-xsell-inline-button a":"onClickSelectXSell","click a.fss-xsell-custom-inline-cta":"onClickSelectXSell","click .fss-cross-sell-inline button":"onClickCloseXSell","click .header-info-bags":"onClickBagsLink","click .day-list-count button":"onClickResetFilters","click .day-too-many-filters span":"onClickResetFilters","click .day-btns-filter .day-header-btn":"onClickMobileFilters","click .day-btns-sort .day-header-btn":"onClickMobileSort","mouseover .times small":"onMouseOverArrivesOn","mouseout .times small":"hideTooltip","change .day-list-sorting select":"onChangeSort","click .new-search":"onNewSearch","mouseover .big-airline img":"onMouseOverCarrierLogo","mouseout .big-airline img":"hideTooltip","click .indirects-info-close":"onClickCloseIndirects","click .filter-info-close":"onClickCloseSeoFilterInfo","click #price-alert-button1":"onClickCreateAlert","click #price-alert-button2":"onClickCreateAlert","click .rating-stats":"onPreventDefault","click .day-no-results-dates .day-no-results-btn":"onChangeDate","click .day-no-results-btn.nearby":"onAddNearby","click .day-no-results-btn.show-all":"onClearFilters","click .rec-element .close":"onCloseRecommendationPanel","click .rec-element .rec-item":"onClickRecommendationItem"},l.supportsTouch()||_.extend(t,{"mouseenter .two-bookings":"onMouseOverTwoBookings","mouseenter .multipart-bookings":"onMouseOverMultiPartBooking","mouseenter .protected-transfer":"onMouseOverSelfTransfer","mouseenter .non-protected-transfer":"onMouseOverNonProtectedSelfTransfer","mouseenter .airline-travel-alert":"onMouseOverTravelAlert","click .two-bookings":"destroyTooltips","click .multipart-bookings":"destroyTooltips","click .protected-transfer":"destroyTooltips","click .non-protected-transfers":"destroyTooltips","click .airline-travel-alert":"destroyTooltips","mouseleave .two-bookings":"hideTooltip","mouseleave .multipart-bookings":"hideTooltip","mouseleave .protected-transfer":"hideTooltip","mouseleave .non-protected-transfer":"hideTooltip","mouseleave .airline-travel-alert":"hideTooltip"}),_.extend(t,{"mouseover .stop-station":"onMouseOverStopStations","mouseout .stop-station":"hideTooltip","click .card":"onClickSelect"}),t},e.prototype.onVisibilityChange=function(){if(l.getPageVisibility().isVisible)return this.controller.onDocumentVisible()},e.prototype.displayTooltip=function(){if(!C.isMobile())return e.__super__.displayTooltip.apply(this,arguments)},e.prototype.noResultsTemplateVariant=function(){return b.get("showNoResultsOptions")?m:y},e.prototype.shouldDisplayXsell=function(){
return this.options.$body.width()>780},e.prototype.areItinerariesVisible=function(){return this.itineraries.isVisible()},e.prototype.applyStripes=function(t){return this.$el[t?"addClass":"removeClass"]("candy")},e.prototype.addViewClass=function(t){return this.$el.addClass(t)},e.prototype.displayIndirectsInfo=function(t){return this.$(".indirects-info").find(".indirects-info-msg").html(t).end().attr("data-visible",!0).removeClass("hidden")},e.prototype.renderInfo=function(t){var e,n,i;return i=t.total,n=t.qualified,e=i!==n?"addClass":"removeClass",this.$(".day-btns-filter").find(".day-header-btn")[e]("indicator_type_two"),this.info.render(t)},e.prototype.renderAppliedFilterInfo=function(){return this.info.hide(),this.$(".save-filter-info").removeClass("hidden"),setTimeout(function(t){return function(){return t.hideFilterInfo()}}(this),5e3)},e.prototype.hideFilterInfo=function(){return this.info.show(),this.$(".save-filter-info").addClass("hidden")},e.prototype.renderHeader=function(t){return this.header.render(t)},e.prototype.renderSearching=function(t){var e;return e=this.$(".indirects-info"),this.noResults.hide(),this.itineraries.hide(),this.hidePagination(),this.searching.show().render(t),e.data("visible")&&e.removeClass("hidden"),this},e.prototype.renderNoResults=function(t){return this.searching.hide(),this.itineraries.hide(),this.hidePagination(),this.noResults.show().render(t),this.$(".indirects-info").addClass("hidden"),this},e.prototype.renderSEOAirlineInfo=function(){var t;return this.$(".seo-airline-filter-info").removeClass("hidden"),t="full"===C.getHasSEOAirlineInResults()?this.$(".filter-applied-info"):this.$(".filter-not-applied-info"),t.removeClass("hidden")},e.prototype.renderAltSearchOpts=function(t){return this.noResults.show().render(t),this},e.prototype.renderErrorPage=function(t){return this.searching.hide(),this.error.show().render(t),this},e.prototype.renderItineraries=function(t,e){return this.applyStripes(t.stripes),this.searching.hide(),this.noResults.hide(),this.renderPageInfo(e),this.itineraries.show().render(t),t.extraClass&&this.itineraries.setListClass(t.extraClass),f.insertAdInline(this.$el.find(".day-list")),this},e.prototype.hidePagination=function(){return this.paginationTop.hide(),this.paginationBottom.hide()},e.prototype.renderPageInfo=function(t){return this.paginationTop[t.top?"render":"noop"](_.assign(t.data,{type:"top"}))[t.top&&t.data.items.length?"show":"hide"](),this.paginationBottom.render(_.assign(t.data,{type:"bottom"})).show(),this},e.prototype.renderSort=function(t){return $("#sort-select").val(t)},e.prototype.renderPqsForm=function(t,e,n){return this.itineraries.renderPqsForm(t,e,n)},e.prototype.changeFooterMsgVisibility=function(t){return this.$el.closest("#content").find(".additional-fees,.prices-checked-msg")[t?"removeClass":"addClass"]("hidden")},e.prototype.onClickCabinClass=function(t){return t.preventDefault(),this.controller.changeCabinClass($(t.currentTarget).attr("data-cabin-class"))},e.prototype.onClickItinerary=function(t){var e;return e=$(t.currentTarget),e.hasClass("selected")?(e.removeClass("selected"),this.controller.setHighlighted(null)):(e.closest("ul").children().removeClass("selected"),e.addClass("selected"),this.controller.setHighlighted(e.find(".result").attr("data-cid")))},e.prototype.onClickDetails=function(t){var e,n;return t.preventDefault(),e=$(t.currentTarget),n=["manual"],e.hasClass("ticketing-agent","protected-transfer")&&this.onStopPropagation(t),n.push("itinerary-button"),this.onStopPropagation(t),this.controller.showDetails(this._getCid(e),n)},e.prototype.showDetailsAfterAnimation=function(t,e,n){return D.clearTimeout(n),t(),e.removeClass("itinerary-clicked")},e.prototype.onClickSelect=function(t){var e,n,i,r,s,o,a,u,c;return e=$(t.currentTarget),r=I.getDeepLinkType(e),i=this._getCid(e),I.getLinkModifier(e,w.regenUrl)(r),"sponsorship"===r?void this.controller.showSponsorship(i):e.hasClass("result-sponsored")?void 0:(t.preventDefault(),this.onStopPropagation(t),o=["automatic"],o.push("itinerary-body"),c=l.whichTransitionEvent(),c?(s=e.closest("li"),a=function(t){return function(){return t.controller.showDetails(i,o)}}(this),n=!1,u=D.setTimeout(function(t){return function(){return t.showDetailsAfterAnimation(a,s,u),n=!0}}(this),200),s.addClass("itinerary-clicked"),s.off(c).on(c,function(t){return function(e){if(!n&&"transform"===e.originalEvent.propertyName)return s.off(c),t.showDetailsAfterAnimation(a,s,u)}}(this))):this.controller.showDetails(i,o))},e.prototype.onClickPagination=function(t){var e,n,i;if(e=$(t.currentTarget),n=e.closest("li").data("id"),i=e.closest(".day-list-pagination").data("id"),this.controller.paginationChanged(n,i),"bottom"===i)return this.scrollToTop()},e.prototype.onClickSelectXSell=function(t){var e,n,i,r;return e=$(t.currentTarget),r=e.data("type"),i=e.data("priced"),n=e.closest("li").data("position"),this.controller.selectCrossSell(r,"inline",i,n)},e.prototype.onClickCloseXSell=function(t){var e,n,i;return e=$(t.currentTarget),i=e.data("type"),n=e.data("priced"),this.controller.closeCrossSell(i,n),e.closest("li").slideUp(function(){return $(this).remove().removeAttr("style")})},e.prototype.onClickBagsLink=function(t){return t.preventDefault(),this.controller.onBagsClick(),window.open($(t.currentTarget).attr("href"),"window_name","toolbar=no,status=no,scrollbars=yes,resizable=no,width=650,height=450")},e.prototype.onClickResetFilters=function(t){return this.controller.resetFilters()},e.prototype.onClickMobileFilters=function(t){return this.controller.navigateTo("filters")},e.prototype.onClickMobileSort=function(t){return this.controller.navigateTo("sort")},e.prototype.onClickCloseIndirects=function(t){return this.$(".indirects-info").slideUp("fast",function(){return $(this).remove()})},e.prototype.onClickCloseSeoFilterInfo=function(){return this.$(".seo-airline-filter-info").slideUp("fast",function(){return $(this).remove()}),C.setShownSEOAirlineInfo(!0)},e.prototype.onMouseOverStopStations=function(t){var e;return e=$(t.currentTarget),this.displayTooltip(e,A(this.controller.getStationTooltip(e.attr("data-id"))))},e.prototype.onMouseOverSelfTransfer=function(t){var e;if(!this.options.is_mobile)return e=$(t.currentTarget),this.displayTooltip(e,S({header:T("ktxt_results_SelfTransfer_Tooltip_Title"),text:_.unescape(T(u.isOn("combined_bp")?"ktxt_DayView_selfTransferTooltip_body":"ktxt_results_SelfTransfer_Tooltip_Body_new"))}),!1,"left")},e.prototype.onMouseOverTravelAlert=function(t){var e;if(!this.options.is_mobile)return e=$(t.currentTarget),this.displayTooltip(e,M.getMessage(),!1,"left")},e.prototype.onMouseOverNonProtectedSelfTransfer=function(t){var e,n;if(!this.options.is_mobile)return e=$(t.currentTarget),n=v({title1:T("ktxt_results_NPST_Tooltip_Title"),body1:_.unescape(T("ktxt_results_NPST_Tooltip_Body")),title2:T("ktxt_results_NPST_Tooltip_Title2"),body2:_.unescape(T("ktxt_results_NPST_Tooltip_Body2")),more:T("ktxt_results_NPST_MoreDetails")}),this.displayTooltip(e,n,!0,"left").find("a").on("click.multibooking",{id:this._getCid(e)},function(t){return function(e){return e.preventDefault(),t.destroyTooltips(),t.controller.showDetails(e.data.id,["manual"])}}(this))},e.prototype.onMouseOverMultiPartBooking=function(t){var e,n;return e=$(t.currentTarget),n=g({title:T("ktxt_multipart_popup_Title"),body:_.unescape(T("ktxt_multipart_popup_Body")),more:T("ktxt_multipart_popup_MoreDetails")}),this.displayTooltip(e,n,!0,"left").find("a").on("click.multibooking",{id:this._getCid(e)},function(t){return function(e){return e.preventDefault(),t.destroyTooltips(),t.controller.showDetails(e.data.id,["manual"])}}(this))},e.prototype.onMouseOverTwoBookings=function(t){var e,n;if(!this.options.is_mobile)return e=$(t.currentTarget),n=F({title:T("ktxtDayViewResults_MultiBooking"),text:_.unescape(T("ktxtDayView_Results_Popup_2BookingsRequired"))}),this.displayTooltip(e,n,!0,"left").find("a").on("click.multibooking",{id:this._getCid(e)},function(t){return function(e){return e.preventDefault(),t.destroyTooltips(),t.controller.showDetails(e.data.id,["manual"])}}(this))},e.prototype.onMouseOverArrivesOn=function(t){var e,n;return e=$(t.currentTarget),n=e.closest(".leg").attr("data-id"),this.displayTooltip(e,this.controller.getArrivesOnTooltip(this._getCid(e),n))},e.prototype.onMouseOverCarrierLogo=function(t){var e;return e=$(t.currentTarget),this.displayTooltip(e,e.attr("data-name"))},e.prototype.onChangeSort=function(t){var e;return e=$(t.currentTarget).find(":selected").attr("value"),this.controller.onChangeSort(e,!1)},e.prototype.onClearFilters=function(t){var e;return $("html, body").animate({scrollTop:null!=(e=$(".day-btns-filter").offset())?e.top:void 0},300),this.controller.onClearFilters()},e.prototype.onNewSearch=function(t){var e;return t.preventDefault(),$("html, body").animate({scrollTop:null!=(e=$("#js-search-summary-bar").offset())?e.top:void 0},300),this.controller.onNewSearch()},e.prototype.onChangeDate=function(t){return t.preventDefault(),this.controller.onChangeDate($(t.currentTarget).attr("data-delta"))},e.prototype.onAddNearby=function(t){return t.preventDefault(),this.controller.onAddNearby()},e.prototype.onClickCreateAlert=function(){return this.controller.openPriceAlert()},e.prototype.scrollToTop=function(){var t;return t=u.isOn("fqs_sorting")?this.$(".day-cols"):this.$(".day-main-content"),$("html, body").animate({scrollTop:t.offset().top},300,"linear")},e.prototype.blinkCurtain=function(){var t,e;if(!this.itineraries.$el.hasClass("hidden"))return c.get("curtain.isVisible")?this.$(".curtain").stop(!0,!1).css({opacity:1}).animate({opacity:1},800,function(){return $(this).animate({opacity:0},200,function(){return c.set("curtain.isVisible",!1),$(this).remove()})}):(c.set("curtain.isVisible",!0),t=this.$(".day-main-content").get(0),e=t.getBoundingClientRect().top>0?200:200-t.getBoundingClientRect().top,$("<div class='curtain curtain-animation'><h3 class='updating-filters' style='top: "+e+"px'>"+T("ktxt_results_updating")+"</h3></div>").prependTo(this.$(".day-main-content")).animate({opacity:1},200).delay(600).animate({opacity:0},200,function(){return c.set("curtain.isVisible",!1),$(this).remove()}))},e.prototype._getCid=function(t,e){return null==e&&(e=".result"),t.closest(e).attr("data-cid")},e.prototype.renderAvgPriceTooltip=function(t){return this.avgPriceTooltip=a.create({help_link:t,target:this.$(".cba-price").first(),controller:this.controller})},e.prototype.dismissAvgPriceTooltip=function(){return a.dismiss(this.avgPriceTooltip)},e.prototype.onCloseRecommendationPanel=function(t){var e;return e=$(t.currentTarget).closest(".rec-element"),e.slideUp(function(){return e.remove()}),this.controller.onCloseRecommendationPanel()},e.prototype.onClickRecommendationItem=function(t){var e;return e=$(t.currentTarget),this.controller.onClickRecommendationItem(+e.data("index"))},e}(o)},function(t,e,n){var i,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=n(33),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.attr=function(t,e){return this.$el.attr("data-"+t,e)},e.prototype.displayTooltip=function(t,e,n,i){var r;return null==i&&(i="top"),(r=t.data("tooltip"))||(r=new Skyscanner.Components.Tooltip(t,{container:"body",html:!0,message:e,trigger:"manual",animations:!1,placement:i}),t.data("tooltip",r),(this.tooltips||(this.tooltips=[])).push(r)),r.show(),n?(t.prop("hoverable",!0),t.prop("visibleTooltip",!0),r.tip().off(".hoverable").on("mouseover.hoverable",function(t){return r.$element.prop("visibleTooltip",!0)}).on("mouseout.hoverable",function(t){return function(e){return r.$element.prop("visibleTooltip",!1),t.hideTooltip({currentTarget:r.$element})}}(this))):r.tip()},e.prototype.hideTooltip=function(t){var e,n;if(e=$(t.currentTarget),e.prop("visibleTooltip",!1),n=e.data("tooltip"))return e.prop("hoverable")?void _.delay(function(){if(!e.prop("visibleTooltip"))return n.hide(),e.prop("visibleTooltip",!1)},500):n.hide()},e.prototype.destroyTooltips=function(){return _.each(this.tooltips,function(t){return t.$element.removeData("tooltip"),t.destroy()}),this.tooltips=[]},e.prototype.applyStateResultsClass=function(t){return this.$el.removeClass("state-results state-no-results").addClass("state-"+t).attr("data-has-results","results"===t)},e.prototype.applyStateLoadingClass=function(t){return this.$el.removeClass("state-loading state-loading-completed").addClass("state-"+t).attr("data-is-loading","loading"===t)},e}(i)},function(t,e,n){var i,r,s,o,a,l=[].slice;i=n(28),a=function(t,e){return t.attr("href",e)},s=function(t){return t.attr("href")},o=function(t,e){var n;return n=s(t),function(){var r;return r=1<=arguments.length?l.call(arguments,0):[],a(t,i(null,function(){return e.apply(null,[n].concat(r||[]))})||n)}},r=function(t,e){return null==e&&(e=".result"),t.closest(e).attr("data-deeplink")},t.exports={setLink:a,getLink:s,getLinkModifier:o,getDeepLinkType:r}},function(t,e,n){var i,r,s,o,a,l,u=function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;s=n(33),i=n(74),o=n(76),l=n(77),a=n(44),r=n(79).default,t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.setParentView=function(t){return this.parent_view=t,this},e.prototype.render=function(t){var e;return e=this._getResolvedInlineCrossSell(t.inline_cross_sell),this._renderItineraries(t.itineraries,t.pqsForm,e,t.recommendations),this._showItineraries(),this._notifyControllerOnFirstRender(),this},e.prototype._renderItineraries=function(t,e,n,i){var r;return r=this._getFragment(t,e,n,i),this.$el.empty().get(0).appendChild(r)},e.prototype._showItineraries=function(){return this.$el.removeClass("hidden, animate-plane")},e.prototype._notifyControllerOnFirstRender=function(){return 0===a.getRenderCount()&&this.parent_view.controller.onFirstResultShown(a.getPollingRequestNumber()),a.incRenderCount()},e.prototype.setListClass=function(t){return this.$el.addClass(t)},e.prototype.renderPqsForm=function(t,e,n){return this._injectPqsForm(t,e,n)},e.prototype._getFragment=function(t,e,n,i){var r;return r=document.createDocumentFragment(),_.forEach(t,function(t){return function(s,o){var l,u;if(l=t._createItineraryElement(s,e),s.id===a.getPqsFormItineraryId()&&"results"===e.section&&t._appendPqsForm($(l).find(t._getPQSSelector(s.cid)),e),t.parent_view.controller.setScreenPosition(s.cid,o+1),r.appendChild(l),u=o+1,n&&n[u]&&t._appendCrossSell(r,n[u],u),3===o)return t._appendRecommendations(r,i)}}(this)),_.forEach(n,function(e){return function(i,s){if(+s>t.length&&n[s])return e._appendCrossSell(r,n[s],s,t.length)}}(this)),r},e.prototype._appendCrossSell=function(t,e,n,i){return null==i&&(i=null),t.appendChild(e),a.setCrossSellPosition(n,i?i:n)},e.prototype._appendRecommendations=function(t,e){if(e)return t.appendChild(new r({tagName:"li",className:"day-list-item rec-element"}).render(e).el),this.parent_view.controller.onRenderRecommendationPanel()},e.prototype._getResolvedInlineCrossSell=function(t){var e;return e={},_.forEach(t,function(t){return function(n){var i;return i="resolved"===n.promise.state(),n.promise.done(function(r){var s,o;return s=$(r),o=s.data("type")||n.type,i||t._injectCrossSell(r,n.slot,o),i&&(e[n.slot]=r),t.parent_view.controller.onInlineCrossSellRendered(n.slot,o,s.data("priced"))})}}(this)),e},e.prototype._createItineraryElement=function(t){return new s({template:l,tagName:"li",className:"day-list-item clearfix "+(t.selected?" selected":"")}).render(t).el},e.prototype._injectCrossSell=function(t,e,n){var i,r,s;return i=this.$el.children(".day-list-item"),s=i.eq(e-1),r=$(t).css("display","none"),s.length?(s.after(r),a.setCrossSellPosition(e,+e)):(a.setCrossSellPosition(e,i.length),this.$el.append(r)),r.slideDown(function(){return $(this).removeAttr("style")})},e.prototype._getPQSSelector=function(t){return"article[data-cid='"+t+"']"},e.prototype._injectPqsForm=function(t,e,n){return this._appendPqsForm(this.$el.find(this._getPQSSelector(t)),n)},e.prototype._appendPqsForm=function(t,e){return t.append(this._getPqsFormElement(e)),t.closest(".day-list-item").addClass("pqs-form-active")},e.prototype._getPqsFormElement=function(t){var e;return e=new i({tagName:"aside",className:"pqs-form-wrapper",template:o}),a.setPqsFormView(e),e.setController(this.parent_view.controller).render(t).el},e}(s)},function(t,e,n){var i,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;r=n(33),i=n(75),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.mixins=[i],e.prototype.events={"click button.good":"onClickGood","click button.bad":"onClickBad","click button.secondary":"onClickSendFeedback","click button.close":"onClickClose","click button.dismiss":"onClickDismiss","click label input":"onClickInput",click:"onClickForm","keyup form textarea":"onKeyUpFeedbackText","focus form textarea":"onFocusFeedbackText","blur  form textarea":"onBlurFeedbackText"},e.prototype.setController=function(t){return this.controller=t,this},e.prototype.render=function(t,e){return null==e&&(e={}),this.$el.html(this.options.template(t)),(e.focusTextarea||e.section&&this.controller.getPqsFormOption(e.section,"is_feedback_focused")&&this.controller.getPqsFormOption(e.section,"other"))&&this._focusFeedbackText(e.section,this.controller.getPqsFormOption(e.section,"feedback_text")),this},e.prototype.remove=function(){return this.$el.closest(".day-list-item").removeClass("pqs-form-active"),e.__super__.remove.apply(this,arguments)},e.prototype.submit=function(t,e){if(this.controller.submitPqsForm(t),"submitted-closed"!==t&&this.render(this.controller.getPqsData()),e)return this.onSubmittedMX(e)},e.prototype.onClickGood=function(t){return this.submit("submitted-positive","Positive"),this._animateSubmitted({delay:1e3}).done(_.bind(this.controller.closePqsForm,this.controller))},e.prototype.onClickBad=function(t){return this.submit("negative","Negative")},e.prototype.onClickSendFeedback=function(t){return t.preventDefault(),this.submit("submitted-"+this._getSection(t)),this.onNegativeResponseMX(),this._animateSubmitted({delay:1e3}).done(_.bind(this.controller.closePqsForm,this.controller))},e.prototype.onClickInput=function(t){var e,n,i;return e=$(t.currentTarget),n=e.attr("data-id"),i=this._getSection(t),this.controller.setPqsFormOption(i,n,e.prop("checked")),"other"===n?this.render(this.controller.getPqsData(),{focusTextarea:!0,section:i}):this.render(this.controller.getPqsData())},e.prototype.onClickForm=function(t){return this.onStopPropagation(t)},e.prototype.onKeyUpFeedbackText=function(t){return this.controller.setPqsFormOption(this._getSection(t),"feedback_text",$(t.currentTarget).val())},e.prototype.onFocusFeedbackText=function(t){return this.controller.setPqsFormOption(this._getSection(t),"is_feedback_focused",!0)},e.prototype.onBlurFeedbackText=function(t){return this.controller.setPqsFormOption(this._getSection(t),"is_feedback_focused",!1)},e.prototype.onClickClose=function(t){return this.controller.rememberPqsFormDismissedOption(),this.submit("submitted-closed","dismissed"),$.when(this.$el.stop().slideUp(200).promise()).then(_.bind(this.controller.closePqsForm,this.controller)),this.controller.clearPqsState()},e.prototype.onClickDismiss=function(t){return this.submit("submitted-dismissed","no booking"),this._animateSubmitted({delay:1500}).done(_.bind(this.controller.closePqsForm,this.controller))},e.prototype._focusFeedbackText=function(t,e){var n;return null==t&&(t="negative"),n=this.$el.find("form."+t+" textarea"),setTimeout(function(){return n.val(""),n.focus(),n.val(e)},0)},e.prototype._animateSubmitted=function(t){var e;return null==t&&(t={}),e=$.Deferred(),$.when(this.$el.slideDown(200).promise()).then(function(n){return function(){return $.when(n.$el.delay(t.delay||2e3).slideUp(200).promise()).then(e.resolve,e.reject)}}(this)),this.controller.clearPqsState(),e.promise()},e.prototype._getSection=function(t){return $(t.currentTarget).closest("form").attr("class")},e}(r)},function(t,e,n){var i,r,s,o,a,l,u;r=n(8),i=n(28),l=n(44),o=n(19)("options"),u=n(46),a=n(61),s=n(63),t.exports=function(){function t(){}return t.prototype.onSubmittedMX=function(t){var e,n;return e=this.controller.itineraries.get("pqsForm"),n=e.get("pricing_option"),u.trackMixpanel("Flight Day View PQS Survey Submitted",i(this,function(){return{"User interaction with form":t,"Date Submitted":r.toISOString(e.get("submitted_at")),"Final Price":n.getPrice(),"Quote Age":n.getQuoteAge(),"Multipart Booking":e.get("is_multipart_booking"),"Self Transfer":s(e),"Is Multi-Airline":e.get("unique_airline_ids").length>1,Airlines:e.get("unique_airline_ids"),"Max Stop Count":e.get("max_stop_count"),"Is Facilitated":n.isFacilitatedBooking(),"Time Since Redirect":Math.round((e.get("submitted_at").getTime()-e.get("created_at").getTime())/1e3),Agent:_.first(n.getAgentNames()),"Website ID":_.first(n.getUniqueAgentIds()),Fingerprint:o.get("encryptedTimestamp"),Origin:this._formatSection(e.get("section")),"Agent Pre Redirect ID":a.getId(),Deeplink:n.getDeeplink()}}))},t.prototype.onNegativeResponseMX=function(){var t;return t={not_available:"Not available",price_matching:"Prices didn't match",unexpected_extras:"Unexpected extras",hard_to_use:"Site hard to use",other:"Other issues"},u.trackMixpanel("Flight Day View PQS Negative Option Submitted",i(this,this._formatTrackingProperties,t,"negative"))},t.prototype._formatSection=function(t){return null==t&&(t="results"),"details"===t?"Booking Panel":"Itinerary"},t.prototype._formatTrackingProperties=function(t,e){var n,i,r,s,l;return null==e&&(e="negative"),n=this.controller.itineraries.get("pqsForm"),l=function(){var r,s,o,a;for(o=_.keys(t),a=[],r=0,s=o.length;r<s;r++)i=o[r],n.get(e)[i]&&a.push(t[i]);return a}(),r=n.get("pricing_option"),s={"Final Price":r.getPrice(),"Other problems":n.get(e).feedback_text||"",Agent:_.first(r.getAgentNames()),"Website ID":_.first(r.getUniqueAgentIds()),"Is Facilitated":r.isFacilitatedBooking(),Fingerprint:o.get("encryptedTimestamp"),Origin:this._formatSection(n.get("section")),"Agent Pre Redirect ID":a.getId(),Deeplink:r.getDeeplink()},"negative"===e&&(s["How was the experience"]=l),s},t}()},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)"details"===section&&(__p+='<div class="mobile-sky-logo"></div>'),__p+='<button class="close"><span class="close-icon"></span></button><div class="pqs-form">',submitted?"submitted-positive"===submitted?__p+='<h2 class="thanks">'+(null==(__t=thanksforthefeedback)?"":__t)+"</h2>":"negative"===submitted?(__p+="<h2>"+(null==(__t=howwasyourbooking)?"":__t)+"</h2>","details"===section&&price&&(__p+='<div class="partner-info"><div class="partner-logo"><img src="'+(null==(__t=logo_domain)?"":__t)+"/images/websites/bar/"+(null==(__t=pricing_option_agent_id)?"":__t)+'.png" alt="'+(null==(__t=booking_agent)?"":__t)+'"/></div><div class="price"><strong>'+(null==(__t=price)?"":__t)+"</strong></div></div>"),__p+="<h4>"+(null==(__t=yourfeedbackmakesusbetter)?"":__t)+'</h4><button class="tertiary good"><span class="icon" aria-hidden=\'true\'></span>'+(null==(__t=sofarsogood)?"":__t)+'</button><button class="tertiary bad form-active"><span class="icon" aria-hidden=\'true\'></span>'+(null==(__t=itcouldhavebeenbetter)?"":__t)+'</button><div class="active-form"><form class="negative"><label class="pqs_not_available"><input data-id="not_available" type="checkbox" ',negative.not_available&&(__p+=" checked "),__p+=">"+(null==(__t=theflightwasnotavailable)?"":__t)+'</label><label class="pqs_price_matching"><input data-id="price_matching" type="checkbox" ',negative.price_matching&&(__p+=" checked "),__p+=">"+(null==(__t=thepricesdidntmatch)?"":__t)+'</label><label class="pqs_unexpected_extras"><input data-id="unexpected_extras" type="checkbox" ',negative.unexpected_extras&&(__p+=" checked "),__p+=">"+(null==(__t=unexpectedextras)?"":__t)+'</label><label class="pqs_hard_to_use"><input data-id="hard_to_use" type="checkbox" ',negative.hard_to_use&&(__p+=" checked "),__p+=">"+(null==(__t=thesitewashardtouse)?"":__t)+'</label><div class="pqs_other_issue_label">'+(null==(__t=otherissues)?"":__t)+'</div><textarea placeholder="'+(null==(__t=whatwastheactualproblem)?"":__t)+'">',negative.feedback_text&&(__p+=null==(__t=negative.feedback_text)?"":__t),__p+='</textarea><button class="secondary">'+(null==(__t=sendfeedback)?"":__t)+'</button></form><div class="data-protection-msg">'+(null==(__t=dataprotection)?"":__t)+'</div></div><button class="dismiss">'+(null==(__t=imstillsearching)?"":__t)+"</button>"):"submitted-negative"===submitted?__p+='<h2 class="thanks">'+(null==(__t=thanksforyourfeedback)?"":__t)+"</h2>":"submitted-dismissed"===submitted&&(__p+='<h2 class="thanks">'+(null==(__t=returningyoutoyoursearch)?"":__t)+"</h2>"):(__p+="<h2>"+(null==(__t=howwasyourbooking)?"":__t)+"</h2>","details"===section&&price&&(__p+='<div class="partner-info"><div class="partner-logo"><img src="'+(null==(__t=logo_domain)?"":__t)+"/images/websites/bar/"+(null==(__t=pricing_option_agent_id)?"":__t)+'.png" alt="'+(null==(__t=booking_agent)?"":__t)+'"/></div><div class="price"><strong>'+(null==(__t=price)?"":__t)+"</strong></div></div>"),__p+="<h4>"+(null==(__t=yourfeedbackmakesusbetter)?"":__t)+'</h4><button class="tertiary good"><span class="icon" aria-hidden=\'true\'></span>'+(null==(__t=sofarsogood)?"":__t)+'</button><button class="tertiary bad"><span class="icon" aria-hidden=\'true\'></span>'+(null==(__t=itcouldhavebeenbetter)?"":__t)+'</button><button class="dismiss">'+(null==(__t=imstillsearching)?"":__t)+"</button>"),__p+="</div>";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj){var agent_class=has_multi_ticket_only?"multipart-bookings":has_two_bookings?"two-bookings":"";__p+="";var self_transfer_class="st"===self_transfer_type?"protected-transfer":"npst"===self_transfer_type?"non-protected-transfer":"";__p+='<article data-cid="'+(null==(__t=cid)?"":__t)+'" data-deeplink="'+(null==(__t=deeplink.type)?"":__t)+'" class="card result clearfix no-details ',self_transfer_type&&(__p+="has-transfer-info"),__p+=" ",display_price_fees&&(__p+="has-price-fees-messaging"),__p+='" ontouchstart=""><div class="card-body clearfix',show_total_price&&(__p+=" group-price"),1===legs.length&&(__p+=" one-leg"),self_transfer_type&&(__p+=" multi-ticket"),has_operator&&(__p+=" operated-by"),__p+='"><div class="clearfix carrier"><div class="airline">',__p+=sponsorship?'<img src="'+(null==(__t=logo_domain)?"":__t)+"/images/websites/small/"+(null==(__t=sponsorship.partner)?"":__t)+'.png" alt="'+(null==(__t=sponsorship.partner)?"":__t)+'" onerror="__imgErrRemove__(this)">':logo_data.image?'<img src="'+(null==(__t=logo_domain)?"":__t)+"/images/airlines/favicon/"+(null==(__t=logo_data.image.src)?"":__t)+'" alt="'+(null==(__t=logo_data.image.alt)?"":__t)+'" onerror="__imgErrRemove__(this)"><span>'+(null==(__t=logo_data.name)?"":__t)+"</span>":'<span class="no-logo-airline"></span><span>'+(null==(__t=logo_data.name)?"":__t)+"</span>",__p+="</div></div>",_.forEach(legs,function(t,e){__p+="";var n=0===e?"dept":"retn";__p+='<section data-id="'+(null==(__t=e)?"":__t)+'" class="card-main leg clearfix '+(null==(__t=n)?"":__t),jp_dept_retn_labels&&(__p+=" jp-dept-retn"),__p+='">'+(null==(__t=__webpack_require__(78)(_.extend(obj,{leg:t,sponsorship:sponsorship,leg_index:e,jp_dept_retn_labels:jp_dept_retn_labels})))?"":__t),_.forEach(t.stops.places,function(t){__p+="",t.change_airport&&(__p+='<div class="change-station">'+(null==(__t=t.message)?"":__t)+"</div>"),__p+=""}),__p+="</section>"}),__p+='</div><aside class="notch-holder"></aside><div class="mainquote-cba clearfix',show_total_price&&(__p+=" group-price"),__p+='"><div class="mainquote-wrapper-cba"><div class="mq-container-wrapper"><div class="mq-container">',sponsorship&&(__p+='<span class="bpk-badge">'+(null==(__t=translate("ktxt_promotion_sponsored"))?"":__t)+"</span>"),__p+='<div class="cba-price',is_unpriced&&(__p+=" unpriced"),__p+='">',sponsorship||has_multi_ticket_only||is_unpriced||(__p+='<span class="mainquote-deals">'+(null==(__t=deals_from)?"":__t)+"</span>"),__p+='<div class="mainquote-group-price">',price&&(__p+='<a href="'+(null==(__t=deeplink.url)?"":__t)+'" data-deeplink="'+(null==(__t=deeplink.type)?"":__t)+'" target="_blank" class="mainquote-price expand-cba select-action"><span class="',(progress||still_loading)&&(__p+="in-progress hot-spinner"),__p+='" aria-hidden="true"></span>'+(null==(__t=price)?"":__t)+"</a>"),__p+="",show_total_price&&(__p+='<br/><a href="'+(null==(__t=deeplink.url)?"":__t)+'" class="mainquote-price expand-cba mq-group gray select-action" target="_blank" data-deeplink="'+(null==(__t=deeplink.type)?"":__t)+'">'+(null==(__t=total_price)?"":__t)+"</a>"),__p+="</div>",display_price_fees&&(__p+='<div class="mq-price-messaging-fees">'+(null==(__t=price_fees_text)?"":__t)+"</div>"),__p+="",has_multi_ticket_only?__p+='<div class="cba-agent-info top"><a class="ticketing-agent '+(null==(__t=agent_class)?"":__t)+' select-action" href="'+(null==(__t=deeplink.url)?"":__t)+'" target="_blank" data-deeplink="'+(null==(__t=deeplink.type)?"":__t)+'">'+(null==(__t=agent)?"":__t)+"</a></div>":is_unpriced&&(__p+='<div class="cba-agent-info top"><span class="ticketing-agent unpriced">'+(null==(__t=agent)?"":__t)+"</span></div>"),__p+="</div>"+(null==(__t=__webpack_require__(55)({is_selected:!1,has_icon:!0,has_pointer:!0,extra_class:"expand-cba select-action",text:obj.main_select,deeplink:obj.deeplink}))?"":__t),display_price_fees&&(__p+='<div class="mq-price-messaging-fees">'+(null==(__t=price_fees_text)?"":__t)+"</div>"),__p+="",has_multi_ticket_only||self_transfer_type?(__p+='<div class="cba-agent-info">',has_multi_ticket_only&&(__p+='<a class="ticketing-agent '+(null==(__t=agent_class)?"":__t)+' select-action" href="'+(null==(__t=deeplink.url)?"":__t)+'" target="_blank" data-deeplink="'+(null==(__t=deeplink.type)?"":__t)+'">'+(null==(__t=agent)?"":__t)+"</a>"),__p+='<a class="ticketing-agent '+(null==(__t=self_transfer_class)?"":__t)+' details-action" href="'+(null==(__t=deeplink.url)?"":__t)+'" target="_blank" data-deeplink="'+(null==(__t=deeplink.type)?"":__t)+'"><span aria-hidden="true"></span>'+(null==(__t=self_transfer_label)?"":__t)+'</a></div><button class="ticketing-agent '+(null==(__t=self_transfer_class)?"":__t)+' details-action"><span aria-hidden="true"></span>'+(null==(__t=self_transfer_label)?"":__t)+"</button>"):is_unpriced&&(__p+='<div class="cba-agent-info"><div class="ticketing-agent unpriced">'+(null==(__t=agent)?"":__t)+"</div></div>"),__p+="",airline_travel_alert&&(__p+='<div class="cba-agent-info"><a class="ticketing-agent airline-travel-alert details-action" href="'+(null==(__t=deeplink.url)?"":__t)+'" target="_blank" data-deeplink="'+(null==(__t=deeplink.type)?"":__t)+'"><span aria-hidden="true"></span>'+(null==(__t=airline_travel_alert)?"":__t)+'</a></div><button class="ticketing-agent airline-travel-alert details-action"><span aria-hidden="true"></span>'+(null==(__t=airline_travel_alert)?"":__t)+"</button>"),__p+="</div></div></div></div></article>"}return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){
function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj){obj.is_compact||(__p+='<div class="big-airline">',obj.sponsorship?__p+='<img src="'+(null==(__t=logo_domain)?"":__t)+"/images/websites/small/"+(null==(__t=sponsorship.partner)?"":__t)+'.png" alt="'+(null==(__t=sponsorship.partner)?"":__t)+'" onerror="__imgErrReplace__(this)">':leg.show_logo?(__p+="<img class='big' src=\""+(null==(__t=leg.logo_domain)?"":__t)+"/images/airlines/small/"+(null==(__t=leg.logo_img)?"":__t)+'.png" alt="'+(null==(__t=leg.logo_name)?"":__t)+'" data-name="'+(null==(__t=leg.logo_name)?"":__t)+'" onerror="__imgErrReplace__(this)">',obj.is_bp&&(__p+='<div class="small-leg-logo">',leg.logo_data.image&&(__p+='<img class="small-logo" src="'+(null==(__t=leg.logo_domain)?"":__t)+"/images/airlines/favicon/"+(null==(__t=leg.logo_data.image.src)?"":__t)+'"" alt="'+(null==(__t=leg.logo_data.image.alt)?"":__t)+'" data-name="'+(null==(__t=leg.logo_name)?"":__t)+'" onerror="__imgErrReplace__(this)">'),__p+='<span class="airline-name text-sm">'+(null==(__t=leg.logo_data.name)?"":__t)+"</span></div>"),__p+=""):__p+='<span class="text-sm">'+(null==(__t=leg.logo_name)?"":__t)+"</span>",__p+="</div>"),__p+='<div class="leg-details',obj.is_12hr_format&&(__p+=" long-date-format"),obj.is_compact&&(__p+=" compact-view"),__p+='"><div class="depart">';var jp_dept_retn_label=obj.jp_dept_retn_labels&&obj.jp_dept_retn_labels[leg_index];__p+="",jp_dept_retn_label&&(__p+='<div class="jp-dept-retn-badge">'+(null==(__t=jp_dept_retn_label)?"":__t)+"</div>"),__p+='<span class="station-tooltip" data-id="'+(null==(__t=leg.departure_id)?"":__t)+'"><span class="times">'+(null==(__t=leg.departure_time)?"":__t)+'</span><span class="stop-station',leg.departure_warning&&(__p+=" highlight"),__p+='" data-id="'+(null==(__t=leg.departure_id)?"":__t)+'">'+(null==(__t=leg.departure_alt_id)?"":__t)+"</span></span>",leg.display_city_names&&leg.departure_name&&(__p+='<span class="stop-city">'+(null==(__t=leg.departure_name)?"":__t)+"</span>"),__p+='</div><div class="stops"><span class="duration">'+(null==(__t=!obj.is_compact&&leg.duration||"&nbsp;")?"":__t)+'</span><ul class="stop-line">',_.times(leg.stops.count,function(){__p+='<li class="stop-dot"></li>'}),__p+='<li class="stop-line"></li></ul>';var is_direct=0===leg.stops.count,stops_class=is_direct?"green":"red";__p+='<div class="leg-stops',is_direct&&(__p+=" no-stops"),__p+='"><span class="leg-stops-'+(null==(__t=stops_class)?"":__t)+' leg-stops-label">'+(null==(__t=leg.stops.label)?"":__t)+' </span><span class="leg-stops-station">',_.forEach(leg.stops.places,function(t,e){__p+="";var n=e>0;__p+='<span class="stop-station" data-id="'+(null==(__t=t.id)?"":__t)+'">',n&&(__p+=", "),__p+=(null==(__t=t.alt_id)?"":__t)+"</span>"}),__p+='</span></div></div><div class="arrive"><span class="station-tooltip" data-id="'+(null==(__t=leg.arrival_id)?"":__t)+'"><span class="times">'+(null==(__t=leg.arrival_time)?"":__t),leg.arrival_days&&(__p+="<small> ("+(null==(__t=leg.arrival_days)?"":__t)+")</small>"),__p+='</span><span class="stop-station',leg.arrival_warning&&(__p+=" highlight"),__p+='" data-id="'+(null==(__t=leg.arrival_id)?"":__t)+'">'+(null==(__t=leg.arrival_alt_id)?"":__t)+"</span></span>",leg.display_city_names&&leg.arrival_name&&(__p+='<span class="stop-city">'+(null==(__t=leg.arrival_name)?"":__t)+"</span>"),__p+='</div><div class="clearfix"></div>',leg.any_change_airport&&(__p+='<div class="new-change-station">',_.forEach(leg.stops.places,function(t){__p+="",t.change_airport&&(__p+="",__p+=obj.is_compact?'<span class="text-sm">'+(null==(__t=t.short_message)?"":__t)+"</span>":'<span class="text-sm">'+(null==(__t=t.message)?"":__t)+"</span>",__p+=""),__p+=""}),__p+="</div>"),__p+="",leg.operator&&(__p+='<div class="leg-operator">'+(null==(__t=leg.operator)?"":__t)+"</div>"),__p+="</div>"}return __p}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(33),u=i(l),c=n(80),p=i(c),d=n(81),h=i(d),f=function(t){function e(){return r(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"render",value:function(t){var e=_.reduce(t.list,function(t,e){return t+(0,h.default)(e)},"");return this.$el.html((0,p.default)({location:t.location,recommendationList:e})),this}}]),e}(u.default);e.default=f},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<header class="rec-header"><h3>'+(null==(__t=translate("ktxt_People_Who_Searched",{location:location}))?"":__t)+'</h3><button class="close" aria-hidden=\'true\'></button></header><article class="rec-content"><ul class="rec-list">'+(null==(__t=recommendationList)?"":__t)+"</ul></article>";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<li class="rec-item" data-index="'+(null==(__t=index)?"":__t)+'"><div class="text-content"><h4>'+(null==(__t=destinationPlace)?"":__t)+" <small>"+(null==(__t=destinationCountry)?"":__t)+'</small></h4><span class="rec-price">'+(null==(__t=price)?"":__t)+'</span></div><div class="img-content" style="background-image: url('+(null==(__t=imageUrl)?"":__t)+');"></div></li>';return __p}},function(t,e,n){var i,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=n(33),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e._inprogress=!1,e.prototype.render=function(t){return t.complete?(this._completeProgress(t),this._inprogress=!1):this._inprogress?this._updateProgress(t):(this._inprogress=!0,this._showProgress(t)),this.$("select").prop("disabled",0===t.qualified),this},e.prototype._updateProgress=function(t){return this.$(".day-list-status .current").html(t.current),this.$(".day-list-status .providers").html(t.providers),this.$(".day-list-progress").stop().animate({width:t.percentage},2e3)},e.prototype._showProgress=function(t){return this.$(".day-list-count").html(this.options.template(t)),this.$(".day-list-progress").css("width",0).show(),this._updateProgress(t)},e.prototype._completeProgress=function(t){return this.$(".day-list-progress").stop().animate({width:t.percentage},{duration:1e3,always:function(){return $(this).fadeOut()}}),this.$(".day-list-count").html(this.options.template(t))},e}(i)},function(t,e,n){var i,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=n(33),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.render=function(t){return this.$("ul").html(this.options.template(t)),this},e}(i)},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)"top"!==type&&(__p+='<div class="day-list-count">'+(null==(__t=label)?"":__t)+"</div>"),__p+="",items.length&&(__p+='<div class="day-list-pagination clearfix" data-id="'+(null==(__t=type)?"":__t)+'"><ul class="clearfix">',selected!==_.first(items)&&(__p+='<li data-id="prev" class="prev"><button title="'+(null==(__t=previous_page)?"":__t)+'">&nbsp;</button></li>'),__p+="",_.forEach(items,function(t){__p+="",__p+=t===selected?'<li class="selected">'+(null==(__t=t)?"":__t)+"</li>":"..."===t?'<li class="ellipsis">'+(null==(__t=t)?"":__t)+"</li>":'<li data-id="'+(null==(__t=t)?"":__t)+'"> <button>'+(null==(__t=t)?"":__t)+"</button> </li>",__p+=""}),__p+="",selected!==_.last(items)&&(__p+='<li data-id="next" class="next"><button title="'+(null==(__t=next_page)?"":__t)+'">&nbsp;</button></li>'),__p+="</ul></div>");return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+=complete?""+(null==(__t=total_label)?"":__t):'<div class="day-list-status"><div class="day-search-progress"><span class="progress-spinner hot-spinner"></span><span class="day-search-message current">'+(null==(__t=current)?"":__t)+'</span><span class="day-search-message providers">'+(null==(__t=providers)?"":__t)+"</span></div></div>",__p+="";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)_.forEach(providers,function(t){__p+="<li>"+(null==(__t=t)?"":__t)+"</li>"}),__p+="";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)too_many_filters?(__p+='<div class="day-no-results-cushion"><div class="day-no-results-topline filter-pointer">'+(null==(__t=translate("ktxtDayViewResults_NoResultsFoundForSelection"))?"":__t)+'</div><div class="day-too-many-filters filter-pointer">',__p+=multiple_itineraries?null==(__t=show_all)?"":__t:null==(__t=show_one)?"":__t,__p+="</div></div>"):"economy"===cabin_class?(__p+='<div class="day-no-results-cushion md-cushion"><div class="day-no-results-topline">'+(null==(__t=no_results_title)?"":__t)+'</div><div aria-hidden="true" class="no-results-icon"></div><div>'+(null==(__t=no_results_message)?"":__t)+"</div></div>",__p+="multi-destination"!==trip_type?'<div class="new-search-wrapper">'+(null==(__t=new_search_label)?"":__t)+"</div>":""+(null==(__t=__webpack_require__(55)({is_large:!0,extra_class:"new-search",text:new_search_label,deeplink:{url:"#"}}))?"":__t),__p+=""):(__p+='<div class="day-no-results-cushion"><div class="day-no-results-topline">'+(null==(__t=cabin_class_label)?"":__t)+"</div>",_.forEach(alternatives,function(t){__p+='<div class="day-no-results-otherviews"><a class="change-class" data-cabin-class="'+(null==(__t=t.id)?"":__t)+'" href="#">'+(null==(__t=t.label)?"":__t)+"</a></div>"}),__p+="</div>"),__p+="";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="day-no-results-cushion md-cushion"><div class="day-no-results-topline">'+(null==(__t=title)?"":__t)+'</div><div aria-hidden="true" class="no-results-icon"></div><p>'+(null==(__t=message_1)?"":__t)+"</p>",message_2&&(__p+="<p>"+(null==(__t=message_2)?"":__t)+"</p>"),__p+="</div>"+(null==(__t=__webpack_require__(55)({text:new_search,is_large:!0,extra_class:"new-search",deeplink:{url:"#new-search"}}))?"":__t);return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="header-info clearfix">',cabin_class?__p+='<div class="header-info-cabinclass"><em>'+(null==(__t=cabin_class)?"":__t)+"</em></div>":month_view&&(__p+='<div class="header-month-view-btn">'+(null==(__t=month_view)?"":__t)+"</div>"),__p+="",show_bags&&(__p+='<a class="header-info-bags" target="_blank" title="'+(null==(__t=new_window)?"":__t)+'" href="/airlinefees">'+(null==(__t=additional_fees)?"":__t)+"</a>"),__p+="</div>";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<span class="plane" aria-hidden="true"></span><span class="plane-label">'+(null==(__t=station_name)?"":__t)+", "+(null==(__t=station_code)?"":__t)+" ",country_name&&(__p+="("+(null==(__t=country_name)?"":__t)+")"),__p+="</span>";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="funnel-tooltip-multi-part-booking"><div><strong>'+(null==(__t=title)?"":__t)+"</strong></div><div>"+(null==(__t=body)?"":__t)+'</div><div class="space"><a href="#">'+(null==(__t=more)?"":__t)+"</a></div></div>";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="funnel-tooltip-multi-part-booking"><div><strong>'+(null==(__t=header)?"":__t)+"</strong></div><div>"+(null==(__t=text)?"":__t)+"</div></div>";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="funnel-tooltip-multi-part-booking"><div><strong>'+(null==(__t=title1)?"":__t)+"</strong></div><div>"+(null==(__t=body1)?"":__t)+'</div><div class="space"><strong>'+(null==(__t=title2)?"":__t)+"</strong></div><div>"+(null==(__t=body2)?"":__t)+'</div><div class="space"><a href="#">'+(null==(__t=more)?"":__t)+"</a></div></div>";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="funnel-tooltip-multi-part-booking"><div><strong>'+(null==(__t=title)?"":__t)+"</strong></div><div>"+(null==(__t=text)?"":__t)+"</div></div>";return __p}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.create=e.dismiss=void 0;var r=n(96),s=n(97),o=i(s),a="avg-price-tooltip",l=function(t){t&&(t.hide(),(0,r.remove)(a))},u=function(t){var e=new Skyscanner.Components.Tooltip(t.target,{container:"body",viewport:"body",html:!0,message:(0,o.default)({help_link:t.help_link}),trigger:"manual",animations:!0,placement:"top"});return e.tip().addClass("avg-price-tooltip").off("click").on("click",".find-more",function(){t.controller.onAvgPriceInteractionMX("More Info")}),e.show(),(0,r.setup)(a,function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(e),t.controller.onAvgPriceInteractionMX($(n.target).hasClass("got-it")?"Acknowledged":"Dismissed")},e.tip()),e};e.dismiss=l,e.create=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={},i=$(document);i.on({"global-dismiss":function(t,e){_.forEach(n,function(t){t(e)})},click:function(t){i.trigger("global-dismiss",t)}});var r=function(t,e,i){var r=function(t){t&&($.contains(i[0],t.target)||i.is($(t.target)))&&!$(t.target).hasClass("dismiss-trigger")||e(t)};n[t]=r},s=function(t){delete n[t]};e.setup=r,e.remove=s},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="fss-avg-price-tooltip"><h3>'+(null==(__t=translate("ktxtGroupPrice_Tooltip_Heading"))?"":__t)+"</h3><p>"+(null==(__t=translate("ktxtGroupPrice_Tooltip_Text"))?"":__t)+'</p><a class="find-more" target="_blank" title="'+(null==(__t=translate("ktxtOpensInNewWindow"))?"":__t)+'" href="'+(null==(__t=help_link)?"":__t)+'">'+(null==(__t=translate("ktxtGroupPrice_Tooltip_More"))?"":__t)+'</a><button class="close got-it dismiss-trigger">'+(null==(__t=translate("ktxtGroupPrice_Modal_Gotit"))?"":__t)+"</button></div>";return __p}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t||{};h=s(e.search_constraints),f=e.carrier_code,g=_.escape(e.title);var n=_.escape(e.details),i=_.escape(e.anchor_url),r=_.escape(e.anchor_text);m="<strong>"+g+": </strong>"+n+' <a href="'+i+'">'+r+"</a>"}function s(t){if(!(0,d.isOn)("airline_travel_alert"))return!1;if(!t)return!1;if("any"===t)return!0;var e=(0,p.default)("initial_query");return _.some(t,function(t,n){switch(n){case"destination":if(e.get("legs")[0].destination!==t)return!1;break;case"origin":if(e.get("legs")[0].origin!==t)return!1}return!0})}function o(t){if(!h)return!1;var e=t.get("legs"),n=e.getUniqueMarketingCarriers();return _.some(n,function(t){return t.alt_id===f})}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return e(t)?g:null}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return e(t)?m:null}function u(){return m}Object.defineProperty(e,"__esModule",{value:!0}),e.getMessage=e.messageForItinerary=e.titleForItinerary=e.isValidItinerary=e.isValidConstraints=e.setup=void 0;var c=n(19),p=i(c),d=n(10),h=void 0,f=void 0,g=void 0,m=void 0;e.setup=r,e.isValidConstraints=s,e.isValidItinerary=o,e.titleForItinerary=a,e.messageForItinerary=l,e.getMessage=u},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)too_many_filters?(__p+='<div class="day-no-results-cushion"><div class="day-no-results-topline filter-pointer">'+(null==(__t=translate("ktxtDayViewResults_NoResultsFoundForSelection"))?"":__t)+'</div><div class="day-too-many-filters filter-pointer">',__p+=multiple_itineraries?null==(__t=show_all)?"":__t:null==(__t=show_one)?"":__t,__p+="</div></div>"):"economy"===cabin_class?(__p+='<div class="day-no-results-cushion md-cushion"><div class="day-no-results-topline">'+(null==(__t=no_results_title)?"":__t)+"</div>","multi-destination"===trip_type&&(__p+='<div aria-hidden="true" class="no-results-icon"></div>'),__p+="<div>"+(null==(__t=no_results_message)?"":__t)+"</div></div>","multi-destination"!==trip_type?(__p+='<div class="day-no-results-container">',filtered&&(__p+='<div class="day-no-results-option day-no-results-filter"><div class="day-no-results-lbl">'+(null==(__t=filter_lbl)?"":__t)+'</div><a class="day-no-results-btn show-all">'+(null==(__t=filter_btn)?"":__t)+"</a></div>"),__p+='<div class="day-no-results-option day-no-results-dates"><div class="day-no-results-lbl">'+(null==(__t=change_date_lbl)?"":__t)+'</div><a class="day-no-results-btn date-prev" data-delta="'+(null==(__t=prev)?"":__t)+'">'+(null==(__t=prev_duration_btn)?"":__t)+"<br /><span>"+(null==(__t=prev_date_btn)?"":__t)+'</span></a><a class="day-no-results-btn date-next" data-delta="'+(null==(__t=next)?"":__t)+'">'+(null==(__t=next_duration_btn)?"":__t)+"<br /><span>"+(null==(__t=next_date_btn)?"":__t)+"</span></a></div>",show_nearby&&(__p+='<div class="day-no-results-option day-no-results-nearby"><div class="day-no-results-lbl">'+(null==(__t=add_nearby_lbl)?"":__t)+'</div><a class="day-no-results-btn nearby">'+(null==(__t=add_nearby_btn)?"":__t)+"</a></div>"),__p+='<div class="day-no-results-option"><div class="day-no-results-lbl">'+(null==(__t=start_search_lbl)?"":__t)+'</div><button class="day-no-results-btn new-search">'+(null==(__t=start_search_btn)?"":__t)+"</button></div></div>"):__p+=""+(null==(__t=__webpack_require__(55)({is_large:!0,extra_class:"new-search",text:new_search_label,deeplink:{url:"#"}}))?"":__t),__p+=""):(__p+='<div class="day-no-results-cushion"><div class="day-no-results-topline">'+(null==(__t=cabin_class_label)?"":__t)+"</div>",_.forEach(alternatives,function(t){__p+='<div class="day-no-results-otherviews"><a class="change-class" data-cabin-class="'+(null==(__t=t.id)?"":__t)+'" href="#">'+(null==(__t=t.label)?"":__t)+"</a></div>"}),__p+="</div>"),__p+="";return __p}},function(t,e,n){var i,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=n(34),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.events={"click header nav button":"onClickDone","change input":"onChangeInput"},e.prototype.onClickDone=function(){return this.hasChanged&&this.controller.onChangeSort(this.$el.find("input:checked").attr("value")),this.hasChanged=!1,this.controller.goBack()},e.prototype.render=function(t){return this.$el.find("input").filter("[value="+t+"]").prop("checked",!0)},e.prototype.onChangeInput=function(t){return this.hasChanged=!0},e}(i)},function(t,e,n){var i,r,s,o,a=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;s=n(33),i=n(102),o=n(11),r=n(104),t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.isVisible=!1,this.options.transfer&&(this.transfer=new i({el:this.$(".fss-airport-transfer")})),this.overlay=o.create({overlay_id:this.$el.attr("data-overlay"),dismiss_callback:_.bind(this.onClickDone,this)})}return a(e,t),e.prototype.mixins=[r],e.prototype.events={click:"onClickDone","click .close-panel":"onClickDone","click .popup":"onStopPropagation","click .fss-cross-sell-panel a":"onClickCrossSell"},e.prototype.show=function(){var t;if(!this.isVisible)return t=this.options.$body.get(0).getBoundingClientRect().top,this.toggleLoading(!1,!0),this.overlay.show(),this.$el.removeClass("hidden").css({position:"absolute",top:Math.abs(t)+(this.options.$body.width()<=960?75:140)}),this.isVisible=!0},e.prototype.hide=function(){return this.isVisible?(this.overlay.hide(this.$el.attr("data-overlay")),this.$el.addClass("hidden").removeAttr("style"),this.isVisible=!1,this.toggleLoading(!0)):null},e.prototype._injectCrossSell=function(t,e){var n,i;return n=$(t),i=this.$(".fss-cross-sell-panel"),i.find("a[data-type='"+e+"']").remove(),i["hotels"===e?"prepend":"append"](n),this.controller.onUpsellRendered(e)},e}(s)},function(t,e,n){var i,r,s,o,a,l,u,c=function(t,e){function n(){this.constructor=t}for(var i in e)_.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},_={}.hasOwnProperty;u=n(26),a=n(103),l=n(46),i=n(33),o=n(41),r=n(10),s=n(21),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.events={"click a":"onClick"},e.prototype.onClick=function(t){return l.trackGA({category:$(t.currentTarget).attr("data-origin"),action:"airport-transfer-link",label:"clicked",trackOnce:!1})},e.prototype.render=function(t,e,n){var i;return r.isOff("show_airport_transfers")?this:(i=this.getAirportTransfersData(e,n),l.trackGA({category:t,action:"airport-transfer-link",label:"shown",trackOnce:!1}),this.$el.html(a({origin:t,deeplink_url:this.getDeeplink(i),new_window:u("ktxtOpensInNewWindow"),action:u("ktxtAirportTransfers_action"),message:u("ktxtAirportTransfers_message"),title:u("ktxtAirportTransfers_title")})),this.show())},e.prototype.getDeeplink=function(t){var e;return e={currency:t.currency.toUpperCase(),locale:t.locale,market:t.market,passengers:t.passengers,pick_up:t.pick_up,pick_up_date:t.pick_up_date,drop_off:"-"},t.drop_off_date&&(e.drop_off_date=t.drop_off_date),"/airport-transfers/?"+$.param(e)},e.prototype.getAirportTransfersData=function(t,e){var n,i;return n=o.getLegAt(0),i=o.getLegAt(1),{currency:o.get("currency"),locale:o.get("locale"),market:o.get("market"),passengers:s.getTotal(),pick_up:t,pick_up_name:e,pick_up_date:n.date,drop_off_date:i?i.date:null}},e}(i)},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<a data-origin="'+(null==(__t=origin)?"":__t)+'" target="_blank" href="'+(null==(__t=deeplink_url)?"":__t)+'" title="'+(null==(__t=new_window)?"":__t)+'"><div class="fss-airport-transfer-header fss-bold"></div><h4>'+(null==(__t=title)?"":__t)+'</h4><div class="fss-airport-transfer-message text-sm">'+(null==(__t=message)?"":__t)+"</div>"+(null==(__t=__webpack_require__(55)({extra_class:"fss-airport-transfer-cta",is_secondary:!0,text:action}))?"":__t)+'<div class="fss-airport-transfer-action">'+(null==(__t=action)?"":__t)+"</div></a>";return __p}},function(t,e){t.exports=function(){function t(){}return t.prototype.renderAirportTransfers=function(t,e){if(this.transfer)return this.transfer.render("upsell-panel",t,e)},t.prototype.toggleLoading=function(t,e){var n;return null==e&&(e=!1),n=e?'.fss-popup-section:not(".fss-airport-transfer")':".fss-popup-section",this.$(n)[t?"addClass":"removeClass"]("hidden"),this.$(".loading-message")[t?"removeClass":"addClass"]("hidden")},t.prototype.onClickDone=function(){return _.defer(function(t){return function(){return t.controller.closeUpsellPanel(t),t.toggleLoading(!0)}}(this))},t.prototype.renderCrossSell=function(t,e,n){return t.done(function(t){return function(i){return i?t._injectCrossSell(i,e,n):t.hide()}}(this))},t.prototype.onClickCrossSell=function(t){var e,n,i;return e=$(t.currentTarget),i=e.data("type"),n=e.data("priced"),this.controller.selectCrossSell(i,"upsell_panel",n)},t}()},function(t,e,n){var i,r,s,o,a,l=function(t,e){function n(){this.constructor=t}for(var i in e)u.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;s=n(33),i=n(102),o=n(106),r=n(104),a=n(44),t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.$el.html(o({has_transfer:this.options.transfer})),this.isVisible=!1,this.options.transfer&&(this.transfer=new i({el:this.$(".fss-airport-transfer")})),this.itinerary_id=this.options.itinerary_id}return l(e,t),e.prototype.mixins=[r],e.prototype.events={"click .action-close":"onClickDone","click .fss-cross-sell-panel a":"onClickCrossSell"},e.prototype.show=function(){var t,e,n;if(e=this._getCurrentItinerary())return t=$("article[data-cid='"+e.cid+"']").parent(".day-list-item"),null!=(n=t.next(".fss-cross-sell-inline"))&&n.remove(),this.$el.insertAfter(t),a.setVisibleInlineUpsell(this),this.toggleLoading(!1,!this.options.transfer),!this.isVisible&&t.offset()&&$("html,body").animate({scrollTop:t.offset().top-5},"fast"),this.isVisible=!0,this.delegateEvents()},e.prototype.hide=function(){return this.$el.remove(),a.setVisibleInlineUpsell(null),this.isVisible=!1},e.prototype._getCurrentItinerary=function(){return this.controller.getItineraryFromCid(this.itinerary_id)},e.prototype._injectCrossSell=function(t,e,n){var i,r;return i=$(t),r=$(this.$(".fss-cross-sell-panel")[n]),r.html(i),this.controller.onUpsellRendered(e)},e}(s)},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="inline-upsell-header"><span class="sky-logo" aria-hidden=\'true\'></span><button class="close action-close" title="'+(null==(__t=translate("ktxt_close"))?"":__t)+'"></button></div><aside class="notch-holder"></aside><ul class="inline-upsell-content"><li class="fss-popup-section loading-message">'+(null==(__t=translate("ktxtLoading"))?"":__t)+'</li><li class="fss-cross-sell-panel fss-popup-section"></li>',has_transfer&&(__p+='<li class="fss-airport-transfer fss-popup-section"></li>'),__p+='<li class="fss-cross-sell-panel fss-popup-section"></li></ul>';return __p}},function(t,e,n){var i,r,s,o,a,l,u=function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;i=n(71),l=n(44),r=n(27),s=n(10),a=n(108),o=n(109),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.events=function(){var t;return t={"click .tab":"onClickTab","click .fqs-sort":"onClickMore","change select":"onChangeSort"},!r.supportsTouch()&&s.isOff("downrank_indirects")&&_.extend(t,{"mouseover .tab":"onMouseOverTab","mouseout .tab":"hideTooltip"}),t},e.prototype.render=function(t){return this.destroyTooltips(),this.show(),this.$el.find(".fqs-tabs").html(a(t))},e.prototype.renderMore=function(t){return this.$el.find(".fqs-more").html(o(t)),this.setHeight()},e.prototype.scrollOffset=function(t){var e,n,i;return e=$("#fqs-tabs"),(n=t.offset)?e.scrollLeft(n):(i=this.$el.find(".tab[data-tab='"+t.tab+"']"),i.length&&(n=i[0].offsetLeft)<e.scrollLeft()?e.scrollLeft(n):void 0)},e.prototype.setHeight=function(){return this.$el.find(".more-tab").css({height:this.$el.find(".fqs-tabs table").height()})},e.prototype.onClickMore=function(t){return this.controller.updateFQSTabScrollOffset(null),this.controller.navigateTo("sort")},e.prototype.onChangeSort=function(t){return this.controller.onChangeSort($(t.currentTarget).find(":selected").attr("value"))},e.prototype.onClickTab=function(t){return this.controller.onChangeSort($(t.currentTarget).attr("data-tab")),this.controller.updateFQSTabScrollOffset($("#fqs-tabs").scrollLeft())},e.prototype.onMouseOverTab=function(t){var e,n;return e=$(t.currentTarget),n=this.controller.getTabTooltip(e.attr("data-tab")),this.displayTooltip(e,n,!1,"top")},e.prototype.shutdown=function(){return this.controller.resetFQSTabModel(),this.hide()},e}(i)},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<table><tr><td class="tab',"fqs"===tab&&(__p+=" active"),__p+='" data-tab="fqs"><button><span class="fqs-type">'+(null==(__t=best_value)?"":__t)+'</span><span class="fqs-price">'+(null==(__t=best_price||"&nbsp;")?"":__t)+' </span><span class="fqs-duration">'+(null==(__t=best_duration)?"":__t)+'</span><span class="fqs-duration-label">'+(null==(__t=best_duration_label)?"":__t)+'</span></button></td><td class="tab',"price"===tab&&(__p+=" active"),__p+='" data-tab="price"><button><span class="fqs-type">'+(null==(__t=cheapest)?"":__t)+'</span><span class="fqs-price">'+(null==(__t=cheapest_price||"&nbsp;")?"":__t)+'</span><span class="fqs-duration">'+(null==(__t=cheapest_duration)?"":__t)+'</span><span class="fqs-duration-label">'+(null==(__t=cheapest_duration_label)?"":__t)+'</span></button></td><td class="tab',"duration"===tab&&(__p+=" active"),__p+='" data-tab="duration"><button><span class="fqs-type">'+(null==(__t=fastest)?"":__t)+'</span><span class="fqs-price">'+(null==(__t=fastest_price||"&nbsp;")?"":__t)+'</span><span class="fqs-duration">'+(null==(__t=fastest_duration)?"":__t)+'</span><span class="fqs-duration-label">'+(null==(__t=fastest_duration_label)?"":__t)+"</span></button></td></tr></table>";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="more-tab ',"more"===tab&&(__p+="active"),__p+='"><select class="fqs-more-options">',"more"===selected_option&&(__p+='<option disabled="true" selected="true">'+(null==(__t=more)?"":__t)+"</option>"),
__p+="",_.map(sort_options,function(t){__p+='<option value="'+(null==(__t=t[0])?"":__t)+'" ',t[0]===selected_option&&(__p+='selected="true"'),__p+=">"+(null==(__t=t[1])?"":__t)+"</option>"}),__p+='</select><div class="fqs-more-wrapper"><div class="fqs-more-container"><div class="fqs-sort">'+(null==(__t=selected_option_label)?"":__t)+"</div></div></div></div>";return __p}},function(t,e,n){var i,r,s,o,a,l,u,c,p,d,h=function(t,e){function n(){this.constructor=t}for(var i in e)f.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},f={}.hasOwnProperty;a=n(6),d=n(26),i=n(14),s=n(27),r=n(28),c=n(44),p=n(46),u=n(61),l=n(19)("options"),o=n(10),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.loadPqsForm=function(t,e,n,i){var r;return null==n&&(n="results"),!(s.getSessionStorage().tryGetValue("pqs_dismissed")===!0||!e.getPrice())&&(this.isPqsFormOpen()&&this.closePqsForm(),r=this.itineraries.get("pqsForm"),c.setPqsFormItineraryId(t.get("id")),r.shutdown(),r.set("created_at",new Date),r.set("pricing_option",e),r.set("unique_airline_ids",t.get("legs").getUniqueMarketingCarrierIds()),r.set("max_stop_count",t.get("legs").getMaxNumberOfStops()),r.set("has_NPT",e.hasNPT()),r.set("has_PST",e.hasPST()),r.set("is_multipart_booking",!1),r.set("section",n),i.renderPqsForm(t.cid,e.cid,this.getPqsData()),this.onPqsFormLoadedMX(e),!0)},e.prototype.loadPqsAfterLR=function(t,e,n,i){var r;if(null==n&&(n="results"),t)return r=t.get("pricing_options").getPricingOptionWithAgentId(e),r?this.loadPqsForm(t,r,n,i):void 0},e.prototype.submitPqsForm=function(t){var e;return e=this.itineraries.get("pqsForm"),this.bus.channel("pqs-submitted").publish(t,e.get("section")),e.set("submitted",t),e.set("submitted_at",new Date)},e.prototype.clearPqsState=function(){return c.setPqsFormItineraryId(null)},e.prototype.clearPqsData=function(){return this.itineraries.get("pqsForm").shutdown()},e.prototype.removePqsForm=function(){var t;return null!=(t=c.getPqsFormView())&&t.remove(),c.setPqsFormView(null),this.bus.channel("pqs-removed").publish()},e.prototype.closePqsForm=function(){return this.clearPqsState(),this.clearPqsData(),this.removePqsForm()},e.prototype.setPqsFormOption=function(t,e,n){return this.itineraries.get("pqsForm").get(t)[e]=n},e.prototype.getPqsFormOption=function(t,e){return this.itineraries.get("pqsForm").get(t)[e]},e.prototype.rememberPqsFormDismissedOption=function(){if(!this.isPqsFormSubmitted())return s.getSessionStorage().trySetValue("pqs_dismissed",!0)},e.prototype.isPqsFormOpen=function(){return!(!c.getPqsFormItineraryId()||!c.getPqsFormView())},e.prototype.isPqsFormSubmitted=function(){return(this.itineraries.get("pqsForm").get("submitted")||"").indexOf("submitted")!==-1},e.prototype.getPqsData=function(){var t,e,n,i,r;return n=this.itineraries.get("pqsForm"),r=n.get("pricing_option"),e={tag1:"<em>",tag2:"</em>",agent:n.getBookingAgent()},t=r.isFacilitatedBooking()?d("ktxt_pqs_fab_HowWasYourBookingBookOnSkyscanner",e):d("ktxt_pqs_HowWasYourBooking",e),{submitted:n.get("submitted"),negative:n.get("negative"),booking_agent:n.getBookingAgent(),pricing_option_agent_id:r.getUniqueAgentIds()[0],section:n.get("section"),price:(i=r.getTotalPrice())?a.formatCurrency(i):null,logo_domain:l.get("logosDomain")||"",howwasyourbooking:t,yourfeedbackmakesusbetter:d("ktxt_pqs_YourFeedbackMakesUsBetter"),sofarsogood:d("ktxt_pqs_SoFarSoGood"),itcouldhavebeenbetter:d("ktxt_pqs_ItCouldHaveBeenBetter"),imstillsearching:d("ktxt_pqs_ImStillSearching"),thanksforthefeedback:d("ktxt_pqs_ThanksForTheFeedback"),theflightwasnotavailable:d("ktxt_pqs_TheFlightWasNotAvailable"),thepricesdidntmatch:d("ktxt_pqs_ThePricesDidntMatch"),unexpectedextras:d("ktxt_pqs_UnexpectedExtras"),thesitewashardtouse:d("ktxt_pqs_TheSiteWasHardToUse",{company_name:n.getBookingAgent()}),otherissues:d("ktxt_pqs_OtherIssues"),whatwastheactualproblem:d("ktxt_pqs_WhatWasTheActualProblem"),sendfeedback:d("ktxt_pqs_SendFeedback"),thanksforyourfeedback:d("ktxt_pqs_ThanksForYourFeedback"),returningyoutoyoursearch:d("ktxt_pqs_ReturningYouToYourSearch"),dataprotection:d("ktxt_pqs_DataProtection")}},e.prototype.onPqsFormLoadedMX=function(t){return p.trackMixpanel("Flight Day View PQS Survey Loaded",r(null,function(){return{Agent:_.first(t.getAgentNames()),"Website ID":_.first(t.getUniqueAgentIds()),"Is Facilitated":t.isFacilitatedBooking(),"Agent Pre Redirect ID":u.getId()}}))},e}(i)},function(t,e,n){var i,r,s,o,a,l,u,c,p,d,h,f=function(t,e){function n(){this.constructor=t}for(var i in e)g.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},g={}.hasOwnProperty;i=n(14),r=n(112)("fqs"),c=n(6),h=n(26),a=n(67),s=n(27),u=n(19)("initial_query"),d=n(41),o=n(10),p=n(21),l=n(127).default,t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.renderFQSTabs=function(t){var e,n,i,r,s,o,a,_,f,g,m,y;return g=this.itineraries.get("itineraries").sort_by,_=this.getFQSTabsData(t),e=_.best,i=_.cheapest,s=_.fastest,y=_.tab,m=_.sort_options,a=p.getTotal(),f=!this.isSameFQSSortOption(g),this.fqsTabModel.get("tab")||this.updateFQSTabModel(y),this.setFQSSortOption(g),this.fqsTabs.render({tab:this.fqsTabModel.get("tab"),best_price:e&&(n=e.getPrice(a))?c.formatCurrency(n):null,cheapest_price:i&&(r=i.getPrice(a))?c.formatCurrency(r):null,fastest_price:s&&(o=s.getPrice(a))?c.formatCurrency(o):null,best_duration:l(e.getAverageDuration()),best_duration_label:h("ktxt_fqs_Duration",{duration:l(e.getAverageDuration())}),cheapest_duration:l(i.getAverageDuration()),cheapest_duration_label:h("ktxt_fqs_Duration",{duration:l(i.getAverageDuration())}),fastest_duration:l(s.getAverageDuration()),fastest_duration_label:h("ktxt_fqs_Duration",{duration:l(s.getAverageDuration())}),best_value:h("ktxt_fqs_tab_BestValue"),cheapest:h("ktxt_fqs_tab_Cheapest"),fastest:h("ktxt_fqs_tab_Fastest")}),f&&this.fqsTabs.renderMore({tab:this.fqsTabModel.get("tab"),selected_option:this.fqsTabModel.get("option"),sort_options:d.getSortOptions(u.get("trip_type"),m),selected_option_label:d.getSortLabel(this.fqsTabModel.get("option")),more:h("ktxt_fqs_tab_More")}),this.fqsTabs.scrollOffset({tab:this.fqsTabModel.get("tab"),offset:this.fqsTabModel.get("offset")})},e.prototype.hideFQSTabs=function(){return this.fqsTabs.hide()},e.prototype.isSameFQSSortOption=function(t){return t===this.fqsTabModel.get("option")||t===this.fqsTabModel.get("tab")},e.prototype.setFQSSortOption=function(t){if(!this.isSameFQSSortOption(t))return this.updateFQSTabModel(t),this.rememberFQSSort(t)},e.prototype.updateFQSSortOnResize=function(t){return this.fqsTabs.setHeight(),this.setFQSSortOption(t)},e.prototype.rememberFQSSort=function(t){return s.getSessionStorage().trySetValue("fqs_sort_by",t)},e.prototype.updateFQSTabScrollOffset=function(t){return this.fqsTabModel.set("offset",t)},e.prototype.updateFQSTabModel=function(t){if(!this.isSameFQSSortOption(t))return _.contains(["fqs","price","duration"],t)?(this.fqsTabModel.set("tab",t),this.fqsTabModel.set("option","more")):(this.fqsTabModel.set("tab","more"),this.fqsTabModel.set("option",t))},e.prototype.resetFQSTabModel=function(){return this.fqsTabModel.shutdown()},e.prototype.getFQSTabDetails=function(t,e){return null==e&&(e="fqs"),t.sort_by=e,t.setFqsSorter("fqs"===e?this.getFQSSorter():null),t.sort().at(0)||null},e.prototype.getFQSTabsData=function(t){var e;return e=new r,e.models=t.slice(),{best:this.getFQSTabDetails(e,"fqs"),cheapest:this.getFQSTabDetails(e,"price"),fastest:this.getFQSTabDetails(e,"duration"),tab:"fqs",sort_options:{fqs:!1,price:!1,duration:!1}}},e.prototype.getFQSSorter=function(){return o.isOn("downrank_indirects")?"fqsdirects":"fqsscore"},e.prototype.getTabTooltip=function(t){switch(t){case"fqs":return h("ktxt_fqs_SortByPriceAndDuration");case"price":return h("ktxt_fqs_SortByCheapest");case"duration":return h("ktxt_fqs_SortByDuration");default:return""}},e}(i)},function(t,e,n){var i,r,s,o,a,l,u=function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;i=n(113),o=n(67),r=n(114),s=n(48),a=n(125),l=n(126),t.exports=function(t){var e,n,c,p;return e=r(t),p=l(t),c=a(t),n=s(t),function(t){function i(){i.__super__.constructor.apply(this,arguments),this.shutdown(),this.initComparators()}return u(i,t),i.prototype.initComparators=function(){return this.by_airlines=this.comparatorBuilder(this.airlineSorter,[this.priceSorter,this.outboundSorter]),this.by_price=this.comparatorBuilder(this.priceSorter,[this.outboundSorter,this.durationSorter]),this.by_duration=this.comparatorBuilder(this.durationSorter,[this.priceSorter,this.outboundSorter]),this.by_stops=this.comparatorBuilder(this.stopsSorter,[this.priceSorter,this.outboundSorter]),this.by_outbound_departure_time=this.comparatorBuilder(this.outboundSorter,[this.priceSorter,this.outboundSorter]),this.by_return_departure_time=this.comparatorBuilder(this.returnSorter,[this.priceSorter,this.outboundSorter]),this.by_fqsscore=this.comparatorBuilder(this.fqsscoreSorter,[this.priceSorter,this.outboundSorter,this.durationSorter]),this.by_fqsdirects=this.comparatorBuilder(this.fqsdirectsSorter,[this.priceSorter,this.outboundSorter,this.durationSorter])},i.prototype.build=function(t,n){return this.fqs_ranks=null,this.fqs_sorter="fqsscore",i.__super__.build.call(this,_.map(_.isFunction(n)?n(t.itineraries):t.itineraries,function(t,n){return(new e).build(t,n)})),this},i.prototype.collectBestPrices=function(){return _(this.map(function(t){return t.get("pricing_options").collectProviderPrices()})).flatten().groupBy("agent_id").transform(function(t,e,n){return t[n]=_.min(e,"price").price}).value()},i.prototype.getBestItemForAgent=function(t){var e;return e=_(this.map(function(e){return e.get("pricing_options").collectItemsWithAgent(t)})).flatten().value(),o(_.min,e,function(t){return t.getPrice()})},i.prototype.hasFacilitatedBooking=function(){return this.any(function(t){return t.hasFacilitatedBooking()})},i.prototype.getCheapest=function(){return"price"===this.sort_by?this.getMain():this.minModel(function(t){return t.getPrice()})},i.prototype.getCheapestDirect=function(){var t;return"price"===this.sort_by&&0===this.getMain().getMaxStopCount()?this.getMain():(t=this.filter(function(t){return 0===t.getMaxStopCount()}),0!==t.length?o(_.min,t,function(t){return t.getPrice()}):null)},i.prototype.getFirstDirect=function(){return this.find(function(t){return 0===t.getMaxStopCount()})||null},i.prototype.getFQSRank=function(t){return"fqs"===this.sort_by&&t.getFQSScore()===this.getMain().getFQSScore()?1:_.indexOf(this.getFQSUniqueRanks(),t.getFQSScore())+1},i.prototype.getFQSUniqueRanks=function(){return this.fqs_ranks?this.fqs_ranks:this.fqs_ranks=_(this.models).map(function(t){return t.getFQSScore()}).uniq().sort().reverse().value()},i.prototype.setFqsSorter=function(t){this.fqs_sorter=t},i.prototype.getBestFQS=function(){return"fqs"===this.sort_by?this.getMain():this.maxModel(function(t){return t.getFQSScore()})},i.prototype.getFastest=function(){return"duration"===this.sort_by?this.getMain():this.minModel(function(t){return t.getTotalDuration()})},i.prototype.shutdown=function(){return this.sort_by="price",this.sort_modified=!1,this.fqs_ranks=null,this.fqs_sorter="fssscore"},i.prototype.getSortName=function(){return this.sort_by},i.prototype.isSortModified=function(){return this.sort_modified},i.prototype.getAgents=function(){return n},i.prototype.comparatorBuilder=function(t,e){return function(n,i){var r,s,o,a;if(a=t.call(null,n,i),0!==a)return a;for(s=0,o=e.length;s<o&&(r=e[s],0!==a||(a=r.call(null,n,i),0===a));s++);return a}},i.prototype.comparator=function(t,e){return this["by_"+("fqs"===this.sort_by?this.fqs_sorter:this.sort_by)](t,e)},i.prototype.priceSorter=function(t,e){var n,i;return n=t.get("pricing_options").getMainPricingOption().getTotalPrice(),i=e.get("pricing_options").getMainPricingOption().getTotalPrice(),n||i?n?i?n>i?1:n<i?-1:0:-1:1:0},i.prototype.durationSorter=function(t,e){var n,i;return n=t.get("legs").getTotalDuration(),i=e.get("legs").getTotalDuration(),n>i?1:n<i?-1:0},i.prototype.airlineSorter=function(t,e){var n,i;return n=t.get("legs").getCombinedArlineName().join(",").toLowerCase(),i=e.get("legs").getCombinedArlineName().join(",").toLowerCase(),n>i?1:n<i?-1:0},i.prototype.stopsSorter=function(t,e){var n,i;return n=t.get("legs").getStopsCount(),i=e.get("legs").getStopsCount(),n>i?1:n<i?-1:0},i.prototype.outboundSorter=function(t,e){var n,i,r,s;return n=null!=(r=t.getFirstLeg())?r.getDepartureTime():void 0,i=null!=(s=e.getFirstLeg())?s.getDepartureTime():void 0,n||i?n>i?1:n<i?-1:0:0},i.prototype.returnSorter=function(t,e){var n,i,r,s;return n=null!=(r=t.getSecondLeg())?r.getDepartureTime():void 0,i=null!=(s=e.getSecondLeg())?s.getDepartureTime():void 0,n||i?n>i?1:n<i?-1:0:0},i.prototype.fqsscoreSorter=function(t,e){var n,i;return n=t.getFQSScore(),i=e.getFQSScore(),n||i?n<i?1:n>i?-1:0:0},i.prototype.fqsdirectsSorter=function(t,e){var n,i;return n=0===t.getMaxStopCount(),i=0===e.getMaxStopCount(),n===i?0:n?-1:i?1:0},i}(i)}},function(t,e,n){var i,r,s=[].slice;r=n(67),t.exports=i=function(){function t(){this.reset()}return _.forEach(["forEach","map","reduce","find","findIndex","filter","every","all","some","any","min","max","invoke"],function(e){return t.prototype[e]=function(){return _[e].apply(_,[this.models].concat(s.call(arguments)))}}),_.forEach(["groupBy","countBy","sortBy","indexBy"],function(e){return t.prototype[e]=function(t,n){var i;return i=_.isFunction(t)?t:function(e){return e.get(t)},_[e](this.models,i,n)}}),t.prototype.build=function(t){var e,n,i;for(this.reset(),e=0,n=t.length;e<n;e++)i=t[e],i.id&&(this.byId[i.id]=i),this.byCid[i.cid]=i,this.models.push(i);return this.length=t.length,this},t.prototype.getMain=function(){return this.models[0]||null},t.prototype.at=function(t){return this.models[t]||null},t.prototype.get=function(t){return this.byId[t]||this.byCid[t]||null},t.prototype.sort=function(){if(!this.comparator)throw"Cannot sort a set without a comparator";return _.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models=_.pluck(_.map(this.models,function(t,e){return{model:t,index:e}}).sort(function(t){return function(e,n){var i;return i=t.comparator(e.model,n.model),0===i?e.index-n.index:i}}(this)),"model"),this},t.prototype.minModel=function(t,e){return r(_.min,this.models,t,e)},t.prototype.maxModel=function(t,e){return r(_.max,this.models,t,e)},t.prototype.reset=function(){return this.models=[],this.byId={},this.byCid={},this.length=0,this},t}()},function(t,e,n){var i,r,s,o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;r=n(115).default,i=n(116),s=n(121),t.exports=function(t){var e,n;return e=i(t),n=s(t),function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return o(i,t),i.prototype.defaults={position:0,screen_position:0,id:null,legs:null,pricing_options:null,raw_data:null,score:null,fqs_initial_score:null},i.prototype.build=function(t,r){return i.__super__.build.call(this,{id:t.id,position:r,legs:(new e).build(t.leg_ids),pricing_options:(new n).build(t.pricing_options),score:t.score,fqs_initial_score:t.score,raw_data:null,sponsorship:t.sponsorship}),this},i.prototype.hasNPT=function(){return this.get("pricing_options").hasNPT()},i.prototype.hasPST=function(){return this.get("pricing_options").hasPST()},i.prototype.hasMultiTicket=function(){return this.get("pricing_options").hasMultiTicket()},i.prototype.isSponsored=function(){return!!this.get("sponsorship")},i.prototype.getPrice=function(t){return null==t&&(t=1),this.get("pricing_options").getMainPricingOption().getPrice(t)},i.prototype.getMaxStopCount=function(){return _.max(this.get("legs").map(function(t){return t.getStopCount()}))},i.prototype.getTotalStopCount=function(){return this.get("legs").reduce(function(t,e){return t+e.getStopCount()},0)},i.prototype.getMaxPQS=function(){return this.get("pricing_options").max(function(t){return t.getMaxPQS()||0}).getMaxPQS()},i.prototype.hasAnyCarrierAgents=function(){return this.get("pricing_options").hasAnyCarrierAgents()},i.prototype.getStopCountForLeg=function(t){return this.get("legs").at(t).getStopCount()},i.prototype.getTotalDuration=function(){return this.get("legs").getTotalDuration()},i.prototype.getAverageDuration=function(){return Math.round(this.getTotalDuration()/this.get("legs").models.length)},i.prototype.hasChangeAirport=function(){return this.get("legs").some(function(t){return _.some(t.getStopsWithChangeAirport(),function(t){return t.change_airport})})},i.prototype.hasUnpricedOptionsOnly=function(){return this.get("pricing_options").every(function(t){return t.isUnpriced()})},i.prototype.hasFacilitatedBooking=function(){return this.get("pricing_options").any(function(t){return t.isFacilitatedBooking()})},i.prototype.getFirstLeg=function(){return this.get("legs").at(0)},i.prototype.getSecondLeg=function(){return this.get("legs").at(1)},i.prototype.getFQSScore=function(){return this.get("score")},i.prototype.getFQSInitialScore=function(){return this.get("fqs_initial_score")},i.prototype.getTransferPickUp=function(){return this.getFirstLeg().getArrivalPlaceAltId()||null},i.prototype.addPromotionTags=function(t,e){return this.get("pricing_options").addPromotionTags(t,e)},i.prototype.getSortedPromotedOptions=function(){return this.get("pricing_options").getSortedPromotedOptions()},i.prototype.getFlightNumbers=function(){return this.get("legs").getFlightNumbers()},i.prototype.setFQSScore=function(t){return this.set("score",t)},i.prototype.containsMaxStopsOf=function(t){var e;return e=this.get("legs").sortBy(function(t){return t.getStopCount()}),_.last(e).getStopCount()===t},i.prototype.firstLegDirect=function(){var t;return!!(t=this.getFirstLeg())&&0===t.getStopCount()},i.prototype.secondLegDirect=function(){var t;return!!(t=this.getSecondLeg())&&0===t.getStopCount()},i}(r)}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(20),u=i(l),c=function(t){function e(){r(this,e);var t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.data=_.assign({},_.result(t,"defaults")),t.cid=_.uniqueId("model_"),t.id=null,t}return o(e,t),a(e,[{key:"build",value:function(t){return _.has(t,"id")&&(this.id=t.id),_.assign(this.data,t),this}}]),e}(u.default);_.forEach(["keys","values","pairs","invert","pick","omit","chain","isEmpty"],function(t){c.prototype[t]=function(){var e;return(e=_)[t].apply(e,[this.data].concat(Array.prototype.slice.call(arguments)))}}),e.default=c},function(t,e,n){var i,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;i=n(113),r=n(117),t.exports=function(t){var e;return e=r(t),function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return s(n,t),n.prototype.build=function(t){return n.__super__.build.call(this,_.map(t,function(t,n){return(new e).build(t,n)})),this},n.prototype.getMixedAirports=function(){var t;return t=this.reduce(function(t,e){return t.push({city:e.getDepartureCityId(),airport:e.getDeparturePlaceId()}),t.push({city:e.getArrivalCityId(),airport:e.getArrivalPlaceId()}),t},[]),_(t).unique("airport").groupBy("city").filter(function(t){return t.length>1}).flatten().pluck("airport").value()},n.prototype.getCombinedArlineName=function(){return _.unique(_.flatten(this.invoke("getCombinedArlineName")))},n.prototype.getTotalDuration=function(){return this.reduce(function(t,e){return t+e.getDuration()},0)},n.prototype.getLegDuration=function(t){var e;return(e=this.at(t))?e.getDuration()||null:null},n.prototype.getDeeplinkStops=function(){return this.invoke("getStopCount").join(",")},n.prototype.getMaxNumberOfStops=function(){return Math.max.apply(Math,this.invoke("getStopCount"))},n.prototype.getStopsCount=function(){return this.reduce(function(t,e){return t+e.getStopCount()},0)},n.prototype.getUniquePlaces=function(){var t;return t=this.reduce(function(t,e){return t.push(e.getDeparturePlace()),t.push(e.getArrivalPlace()),t},[]),_.uniq(t,"id")},n.prototype.getMarketingCarriers=function(){return _.flatten(this.invoke("getMarketingCarriers"))},n.prototype.getUniqueMarketingCarriers=function(){return _.uniq(this.getMarketingCarriers(),!1,"id")},n.prototype.getMarketingCarrierIds=function(){return _.pluck(this.getMarketingCarriers(),"id")},n.prototype.getUniqueMarketingCarrierIds=function(){return _.uniq(this.getMarketingCarrierIds())},n.prototype.getFlightNumbers=function(){return _.flatten(this.invoke("getFlightNumber"))},n.prototype.getSelfTransferLegCount=function(){return this.invoke("isSelfTransfer").reduce(function(t,e){return e&&++t,t},0)},n}(i)}},function(t,e,n){var i,r,s,o,a,l,u,c=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;i=n(115).default,s=n(8),o=n(118),a=n(119),l=n(42),r=n(69),u=n(120),t.exports=function(t){var e,n,p,d;return n=a(t),p=l(t),e=r(t),d=u(t),function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return c(i,t),i.prototype.defaults={position:0,leg_id:null},i.prototype.build=function(t,e){return i.__super__.build.call(this,{leg_id:t,position:e}),this},i.prototype.getLeg=function(){return n.get(this.get("leg_id"))},i.prototype.getPosition=function(){return this.get("position")},i.prototype.getSegments=function(){return _.map(this.getLeg().segment_ids,function(t){return d.get(t)})},i.prototype.getDeparture=function(){return this.getLeg().departure},i.prototype.getDepartureSliderDateTime=function(){return o(s.getSliderDateTimeFromStr)(this.getDeparture())},i.prototype.getDepartureTime=function(){return o(s.parseDateTime)(this.getDeparture())},i.prototype.getDeparturePlace=function(){return p.get(this.getLeg().origin_place_id)},i.prototype.getDeparturePlaceId=function(){return this.getDeparturePlace().id},i.prototype.getDepartureCityId=function(){return p.get(this.getDeparturePlace().parent_id).id},i.prototype.getDepartureCityAltId=function(){return p.get(this.getDeparturePlace().parent_id).alt_id},i.prototype.getDeparturePlaceAltId=function(){return this.getDeparturePlace().alt_id},i.prototype.getDeparturePlaceName=function(){return this.getDeparturePlace().name},i.prototype.getDepartureCityName=function(){return p.get(this.getDeparturePlace().parent_id).name},i.prototype.getArrival=function(){return this.getLeg().arrival},i.prototype.getArrivalSliderDateTime=function(){return o(s.getSliderDateTimeFromStr)(this.getArrival())},i.prototype.getArrivalTime=function(){return o(s.parseDateTime)(this.getArrival())},i.prototype.getArrivalPlace=function(){return p.get(this.getLeg().destination_place_id)},i.prototype.getArrivalPlaceId=function(){return this.getArrivalPlace().id},i.prototype.getArrivalCityId=function(){return p.get(this.getArrivalPlace().parent_id).id},i.prototype.getArrivalCityAltId=function(){return p.get(this.getArrivalPlace().parent_id).alt_id},i.prototype.getArrivalPlaceAltId=function(){return this.getArrivalPlace().alt_id},i.prototype.getArrivalPlaceName=function(){return this.getArrivalPlace().name},i.prototype.getArrivalCityName=function(){return p.get(this.getArrivalPlace().parent_id).name},i.prototype.getDuration=function(){return this.getLeg().duration},i.prototype.getStopCount=function(){return this.getLeg().stop_count},i.prototype.getStops=function(){return _.map(this.getLeg().stop_ids,function(t){return _.compact(_.map(t,function(t){return p.get(t)}))})},i.prototype.getStopsWithChangeAirport=function(){return _(this.getStops()).filter(function(t){return t.length>0}).map(function(t){var e,n;return e=t[0],1===t.length?{id:e.id,alt_id:e.alt_id,name:e.name,change_airport:!1}:(n=p.get(e.parent_id),{id:n.id,alt_id:n.display_code,name:n.name,change_airport:!0})}).value()},i.prototype.getMarketingCarriersIds=function(){return this.getLeg().marketing_carrier_ids||[]},i.prototype.getOperatingCarriersIds=function(){return this.getLeg().operating_carrier_ids||[]},i.prototype.getMarketingCarriers=function(){return _.map(this.getMarketingCarriersIds(),function(t){return e.get(t)})},i.prototype.getCombinedArlineName=function(){return _.map(this.getMarketingCarriers(),"name")},i.prototype.canShowLogo=function(){return 1===this.getMarketingCarriers().length},i.prototype.getLogoCodes=function(){return _.map(this.getMarketingCarriers(),"alt_id")},i.prototype.getOperatorType=function(){var t,n,i;return n=this.getMarketingCarriersIds(),i=this.getOperatingCarriersIds(),t=_.difference(i,n),t.length?{type:t.length===i.length?"operated_by":"partially_operated_by",airline:_.map(t,function(t){return e.get(t).name}).join(", ")}:null},i.prototype.getFlightNumber=function(){return _.map(this.getSegments(),function(t){return""+(e.get(t.marketing_carrier_id).alt_id||"")+(t.marketing_flight_number||"")})},i.prototype.isSelfTransfer=function(){return this.getLeg().self_transfer===!0},i}(i)}},function(t,e){t.exports=function(t,e){return function(n){return null===n||void 0===n?e||null:t(n)}}},function(t,e,n){var i,r;i=n(43),r={},t.exports=function(t){return r[t]||(r[t]=new i)}},function(t,e,n){var i,r;i=n(43),r={},t.exports=function(t){return r[t]||(r[t]=new i)}},function(t,e,n){var i,r,s,o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;i=n(113),s=n(67),r=n(122),t.exports=function(t){var e;return e=r(t),function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return o(n,t),n.prototype.build=function(t){return n.__super__.build.call(this,_.map(t,function(t,n){return(new e).build(t,n)})),this},n.prototype.collectProviderPrices=function(){return _.flatten(this.map(function(t){return t.get("items").collectProviderPrices()}))},n.prototype.collectItemsWithAgent=function(t){return _.flatten(this.map(function(e){return e.get("items").collectItemsWithAgent(t)}))},n.prototype.getUniqueAgentIds=function(){return _.unique(this.reduce(function(t,e){return t.concat(e.getUniqueAgentIds())},[]))},n.prototype.hasNPT=function(){return this.any(function(t){return t.hasNPT()})},n.prototype.hasPST=function(){return this.any(function(t){return t.hasPST()})},n.prototype.hasMultiTicket=function(){return this.any(function(t){return t.isMultiTicket()})},n.prototype.hasMultiTicketOnly=function(){return this.all(function(t){return t.isMultiTicket()})},n.prototype.getMutliTicketOption=function(){return this.find(function(t){return t.isMultiTicket()})},n.prototype.hasTwoBookingTicketOnly=function(){return this.all(function(t){return t.isTwoBookingTicket()})},n.prototype.hasPriceForBookingOnly=function(){return this.any(function(t){return t.hasPriceForBookingOnly()})},n.prototype.getPricingOptionWithAgentId=function(t){return this.find(function(e){return _.contains(e.getUniqueAgentIds(),t)})},n.prototype.getMainPricingOption=function(){return this.getMain()},n.prototype.filterByStatus=function(t){return null==t&&(t=[]),this.filter(function(e){return _.contains(t,e.getUpdateStatus())})},n.prototype.hasAnyCarrierAgents=function(){return this.any(function(t){return t.hasCarrierAgent()})},n.prototype.getPricedByAirline=function(){var t;return t=this.filter(function(t){return t.hasCarrierAgent()}),t.length?_.any(t,function(t){return t.getTotalPrice()})?"Priced":"Unpriced":null},n.prototype.getCheapest=function(){return this.minModel(function(t){return t.getPrice()})},n.prototype.getBestPQSScoreOption=function(){return this.maxModel(function(t){return t.get("items").getBestPQSRating()})},n.prototype.addPromotionTags=function(t,e){var n,i,r,s,o;return null==t&&(t=["airline","cheapest","best"]),null==e&&(e=null),s=Math.floor(this.minModel(function(t){return t.getTotalPrice()}).getTotalPrice()),i=this.maxModel(function(t){return t.getAgentPQSRank()}).getAgentPQSRank(),r=this.filter(function(t){if(Math.floor(t.getTotalPrice())===s)return t}),n=this.filter(function(t){if(t.getAgentPQSRank()===i)return t}),o=this.models.length,this.forEach(function(a){if(a.set("promotion_types",[]),_.contains(t,"cheapest")&&o>1&&Math.floor(a.getTotalPrice())===s&&1===r.length&&a.get("promotion_types").push("cheapest"),_.contains(t,"airline")&&a.hasCarrierAgent()&&!a.isUnpriced()&&a.get("promotion_types").push("airline"),_.contains(t,"best")&&o>1&&a.getAgentPQSRank()===i&&1===n.length&&!a.isUnpriced()&&a.get("promotion_types").push("best"),_.contains(t,"sponsored")&&e&&a.hasAgentId(e.partner)&&(a.get("promotion_types").push("sponsored"),e.urlTransform))return a.setDeeplink(e.urlTransform(a.getDeeplink()))})},n.prototype.getSortedPromotedOptions=function(){var t,e,n;return e=0,t=this.models.length,n=_.sortBy(this.models,function(n,i){var r;if((r=n.get("promotion_types")).length){if(e+=1,_.contains(r,"sponsored"))return-1;if(_.contains(r,"cheapest"))return 0;if(_.contains(r,"airline"))return 1;if(_.contains(r,"best"))return 2}return t+i}),{pricing_options:n,promoted_partners:e}},n}(i)}},function(t,e,n){var i,r,s,o,a,l=function(t,e){function n(){this.constructor=t}for(var i in e)u.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;r=n(115).default,o=n(8),a=n(118),s=n(48),i=n(123),t.exports=function(t){var e,n;return n=s(t),e=i(t),function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return l(i,t),i.prototype.defaults={position:0,agent_ids:null,price:null,items:null,session_time:null,promotion_types:[]},i.prototype.build=function(t,n){return i.__super__.build.call(this,{position:n,agent_ids:t.agent_ids,price:t.price,items:(new e).build(t.items),session_time:o.getSessionTime()}),this},i.prototype.getQuoteAge=function(){return null===this.getInitialQuoteAge()?null:o.getSessionTime()-this.get("session_time")+this.getInitialQuoteAge()},i.prototype.getInitialQuoteAge=function(){var t;return t=(this.get("price")||{}).quote_age,null===t||void 0===t?null:t},i.prototype.getMaxRedirectAge=function(){var t;return(t=this.get("items").min(function(t){return t.get("max_redirect_age")}))?t.get("max_redirect_age"):10},i.prototype.hasAgeExceeded=function(){return this.getQuoteAge()>this.getMaxRedirectAge()},i.prototype.hasPriceForBookingOnly=function(){return!1},i.prototype.isUnpriced=function(){return this.getTotalPrice()<=0},i.prototype.getPrice=function(t){var e;return null==t&&(t=1),e=this.getTotalPrice(),e?e/t:e},i.prototype.getTotalPrice=function(){return(this.get("price")||{}).amount||null},i.prototype.getUpdateStatus=function(){return(this.get("price")||{}).update_status||null},i.prototype.getLastUpdated=function(){return(this.get("price")||{}).last_updated||null},i.prototype.getLastUpdatedDateTime=function(){
return a(o.parseDateTime)(this.getLastUpdated())},i.prototype.isFailed=function(){return"failed"===this.getUpdateStatus()},i.prototype.isEstimated=function(){return"estimated"===this.getUpdateStatus()},i.prototype.isPending=function(){return"pending"===this.getUpdateStatus()},i.prototype.getAgents=function(){return _.map(this.get("agent_ids"),function(t){return n.get(t)})},i.prototype.hasAgentId=function(t){return _.any(this.getAgents(),function(e){return e.id===t})},i.prototype.getAgentNames=function(){return _.map(this.getAgents(),"name")},i.prototype.getUniqueAgentNames=function(){return _.unique(this.getAgentNames())},i.prototype.getUniqueAgentIds=function(){return _.unique(this.get("agent_ids"))},i.prototype.hasCarrierAgent=function(){return _.any(this.getAgents(),"is_carrier")},i.prototype.isLiveUpdateAllowed=function(){return _.all(this.getAgents(),"live_update_allowed")},i.prototype.isLive=function(){return!!this.isUnpriced()||this.isLiveUpdateAllowed()&&!this.isPending()&&!this.isFailed()&&!this.hasAgeExceeded()},i.prototype.canHaveDirectExit=function(){return!this.get("items").hasItemWithMissingDeeplink()&&(!!this.isFacilitatedBooking()||(!!this.isUnpriced()||!!this.get("items").isSingleBookingRequired()&&(!this.hasPriceForBookingOnly()&&!!this.isLive())))},i.prototype.canUseLightRedirect=function(t){return null==t&&(t=!1),!(0!==this.get("position")&&!t)&&(!this.isUnpriced()&&(!!this.get("items").isSingleBookingRequired()&&!this.hasPriceForBookingOnly()))},i.prototype.getDeeplink=function(){var t;return t=this.get("items"),t.isSingleBookingRequired()?this.getMainItem().get("url"):null},i.prototype.setDeeplink=function(t){var e;return e=this.get("items"),e.isSingleBookingRequired()?this.getMainItem().set("url",t):null},i.prototype.isFacilitatedBooking=function(){return this.get("items").any(function(t){return t.get("is_facilitated")})},i.prototype.isSponsored=function(){return _.contains(this.get("promotion_types"),"sponsored")},i.prototype.isMultiTicket=function(){return this.get("items").areMultipleBookingsRequired()},i.prototype.isTwoBookingTicket=function(){var t;return 2===(t=this.get("items")).numberOfBookingsRequired()&&!t.hasNPT()},i.prototype.numberOfBookingsRequired=function(){return this.get("items").numberOfBookingsRequired()},i.prototype.getMainItem=function(){return this.get("items").at(0)||null},i.prototype.hasNPT=function(){return this.get("items").hasNPT()},i.prototype.hasPST=function(){return this.get("items").hasPST()},i.prototype.isOptimisedForMobile=function(){return _.all(this.get("agent_ids"),function(t){return n.get(t).optimised_for_mobile})},i.prototype.getAgentPQSRank=function(){var t;return(t=this.getMainItem())?t.getAgentPQSRank():null},i.prototype.getMaxPQS=function(){return _.max(this.get("items").map(function(t){return t.getAgentPQSRating()}))},i}(r)}},function(t,e,n){var i,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;i=n(113),r=n(124),t.exports=function(t){var e;return e=r(t),function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return s(n,t),n.prototype.build=function(t){return n.__super__.build.call(this,_.map(t,function(t,n){return(new e).build(t,n)})),this},n.prototype.collectProviderPrices=function(){return this.reduce(function(t,e){var n;return n=e.getPrice(),n&&this.isSingleBookingRequired()&&t.push({agent_id:e.get("agent_id"),price:n}),t},[],this)},n.prototype.collectItemsWithAgent=function(t){return this.filter(function(e){return e.get("agent_id")===t&&this.isSingleBookingRequired()},this)},n.prototype.numberOfBookingsRequired=function(){return this.length},n.prototype.isSingleBookingRequired=function(){return 1===this.numberOfBookingsRequired()},n.prototype.areMultipleBookingsRequired=function(){return this.numberOfBookingsRequired()>=2},n.prototype.hasItemWithMissingDeeplink=function(){return this.any(function(t){return!t.has("url")})},n.prototype.hasNPT=function(){return this.any(function(t){return"self-transfer"===t.get("transfer_protection")})},n.prototype.hasPST=function(){return this.any(function(t){return"protected-self-transfer"===t.get("transfer_protection")})},n.prototype.getBestPQSScoreItem=function(){return this.max(function(t){return t.getAgentPQSRating()})},n.prototype.getBestPQSRating=function(){var t;return(t=this.getBestPQSScoreItem())?t.getAgentPQSRating():null},n.prototype.getLowestPQSRating=function(){var t;return(t=this.min(function(t){return t.getAgentPQSRating()}))?t.getAgentPQSRating():null},n}(i)}},function(t,e,n){var i,r,s,o,a=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;o=n(51),i=n(115).default,s=n(8),r=n(48),t.exports=function(t){var e;return e=r(t),function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,t),n.prototype.defaults={position:0,agent_id:null,segment_ids:null,url:null,price:null,transfer_protection:null,is_facilitated:!1,session_time:null,max_redirect_age:10},n.prototype.build=function(t,e){return n.__super__.build.call(this,{position:e,agent_id:t.agent_id,segment_ids:t.segment_ids,url:t.url,price:t.price,transfer_protection:t.transfer_protection,is_facilitated:t.is_facilitated||!1,session_time:s.getSessionTime(),max_redirect_age:t.max_redirect_age||10}),this},n.prototype.getAgent=function(){return e.get(this.get("agent_id"))},n.prototype.getAgentPQSData=function(){return e.getPQSData(this.get("agent_id"))},n.prototype.getAgentPQSRating=function(){return(this.getAgentPQSData()||{}).rating||null},n.prototype.getAgentPQSRank=function(){return o.getRank(this.getAgentPQSRating())},n.prototype.getAgentName=function(){return(this.getAgent()||{}).name||this.get("agent_id")},n.prototype.getPrice=function(){return(this.get("price")||{}).amount||null},n.prototype.getQuoteAge=function(){return null===this.getInitialQuoteAge()?null:s.getSessionTime()-this.get("session_time")+this.getInitialQuoteAge()},n.prototype.getInitialQuoteAge=function(){var t;return t=(this.get("price")||{}).quote_age,null===t||void 0===t?null:t},n.prototype.hasAgeExceeded=function(){return this.getQuoteAge()>this.get("max_redirect_age")},n.prototype.getUpdateStatus=function(){return(this.get("price")||{}).update_status||null},n.prototype.getLastUpdated=function(){return(this.get("price")||{}).last_updated||null},n.prototype.isFacilitatedBooking=function(){return this.get("is_facilitated")},n}(i)}},function(t,e,n){var i,r,s,o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;i=n(43),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.set=function(t){return this.data=_.indexBy(t,"quote_request_id")},e.prototype.getAll=function(){return this.data},e}(i),s={},t.exports=function(t){return s[t]||(s[t]=new r)}},function(t,e,n){var i,r,s,o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;i=n(43),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.set=function(t){return this.data=_.groupBy(t,"quote_request_id")},e}(i),s={},t.exports=function(t){return s[t]||(s[t]=new r)}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(26),s=i(r),o=s.default;e.default=function(t){var e=Math.floor(t/60),n=t%60;return n>0?o("ktxt_time_hours_minutes_short",{hours:e,minutes:n<10?"0"+n:n}):o("ktxt_time_hours",{hours:e})}},function(t,e,n){var i,r,s,o,a,l,u,c=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;i=n(14),s=n(27),l=n(44),o=n(10),r=n(28),u=n(26),a=n(19)("options"),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.getRecommendations=function(t){if(!o.isOff("alternative_destinations")&&!l.getRecommendationsClosed()&&!s.isIe9())return t?{location:a.get("destinationCityName"),list:_.map(t,function(t,e){return{index:e,price:t.price?localisation.formatCurrencyFull(t.price):u("ktxtGetPrices"),imageUrl:t.imageUrl,destinationPlace:t.destinationPlaceName,destinationCountry:t.destinationCountryName,directnessPriceText:t.price}})}:null},e.prototype.onCloseRecommendationPanel=function(){return l.setRecommendationsClosed(!0),r(this,this.onCloseRecommendationPanelMX)},e.prototype.onClickRecommendationItem=function(t){return r(this,this.onClickRecommendationItemMX,t),this.bus.channel("flights-navigate-with-options").publish({overrides:{destinationId:l.getRecommendations()[t].destinationId,destinationName:l.getRecommendations()[t].destinationPlaceName},extraUrlParams:{recommended:!0}})},e.prototype.onRenderRecommendationPanel=function(){return r(this,this.onRenderRecommendationPanelMX)},e}(i)},function(t,e,n){var i,r,s,o,a,l,u=function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;i=n(14),o=n(44),a=n(46),l=n(47),s=n(61),r=n(10),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.onFirstResultMX=function(t){return a.trackMixpanel("Flight Day View First Result Shown (Sampled)",l.getFirstResultShown(o.getFirstVisibleItinerary(),t))},e.prototype.onCompletedMX=function(t,e,n,i){return a.trackMixpanel("Flight Day View Completed",l.getDayViewCompleted(this.itineraries.get("itineraries"),this.itineraries.get("pagination"),t,e,n,i))},e.prototype.onNoResultsMX=function(){return a.trackMixpanel("Flight Day View No Results",l.getFilters(this.filters))},e.prototype.onLastPageMX=_.once(function(t){return a.trackMixpanel("Flight Day View Last Page Reached",{"Last Page":t})}),e.prototype.onShowSortPanelMX=function(){return a.trackMixpanel("Flight Day View Sort Opened",l.getResultContextData(this.itineraries.get("itineraries"),this.itineraries.get("pagination"),this.filters))},e.prototype.onClickMonthViewButtonMX=function(t){return a.trackLinksMixpanel(t,"Flight Day View Month View Button Clicked")},e.prototype.onLoadUpsellMX=function(){return a.trackMixpanel("Flight Upsell Panel",{Action:"open"})},e.prototype.onCloseUpsellMX=function(){return a.trackMixpanel("Flight Upsell Panel",{Action:"closed"})},e.prototype.onAvgPriceMessageShown=function(){return a.trackMixpanel("Flight Day View Avg Price Message Displayed")},e.prototype.onAvgPriceInteraction=function(t){return a.trackMixpanel("Flight Day View Avg Price Message Interaction",{"User Interaction With Message":t})},e.prototype.onReturnFromRedirectMX=function(t){return a.trackMixpanel("Flight Day View Return From Redirect",{"Time Since Redirect":t,"Agent Pre Redirect ID":s.getId()})},e.prototype.onResetFiltersMX=function(){return a.trackMixpanel("Flight Day View Filters Reset")},e.prototype.onLoadFromSEOAirlineGA=function(){return a.trackGA({action:"day-view-loaded-from-seo-airline",category:o.getChosenSEOAirline(),label:o.getHasSEOAirlineInResults(),trackOnce:!0})},e.prototype.onChangeSortGA=function(t){return a.trackGA({action:"sort",label:l.getSortLabelGA(t),trackOnce:!1})},e.prototype.onNoResultsGA=function(){var t,e;return e={action:"no-results",trackOnce:!1},t&&(e.label=t=l.getNoResultLabelGA()),a.trackGA(e)},e.prototype.onCrossSellRenderGA=function(t,e,n,i){return a.trackGA({action:t+"_xsellImp",category:e,label:n,trackOnce:i})},e.prototype.onUpsellRenderGA=function(t){var e;return e="hotels"===t?"custom_bottom":"small",this.onCrossSellRenderGA(t,"upsell-panel",e,!1)},e.prototype.onInlineCrossSellRenderGA=function(t,e,n){var i;return i="custom_inline_"+o.getCrossSellPosition(t)+"_price="+n,this.onCrossSellRenderGA(e,null,i,!0)},e.prototype.onCrossSellSelectedMX=function(t){return a.trackMixpanel("Flight Cross Sell Selected",t)},e.prototype.onCrossSellSelectedGA=function(t,e,n){return a.trackGA({action:t+"_xsellClick",trackOnce:!1,category:e,label:n})},e.prototype.onPaginationChangeGA=function(t){return a.trackGA({action:"Paging",label:""+t,trackOnce:!1})},e.prototype.onFlexibleDaysSubmittedMX=function(t){return a.trackMixpanel("Flight Day View Direct Days Selected",t)},e.prototype.onFlexibleDaysCompletedMX=function(t,e){var n;return n={Reason:l.getFlexibleDaysReason(t,this.flexibleDays.dataAllowsDisplay(),this.flexibleDays.model)},e&&(n["UI Display Allowed"]=t),a.trackMixpanel("Flight Day View Direct Days Completed",n)},e.prototype.onCloseRecommendationPanelMX=function(){return a.trackMixpanel("Flight Day View Recommendations",{Interaction:"Closed"})},e.prototype.onClickRecommendationItemMX=function(t){return a.trackMixpanel("Flight Day View Recommendations",{Interaction:"Clicked","Recommendation Index":t+1})},e.prototype.onRenderRecommendationPanelMX=_.once(function(){return a.trackMixpanel("Flight Day View Recommendations",{Interaction:"Rendered"})}),e}(i)},function(t,e,n){var i,r,s,o,a,l,u,c,p,d,h,f,g,m,y,v,b=function(t,e){function n(){this.constructor=t}for(var i in e)k.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},k={}.hasOwnProperty;i=n(5),s=n(71),o=n(28),y=n(131),v=n(26),g=n(41),u=n(8),p=n(6),r=n(132),l=n(10),a=n(133),h=n(11),f=n(134),m=n(50),d=n(19)("options"),c=n(135),t.exports=function(t){function e(){this.alert={},this.bus=new i,this.isVisible=!1,e.__super__.constructor.apply(this,arguments),this.initFacebookSDK(),this.overlay=h.create({overlay_id:this.$el.attr("data-overlay"),dismiss_callback:_.bind(this.onClickDone,this)})}return b(e,t),e.prototype.mixins=[r],e.prototype.events={click:"onClickDone","click .close-panel":"onClickDone","click .close":"onClickDone","click .fss-alerts-panel":"onStopPropagation","click .create":"onClickCreate","keypress .price-alerts-email ":"onKeyPress","mouseover #price-alerts-price-insight":"onMouseOverPriceInsightInfo","mouseout #price-alerts-price-insight":"hideTooltip"},e.prototype.resetState=function(){return this.done=!1,this.is_loading=!1,this.success=!1,this.max_signup_reached=!1,this.invalid_email=!1,this.verified_email=!1,this.service_error=!1},e.prototype.getBus=function(){return this.bus},e.prototype.createPriceAlert=function(t){var e,n;if(this.alert=t,!this.done)return o(this,this.onCreatePriceAlertGA,this.alert),this.alert.is_authenticated?(this.done=!0,this.getBus().channel("button-state-change").publish("adding"),e=this.getAlertData(),n=this.getCreateAlertUrlData(),this.createAlert(e,n)):this.showPanel()},e.prototype.showPanel=function(){if(!this.isVisible)return this.isVisible=!0,this.overlay.show(),o(this,this.onShowPanelGA,this.alert),o(this,this.onShowPanelMX,this.alert.auto_popup,this.alert.prefer_directs),this.resetState(),this.checkForPriceInsight(),this.render(),this.$el.attr("data-auto",this.alert.auto_popup).css({top:Math.abs(this.options.$body.get(0).getBoundingClientRect().top)+20}).removeClass("hidden").find(".price-alerts-email").focus()},e.prototype.hidePanel=function(){if(this.isVisible)return this.isVisible=!1,this.overlay.hide(this.$el.attr("data-overlay")),this.$el.removeAttr("style").addClass("hidden").find(".fss-alerts-panel").html(""),o(this,this.onHidePanelGA,this.$el.data("auto"),this.alert),o(this,this.onHidePanelMX,this.$el.data("auto")),this.alert={}},e.prototype.render=function(){return o(this,this.onMaxAlertsReachedGA,this.$el.data("auto"),this.max_signup_reached),this.$el.find(".fss-alerts-panel").html(y({is_loading:this.is_loading,success:this.success,max_signup_reached:this.max_signup_reached,invalid_email:this.invalid_email,verified_email:this.verified_email,service_error:this.service_error,show_directs_only:this.shouldShowDirectFlightsOnly(),error_message:this.getErrorMessage(),route_details:this.getRouteDetailsText(),route_dates:this.getRouteDatesText(),cabin_class:this.getCabinClass(),email_address:this.getEmailAddress(),directs_only:this.getPreferDirects(),show_messenger_button:this.shouldShowMessengerButton(),messenger_button_payload:this.getMessengerButtonPayload(),close:v("ktxt_close"),send_message:v("ktxtPriceAlerts_Autopopup_CheckRegularly"),success_message:v("ktxtPriceAlerts_SuccessMessage"),your_email:v("ktxtPriceAlerts_Label"),create_button_text:v("ktxtPriceAlerts_ButtonText"),success_button_text:v("ktxtPriceAlerts_SuccessButtonText"),privacy_message:v("ktxtPriceAlerts_PopupTermsAndPrivacy"),create:v("ktxtPriceAlerts_CreateNewAlert"),almost_there:v("ktxtPriceAlerts_AlmostThere"),success_message_existing_user:v("ktxtPriceAlerts_SuccessMessageExistingUser"),success_message_verify_new_user:v("ktxtPriceAlerts_SuccessMessageVerifyNewUser",{tag1:"<strong>",tag2:"</strong>"}),too_many_alerts_title_message:v("ktxtPriceAlerts_Title_TooManyAlerts_Sorry"),other_error_title_message:v("ktxtPriceAlerts_Title_OtherError"),newsletter_checkbox:v("ktxtPriceAlerts_NewsletterCheckBox",{companyName:v("ktxtPriceAlerts_CompanyName")})})).find(this.success?".create":".price-alerts-email").focus(),this.showMessengerButton()},e.prototype.shouldShowDirectFlightsOnly=function(){return l.isOn("price_alerts_show_direct_only_option")},e.prototype.checkForPriceInsight=function(){var t,e;if(this.shouldShowPriceInsight())return t=m.get("itineraries.total.min_price")/this.alert.passengers,isNaN(t)?void 0:(e=this.getInsightPricePercentile(t),e.then(function(e){return function(n){var i,r;if(null!=n&&(r=parseInt(n)||100,r<100))return o(e,e.onShowPriceInsightMX,r),i=e.getPriceInsightText(t,r),e.$el.find("#lowest_price_message").html(i.lowest_price_message),e.$el.find("#insight_message").html(i.insight_message),e.$el.find("#price-alerts-price-insight").show()}}(this)))},e.prototype.shouldShowPriceInsight=function(){return!this.alert.auto_popup&&this.alert.inbound_date&&l.isOn("price_alerts_show_price_insight")},e.prototype.initFacebookSDK=function(){if(!l.isOff("fb_messenger_button"))return c.init(function(t){return function(){return o(t,t.onFBMessengerButtonRenderGA,t.alert,t.$el.data("auto")),t.$(".fbmsb-button-loading-div").hide(),t.$(".fb-send-to-messenger").show()}}(this),function(t){return function(){return o(t,t.onFBMessengerButtonClickGA,t.alert,t.$el.data("auto")),setTimeout(function(){return t.$(".fb-send-to-messenger").hide(),t.$(".fbmsb-confirmation-a").show()},800)}}(this))},e.prototype.shouldShowMessengerButton=function(){return l.isOn("fb_messenger_button")&&c.getLoginStatus()},e.prototype.showMessengerButton=function(){if(this.shouldShowMessengerButton())return c.parse()},e.prototype.getPriceInsightExpVariant=function(){return l.getVariant("price_alerts_show_price_insight")},e.prototype.getInsightPricePercentile=function(t){var e;return e={origin:this.alert.origin,destination:this.alert.destination,month:u.parseDateTime(this.alert.outbound_date).getMonth()+1,price:t,currency:this.alert.currency},f.callDecisionEngine(e)},e.prototype.getPriceInsightText=function(t,e){var n,i;return i={lowest_price_message:"",insight_message:""},l.isOn("price_alerts_show_price_insight")&&(i.lowest_price_message=v("ktxtPriceAlerts_LowestPrice",{price:p.formatCurrency(t)}),n=this.getPriceInsightExpVariant(),"b"===n?i.insight_message=v("ktxtPriceAlerts_TopPercentPrice",{percentage:e}):"c"===n&&(i.insight_message=function(){switch(!1){case 1!==e:return v("ktxtPriceAlerts_PriceAdviceBest");case 5!==e:return v("ktxtPriceAlerts_PriceAdviceExcellent");case 10!==e:return v("ktxtPriceAlerts_PriceAdviceGreat");case 25!==e:return v("ktxtPriceAlerts_PriceAdviceVeryGood");case 50!==e:return v("ktxtPriceAlerts_PriceAdviceGood");default:return""}}())),i},e.prototype.onMouseOverPriceInsightInfo=function(t){var e,n;return e=$(t.currentTarget),n=v("ktxtPriceAlerts_PriceAdviceExplanationRolloverGeneric"),"c"===this.getPriceInsightExpVariant()&&(n+=v("ktxtPriceAlerts_PriceAdviceExplanationRolloverScale")),this.displayTooltip(e,n)},e.prototype.onClickDone=function(){return this.getBus().channel("click-done").publish()},e.prototype.onKeyPress=function(t){if(13===t.keyCode)return this.onClickCreate()},e.prototype.onClickCreate=function(t){var e,n,i,r,s;return n=this.getEmailAddress(),e=this.$el.data("auto"),""===n?(this.invalid_email=!0,void this.render()):(this.signupToNewsletter(n,e),r=this.getPreferDirectsOverride(),this.is_loading=!0,this.render(),o(this,this.onClickCreateGA,this.alert),o(this,this.onDirectOnlyOptionSubmitMX,r),i=this.getAlertData(e,n,r),s=this.getCreateAlertUrlData(),this.createAlert(i,s))},e.prototype.signupToNewsletter=function(t,e){var n;return n=this.$el.find("#price-alerts-newsletter-signup").is(":checked"),n&&this.getBus().channel("newsletter-signup").publish(t),o(this,this.onSignupToNewsletterGA,n,e),o(this,this.onSignupToNewsletterMX,n)},e.prototype.getErrorMessage=function(){return this.success?"":v(this.max_signup_reached?"ktxtPriceAlerts_MaxAlertsLimitReachedErrorMessage":this.invalid_email?"ktxtPriceAlerts_ValidationFailure":"ktxtPriceAlerts_ClientErrorOccurred")},e.prototype.getCreateAlertUrlData=function(){return{channel:"website",locale:this.alert.locale,disableconfirmation:this.alert.is_authenticated}},e.prototype.getCabinClass=function(){return a.format(this.alert.cabin_class)},e.prototype.getRouteDatesText=function(){var t;if(this.alert.outbound_date)return t=""+p.formatDate(u.parseDateTime(this.alert.outbound_date),"monthDay"),this.alert.inbound_date&&(t+=" - "+p.formatDate(u.parseDateTime(this.alert.inbound_date),"monthDay")),t},e.prototype.getRouteDetailsText=function(){return _.unescape(v("ktxtPriceAlerts_FromTo",{DepartureName:this.alert.origin_name,DepartureCode:this.alert.origin,DestinationName:this.alert.destination_name,DestinationCode:this.alert.destination}))},e.prototype.getMessengerButtonPayload=function(){var t;if(this.shouldShowMessengerButton())return t="func=subscribe_price_alert:",this.alert.min_price&&(t+="price="+this.alert.min_price+":",t+="ec.carriers="+_.reduce(this.alert.carriers,function(t,e){return t+=""+(t?"/":"")+e.name.replace(/ /g,"+")},"")+":"),t+="cur="+g.get("currency")+":oplace="+this.alert.origin+":dplace="+this.alert.destination+":odate="+this.alert.outbound_date+":",this.alert.inbound_date&&(t+="idate="+this.alert.inbound_date+":"),t+="cabinc="+g.get("cabin_class")+":market="+g.get("market")+":locale="+g.get("locale")+":ec.src=web:ec.utid="+d.get("utid")},e.prototype.getEmailAddress=function(){return $.trim(this.$el.find(".price-alerts-email").val())||""},e.prototype.getPreferDirects=function(){return this.alert.prefer_directs},e.prototype.getPreferDirectsOverride=function(){var t;return this.shouldShowDirectFlightsOnly()&&(t=this.$el.find("#price-alerts-direct-only"),t.length)?t.is(":checked"):null},e.prototype.getPassengers=function(t){return _.transform(t,function(t,e,n){var i;return i=function(){switch(n){case"adults":return"Adults";case"children":return"Children";case"infants":return"Infants";case"child_ages":return"ChildAges"}}(),t[i]=e},{})},e.prototype.getAlertData=function(t,e,n){var i,r;return i={AlertDto:{Channel:"website",Campaign:t?"autopopup":"dayview",AlertInfo:{Type:"TransportSearchAlertInfo",Currency:this.alert.currency,Origin:this.alert.origin,Destination:this.alert.destination,OutboundDate:this.alert.outbound_date,CabinClass:this.alert.cabin_class,PassengerInfo:this.getPassengers(this.alert.passenger_info),Filters:{DirectOnly:null!=n?n:this.getPreferDirects()}},AlertUserInfo:{Market:this.alert.market},SubscriptionActive:!0,LastChecked:u.now()}},this.alert.inbound_date&&(i.AlertDto.AlertInfo.InboundDate=this.alert.inbound_date),(r=this.alert.min_price)&&(i.AlertDto.LastPrice=r),e&&(i.Email=e),i},e.prototype.createAlert=function(t,e){return o(this,this.onCreateAlertFB,t.AlertDto.LastPrice,this.alert),$.ajax({url:"/userorchestration/alerts"+(_.isEmpty(e)?"":"?"+$.param(e)),type:"POST",contentType:"application/json",data:JSON.stringify(t)}).always(function(t){return function(e,n,i){var r,s,o,a,l,u;switch(o="success"===n?[i,e]:[e,i],s=o[0],r=o[1],l=s.status,u=s.statusText,a=s.responseJSON,l){case 201:return r.Success=!0,t.onResponseSuccess(r,l);case 400:return t.onResponseError(a,l);case 409:return a.Success=!0,a.Duplicate=!0,t.onResponseSuccess(a,l);case 420:return a.MaxSignupReached=!0,t.onResponseError(a,l);default:return t.onResponseError({status:l,statusText:u,ServiceError:!0},l)}}}(this))},e.prototype.onResponseSuccess=function(t,e){return this.is_loading=!1,this.success=!0,this.verified_email=t.RequiresConfirmationEmail===!1,o(this,this.onResponseSuccessMX),this.alert.is_authenticated&&this.getBus().channel("button-state-change").publish("added"),this.render()},e.prototype.onResponseError=function(t,e){return this.is_loading=!1,t?(this.service_error=_.isEmpty(t),this.max_signup_reached=t.MaxSignupReached||!1,this.invalid_email=t.IsInvalidEmailAddress||!1,this.verified_email=t.RequiresConfirmationEmail||!1):this.service_error=!0,o(this,this.onResponseErrorMX,{service_error:this.service_error,max_signup_reached:this.max_signup_reached,invalid_email:this.invalid_email,verified_email:this.verified_email}),this.alert.is_authenticated&&this.getBus().channel("button-state-change").publish("error"),this.render()},e}(s)},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)service_error?__p+="<h2>"+(null==(__t=other_error_title_message)?"":__t)+"</h2><p>"+(null==(__t=error_message)?"":__t)+"</p>":max_signup_reached?__p+="<h2>"+(null==(__t=too_many_alerts_title_message)?"":__t)+"</h2><p>"+(null==(__t=error_message)?"":__t)+"</p>":(__p+="",__p+=success&&!verified_email?'<h2 class="verify">'+(null==(__t=almost_there)?"":__t)+"</h2><p>"+(null==(__t=success_message_verify_new_user)?"":__t)+"</p>":success?'<h2 class="success">'+(null==(__t=success_message)?"":__t)+"</h2><p>"+(null==(__t=success_message_existing_user)?"":__t)+"</p>":"<h2>"+(null==(__t=create)?"":__t)+"</h2><p>"+(null==(__t=send_message)?"":__t)+'</p><section class="price-insight-message" id="price-alerts-price-insight"><header class="price-insight-message--header"><span class="price-insight-message--icon"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path d="M9 1C4.6 1 1 4.6 1 9s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm1 12.4c0 .3-.3.6-.6.6h-.8c-.3 0-.6-.3-.6-.6V8.6c0-.3.3-.6.6-.6h.7c.4 0 .7.3.7.6v4.8zm0-8.1c0 .4-.3.7-.7.7h-.6c-.4 0-.7-.3-.7-.7v-.6c0-.4.3-.7.7-.7h.7c.3 0 .6.3.6.7v.6z"></path></svg></span><span class="price-insight-message--text"><span id="lowest_price_message"></span></br><span id="insight_message"></span></span></header></section>',__p+="<section>",is_loading||success||(__p+='<p class="itinerary"><span>'+(null==(__t=route_details)?"":__t)+"</span><span>"+(null==(__t=route_dates)?"":__t)+" | "+(null==(__t=cabin_class)?"":__t)+"</span>",show_directs_only&&(__p+='<label for="price-alerts-direct-only"><input type="checkbox" id="price-alerts-direct-only" name="direct_only"',directs_only&&(__p+=' checked="checked"'),__p+='><span class="price-alerts-checkbox-label">'+(null==(__t=translate("ktxtPriceAlerts_DirectFlightsOnly"))?"":__t)+"</span></label>"),__p+="</p>",__p+=show_messenger_button?'<div class="fbmsb-button-div"><label>Facebook Messenger:</label><a href="https://m.me/Skyscanner" class="fbmsb-confirmation-a"><div class="fbmsb-confirmation-div"><span><div class="custom-tick-div"></div></span><p class="fbmsb-confirmation-p">Done! <u>Check Messenger</u> to see your first Price Alert.</p></div></a><div id="fbmsb-button-loading-div" class="fbmsb-button-loading-div"><div class="bpk-spinner-div"></div> Loading...</div><div id ="fb-send-to-messenger" class="fb-send-to-messenger" messenger_app_id="269769129817122" page_id="9213701292" data-ref="'+(null==(__t=messenger_button_payload)?"":__t)+'" color="blue" size="xlarge"></div> </div><div class="fbmsb-email-div">':"<div>",__p+='<label for="price-alerts-email">'+(null==(__t=your_email)?"":__t)+'</label><input id="price-alerts-email" class="price-alerts-email ',invalid_email&&(__p+="invalid"),__p+='" type="email" name="email" value="'+(null==(__t=email_address)?"":__t)+'">',invalid_email&&(__p+='<p class="validation-error">'+(null==(__t=error_message)?"":__t)+"</p>"),__p+='<label for="price-alerts-newsletter-signup"><input type="checkbox" id="price-alerts-newsletter-signup" name="newsletter_signup"><span class="price-alerts-checkbox-label">'+(null==(__t=newsletter_checkbox)?"":__t)+"</span></label>"),__p+="",__p+=success?""+(null==(__t=__webpack_require__(55)({text:success_button_text,extra_class:"close",is_secondary:!0}))?"":__t):is_loading?""+(null==(__t=__webpack_require__(55)({is_disabled:!0,has_icon:!0,icon_type:"spinner",text:""}))?"":__t):""+(null==(__t=__webpack_require__(55)({text:create_button_text,extra_class:"create"}))?"":__t),__p+='</div><p class="privacy">'+(null==(__t=privacy_message)?"":__t)+"</p></section>"),__p+='<div class="close-panel" title="'+(null==(__t=close)?"":__t)+'"></div>';return __p}},function(t,e,n){var i;i=n(46),t.exports=function(){function t(){}return t.prototype.onCreatePriceAlertGA=function(t){if(!t.auto_popup)return i.trackGA({action:"GetPriceAlertsClick",label:this.getPriceAlertGaLabel(t),trackOnce:!1}),i.trackGA({action:"GetPriceAlertsClick",label:"NewsletterCheckbox"})},t.prototype.onShowPanelMX=function(t,e){return i.trackMixpanel("Flight Price Alert Sign Up Panel Loaded",{Reason:t?"auto":"manual"}),i.trackMixpanel("Flight Price Alert Newsletter Checkbox Loaded"),i.trackMixpanel("Flight Price Alert Direct Only Checkbox Loaded",{"Direct Only Checked":e})},t.prototype.onShowPanelGA=function(t){if(t.auto_popup)return i.trackGA({action:"AutoPopUp_PriceAlert",label:this.getPriceAlertGaLabel(t),trackOnce:!1}),i.trackGA({action:"AutoPopUp_PriceAlert",label:"NewsletterCheckbox"})},t.prototype.onHidePanelGA=function(t,e){if(t)return i.trackGA({action:"AutoPopUp_PriceAlert_Close",label:this.getPriceAlertGaLabel(e),trackOnce:!1})},t.prototype.onHidePanelMX=function(t){return i.trackMixpanel("Flight Price Alert Panel Closed",{Reason:t?"auto":"manual"})},t.prototype.onMaxAlertsReachedGA=function(t,e){if(e)return i.trackGA({action:t?"AutoPopUp_PriceAlert_Max":"MaxAlertsMessage",trackOnce:!1})},t.prototype.onFBMessengerButtonClickGA=function(t,e){return i.trackGA({action:(e?"AutoPopUp_":"")+"PriceAlert_Create_FB_Messenger",label:this.getPriceAlertGaLabel(t),trackOnce:!1})},t.prototype.onFBMessengerButtonRenderGA=function(t,e){return i.trackGA({action:(e?"AutoPopUp_":"")+"PriceAlert_Render_FB_Messenger",label:this.getPriceAlertGaLabel(t),trackOnce:!1})},t.prototype.onClickCreateGA=function(t){return i.trackGA({action:t.auto_popup?"AutoPopUp_PriceAlert_Create":"CreateAlertClick",label:this.getPriceAlertGaLabel(t),trackOnce:!1})},t.prototype.onSignupToNewsletterGA=function(t,e){return i.trackGA({action:e?"AutoPopUp_PriceAlert_Create":"CreateAlertClick",label:t?"NewsletterCheckbox_ticked":"NewsletterCheckbox_not_ticked"})},t.prototype.onSignupToNewsletterMX=function(t){return i.trackMixpanel("Flight Price Alert Newsletter Checkbox Submit",{signedUp:t})},t.prototype.onDirectOnlyOptionSubmitMX=function(t){return i.trackMixpanel("Flight Price Alert Direct Only Checkbox Submit",{"Direct Only Checked":t})},t.prototype.onCreateAlertFB=function(t,e){return i.trackFacebook({name:"FlightsPriceAlert"},{name:"6022969680314",data:{value:t||"0.00",currency:e.currency}})},t.prototype.onResponseSuccessMX=function(){return i.trackMixpanel("Flight Price Alert Response Success")},t.prototype.onResponseErrorMX=function(t){return i.trackMixpanel("Flight Price Alert Response Error",{
"Service Error":t.service_error,"Max Signup Reached":t.max_signup_reached,"Is Invalid Email Address":t.invalid_email,"Requires Confirmation Email":t.verified_email})},t.prototype.getPriceAlertGaLabel=function(t){return t.origin+"_"+t.destination},t.prototype.onShowPriceInsightMX=function(t){return i.trackMixpanel("Flight Price Alert Price Insight Shown",{"Price Percentile":t})},t}()},function(t,e,n){var i,r,s,o,a;a=n(26),i={economy:a("ktxt_EconomyClass"),premiumeconomy:a("ktxtCabinClassTerm_PremiumEconomy"),business:a("ktxtCabinClassTerm_Business"),first:a("ktxtCabinClassTerm_First")},r=function(t,e){return null==e&&(e=a("ktxt_EconomyClass")),i[o(t)]||e},s=function(t){return _.map(_.omit(i,o(t)),function(t,e){return{id:e,label:t}})},o=function(t){return t=(t||"").toLowerCase(),"premium_economy"===t&&(t="premiumeconomy"),t},t.exports={format:r,formatAlternatives:s,normalize:o}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.callDecisionEngine=void 0;var r=n(17),s=i(r),o="https://gateway.skyscanner.net/slg-decision-engine/scope/pa_price_insights/match",a=function(t){return $.ajax({url:o,type:"POST",contentType:"application/json",data:JSON.stringify(t),timeout:1e3}).then(function(t){return t.outcome},function(t,e,n){return s.default.error({message:"JS Log",fields:{"Error Message":"Decision Engine Call Failed","Error Payload":{status:e,exception:n}}})})};e.callDecisionEngine=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.getLoginStatus=e.parse=e.init=void 0;var r=n(27),s=i(r),o=function(t,e){s.default.injectScript({src:"//connect.facebook.net/en_US/sdk.js"},function(){FB.init({appId:"269769129817122",xfbml:!0,version:"v2.6",status:!0}),FB.Event.subscribe("send_to_messenger",function(n){"rendered"===n.event?t():"clicked"===n.event&&e()})})},a=function(){return FB&&FB.XFBML.parse()},l=function(){var t=!1;return window.FB&&FB.getLoginStatus(function(e){t="unknown"!==e.status}),t};e.init=o,e.parse=a,e.getLoginStatus=l},function(t,e,n){var i,r,s,o,a,l,u=function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;s=n(10),a=n(12),l=n(46),r=n(33),i=n(5),o=n(11),t.exports=function(t){function e(t){e.__super__.constructor.apply(this,arguments),this.expiry_timer=null,this.expiration_time=s.getVariant("expiry_timer"),this.popup_shown=!1,this.bus=new i,this.overlay=o.create({overlay_id:this.$el.attr("data-overlay"),dismiss_callback:_.bind(this.dismissExpiryPopup,this),dismiss_all:!0}),this.startTimer()}return u(e,t),e.prototype.events={"click .refresh-button":"dismissExpiryPopup",click:"dismissExpiryPopup","click .fss-popup":"onStopPropagation"},e.prototype.startTimer=function(){return this.expiry_timer=a.setTimeout(_.bind(this.showExpiryPopup,this),6e4*this.expiration_time)},e.prototype.resetTimer=function(){return a.clearTimeout(this.expiry_timer)},e.prototype.getBus=function(){return this.bus},e.prototype.dismissExpiryPopup=function(){return this.bus.channel("restart-app").publish({reason:"results_expired"}),l.trackMixpanel("Flight Day View Obsolete Results Message Dismissed")},e.prototype.showExpiryPopup=function(){if(!this.popup_shown)return this.popup_shown=!0,this.$el.removeClass("hidden"),this.overlay.show(),l.trackMixpanel("Flight Day View Obsolete Results Message Shown")},e.prototype.shutdown=function(){return this.resetTimer(),this.startTimer(),this.popup_shown=!1,this.$el.addClass("hidden"),this.overlay.hide(this.$el.attr("data-overlay"))},e}(r)},function(t,e,n){var i,r,s,o,a,l,u=function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;i=n(138),r=n(33),l=n(26),a=n(141),s=n(28),o=n(27),t.exports=function(t){function e(){this.model=new i,this.tooltip=null,e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.events=function(){var t;return t={click:"hideTooltip","click .fss-fxo-select button":"onClickSelect","click td button":"onSelectDay"},o.supportsTouch()||_.extend(t,{"mouseout td button":"hideTooltip"}),t},e.prototype.build=function(t){return this.model.build(t),this},e.prototype.render=function(t){return null==t&&(t=!1),this.$el.html(a(this.getData())),t&&this.model.set("redirecting",!1),this},e.prototype.dataAllowsDisplay=function(){return this.model.hasData()&&!this.model.directsExist()&&this.model.alternativesExist()},e.prototype.getData=function(){return this.model.isReturn()?{title:l("ktxt_direct_days_heading1",{tag1:'<span class="fss-fxo-direct">',tag2:"</span>"}),subtitle:this.getSubtitle(this.model.get("depart.days"),this.model.get("return.days")),leg1:{type:"depart",title:l("ktxt_direct_days_depart"),items:this.getItems(this.model.getDepartItems())},leg2:{type:"return",title:l("ktxt_direct_days_return"),items:this.getItems(this.model.getReturnItems())}}:{title:l("ktxt_direct_days_heading2",{tag1:'<span class="fss-fxo-direct">',tag2:"</span>"}),subtitle:l("ktxt_direct_days_heading4"),leg1:{type:"depart",title:l("ktxt_direct_days_depart"),items:this.getItems(this.model.getDepartItems())}}},e.prototype.getItems=function(t){return _.map(t,function(t){return _.assign(t,{info:this.getDayInfo(t)})},this)},e.prototype.getDayInfo=function(t){switch(t.availability){case"direct":return l("ktxt_direct_days_direct_stop");case"indirect":return l("ktxt_direct_days_one_stop");default:return l("ktxt_direct_days_no_flights")}},e.prototype.getSubtitle=function(t,e){var n,i;return n=t.getInitial(),i=e.getInitial(),l(n.isDirect()&&!i.isDirect()?"ktxt_direct_days_change_return_date":!n.isDirect()&&i.isDirect()?"ktxt_direct_days_change_depart_date":"ktxt_direct_days_heading3")},e.prototype.onSelectDay=function(t){var e,n,i;if(!this.model.get("redirecting")&&(e=$(t.currentTarget),n=e.closest("td"),!n.hasClass("fss-fxo-disabled")))return n.hasClass("fss-fxo-no-flights")&&(this.stopPropagation(),this.hideTooltip(),this.tooltip=new Skyscanner.Components.Tooltip(n,{container:"body",html:!0,message:l("ktxt_direct_days_no_flights_on_date"),trigger:"manual",animations:!1,placement:"top"}),this.tooltip.show()),i=n.closest(".fss-fxo-leg").attr("data-type"),this.model.set(i+".selected_cid",e.attr("data-cid")),this.render()},e.prototype.hideTooltip=function(){var t;return null!=(t=this.tooltip)?t.hide():void 0},e.prototype.onClickSelect=function(t){var e,n,i,r,o;if(!this.model.get("redirecting"))return this.model.set("redirecting",!0),$(t.currentTarget).prop("disabled",!0).find(".bpk-icon-lg").addClass("bpk-icon-spinner"),n=this.model.getSelectedDepart(),i={flexible_origin:!0,flexible_depart:n.get("availability")},e={outboundDate:n.get("date")},r=n.isInitial(),this.model.isReturn()&&(o=this.model.getSelectedReturn(),e.inboundDate=o.get("date"),r=r&&o.isInitial(),i.flexible_return=o.get("availability")),s(this.controller,this.controller.onFlexibleDaysSubmittedMX,this.getMXSubmitted()),setTimeout(function(t){return function(){return t.controller.redirectToNewSearch(e,i,r)}}(this),300)},e.prototype.getMXSubmitted=function(){return this.model.isReturn()?{"Depart Selected":this.getMXSubmittedDate("depart"),"Return Selected":this.getMXSubmittedDate("return")}:{"Depart Selected":this.getMXSubmittedDate("depart")}},e.prototype.getMXSubmittedDate=function(t){var e,n;return e=this.model["getInitial"+("depart"===t?"Depart":"Return")](),n=this.model["getSelected"+("depart"===t?"Depart":"Return")](),n.isInitial()?"No Change":e.isDirect()&&n.hasNoFlights()?"Direct To None":e.isDirect()&&n.isDirect()?"Direct To Direct":e.isDirect()&&!n.isDirect()?"Direct To Indirect":!e.isDirect()&&n.hasNoFlights()?"Indirect To None":e.isDirect()||n.isDirect()?!e.isDirect()&&n.isDirect()?"Indirect To Direct":"Unknown":"Indirect To Indirect"},e}(r)},function(t,e,n){var i,r,s,o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};i=n(139),r=n(115).default,s=n(8),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.defaults={redirecting:!1,depart:{days:null,selected_cid:null},return:{days:null,selected_cid:null},directs_exist:!1,alternatives_exist:!1},e.prototype.build=function(t){return this.set("depart.days",(new i).build(this.filter(t.leg1))),t.leg2&&this.set("return.days",(new i).build(this.filter(t.leg2))),this.setInitialState()},e.prototype.hasDirects=function(){return!(this.isReturn()&&!this.getInitialReturn().isDirect())&&this.getInitialDepart().isDirect()},e.prototype.containDirectItems=function(t){return _.any(t,function(t){return!t.disabled&&t.direct})},e.prototype.setInitialState=function(){var t,e;return t=this.get("depart.days").at(3),t.set("initial",!0),this.set("depart.selected_cid",t.cid),this.isReturn()&&(e=this.get("return.days").at(3),e.set("initial",!0),this.set("return.selected_cid",e.cid)),this.set("directs_exist",this.hasDirects()),this.set("alternatives_exist",this.containDirectItems(this.getDepartItems())&&(!this.isReturn()||this.containDirectItems(this.getReturnItems()))),this},e.prototype.filter=function(t){return _.filter(t,function(t,e){return l.call([4,5,6,7,8,9,10],e)>=0})},e.prototype.getInitialReturn=function(){return this.get("return.days").getInitial()},e.prototype.getInitialDepart=function(){return this.get("depart.days").getInitial()},e.prototype.getSelectedReturn=function(){return this.get("return.days").get(this.get("return.selected_cid"))},e.prototype.getSelectedDepart=function(){return this.get("depart.days").get(this.get("depart.selected_cid"))},e.prototype.isReturn=function(){return!!this.get("return.days")},e.prototype.getDepartItems=function(){return _.map(this.get("depart.days").getData(),function(t){return _.assign(t,{active:t.cid===this.get("depart.selected_cid"),disabled:s.isDateInThePast(t.date)})},this)},e.prototype.directsExist=function(){return this.get("directs_exist")},e.prototype.alternativesExist=function(){return this.get("alternatives_exist")},e.prototype.hasData=function(){return!!this.get("depart.days")},e.prototype.isInvalidReturn=function(t,e){return s.parseDateTime(t)<s.parseDateTime(e)},e.prototype.getReturnItems=function(){var t,e,n;return e=this.getSelectedDepart().get("date"),n=this.getSelectedReturn().get("date"),this.isInvalidReturn(n,e)&&(t=this.get("return.days").find(function(t){return t.get("date")===e}),t&&this.set("return.selected_cid",t.cid)),_.map(this.get("return.days").getData(),function(t){return _.assign(t,{active:t.cid===this.get("return.selected_cid"),disabled:s.isDateInThePast(t.date)||this.isInvalidReturn(t.date,e)})},this)},e}(r)},function(t,e,n){var i,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;i=n(113),r=n(140),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.build=function(t){return e.__super__.build.call(this,_.map(t,function(t,e){return(new r).build(t,e)})),this},e.prototype.getData=function(){return this.map(function(t){return t.getData()})},e.prototype.getInitial=function(){return this.find(function(t){return t.isInitial()})},e}(i)},function(t,e,n){var i,r,s,o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;r=n(8),s=n(6),i=n(115).default,t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.defaults={index:null,availability:null,date:null,initial:!1},e.prototype.build=function(t,n){return e.__super__.build.call(this,{index:n,availability:t.availability,date:t.date})},e.prototype.isDirect=function(){return"direct"===this.get("availability")},e.prototype.isIndirect=function(){return"indirect"===this.get("availability")},e.prototype.hasNoFlights=function(){return"none"===this.get("availability")},e.prototype.isInitial=function(){return this.get("initial")},e.prototype.getData=function(){var t;return t=r.parseDateTime(this.get("date")),{cid:this.cid,availability:this.get("availability"),index:this.get("index"),date:this.get("date"),day:t.getDate(),day_of_week:r.getDayOfWeek(t),month:s.getMonthNameAbbr(t.getMonth()),direct:this.isDirect(),indirect:this.isIndirect(),no_flights:this.hasNoFlights()}},e}(i)},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="fss-fxo-content"><h2>'+(null==(__t=title)?"":__t)+"</h2><h3>"+(null==(__t=subtitle)?"":__t)+"</h3>"+(null==(__t=__webpack_require__(142)(obj.leg1))?"":__t),obj.leg2&&(__p+=null==(__t=__webpack_require__(142)(obj.leg2))?"":__t),__p+='</div><div class="fss-fxo-select">'+(null==(__t=__webpack_require__(55)({is_selected:!1,is_large:!0,has_pointer:!0,text:translate("ktxt_direct_days_continue")}))?"":__t)+"</div>";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="fss-fxo-leg fss-fxo-leg-'+(null==(__t=type)?"":__t)+'" data-type="'+(null==(__t=type)?"":__t)+'"><h4>'+(null==(__t=title)?"":__t)+"</h4><table><tr>",_.forEach(items,function(t){__p+='<td class="',t.active&&(__p+=" fss-fxo-active"),__p+="",t.no_flights&&(__p+=" fss-fxo-no-flights"),__p+="",t.disabled&&(__p+=" fss-fxo-disabled"),__p+='"><button data-cid="'+(null==(__t=t.cid)?"":__t)+'" ',t.no_flights&&(__p+='title="'+(null==(__t=translate("ktxt_direct_days_no_flights_on_date"))?"":__t)+'"'),__p+='><div aria-hidden="true"></div><span class="fss-fxo-item-dow">'+(null==(__t=t.day_of_week)?"":__t)+'</span><span class="fss-fxo-item-d">'+(null==(__t=t.day)?"":__t)+'</span><span class="fss-fxo-item-m">'+(null==(__t=t.month)?"":__t)+'</span><span class="fss-fxo-item-info ',t.direct&&(__p+=" fss-fxo-item-direct"),__p+='"><span>'+(null==(__t=t.info)?"":__t)+"</span></span></button></td>"}),__p+="</tr></table></div>";return __p}},function(t,e,n){var i,r,s,o,a,l,u=function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;i=n(5),r=n(33),a=n(21),o=n(11),l=n(144),s=n(145),t.exports=function(t){function e(t){e.__super__.constructor.apply(this,arguments),this.bus=new i,this.overlay=o.create({overlay_id:this.$el.attr("data-overlay"),dismiss_all:!0,is_dismissible:!1}),this.$el.find(".fss-apd-popup").html(l({is_uk_search:this.isUKSearch(t.legs),is_adult_only_search:a.isAdultOnlySearch(!0)})),this.$el.removeClass("hidden"),this.overlay.show(),this.onMessageDisplayedMX()}return u(e,t),e.prototype.mixins=[s],e.prototype.events={"click .fss-popup":"onStopPropagation","click .apd-next":"onNextClicked","click .apd-no":"onNoClicked","click .apd-yes":"onYesClicked"},e.prototype.getBus=function(){return this.bus},e.prototype.isUKSearch=function(t){return _.any(t,function(t){return"UK"===t.originCountry||"UK"===t.destinationCountry})},e.prototype.onYesClicked=function(){return this.openPassengerControls().done(function(t){return function(){return t.dismissPopup("Yes")}}(this))},e.prototype.onNoClicked=function(){return this.dismissPopup("No"),_.delay(this.getBus().channel("reload").publish,200)},e.prototype.onNextClicked=function(){return this.openPassengerControls().done(function(t){return function(){return t.dismissPopup("Ok")}}(this))},e.prototype.openPassengerControls=function(){var t;return t=$.Deferred(),this.getBus().channel("open-passenger-controls").publish(t),t.promise()},e.prototype.dismissPopup=function(t){return this.onMessageAcknowledgedMX(t),this.overlay.hide(this.$el.attr("data-overlay")),this.$el.addClass("hidden").find(".fss-apd-popup").html("")},e}(r)},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="apd-header"><div class="apd-sky-logo"></div><h2 class="apd-headline">'+(null==(__t=translate("ktxt_apd_important_changes"))?"":__t)+'</h2></div><div class="apd-content">',is_uk_search&&(__p+='<p class="apd-paragraph">'+(null==(__t=translate("ktxt_apd_good_news"))?"":__t)+"</p>"),__p+="",is_uk_search&&!is_adult_only_search||(__p+='<p class="apd-paragraph">'+(null==(__t=translate("ktxt_apd_accurate_prices"))?"":__t)+"</p>"),__p+='<div class="apd-paragraph">',is_adult_only_search?__p+='<p class="apd-title">'+(null==(__t=translate("ktxt_apd_apply_to_you"))?"":__t)+"</p><p>"+(null==(__t=translate("ktxt_apd_under_age"))?"":__t)+"</p>":(__p+='<p class="apd-title">'+(null==(__t=translate("ktxt_apd_whos_travelling"))?"":__t)+"</p>",__p+=is_uk_search?"<p>"+(null==(__t=translate("ktxt_apd_confirm_age_accurate_prices"))?"":__t)+"</p>":"<p>"+(null==(__t=translate("ktxt_apd_confirm_age"))?"":__t)+"</p>",__p+=""),__p+='</div><div class="apd-footer">',__p+=is_adult_only_search?""+(null==(__t=__webpack_require__(55)({is_secondary:!0,extra_class:"apd-bar-button apd-button-left apd-no",text:translate("ktxt_apd_no")}))?"":__t)+(null==(__t=__webpack_require__(55)({is_secondary:!0,extra_class:"apd-bar-button apd-button-right apd-yes",text:translate("ktxt_apd_yes")}))?"":__t):""+(null==(__t=__webpack_require__(55)({is_secondary:!0,is_large:!0,extra_class:"apd-button apd-next",text:translate("ktxt_apd_next"),has_icon:!0,icon_type:"long-arrow-right"}))?"":__t),__p+="</div></div>";return __p}},function(t,e,n){var i;i=n(46),t.exports=function(){function t(){}return t.prototype.onMessageDisplayedMX=function(){return i.trackMixpanel("Flight APD Message Displayed")},t.prototype.onMessageAcknowledgedMX=function(t){return i.trackMixpanel("Flight APD Message Acknowledged",{"CTA String Tapped":t})},t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.canShow=e.saveShown=void 0;var r=n(27),s=i(r),o=n(21),a=n(10),l=function(){return s.default.getSessionStorage()},u=function(){return l().trySetValue("avg_price_indicator_shown",!0)},c=function(t,e){return(0,a.isOn)("show_avg_price_indicator")&&t&&t.getPrice()&&e&&!(0,o.isAdultOnlySearch)()&&!l().tryGetValue("avg_price_indicator_shown")};e.saveShown=u,e.canShow=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(33),u=i(l),c=n(11),p=i(c),d=n(96),h="avg-price-toast",f=function(t){function e(t){r(this,e);var n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.controller=t.controller,n.overlay=p.default.create({overlay_id:n.$el.attr("data-overlay"),dismiss_callback:_.bind(n.dismiss,n)}),n.scroll_position=n.verticalOffset(),n.scroll_debounced=_.debounce(function(t){t.preventDefault(),t.stopPropagation();var e=n.verticalOffset();n.scroll_position>e?n.show():n.hide(),n.scroll_position=e},100),$(document).on("scroll.avg-price-toast",n.scroll_debounced),(0,d.setup)(h,function(t){return n.dismiss()},n.$el),n}return o(e,t),a(e,[{key:"events",value:function(){return{click:"expand","click .find-more":"findMoreClick","click .toast-dismiss":"dismiss"}}},{key:"verticalOffset",value:function(){return window.pageYOffset||document.documentElement.scrollTop}},{key:"show",value:function(){this.$el.removeClass("toast-hidden").addClass("show-toast"),this.$el.hasClass("expanded")&&this.overlay.show()}},{key:"hide",value:function(){this.$el.addClass("toast-hidden").removeClass("show-toast")}},{key:"removeScrollListener",value:function(){$(document).off("scroll.avg-price-toast")}},{key:"expand",value:function(t){this.onStopPropagation(t),this.controller.navigateTo("average-price"),this.removeScrollListener(),this.$el.hasClass("expanded")||(this.$el.addClass("expanded"),this.overlay.show(),this.controller.onAvgPriceInteractionMX("Expanded"))}},{key:"dismiss",value:function(t){this.$el.hasClass("toast-hidden")||(this.hide(),t&&this.onStopPropagation(t),this.overlay.hide(this.$el.attr("data-overlay")),this.removeScrollListener(),(0,d.remove)(h),this.$el.hasClass("expanded")&&this.controller.onExpandedToastDismissed(),this.controller.onAvgPriceInteractionMX(t&&$(t.currentTarget).hasClass("got-it")?"Acknowledged":"Dismissed"))}},{key:"findMoreClick",value:function(t){this.controller.onAvgPriceInteractionMX("More info")}}]),e}(u.default);e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.hasWarning=e.buildCombiOperatorNameString=e.getStopLabel=e.getStops=e.getLegs=void 0;var r=n(26),s=i(r),o=n(6),a=i(o),l=n(149),u=i(l),c=n(23),p=n(8),d=i(p),h=n(127),f=i(h),g=s.default,m=function(t){var e=t.getStopCount();return{count:e,label:y(e),places:_.map(t.getStopsWithChangeAirport(),function(t){return _.assign({},t,{message:g("ktxtMultihop_ResultsView_ChangeAirportIn",{place:t.name}),short_message:g("ktxtMultihop_ResultsView_ChangeAirport")})})}},y=function(t){switch(t){case 0:return g("ktxtDayViewResults_NonStop");case 1:return g("ktxt_results_journeynotes_1stop_short");case 2:return g("ktxt_results_journeynotes_2stops_short");case 3:return g("ktxt_results_journeynotes_3stops_short");case 4:return g("ktxt_results_journeynotes_4stops_short");default:return g("ktxt_results_journeynotes_Nstops_short",{number:t})}},v=function(t){var e=t.getOperatorType()||{},n=e.type,i=e.airline;return"operated_by"===n?g("ktxtCodeShare_OperatedByAirline",{airline:i}):"partially_operated_by"===n?g("ktxtCodeShare_PartiallyOperatedByAirline",{airline:i}):null},b=function(t,e,n){var i=u.default.isOriginOpenJaw(n.models,"getDeparturePlaceId","getArrivalPlaceId"),r=u.default.isDestinationOpenJaw(n.models,"getDeparturePlaceId","getArrivalPlaceId"),s=t?e.getDeparturePlaceId():e.getArrivalPlaceId(),o=t?i:r,a=t?r:i;return(0,c.isMultiDestination)()?_.contains(n.getMixedAirports(),s):0===e.getPosition()&&o||1===e.getPosition()&&a},k=function(t,e){return t.map(function(n){var i=n.getDepartureTime(),r=n.getArrivalTime(),s=n.getDeparturePlaceId(),o=n.getArrivalPlaceId(),l=m(n);return{logo_domain:e.get("logosDomain"),duration:(0,f.default)(n.getDuration()),stops:l,operator:v(n),date:a.default.formatDate(n.getDepartureTime(),"short"),date_full:a.default.formatDate(n.getDepartureTime(),"fullAbbr"),show_logo:n.canShowLogo(),logo_img:n.getLogoCodes()[0],logo_name:n.getCombinedArlineName().join(" + "),display_city_names:e.get("displayCityNames"),departure_time:a.default.formatTime(i,"short"),departure_id:s,departure_alt_id:n.getDeparturePlaceAltId(),departure_name:n.getDepartureCityName(),departure_warning:b(!0,n,t),arrival_time:a.default.formatTime(r,"short"),arrival_id:o,arrival_alt_id:n.getArrivalPlaceAltId(),arrival_name:n.getArrivalCityName(),arrival_warning:b(!1,n,t),arrival_days:d.default.getDateOffsetStr(i,r)||"",any_change_airport:_.any(l.places,function(t){return t.change_airport})}})};e.getLegs=k,e.getStops=m,e.getStopLabel=y,e.buildCombiOperatorNameString=v,e.hasWarning=b},function(t,e){var n,i,r,s;r=function(t,e,i){return _.some(t,function(r,s){var o,a;return o=s===t.length-1&&t.length>1?0:s+1,a=t[o],n(r,a,e,i)})},s=function(t,e,i){return n(t[1],t[0],e,i)},i=function(t,e,i){return n(t[0],t[1],e,i)},n=function(t,e,n,i){return _.result(t,n)&&_.result(t,i)&&_.result(e,n)&&_.result(e,i)&&_.result(t,i)!==_.result(e,n)},t.exports={isOpenJaw:r,isOriginOpenJaw:s,isDestinationOpenJaw:i}},function(t,e,n){var i,r,s,o,a;a=n(151).default,o=n(19)("options"),i=n(152).default,s=function(t,e,n,i,r){return"/transport/flights/checkliveprice"+o.get("urlPath")+"?"+a({applicationId:n,sessionKey:i,itineraryId:t.get("id"),price:e.getTotalPrice(),agentId:e.getUniqueAgentIds()[0],agentName:e.getUniqueAgentNames()[0],position:e.get("position"),exitOrigin:r},!0)},r=function(t,e){var n;return n={isbp:e.is_bp||0,tabs:"CombinedDayView",qid:t.get("id"),sort:e.sort_by,index:e.index||t.get("position"),posidx:e.posidx,stops:t.get("legs").getDeeplinkStops()},i(e.deeplink+"&"+a(n,!0),e.website_name)},t.exports={getLight:s,getDirect:r}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _.reduce(t,function(t,n,i){return null==n&&(n=""),t.push(i+"="+(e?encodeURIComponent(n):n)),t},[]).join("&")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),r=n(27);e.default=function(t,e,n){return(0,i.isOn)("new_skippy")&&(t=(0,r.addQueryStringParam)(t,"new_skippy","true"),t=(0,r.addQueryStringParam)(t,"website_name",encodeURIComponent(e)),n&&(t=(0,r.addQueryStringParam)(t,"pre_redirect_id",n))),(0,i.isOn)("new_skippy_variant")&&(t=(0,r.addQueryStringParam)(t,"fss_new_skippy",(0,i.getVariant)("new_skippy_variant"))),t}},function(t,e,n){var i,r,s,o,a,l,u,c;c=n(26),u=n(41),l=function(t){var e;return t.isOn("booking_panel_cta_label")?t.getVariant("booking_panel_cta_label"):c("b"===(e=t.getVariant("cta_button"))||"c"===e?"ktxt_select_go_to_site":"ktxt_select")},a=function(t){return t.isOn("combined_bp")?c("ktxt_Next"):l(t)},s=function(t){var e;return c("b"===(e=t.getVariant("cta_button"))||"c"===e||"d"===e?"ktxt_select_book":"ktxt_select")},o=function(t){var e,n,i;return e=s(t),i=l(t),n=a(t),_.max([e,i,n],"length")},i=function(t,e){return e.isFacilitatedBooking()?s(t):e.isMultiTicket()?a(t):l(t)},r=function(t,e){return{ctaText:i(t,e),longestText:o(t),textFabBlue:"c"===t.getVariant("cta_button")&&e.isFacilitatedBooking()}},t.exports={getCtaButtonInfo:r}},function(t,e){var n;n=function(t,e,n){return Math.floor(_.result(t[e],n))},t.exports={showBookWith:function(t,e,i){return!!t&&(e.length>t&&(!!_.result(e[t],i)&&n(e,t-1,i)>n(e,t,i)))}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.hasBeenShown=e.saveRoute=void 0;var r=n(27),s=i(r),o=function(t){var e=_.first(t.legs),n=_.first(t.legs);return e.origin+":"+n.destination},a=function(){return s.default.getSessionStorage()},l=function(t){return a().trySetValue("flexible_days",o(t))},u=function(t){return a().tryGetValue("flexible_days")===o(t)};e.saveRoute=l,e.hasBeenShown=u},function(t,e,n){var i,r,s=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};i=n(10),r=n(26),t.exports=function(t,e){var n,o,a;if(i.isOn("installments")&&(a=i.getVariant("installments_partners_list"))&&!e)return o={},n=i.getVariant("installments"),"b"===n&&s.call(a,t)>=0?(o.text=r("ktxt_results_instalments"),o.class_name="installments"):"c"===n&&s.call(a,t)<0?(o.text=r("ktxt_results_no_instalments"),o.class_name="no-installments"):o=null,o}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.hasNPT()&&!s.default.isOn("combined_bp")?a:t.hasPST()||t.hasNPT()?o:null};var r=n(10),s=i(r),o="st",a="npst"},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.storeExit=void 0;var r=n(8),s=i(r),o=n(42),a=i(o),l=n(10),u=i(l),c=n(41),_=i(c),p=n(21),d=i(p),h=n(28),f=i(h),g=function(t,e){var n=864e5,i=parseInt(u.default.getVariant("xsell_clickout_ttl"),10),r=s.default.now(),o=r.getTime(),a=_.default.get("legs"),l=a[0].date,c=t.get(a[0].destination),p="City"===c.type?c:t.get(c.parent_id),h=void 0;return a.length>1?h=a[1].date:(h=s.default.parseDateTime(l),h.setTime(h.getTime()+n),h=s.default.formatDate(h)),e.channel("xsell-store-flights-clickout").publish({expiration:Math.min(s.default.parseDateTime(l).getTime(),o+i),data:{to:c.alt_id,toName:p.name,sd:l,ed:h,na:d.default.get("adults")+d.default.get("children"),ts:o}})},m=function(t,e){u.default.isOn("xsell_clickout_ttl")&&(0,f.default)(void 0,g,(0,a.default)(e),t)};e.storeExit=m},function(t,e,n){var i,r,s,o,a;a=n(26),o=n(46),r=n(160),s=n(161),i=n(162),t.exports=function(){function t(t,e,n){this.type=t,this.cache=null!=e?e:{},this.is_modal_view=n}return t.prototype.getContent=function(t,e){var n,i,r;return r=this._getUrl(e),n=t+"::"+r,n in this.cache||(i=$.Deferred(),this._getResponse(r).done(function(e){return function(n){var r;return r=n?e._getElement(t,n):null,i.resolve(r)}}(this)),this.cache[n]=i.promise()),this.cache[n]},t.prototype._getResponse=function(t){var e;return t in this.cache||(e=$.Deferred(),$.ajax({type:"GET",contentType:"application/json",url:t}).done(function(t){return e.resolve({panel_text:t.PanelText,priced_text:t.PricedText,button_text:t.ButtonText,hotels_uri:t.HotelsDayViewUri,carhire_uri:t.CarHireDayViewUri,default_image_src:t.DefaultImageSmall,small_image_src:t.LocationImagesSmall,is_priced:t.IsPriced})}).fail(function(t){return o.trackGA({action:this.type+"_xsellError",label:t.statusText,trackOnce:!1}),e.resolve(null)}),this.cache[t]=e.promise()),this.cache[t]},t.prototype._getElement=function(t,e){var n,o,l,u,c;return n=(null!=(u=e.small_image_src)?u[0]:void 0)||e.default_image_src,l=/generic/i.test(n)?"generic":"custom",c={type:this.type,image_src:n,deeplink:e[this.type+"_uri"],header:e.panel_text,info:e.priced_text,button_text:e.button_text,is_priced:e.is_priced,close:a("ktxt_close"),message:a("ktxtOpensInNewWindow"),is_modal_view:this.is_modal_view},"inline"===t?$("<li>").addClass("fss-cross-sell-inline clearfix").attr({"data-priced":e.is_priced,"data-picture":l}).html(r(c))[0]:(o=_.contains(t,"inline-panel")?i:s,_.contains(t,"panel")?$("<a>").attr({target:"_blank",href:c.deeplink,title:c.message,"data-type":c.type,"data-priced":e.is_priced,"data-picture":l,class:"trip-section"}).html(o(c))[0]:null)},t.prototype._getUrl=function(t){var e,n;return e="/crosssell/v1/"+this.type+"/flights/"+t.market+"/"+t.locale+"/"+t.currency+"/"+t.locationId+"/"+t.checkInDate,t=_.omit(t,"market","locale","currency","locationId","checkInDate"),(n=$.param(t))&&(e+="?"+n),e},t}()},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<button data-type="'+(null==(__t=type)?"":__t)+'" title="'+(null==(__t=close)?"":__t)+'"></button><div class="fss-xsell-inline-image"><img src="'+(null==(__t=image_src)?"":__t)+'" alt="'+(null==(__t=header)?"":__t)+'" /></div><div class="fss-xsell-inline-info"><p class="fss-xsell-inline-header">'+(null==(__t=header)?"":__t)+"</p>",info&&(__p+='<p class="fss-xsell-inline-message">'+(null==(__t=info)?"":__t)+"</p>"),
__p+='</div><div class="fss-xsell-inline-button"><a data-type="'+(null==(__t=type)?"":__t)+'" data-priced="'+(null==(__t=is_priced)?"":__t)+'" href="'+(null==(__t=deeplink)?"":__t)+'" title="'+(null==(__t=message)?"":__t)+'" target="_blank">'+(null==(__t=button_text)?"":__t)+"</a></div>";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="fss-xsell-panel-image"><img src="'+(null==(__t=image_src)?"":__t)+'" alt="'+(null==(__t=header)?"":__t)+'"/></div>',is_modal_view||(__p+='<div class="fss-xsell-panel-logo"></div>'),__p+='<div class="fss-xsell-panel-actionable"><div class="text-section"><h4>'+(null==(__t=header)?"":__t)+'</h4></div><div class="fss-xsell-panel-deeplink"><span>'+(null==(__t=button_text)?"":__t)+"</span></div></div>",is_modal_view&&(__p+='<div class="fss-xsell-panel-logo"></div>'),__p+="";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="fss-xsell-inline-panel-image"><img src="'+(null==(__t=image_src)?"":__t)+'" alt="'+(null==(__t=header)?"":__t)+'" /></div><div class="fss-xsell-inline-panel-info"><h4>'+(null==(__t=header)?"":__t)+"</h4>"+(null==(__t=__webpack_require__(55)({is_secondary:!0,extra_data:{type:type},title:message,text:button_text}))?"":__t)+"</div>";return __p}},function(t,e,n){var i,r;r=n(44),i=function(){function t(t,e,n){var i,r,s;this.config=t,this.crossSellExperiment=null!=e?e:null,this.typeSlotMap=null!=n?n:{},r=this.config;for(i in r)s=r[i],this.typeSlotMap[s.type]=i}return t.prototype.getSlotByType=function(t){return this.typeSlotMap[t]},t.prototype.getInlineAtSlot=function(t,e){var n;return e in this.config?this.crossSellExperiment&&(n=this.crossSellExperiment.getInlineAtSlot(t,e))?(this.typeSlotMap[n.type]=e,n):{slot:e,type:this.config[e].type,promise:this.config[e].provider.getContent("inline",t)}:null},t.prototype.getAll=function(t){return _.keys(this.config).filter(function(t){return function(t){return!r.isCrossSellClosed(t)}}(this)).map(function(e){return function(n){return e.getInlineAtSlot(t,n)}}(this))},t}(),t.exports=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(46),a=i(o),l=n(17),u=i(l),c=["4","8"],p=function(){function t(e,n,i,s){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};r(this,t),this.customType=e,this.customVariant=n,this.fallbackInlineAdConfig=i,this.customBannersEndpoint=s,this.cache=o}return s(t,[{key:"getInlineAtSlot",value:function(t,e){var n=this;if(!_.contains(c,e))return null;if(!this.customBannersEndpoint)return null;if(!this.customVariant||"a"===this.customVariant)return null;var i=this._getCustomCrossSellBanner(t,e),r=this.fallbackInlineAdConfig[e],s=r?r.provider.getContent("inline",t):null,o=$.Deferred();return i.done(function(t){t?o.resolve(n._getElement(t,e)):s?s.done(function(t){t=$(t).attr({"data-position":e,"data-type":r.type})[0],o.resolve(t)}):o.reject()}),{slot:e,type:this.customType,promise:o.promise()}}},{key:"_getCustomCrossSellBanner",value:function(t,e){var n=this,i=this._getUrl(t,e);return i in this.cache||!function(){var t=$.Deferred();$.ajax({url:i,method:"GET",dataType:"html"}).done(t.resolve).fail(function(e){a.default.trackGA({action:n.customType+"_xsellError",label:e.statusText,trackOnce:!1}),u.default.error({message:"JS Log",fields:{"Error Message":'Cross-Sell Ajax Error For Type "'+n.customType+'"',"Error Payload":{status:e.statusText}}}),t.resolve(null)}),n.cache[i]=t.promise()}(),this.cache[i]}},{key:"_getElement",value:function(t,e){return $("<li>").addClass("fss-cross-sell-inline clearfix").attr({"data-position":e,"data-type":"custom-"+this.customType,"data-priced":!1,"data-picture":"generic"}).html(t)[0]}},{key:"_getUrl",value:function(t,e){var n=this.customBannersEndpoint+("/banners/"+this.customType+"/"+t.target+"/"+t.market)+("/"+t.locale+"/"+t.currency+"/"+t.origin.alt_id)+("/"+t.destination.alt_id+"/"+t.checkInDate),i=_.pick(t,["adults","checkOutDate"]);i.slot=e,i.variant=this.customVariant;var r=$.param(i);return r&&(n+="?"+r),n}}]),t}();t.exports=p},function(t,e,n){var i,r,s,o,a,l,u,c,_,p,d;_=n(166),d=n(44),p=n(42)("results"),c=n(19)("options"),i=function(t){var e,n;return n=$.Deferred(),e=s(t),n.resolve(e?l(e):null),n.promise()},s=function(t){var e,n;if(e=r(t))return n={asoview:o,kakaku:a},n[178===e.id?"asoview":"kakaku"](t)},l=function(t){return $("<a>").attr({href:t.url,title:t.btn_text,"data-type":"sj-alt-sell",target:"_blank"}).html(_({header:t.desc,info:t.desc,button_text:t.btn_text,image_src:t.img_url,logo_src:t.logo_url}))[0]},o=function(t){var e,n;if((e=c.get("SJLookUpResolver")().asoview)&&t in e)return n=e[t],{url:"http://www.asoview.com"+n.url_path,desc:n.city_name+"",btn_text:"",img_url:"https://s3-ap-northeast-1.amazonaws.com/alt-sell-experiment/asoview/"+n.image_url,logo_url:null}},a=function(t){var e,n,i,s;if(i=c.get("SJLookUpResolver")().kakaku)return n=r(t),s=function(){return u(t)?{code:61,image_url:"//cloudfront.net/kakaku/url.jpg"}:n.id in i?i[n.id]:{code:null,image_url:"//cloudfront.net/kakaku/url.jpg"}}(),e="http://"+(d.isMobile()?"s.":"")+"kakaku.com/mobile_data/world-wifi/",{url:""+e+(s.code?"ranking.asp?ww_country="+s.code+"&":"?")+"cid=md_skyscanner",desc:"Wi-Fi",btn_text:"Wi-Fi",img_url:"https://s3-ap-northeast-1.amazonaws.com/alt-sell-experiment/kakaku/default.jpg",logo_url:"https://s3-ap-northeast-1.amazonaws.com/alt-sell-experiment/kakaku/logo.png"}},r=function(t){var e;if(e=p.get(t)){for(;e&&"Country"!==e.type;)e=p.get(e.parent_id);return e}},u=function(t){return 13176===t||12596===t||12240===t||14938===t||13664===t||14135===t||12241===t||12732===t||25319===t||14387===t},t.exports={getContent:i}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="fss-xsell-panel-image"><img src="'+(null==(__t=image_src)?"":__t)+'" alt="'+(null==(__t=header)?"":__t)+'"/></div><div class="fss-xsell-panel-actionable"><h4>'+(null==(__t=header)?"":__t)+'</h4><div class="fss-xsell-panel-deeplink"><span>'+(null==(__t=button_text)?"":__t)+"</span></div></div>",__p+=logo_src?'<div class="fss-xsell-panel-logo" style="background-image: url(\''+(null==(__t=logo_src)?"":__t)+"'); background-size: 50%; background-position-y: 50%;\"></div>":'<div class="fss-xsell-panel-logo" style="background-image: none"></div>',__p+="";return __p}},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.getSEOAirlineId=e.isTestEnabled=e.isFromSEOAirlinePage=void 0;var s=n(27),o=r(s),a=n(44),l=r(a),u=n(10),c=r(u),p=n(69),d=r(p),h=n(23),f=i(h),g=(0,d.default)("results"),m=function(){return"flights_seo_landing_page"===o.default.getQueryStringParam("ref")&&null!==o.default.getQueryStringParam("seo_airline")},y=function(){return!f.isMultiDestination()&&c.default.isOn("seo_airline_filter")},v=function(t){var e=void 0,n=null;if(m()&&!l.default.getShownSEOAirlineInfo()&&(e=o.default.getQueryStringParam("seo_airline"))){e=e.toUpperCase(),l.default.setChosenSEOAirline(e);var i=_.findKey(g.data,{alt_id:e});_.isEmpty(i)?l.default.setHasSEOAirlineInResults("none"):(n=+i,l.default.setHasSEOAirlineInResults(t.get(n)?"full":"partial"))}return n};e.isFromSEOAirlinePage=m,e.isTestEnabled=y,e.getSEOAirlineId=v},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.show=void 0;var r=n(12),s=i(r),o=function t(){if(Skyscanner.LiveChat&&Skyscanner.LiveChat.show&&"function"==typeof Skyscanner.LiveChat.show){var e=(Skyscanner.config.remoteConfiguration.APACRegionalFeature||{}).ShowIntercomLiveChatIdleTime||15;t.id&&s.default.clearTimeout(t.id),t.id=s.default.setTimeout(function(){return Skyscanner.LiveChat.show()},1e3*e)}};e.show=o},function(t,e,n){var i,r,s,o,a,l,u,c,p,d,h,f,g,m,y,v,b,k,w,x,S,P,C,A,D,T,M,O,F,I,R,q,j,B,L,V,E,N,U,Q,G,X=function(t,e){function n(){this.constructor=t}for(var i in e)H.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},H={}.hasOwnProperty,W=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};Q=n(26),T=n(6),b=n(8),P=n(118),c=n(28),p=n(27),a=n(14),F=n(21),j=n(68),w=n(56).default,g=n(170).default,o=n(171),s=n(192),r=n(194),i=n(195),l=n(110),M=n(19)("options"),C=n(19)("initial_query"),V=n(44),y=n(52),B=n(41),q=n(196),u=n(48)("booking"),I=n(42)("booking"),L=n(120)("booking"),f=n(69)("booking"),E=n(12),N=n(46),k=n(150),G=n(98),O=n(154),m=n(10),R=n(51),h=n(133),v=n(153),A=n(156),D=n(197).default,d=n(198)("booking"),U=n(157).default,S=n(148).getLegs,x=n(127).default,t.exports=function(t){function e(t){e.__super__.constructor.apply(this,arguments),this.model=new r,this.splitView=new s({controller:this,el:$("#details-mobile-panel"),$wrapper:$("#content-wrap"),$body:t.$body,transfer:M.get("airportTransfers"),enable_scroll_to_price:!0,refreshed_layout:this.isRefreshedLayout()}),this.modalView=new o({controller:this,el:$("#details-panel"),$wrapper:$("#content-wrap"),$body:t.$body,transfer:M.get("airportTransfers"),refreshed_layout:this.isRefreshedLayout()}),this.setCurrentView()}return X(e,t),e.prototype.mixins=[l,i],e.prototype.initialize=function(){var t;return t=q.getBus(),t.channel("fatal-error").subscribe(_.bind(this.onFatalError,this)),t.channel("data").subscribe(_.bind(this.onData,this)),this.bus.channel("itineraries-data").subscribe(_.bind(this.onItinerariesData,this)),this.bus.channel("show-pqs-on-details").subscribe(function(t){return function(e,n){if(e===t.getItinerary().get("id"))return t.model.set("exit_to_skippy",!0),t.showPqsForm("direct",t.getPricingOption(n))?t.loadPqsAfterLR(t.getItinerary(),n,"details",t.view):void 0}}(this)),this.bus.channel("pqs-submitted").subscribe(function(t){return function(e,n){if("details"===n)return t.model.set("pqs_still_searching","submitted-dismissed"===e)}}(this)),this.bus.channel("pqs-removed").subscribe(function(t){return function(){return t.view.onRemovePqsForm()}}(this)),this.sponsorship=null,this.bus.channel("set-sponsorship").subscribe(_.bind(this.setSponsorship,this))},e.prototype.shutdown=function(){if(!this.model.get("current_visible_page"))return q.clear(),this.view.reset(),this.closePqsForm(),E.clearInterval(this.__refresh),this.model.shutdown()},e.prototype.closePanel=function(){if(this.model.get("current_visible_page"))return this.model.set("current_visible_page",null),this.model.set("selected_pricing_option_agent",null),this.shouldShowUpsell()&&_.defer(function(t){return function(){return t.bus.channel("load-upsell").publish(t.getItinerary().get("id"),"inline-panel")}}(this)),this.shutdown(),this.view.hide(),V.setBookingPanelReason(null),c(this,this.onBookingPanelClosedMX,V.getBookingPanelCloseMethod()||"browser_back"),V.setBookingPanelCloseMethod(null),c(this,this.onClosePanelGA)},e.prototype.shouldShowUpsell=function(){return!!this.model.get("exit_type")&&(!!this.model.get("exit_to_skippy")&&!this.model.get("pqs_still_searching"))},e.prototype.panelHasMultiplePages=function(){return this.view.panel_pages>0},e.prototype.showPanel=function(t,e){var n;return null==e&&(e="details"),this.isBookingPageWithoutAgentSelected(e)?(this.model.set("current_visible_page","details"),this.router.navigateTo("details/"+this.getItinerary().get("id"),{replace:!0})):(n=this.model.get("current_visible_page"))!==e?(this.setCurrentView(),this.model.set("current_visible_page",e),n&&this.panelHasMultiplePages()?this.view.goTo(e):(this.view.show(),this.view.updateLoadingStates(!1,!0),this.hasLiveUpdate()?q.getDetails(y.get("session_id"),t):this.onItinerariesData(V.getLastPricingServiceData()),E.setTimeout(function(t){return function(){var e;return e=B.getCrossSellQuery("dvpanel"),t.view.renderCrossSell(t.carhire.getContent("booking-panel",e),"carhire"),t.view.renderCrossSell(t.hotels.getContent("booking-panel",e),"hotels")}}(this),10))):void 0},e.prototype.isBookingPageWithoutAgentSelected=function(t){return"booking"===t&&!this.model.get("selected_pricing_option_agent")},e.prototype.setCurrentView=function(){var t;return t=p.getCssMaxWidth()<=1100?this.splitView:this.modalView,this.view!==t&&this.closePanel(),this.view=t},e.prototype.setScreenPosition=function(t){var e;return(e=this.itineraries.get("itineraries").get(t))?this.getItinerary().set("screen_position",e.get("screen_position")):null},e.prototype.onClickDone=function(t){if(!m.isOn("is_app_bot")||"outside"===t||!this.isPanelView())return V.setBookingPanelCloseMethod(t),this.router.goBack("booking"===this.model.get("current_visible_page")?2:1),this.bus.channel("refresh-app").publish({reason:"booking_panel_lu"})},e.prototype.onFatalError=function(t){return 404===t.status&&"Itinerary Not Found"===t.message?this.renderNotFound():(N.trackMixpanel("Flight Booking Panel Fatal Error",{"Time Since Session Started":b.diffInSeconds(V.getSessionCreatedTime(),b.now()),"Response Status":t.status,"Response Message":t.message,"Response Full Message":t.fullMessage}),this.view.scrollToTop(),this.bus.channel("restart-app").publish({reason:"booking_panel_lu_error"}))},e.prototype.onItinerariesData=function(t){var e,n;if(e=this.hasLiveUpdate(),this.model.get("current_visible_page")&&!e)return E.clearInterval(this.__refresh),this.onData(t,this.findItinerary,e)&&(n=V.getPriceUpdateTimer())?this.__refresh=E.setInterval(function(t){return function(){return t.render()}}(this),1e3*n):void 0},e.prototype.onData=function(t,e,n){var i,r;return null==n&&(n=!0),r=t.response,i=t.request_number,d(r),this.model.build(r,e),0!==this.model.get("itineraries").length&&g(this.getItinerary())?(this.setScreenPosition(this.getItinerary().id),this.render(i),n&&!this.getPendingAgents()&&c(this,this.onLiveUpdateMX),!0):(this.renderNotFound(),!1)},e.prototype.getPendingAgents=function(){return u.getPending().length},e.prototype.render=function(t){var e,n;if(!this.view.$el.hasClass(".hidden"))return this.isPanelView()||this.view.destroyTooltips(),this.view.updateLoadingStates(!0,this.getPendingAgents()>0),n=this.model.get("selected_pricing_option_agent"),this.renderTicket(n),this.renderItinerary(),this.view.showContent(),this.view.updateAnimationState(t),e=this.itineraries.get("pqsForm"),this.showPqsForm("direct",e.get("pricing_option"))&&this.getItinerary().id===V.getPqsFormItineraryId()&&"details"===e.get("section")&&!this.isPanelView()&&this.view.renderPqsForm(this.getItinerary().cid,e.get("pricing_option").cid,this.getPqsData()),1===t&&(c(this,this.onDetailsLoadedGA,this.getPricingOption()),c(this,this.onDetailsLoadedMX,this.itineraries.get("itineraries"),V.getSelectedItineraryPosition(),this.getItinerary().id),c(this,this.renderAirportTransfers),V.incrementBpOpenCount()),this},e.prototype.renderAirportTransfers=function(){var t;return t=this.getItinerary().get("legs").at(0).getArrivalPlace(),this.view.renderAirportTransfers(t.display_code,t.name)},e.prototype.renderNotFound=function(){return this.view.renderNotFound(),this.view.updateLoadingStates(!1,!1),N.trackMixpanel("Flight Booking Panel Itinerary Not Found",{reason:"itinerary_not_found"})},e.prototype.getMessageToggleData=function(){var t,e;return e=U(this.getAllOptions()),t=e?"transfer":"read_before",{airline_travel_alert:G.messageForItinerary(this.getItinerary()),message_toggle_title:G.titleForItinerary(this.getItinerary())||this.getMessageToggleTitle(e),is_open:this.model.get(t+"_info_on_display"),transfer_type:e,combined_enabled:m.isOn("combined_bp"),important_info_cabinclass_detail:Q("ktxtBookingPanel_ImportantInfo_CabinClass_Body",{cabinclass:h.format(B.get("cabin_class"))}),is_premium_cabin_class:"economy"!==B.get("cabin_class"),important_info_main:Q("ktxtBookingPanel_ImportantInfo_MainMulti",{tag1:"<em>",tag2:"</em>"}),help_url:M.get("helpUrl")("transfer"),data_type:t,red_alert:e||G.isValidItinerary(this.getItinerary())}},e.prototype.getMessageToggleTitle=function(t){switch(t){case"st":return Q("ktxt_booking_Warning_SelfTransfer_Title");case"npst":return Q("ktxt_booking_Warning_NPST_Title");default:return Q("ktxtBookingPanel_ImportantInfo_Head")}},e.prototype.isRefreshedLayout=function(){return m.isOn("spring_clean")&&m.isOff("prod_bp_spring_clean")},e.prototype.renderTicket=function(t){var e,n,i,r,s,o,a,l,u,c,d,f,g;if(o=this.getOptionData(t),u=this.getProviderOptions(),s=this.getItems(this.getPricingOption(t)),l=m.isOn("partner_promotion")?_.filter(u,function(t){return t.promotion_types.length}).length:null,p.getCssMaxWidth()<=480)for(c=["read_before","transfer"],i=0,r=c.length;i<r;i++)g=c[i],this.isToggleInfoModified(g)||this.setToggleInfoOnDisplayed(g,!1);return m.isOn("highlight_airline")&&(d=_.groupBy(u,function(t){return t.is_airline?"airline_options":"ota_options"}),e=d.airline_options,a=d.ota_options),n=B.get("cabin_class"),this.model.set("highlight_airline",this.shouldHighlightAirline(e,a)),this.view.renderTicket({spring_clean:this.isRefreshedLayout(),compact_spring_clean:m.isOn("compact_spring_clean"),main_option:o,main_items:s,providers_options:u,airline_options:e,ota_options:a,header_title:this._getTicketHeaderTitle(o,F.getTotal(),u),passengers:this.getPassengerDisplayText()||"&nbsp;",logosDomain:M.get("logosDomain"),multi_fab:M.get("multipleFABAgentsEnabled"),select_clicked:this.model.get("clicked_select_buttons.0"),is_loading:this.getPendingAgents()>0,is_premium_cabin_class:"economy"!==n,cabin_class:h.format(n),estimated:Q("ktxt_lu_estimated"),price_changed_or_sold_out:Q(F.getTotal()>1?"ktxtBookingPanel_FareNotAvailableReasonMultiple":"ktxtBookingPanel_FareNotAvailableReasonSingle"),return_to_results:Q("ktxtBookingPanel_ReturnToResults"),select:Q("ktxtSelectedFlights_DeeplinkButton"),opens_in_new_window:Q("ktxtOpensInNewWindow"),check_this_price_and_book:Q("ktxt_unpriced_checkThisPriceAndBookTickets",{tag1:"<em>",websitename:null!=(f=s[0])?f.agent_name:void 0,tag2:"</em>"}),go_to_site:Q("ktxt_GoToSite"),help_url:M.get("helpUrl")("transfer"),message_toggle_top:this.getMessageToggleData(),has_multi_booking:this.getAllOptions().hasMultiTicket(),has_booking_page:this.getAllOptions().hasMultiTicket()&&m.isOn("combined_bp")&&this.isPanelView(),is_modal_view:!this.isPanelView(),promoted_partners:l,show_book_with:O.showBookWith(l,u,"raw_price"),highlight_airline:this.model.get("highlight_airline"),show_airline_icon:"b"===m.getVariant("highlight_brand_or_airline")&&!this.getAllOptions().hasMultiTicket(),show_agent_logo:"c"===m.getVariant("highlight_brand_or_airline")&&!this.getAllOptions().hasMultiTicket()})},e.prototype.shouldHighlightAirline=function(t,e){return!m.isOff("highlight_airline")&&(0!==(t||[]).length&&0!==(e||[]).length)},e.prototype._isTicketSoldout=function(t,e){return 0===e.length&&"unavailable"===t.status},e.prototype._getTicketHeaderTitle=function(t,e,n){return Q(this.getPendingAgents()>0?"ktxtCheckingPricesAndAvailability":this._isTicketSoldout(t,n)?"ktxtBookingPanel_Title_PriceNoLongerAvailable":t.is_multi_part_booking&&!m.isOn("combined_bp")?"ktxtDayViewResults_MultiBooking":e>1?"ktxtBookingPanel_Title_BookYourTickets":"ktxtBookingPanel_Title_BookYourTicket")},e.prototype._getDifferentOriginAirportsText=function(){var t,e,n;return"return"!==C.get("trip_type")?null:(e=this.getItinerary(),n=e.getFirstLeg().getDeparturePlaceAltId(),t=e.getSecondLeg().getArrivalPlaceAltId(),n!==t?_.unescape(Q("ktxtMultihop_ResultsView_DifferentOriginAirports_Rail",{outboundFrom:n,inboundTo:t})):null)},e.prototype._getDifferentDestinationAirportsText=function(){var t,e,n;return"return"!==C.get("trip_type")?null:(e=this.getItinerary(),n=e.getFirstLeg().getArrivalPlaceAltId(),t=e.getSecondLeg().getDeparturePlaceAltId(),n!==t?_.unescape(Q("ktxtMultihop_ResultsView_DifferentDestinationAirports_Rail",{outboundTo:n,inboundFrom:t})):null)},e.prototype.findItinerary=function(t){var e;return e=_.find(t,{id:V.getSelectedItineraryRef().get("id")}),e?[e]:[]},e.prototype.hasMultiTicket=function(){return(V.getSelectedItineraryRef()||this.getItinerary()).hasMultiTicket()},e.prototype.areAllItemsLive=function(){var t,e;return e=V.getSelectedItineraryRef(),t=e.get("pricing_options").getMain().get("items"),!t.any(function(t){return t.hasAgeExceeded()})},e.prototype.needsUpdateForMultiTicket=function(t){var e;return e=this.hasMultiTicket()&&!this.areAllItemsLive(),t?e:(!m.isOn("combined_bp")||!this.isPanelView())&&e},e.prototype.hasLiveUpdate=function(t){return null==t&&(t=!1),!V.getSelectedItineraryRef()||this.needsUpdateForMultiTicket(t)},e.prototype.renderItinerary=function(){var t,e,n,i;return e=this.getItinerary().get("legs"),i=e.getMixedAirports(),t=m.isOn("bp_full_leg_info"),n=S(e,M),this.view.renderItinerary({multi_dest:"multi-destination"===C.get("trip_type"),collapsible:m.isOn("bp_collapse_itineraries")||this.isRefreshedLayout(),spring_clean:this.isRefreshedLayout(),full_leg_info:t,compact_spring_clean:m.isOn("compact_spring_clean"),less_affordance_spring_clean:m.isOn("less_affordance_spring_clean"),check_your_itinerary:Q("ktxtBookingPanel_Title_CheckYourItinerary"),all_times_are_local:Q("ktxtAllTimesAreLocal"),long_wait:Q("ktxtMultihop_ResultsView_LongWait"),change_airport_label:Q("ktxtMultihop_ResultsView_ChangeAirport"),different_airports_origin:this._getDifferentOriginAirportsText(),different_airports_destination:this._getDifferentDestinationAirportsText(),logo_domain:M.get("logosDomain"),is_12hr_format:!T.is24HourFormat(),legs:e.map(function(e,r){var s,o,a,l,u,c,p,d;return c=x(e.getDuration())||"",s=(a=e.getArrivalTime())?T.formatDate(a,"fullAbbr"):"",l=e.getDeparturePlaceId(),o=e.getArrivalPlaceId(),d=this.getLegSegments(e.getSegments()),p={opened:this.model.get("opened_legs."+r),stops:this.getStops(e),segments:d,change_airport:_.any(d,"change_airport"),departure_datetime:(u=e.getDepartureTime())?T.formatDate(u,"fullAbbr"):null,departure_alt_id:e.getDeparturePlaceAltId(),departure_warning:W.call(i,l)>=0,arrival_alt_id:e.getArrivalPlaceAltId(),arrival_warning:W.call(i,o)>=0,title:this.getLegTitle(r,e),arrival_time:Q("ktxtBookingPanel_Arrives",{tag1:"<strong>",tag2:"</strong>",date:s}),duration:Q("ktxtBookingPanel_Duration",{tag1:"<strong>",tag2:"</strong>",time:c}),logo_domain:M.get("logosDomain"),logo_data:this.getLegLogoData(e)},this.isRefreshedLayout()||t?_.extend(p,n[r]):p},this)})},e.prototype.getLegLogoData=function(t){return{name:t.getCombinedArlineName().join(" + "),image:function(e){return function(){var n,i;return(i=_.first(t.getMarketingCarriersIds()))?e.getPricingOption().isUnpriced()?null:(n=f.get(i),e.getLogoDataByCarrier(n)):null}}(this)()}},e.prototype.getLogoDataByCarrier=function(t){return t?{src:t.alt_id+".png",alt:t.name}:null},e.prototype.getLegTitle=function(t,e){if(this.isRefreshedLayout()){if("multi-destination"===C.get("trip_type"))return e.getDepartureCityName()+" - "+e.getArrivalCityName();if(0===t)return Q("ktxt_filter_outbound");if(1===t)return Q("ktxt_filter_return")}return 0===t?Q("ktxtBookingPanel_Outbound"):1===t?Q("ktxtBookingPanel_Return"):""},e.prototype.getLegSegments=function(t){var e,n,i,r,s,o,a,l,u,c,_,p,d,h,g;for(l=[],i=null,p=null,a=o=0,u=t.length;o<u;a=++o)g=t[a],_=I.get(g.origin_place_id),s=I.get(g.destination_place_id),r=P(b.parseDateTime)(g.departure),e=P(b.parseDateTime)(g.arrival),n=f.get(g.marketing_carrier_id),i=r||i||"",d=t[a-1]||null,h=d&&d.arrival,p=P(b.parseDateTime,p)(h),l.push({index:a,type:"flight",origin_offset:b.getDateOffsetStr(p,r)||"",destination_offset:b.getDateOffsetStr(i,e)||"",carrier_name:n?n.name:"",operated_by:this.getLegOperatedBy(g.marketing_carrier_id,g.operating_carrier_id),departure_time:r?T.formatTime(r,"short"):null,arrival_time:e?T.formatTime(e,"short"):null,origin_place:P(this.getStationText,"")(_),destination_place:P(this.getStationText,"")(s),flight_duration:P(x,"")(g.duration),flight_number:this.getFlightNumber(n,g.marketing_flight_number),logo_data:this.getLogoDataByCarrier(n)}),(c=t[a+1])&&l.push({type:"connection",change_airport:this.hasChangeAirport(g,c),connection_type:this.getConnectionType(g,c),duration:this.getConnectionDuration(g,c),is_long_wait:this.getIsLongWait(g,c)});return l},e.prototype.getFlightNumber=function(t,e){return((null!=t?t.display_code:void 0)||"")+(e||"")},e.prototype.getStationText=function(t){return[t.alt_id,t.name].join(" ")},e.prototype.hasChangeAirport=function(t,e){var n,i,r,s;return n=t.destination_place_id?null!=(r=I.get(t.destination_place_id))?r.id:void 0:null,i=e.origin_place_id?null!=(s=I.get(e.origin_place_id))?s.id:void 0:null,n&&i&&n!==i},e.prototype.getConnectionType=function(t,e){return Q(this.hasChangeAirport(t,e)?"ktxtMultihop_ResultsView_ChangeAirport":"ktxtMultihop_ResultsView_ConnectInAirport")},e.prototype.getConnectionDuration=function(t,e){var n,i,r;return n=P(b.parseDateTime)(t.arrival),i=P(b.parseDateTime)(e.departure),n&&i?(r=Math.max(0,i-n),x(r/6e4)):""},e.prototype.getIsLongWait=function(t,e){var n,i;return n=P(b.parseDateTime)(t.arrival),i=P(b.parseDateTime)(e.departure),!!n&&(!!i&&!!(i-n>108e5))},e.prototype.getStops=function(t){var e;return{count:e=t.getStopCount(),label:this.getStopLabel(e)}},e.prototype.getStopLabel=function(t){return _.isNaN(t)?"":t<=0?Q("ktxtDayViewResults_NonStop"):1===t?Q("ktxt_results_journeynotes_1stop_short"):2===t?Q("ktxt_results_journeynotes_2stops_short"):3===t?Q("ktxt_results_journeynotes_3stops_short"):4===t?Q("ktxt_results_journeynotes_4stops_short"):Q("ktxt_results_journeynotes_Nstops_short",{number:t})},e.prototype.getDeeplink=function(t,e,n,i,r){var s,o,a;return s=this.model.get("itineraries").getMain(),(a=s.get("sponsorship"))?{url:a.url,type:"sponsorship"}:(o={is_bp:1,sort_by:this.itineraries.get("itineraries").sort_by,deeplink:e,index:n,posidx:i,is_facilitated:t.isFacilitatedBooking(),website_name:r},this.hasLiveUpdate()||this.hasMultiTicket()||t.canHaveDirectExit()?{url:k.getDirect(s,o),type:"direct"}:{url:k.getLight(s,t,V.getApplicationId(),y.get("session_id"),"details"),type:"light"})},e.prototype.getItinerary=function(){return this.model.get("itineraries").getMain()},e.prototype.getItems=function(t){var e,n,i,r,s,o,a,l,u,c,_,p;for(l=t.get("items"),_=l.models,p=[],s=r=0,u=_.length;r<u;s=++r)o=_[s],(i=o.get("url"))&&(e=o.getAgent(),n=this._getAgentName(t,o),c=o.getAgentPQSData(),p.push({deeplink:a=this.getDeeplink(t,i,s,0,n),price:this.formatPrice(o.getPrice(F.getTotal()),t.isMultiTicket()),raw_price:o.getPrice(F.getTotal()),pqs_data:this.getPqsDisplayData(c,e.id),status:o.getUpdateStatus(),agent_id:e.id,agent_name:n,raw_agent_name:this._getRawAgentName(t,o),show_agent_logo:e.is_carrier||e.show_logo||!1,pqs_viewport:this.isPanelView()?"":"body",segments_details:this.getSegmentDetails(o),is_npt:t.hasNPT(),is_pst:t.hasPST(),is_mobile_site:t.isOptimisedForMobile()&&V.isMobile(),is_facilitated:t.isFacilitatedBooking(),select_clicked:this.model.get("clicked_select_buttons."+(s+1)),promotion_types:m.isOn("partner_promotion")&&t.hasCarrierAgent()?[j("airline")]:[],cta_button_info:v.getCtaButtonInfo(m,t),installments_data:A(e.id,t.isUnpriced()),jp_customer_support:D(e.id),fab_cta_colour:t.isFacilitatedBooking()?m.getVariant("fab_cta_colour")||"":void 0,fab_hide_fabcopy:m.isOn("fab_cta_fabcopy"),exit_link_data:this.getExitLinkData(o,s,a.type)}));return p},e.prototype.getSegmentDetails=function(t){var e,n,i,r,s,o,a,l,u,c;for(a=t.get("segment_ids"),l=[],r=0,s=a.length;r<s;r++)c=a[r],u=L.get(c),i=_.bind(I.get,I),e=this.getDepartureDateTime(u),o=u?P(i,{})(u.origin_place_id).display_code:"",n=u?P(i,{})(u.destination_place_id).display_code:"",l.push({date_time:e,codes:o+"-"+n});return l},e.prototype.getDepartureDateTime=function(t){var e,n;return t&&(n=P(b.parseDateTime)(t.departure))&&(e=T.formatDateTime(n,"medium"))?e:null},e.prototype.getOptionData=function(t){var e,n,i,r;return n=this.getPricingOption(t),i=n.getMainItem().getAgentPQSData(),r=n.getTotalPrice(F.getTotal()),e=this.formatPrice(r,n.isMultiTicket()),{scroll_to_price:m.isOn("bp_scroll_to_price")&&r?Q("ktxtBookingPanel_BookFrom",{price:e}):null,price:e||"&nbsp;",raw_price:n.getPrice(F.getTotal()),pqs_data:this.getPqsDisplayData(i,n.get("agent_id")),status:n.getUpdateStatus(),is_multi_part_booking:n.isMultiTicket(),is_unpriced:n.isUnpriced(),is_npt:n.hasNPT(),is_pst:n.hasPST(),is_mobile_site:n.isOptimisedForMobile()&&V.isMobile(),is_facilitated:n.isFacilitatedBooking(),promotion_types:m.isOn("partner_promotion")&&n.hasCarrierAgent()?[j("airline")]:[],cta_button_info:v.getCtaButtonInfo(m,n),installments_data:A(n.get("agent_id"),n.isUnpriced()),jp_customer_support:D(n.get("agent_id")),fab_cta_colour:n.isFacilitatedBooking()?m.getVariant("fab_cta_colour")||"":void 0,fab_hide_fabcopy:m.isOn("fab_cta_fabcopy"),multi_instructions:this.getMultiBookingInstructions(n)}},e.prototype.getExitLinkData=function(t,e,n,i){return{"agent-id":t.get("agent_id")||"","is-airline":i,"select-id":e,deeplink:n}},e.prototype.getOptionAdditionalInfo=function(t,e){var n,i;return n=t.hasNPT()||t.hasPST(),i={protection:n&&e.hasNPT()?"npt":n?"pst":void 0},t.hasMultiTicket()&&_.extend(i,{airline:e.isMultiTicket()?Q("ktxt_promotion_airline"):null,bookings:e.isMultiTicket()?Q("ktxt_multi_booking",{x:e.get("items").length}):Q("ktxt_Provider_SingleBooking")}),i},e.prototype.setSponsorship=function(t){if(this.sponsorship=t,this.getItinerary())return this.render()},e.prototype.getProviderOptions=function(){var t,e,n,i,r,s,o,a,l,u,c,p,d,h,f,g,y,k,x,S,P,C,M,O,I,R,q;for(i=this.getAllOptions().models,p=this.getItinerary(),P=p.get("pricing_options"),y=[],u=[],(null!=(M=this.sponsorship)?M.partner:void 0)&&u.push("sponsored"),(t=m.isOn("partner_promotion"))&&(u.push("airline","cheapest"),u.push("best")),(t||this.sponsorship)&&(p.addPromotionTags(u,this.sponsorship),i=p.getSortedPromotedOptions().pricing_options),c=l=0,h=i.length;l<h;c=++l)f=i[c],(a=f.get("items").getMain())&&(e=a.get("agent_id"))&&(o=a.get("url"))&&(I=f.getUpdateStatus(),"current"!==I&&"pending"!==I&&"estimated"!==I&&"failed"!==I||(S=function(t){return function(){var t;return("estimated"!==I||f.isMultiTicket())&&(t=f.getPrice(F.getTotal()))?t:null}}(this)(),d=a.getLastUpdated(),R=S&&d&&(s=b.convertLocalTime(b.parseDateTime(d)))?Q("ktxt_qa_tooltip1",{date:T.formatDate(s,"short"),time:T.formatTime(s,"short")}):Q("ktxtOpensInNewWindow"),n=this._getAgentName(f),C=this._getRawAgentName(f),g=this.getDeeplink(f,o,0,f.get("position"),n),k=(r=m.getVariant("partner_currency"))?null!=(O=r.agents)?O[e]:void 0:null,x=f.getMainItem().getAgentPQSData(),y.push({status:I,agent_name:n,raw_agent_name:C,pqs_data:f.isMultiTicket()?null:this.getPqsDisplayData(x,e),agent_id:e,is_airline:f.hasCarrierAgent(),deeplink:g,price:this.formatPrice(S,!1),total_price:S&&(q=f.getTotalPrice())!==S?Q("ktxtDayViewResults_PriceTotal",{price:this.formatPrice(q)}):null,tooltip:R,is_npt:f.hasNPT(),is_pst:f.hasPST(),is_multi_ticket:f.isMultiTicket(),is_mobile_site:f.isOptimisedForMobile()&&V.isMobile(),is_facilitated:f.isFacilitatedBooking(),unpriced_msg:_.unescape(Q("ktxt_unpriced_checkAvailability",{carrier_name:C,tag1:"<a class='action-select' "+w(this.getExitLinkData(f.getMainItem(),null,g.type),"data-")+" target='_blank' href='"+g.url+"'>",
tag2:"</a>"})),promotion_types:_.map(f.get("promotion_types"),j),cta_button_info:v.getCtaButtonInfo(m,f),installments_data:A(e,f.isUnpriced()),jp_customer_support:D(e),fab_cta_colour:f.isFacilitatedBooking()?m.getVariant("fab_cta_colour")||"":void 0,fab_hide_fabcopy:m.isOn("fab_cta_fabcopy"),exit_link_data:this.getExitLinkData(f.getMainItem(),null,g.type,f.hasCarrierAgent()),meta_info:m.isOn("combined_bp")?this.getOptionAdditionalInfo(this.getAllOptions(),f):{},partner_currency:k?Q("ktxt_Provider_Different_Currency",{currency:k}):null})));return y},e.prototype._getAgentName=function(t,e){var n;return n=this._getRawAgentName(t,e),t.isFacilitatedBooking()?Q("ktxtBookingPanel_AgentBookOnSkyscanner",{agentName:n}):n},e.prototype._getRawAgentName=function(t,e){return e?e.getAgentName():t.getUniqueAgentNames().join(" + ")||"&nbsp;"},e.prototype.getPassengerDisplayText=function(){return _.compact([this.getAdultsText(),this.getChildrenText(),this.getInfantsText()]).join(", ")},e.prototype.getLegOperatedBy=function(t,e){return t===e?null:Q("ktxtCodeShare_OperatedByAirline",{airline:(f.get(e)||{}).name||e})},e.prototype.getMultiBookingInstructions=function(t){return{header:Q("ktxt_multi_booking",{x:t.get("items").length}),book_separately:"return"===C.get("trip_type")&&t.isTwoBookingTicket()&&!(t.hasNPT()||t.hasPST()),show_transfer:t.hasNPT()||t.hasPST()}},e.prototype.getAdultsText=function(){var t;return t=F.get("adults"),1===t?Q("ktxt_1Adult"):2===t?Q("ktxt_2Adults"):3===t?Q("ktxt_3Adults"):4===t?Q("ktxt_4Adults"):5===t?Q("ktxt_5Adults"):6===t?Q("ktxt_6Adults"):7===t?Q("ktxt_7Adults"):8===t?Q("ktxt_8Adults"):""},e.prototype.getChildrenText=function(){var t;return t=F.get("children"),1===t?Q("ktxt_1Child"):2===t?Q("ktxt_2Children"):3===t?Q("ktxt_3Children"):4===t?Q("ktxt_4Children"):5===t?Q("ktxt_5Children"):6===t?Q("ktxt_6Children"):7===t?Q("ktxt_7Children"):8===t?Q("ktxt_8Children"):""},e.prototype.getInfantsText=function(){var t;return t=F.get("infants"),1===t?Q("ktxt_1Infant"):2===t?Q("ktxt_2Infants"):3===t?Q("ktxt_3Infants"):4===t?Q("ktxt_4Infants"):5===t?Q("ktxt_5Infants"):6===t?Q("ktxt_6Infants"):7===t?Q("ktxt_7Infants"):8===t?Q("ktxt_8Infants"):""},e.prototype.onResize=function(){if(this.model.get("current_visible_page")&&(this.isPanelView()||!p.supportsTouch()))return this.view.updatePosition()},e.prototype.onToggleInfoClicked=function(t,e){return this.model.set(e+"_info_modified",!0),this.model.set(e+"_info_on_display",t),c(this,this.onImportantInfoGA,t)},e.prototype.isToggleInfoModified=function(t){return this.model.get(t+"_info_modified")},e.prototype.setToggleInfoOnDisplayed=function(t,e){return this.model.set(t+"_info_on_display",e)},e.prototype.getAllOptions=function(){return this.getItinerary().get("pricing_options")},e.prototype.getAgentMetadata=function(t){return(D(t)||{}).metadata},e.prototype.onExit=function(t,e,n,i){var r,s;return t?this.model.set("clicked_select_buttons."+t,!0):c(this,this.onBookWithLinkGA,this.getGAAgentId(e,i)),this.bus.channel("booking-panel-exit").publish(),this.model.set("exit_type",n),s=this.getPricingOption(e),r=this.getAllOptions().find(function(t){return t.hasCarrierAgent()})||null,c(this,this.onResultSelectedMX,s,t,m.isOn("combined_bp"),this.getAgentMetadata(e),r),c(this,this.onRedirectStartedMX,s,this.getAllOptions()),"direct"===n&&this.model.set("exit_to_skippy",!0),this.showPqsForm(n,s)&&this.loadPqsForm(this.getItinerary(),s,"details",this.view)&&!this.isPanelView()&&this.view.verticallyAlignPqsForm(),this.setRedirectStartedTimestamp()},e.prototype.getGAAgentId=function(t,e){var n;return n=e?"_airline":"_OTA",this.model.get("highlight_airline")?t+n:t},e.prototype.showPqsForm=function(t,e){return e&&!e.isMultiTicket()&&"direct"===t},e.prototype.onAirlineFeesClicked=function(){return c(this,this.onAirlineFeesGA)},e.prototype.getBaggagePage=function(){return M.get("baggagePage")},e.prototype.getPricingOption=function(t){return t?this.getAllOptions().getPricingOptionWithAgentId(t):this.getAllOptions().getMain()},e.prototype.isPanelView=function(){return _.isFunction(this.view.showPanel)},e.prototype.toggleLeg=function(t,e){return e&&N.trackMixpanel("Flight Booking Panel Itinerary Leg Expanded",{Leg:t}),this.model.set("opened_legs."+t,e)},e.prototype.onClickCrossSell=function(t,e){return c(this,this.onCrossSellSelectedMX,t),c(this,this.onCrossSellSelectedGA,t+"_xsellClick",this.getCrossSellTrackingLabel(t,e))},e.prototype.onCrossSellRendered=function(t,e,n){return c(this,this.onCrossSellSelectedGA,t+"_xsellImp",this.getCrossSellTrackingLabel(t,n))},e.prototype.onPartnerListExpanded=function(){return c(this,this.onPartnerListExpandedMX)},e.prototype.onOpenMultiBookingPanel=function(t){var e;return t&&(this.model.set("selected_pricing_option_agent",t),this.renderTicket(t)),this.router.navigateTo("details/"+this.getItinerary().get("id")+"/booking"),m.isOn("combined_bp")&&this.isPanelView()&&this.hasLiveUpdate(!0)&&q.getDetails(y.get("session_id"),this.getItinerary().get("id")),e=this.getPricingOption(t),c(this,this.onMultiBookingPanelLoadedMX,this.model.get("itineraries"),V.getSelectedItineraryPosition(),e,this.getItinerary().id),c(this,this.onResultSelectedMX,e,null,m.isOn("combined_bp"))},e.prototype.onClickSplitPanelBack=function(){return this.router.goBack(),c(this,this.onBookingPanelClosedMX,"back_arrow")},e.prototype.getArrivesOnTooltip=function(t,e,n){var i,r,s,o;return s=this.getItinerary().get("legs").at(e),o=s.getSegments()[n],i=P(b.parseDateTime)(o[t]),r=i?T.formatDate(i,"full"):"","departure"===t?Q("ktxt_flight_departs_on",{date:r}):"arrival"===t?Q("ktxt_arrives_on",{date:r}):null},e.prototype.getCrossSellTrackingLabel=function(t,e){return("hotels"===t?e+"_bottom":"small")+(_.keys(this.model.get("clicked_select_buttons")).length?"-post-redirect":"-pre-redirect")},e.prototype.getPqsDisplayData=function(t,e){return R.getDisplayData(t,e,m.getVariant("aa_website_id"),m.getVariant("pqs_increment"))},e.prototype.formatPrice=function(t,e){return t?T["formatCurrency"+(e?"Full":"")](t):null},e.prototype.setRedirectStartedTimestamp=function(){var t;return(t=p.getSessionStorage())?t.trySetValue("redirect_started_timestamp",Date.now()):null},e}(a)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(17),s=i(r),o={},a=function(t,e){o[t.get("leg_id")]||(o[t.get("leg_id")]=!0,s.default.error({message:"JS Log",fields:{"Error Message":"Missing leg information","Error Payload":{itinerary_id:e.id,provider_list:e.get("pricing_options").map(function(t){return t.getUniqueAgentIds()[0]}),leg_id:t.get("leg_id"),leg_position:t.get("position")}}}))};e.default=function(t){if(!t)return!1;var e=t.get("legs").find(function(t){return!t.getLeg()});return e?(a(e,t),!1):t}},function(t,e,n){var i,r,s,o,a,l,u,c,p,d,h,f,g,m,y=function(t,e){return function(){return t.apply(e,arguments)}},v=function(t,e){function n(){this.constructor=t}for(var i in e)b.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},b={}.hasOwnProperty,k=[].slice;s=n(71),r=n(172),i=n(102),c=n(19)("options"),a=n(10),p=n(11),d=n(173),m=n(72),h=n(61),u=n(176),g=n(177),l=n(188),f=n(190),o=n(55),t.exports=function(t){function e(){this.onClickCrossSell=y(this.onClickCrossSell,this),this.onAirlineFeesClick=y(this.onAirlineFeesClick,this),this.onSelectClick=y(this.onSelectClick,this),this.onMessageToggleClick=y(this.onMessageToggleClick,this),e.__super__.constructor.apply(this,arguments),this.refreshedLayout=this.options.refreshed_layout,this.initMainView(),this.ticket=new s({el:this.$(".fss-bp-ticket"),template:g}),this.itinerary=new s({el:this.$(".fss-bp-itinerary"),template:l}),this.options.transfer&&(this.transfer=new i({el:this.$(".fss-airport-transfer")})),this.overlay=p.create({overlay_id:this.$el.attr("data-overlay"),dismiss_callback:_.bind(this.onClickDone,this)}),this.$el.on("click.rating",".rating-icon, .rating-trigger",d.open),a.isOn("bp_scroll_to_price")&&this.options.enable_scroll_to_price&&(this._$panel=this.$el.find(".fss-panel-content"),this._$ticket=this._$panel.find(".fss-bp-content").find(".fss-bp-ticket"),this._$panel.on("scroll",_.bind(this.onScrollContent,this)))}return v(e,t),e.prototype.mixins=[r],e.prototype.events={"click .return-to-results":"onClickDone","click .close-panel.action-close":"onStopPropagation","click .fss-panel-header":"onStopPropagation","click .fss-popup-section":"onStopPropagation","click .action-select":"onSelectClick","click .action-none":"onPreventDefault","click .action-close":"onClickDone","click .airline-fees-link":"onAirlineFeesClick","click .leghead":"onLegToggle","click .full-leg-info .leg-container":"onLegToggle","click .leg-summary":"onLegDetailsClick","click .fss-cross-sell-panel a":"onClickCrossSell","click .message-toggle":"onMessageToggleClick","click .action-next-page":"onClickNextPage","click .action-back":"onClickBack","click .fss-bp-scroll-to-price button":"onClickScrollToPrice","mouseover .departure .destination-day-offset":"onMouseoverDepartureDayOffset","mouseover .destination .destination-day-offset":"onMouseoverDestinationDayOffset","mouseout .departure .destination-day-offset":"hideTooltip","mouseout .destination .destination-day-offset":"hideTooltip"},e.prototype.initMainView=function(){var t;return t=this.refreshedLayout?f:u,this.$el.html(t({show_header:!a.isOn("is_app_bot"),show_plan_trip:!1,spring_clean:this.refreshedLayout,compact_spring_clean:a.isOn("compact_spring_clean")})),this.refreshedLayout&&this.$el.addClass("bp-refreshed fss-modal-bp"),this.$el.on("click",_.bind(this.onClickDone,this))},e.prototype.onScrollContent=function(){var t;return t=this.shouldShowScrollToPriceMsg()?"showScrollMsg":"hideScrollMsg",this[t]()},e.prototype.shouldShowScrollToPriceMsg=function(){return!a.isOff("bp_scroll_to_price")&&(!!this.options.enable_scroll_to_price&&this.$el.height()-this._$ticket.offset().top-50<0)},e.prototype.onlyShowSections=function(){var t;return t=1<=arguments.length?k.call(arguments,0):[],this.$(".fss-popup-section").addClass("hidden").end().find(_.map(t,function(t){return"."+t}).join(",")).removeClass("hidden"),this},e.prototype.showContent=function(){var t,e;return this.onlyShowSections("fss-bp-content"),e=this.$(".fss-cross-sell-panel"),e.is(":empty")||e.removeClass("hidden"),t=this.$(".fss-airport-transfer"),t.is(":empty")||t.removeClass("hidden"),this},e.prototype.removeContent=function(){return this.$(".fss-bp-ticket,.fss-bp-itinerary,.fss-cross-sell-panel,.fss-airport-transfer").html(""),this},e.prototype.show=function(){return this.overlay.show(),this.$el.removeClass("hidden"),this.updatePosition()},e.prototype.hide=function(){return this.overlay.hide(this.$el.attr("data-overlay")),this.$el.addClass("hidden").removeAttr("style"),this.removeContent(),this.onlyShowSections("loading-message")},e.prototype.updatePosition=function(){var t,e;return e=this.options.$body.get(0).getBoundingClientRect().top,t=this.options.$body.width()<=960?75:140,this.$el.css({position:"absolute",top:Math.abs(e)+t-this.options.$wrapper.offset().top})},e.prototype.injectCrossSell=function(t,e){var n,i,r;if(t)return n=$(t),r=n.data("picture"),i=this.$(".fss-cross-sell-panel"),i["carhire"===e?"append":"prepend"](n),this.controller.onCrossSellRendered(e,"booking-panel",r),this.$(".fss-bp-itinerary").is(":empty")?void 0:i.removeClass("hidden")},e.prototype.renderCrossSell=function(t,e){return t&&t.promise?t.done(function(t){return function(n){return t.injectCrossSell(n,e)}}(this)):this.injectCrossSell(t,e)},e.prototype.renderTicket=function(t){var e;if((e=t.main_option.scroll_to_price)?this.$el.find(".fss-bp-scroll-to-price").find("span").text(e):this.options.enable_scroll_to_price=!1,t.show_agent_logo?this.$el.find(".fss-bp-ticket").addClass("show-agent-logo-container"):this.$el.find(".fss-bp-ticket").removeClass("show-agent-logo-container"),this.options.enable_scroll_to_price&&setTimeout(function(t){return function(){if(t.shouldShowScrollToPriceMsg())return t.showScrollMsg()}}(this),300),this.ticket.render(t).show(),this.multiTicket&&t.has_booking_page)return this.multiTicket.render(t).show()},e.prototype.renderItinerary=function(t){return this.itinerary.render(t).show()},e.prototype.renderAirportTransfers=function(t,e){if(this.transfer)return this.transfer.render("booking-panel",t,e)},e.prototype.renderNotFound=function(){return this.onlyShowSections("not-found-message")},e.prototype.onClickDone=function(t){return this.controller.onClickDone($(t.currentTarget).data("close-method")||"outside")},e.prototype.onMessageToggleClick=function(t){var e,n,i;return n=$(t.currentTarget),i=n.attr("data-type"),e=n.closest(".fss-bp-ticket"),n.toggleClass("opened"),e.find(".message-container[data-type='"+i+"']").toggleClass("hidden"),this.controller.onToggleInfoClicked(n.hasClass("opened"),i)},e.prototype.onSelectClick=function(t){var e;return e=$(t.currentTarget),m.getLinkModifier(e,h.regenUrl)(m.getDeepLinkType(e,".action-select")),this.controller.onExit(e.addClass("clicked").data("select-id"),e.data("agent-id"),e.data("deeplink"),e.data("is-airline")),!0},e.prototype.onAirlineFeesClick=function(){return window.open("/airlinefees","window_name","toolbar=no,status=no,scrollbars=yes,resizable=no,width=650,height=450"),this.controller.onAirlineFeesClicked(),!1},e.prototype.onLegToggle=function(t){var e;return t.preventDefault(),e=$(t.currentTarget).toggleClass("opened"),e.next(".leg-details").toggleClass("hidden"),this.controller.toggleLeg(e.data("id"),e.hasClass("opened"))},e.prototype.onLegDetailsClick=function(t){var e,n,i,r,s;return n=$(t.currentTarget),e=n.find(".show-btn").toggleClass("opened"),n.next(".leg-details").toggleClass("hidden"),s=e.hasClass("opened"),i=e.data(e.hasClass("opened")?"hide-text":"show-text"),a.isOn("less_affordance_spring_clean")||(e.find(".modal-text").text(i),r=this.$el.hasClass("fss-modal-bp")?".modal-button-section":".split-button-section",e.find(r).html(o({is_secondary:!0,text:this.$el.hasClass("fss-modal-bp")?"":i,is_selected:s}))),this.controller.toggleLeg(e.data("id"),s)},e.prototype.onClickCrossSell=function(t){var e,n,i;return e=$(t.currentTarget),i=e.data("type"),n=e.data("picture"),this.controller.onClickCrossSell(i,n)},e.prototype.onMouseoverDepartureDayOffset=function(t){return this.displayDayOffsetTooltip(t,"departure")},e.prototype.onMouseoverDestinationDayOffset=function(t){return this.displayDayOffsetTooltip(t,"arrival")},e.prototype.displayDayOffsetTooltip=function(t,e){var n,i,r,s;if(n=$(t.currentTarget),i=n.attr("data-leg"),s=n.attr("data-segment"),r=this.controller.getArrivesOnTooltip(e,i,s))return this.displayTooltip(n,r)},e.prototype.onClickScrollToPrice=function(t){var e;return this.onStopPropagation(t),e=this.$el.height(),this._$panel.animate({scrollTop:this._$panel.scrollTop()-(e-this._$ticket.offset().top)+e/2+50},200)},e.prototype.alignElement=function(t,e){var n;return n=e.height(),t.animate({scrollTop:e.offset().top-($(window).height()-n)/2},200)},e.prototype.renderPqsForm=function(t,e,n){return this.$el.find(".fss-bp-ticket").addClass("show-pqs").prepend(this.getPqsFormElement(n))},e.prototype.onRemovePqsForm=function(){return this.$el.find(".fss-bp-ticket").removeClass("show-pqs")},e.prototype.verticallyAlignPqsForm=function(){return this.alignElement($("window, body"),this.$el.find(".pqs-form"))},e.prototype.updateLoadingStates=function(t,e){return this.attr("has-results",t),this.attr("loading",e)},e.prototype.updateAnimationState=function(t){var e;if(e=1===t?"removeClass":"addClass",this.ticket.$(".rating-icon")[e]("anim-hide"),this.refreshedLayout&&1===t)return this.itinerary.$(".itinerary-leg").addClass("animate-plane")},e.prototype.reset=function(){return this.destroyTooltips(),this.updateLoadingStates(!1,!0)},e.prototype.onClickBack=function(t){return 1===this.panel_current_page?this.onClickDone(t):this.controller.onClickSplitPanelBack()},e.prototype.onClickNextPage=function(){},e}(s)},function(t,e,n){var i,r,s;i=n(74),s=n(44),r=n(76),t.exports=function(){function t(){}return t.prototype.renderPqsForm=function(t,e,n){return this.$el.append(this.getPqsFormElement(n))},t.prototype.getPqsFormElement=function(t){var e;return e=new i({tagName:"aside",className:"pqs-form-wrapper",template:r}),s.setPqsFormView(e),e.setController(this.controller).render(t).el},t.prototype.onRemovePqsForm=function(){},t}()},function(t,e,n){var i,r,s,o,a,l,u,c,_,p,d,h;s=n(10),_=n(174),h=n(46),u=n(19)("options"),o=n(96),p=null,i=$("body"),c="has-pqs-breakdown-tooltip",d="pqs-breakdown-tooltip",a=function(t){return null==t&&(t=i),t.on("click.pqs_rating",".rating-icon, .rating-trigger",l)},r=function(){return null!=p&&p.destroy(),o.remove(d),$("."+c).removeClass(c)},l=function(t){var e,n,i,s,a;return t.stopPropagation(),t.preventDefault(),n=$(t.currentTarget),i=n.is(".rating-trigger")?n.siblings(".rating-icon"):n,p&&i.hasClass(c)?(i.removeClass(c),void r()):(r(),a=_({rating:i.attr("data-rating"),no_rating:i.find(".stars-not-enough-ratings").length,agent:i.attr("data-agent"),help_link:u.get("helpUrl")("pqs")}),s=(p=new Skyscanner.Components.Tooltip(i,{container:e=i.parents(i.attr("data-container")||"body"),html:!0,message:a,trigger:"manual",animations:!1,placement:"bottom",viewport:i.attr("data-viewport")||e})).tip().addClass("bd-tip"),p.show(),i.addClass(c),o.setup(d,r,s),h.trackMixpanel("Flight Day View PQS Score Clicked"))},t.exports={init:a,open:l,cleanup:r}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="fss-rating-breakdown"><button class="close bd-close dismiss-trigger"></button><h3>'+(null==(__t=agent)?"":__t)+"</h3>",__p+=no_rating?'<p class="no-rating">'+(null==(__t=translate("ktxt_pqs_breakdown_not_enough_ratings"))?"":__t)+"</p>":""+(null==(__t=__webpack_require__(175)({rating:rating,size:"big"}))?"":__t),__p+="<p>"+(null==(__t=translate("ktxt_pqs_rating_breakdown_info"))?"":__t)+'</p><a class="find-more" target="_blank" title="'+(null==(__t=translate("ktxtOpensInNewWindow"))?"":__t)+'" href="'+(null==(__t=help_link)?"":__t)+'">'+(null==(__t=translate("ktxt_pqs_rating_more_details"))?"":__t)+"</a></div>";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<span class="fss-rating clearfix fss-rating-'+(null==(__t=size)?"":__t)+'">',_.times(5,function(t){var e="empty";t<rating&&(e="full"),t===rating-.5&&(e="half"),"empty"===e&&(color=""),__p+='<span class="fss-rating-'+(null==(__t=e)?"":__t)+'"></span>'}),__p+="</span>";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="fss-popup fss-bp"><button class="close-panel action-close" data-close-method="dismiss" title="'+(null==(__t=translate("ktxt_close"))?"":__t)+'" ></button><div class="fss-popup-section loading-message"><div>'+(null==(__t=translate("ktxtLoading"))?"":__t)+'</div><div class="hot-spinner medium" aria-hidden="true"></div></div><div class="fss-popup-section not-found-message hidden"><div class="error-message"><p class="primary-message">'+(null==(__t=translate("ktxtLightRedirect_FareNoLongerAvailable"))?"":__t)+'</p><p class="secondary-message">'+(null==(__t=translate("ktxtLightRedirect_TicketMayHaveSoldOut"))?"":__t)+"</p></div>"+(null==(__t=__webpack_require__(55)({is_secondary:!0,extra_class:"action-close",text:translate("ktxtLightRedirect_BackToResults"),extra_data:{"close-method":"fare_unavailable"}}))?"":__t)+'</div><div class="fss-popup-section fss-bp-content hidden"><div class="fss-bp-itinerary"></div><div class="fss-bp-ticket"></div>',show_plan_trip&&(__p+='<div class="fss-bp-trip"><h3 class="panel-header plantrip text-lg">'+(null==(__t=translate("ktxtBookingPanel_Title_PlanYourTrip"))?"":__t)+'</h3><div class="panel-content"><div class="fss-airport-transfer trip-section fss-popup-section hidden"></div><div class="fss-cross-sell-panel fss-popup-section hidden"></div></div></div>'),__p+="</div>",show_plan_trip||(__p+='<div class="fss-airport-transfer fss-popup-section hidden"></div><div class="fss-cross-sell-panel fss-popup-section hidden"></div>'),__p+='<div class="fss-bp-scroll-to-price hidden"><button><span></span></button></div></div>';return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj){if(getDomAttributes=__webpack_require__(56).default,__p+="",__p+="",main_option.is_unpriced){__p+='<h3 class="panel-header text-lg">'+(null==(__t=header_title)?"":__t)+" ",is_loading&&(__p+='<span class="hot-spinner"></span>'),__p+="</h3>";var item=main_items[0],extra_class="action-select";extra_class+=item.fab_cta_colour?" "+item.fab_cta_colour:"",__p+="",__p+=main_option.pqs_data?'<div class="bookings ticket-container clearfix unpriced"><div class="fss-left clearfix"><div class="unpriced-message tall text-sm">'+(null==(__t=check_this_price_and_book)?"":__t)+'</div></div><div class="fss-right"><div class="logo"><a href="'+(null==(__t=item.deeplink.url)?"":__t)+'" class="action-select text-sm" target="_blank" '+(null==(__t=getDomAttributes(item.exit_link_data,"data-"))?"":__t)+'><img class="action-select" src="'+(null==(__t=logosDomain)?"":__t)+"/images/websites/bar/"+(null==(__t=item.agent_id)?"":__t)+'.png" alt="'+(null==(__t=item.agent_name)?"":__t)+'" title="'+(null==(__t=item.agent_name)?"":__t)+'" height="30px" width="120px" onerror="__logoReplace__(this)"></a>'+(null==(__t=__webpack_require__(178)({feedback_count:main_option.pqs_data.feedback_count,feedback_label:main_option.pqs_data.feedback_label,agent_name:item.raw_agent_name,rank:main_option.pqs_data.rank,container:".fss-bp-content",viewport:is_modal_view?"body":null}))?"":__t)+"</div>"+(null==(__t=__webpack_require__(55)({has_pointer:!0,deeplink:main_items[0].deeplink,title:opens_in_new_window,text:go_to_site,extra_class:extra_class,extra_data:item.exit_link_data}))?"":__t)+"</div></div>":'<div class="unpriced ticket-container clearfix"><div class="fss-left clearfix"><div class="unpriced-message">'+(null==(__t=check_this_price_and_book)?"":__t)+'</div></div><div class="fss-right">'+(null==(__t=__webpack_require__(55)({has_pointer:!0,deeplink:main_items[0].deeplink,title:opens_in_new_window,text:go_to_site,extra_class:extra_class,extra_data:item.exit_link_data}))?"":__t)+"</div></div>",__p+="",__p+=""}else if(has_multi_booking&&!has_booking_page)__p+='<h3 class="panel-header text-lg">'+(null==(__t=header_title)?"":__t)+" ",is_loading&&(__p+='<span class="hot-spinner"></span>'),__p+='</h3><div class="panel-content ticket-container multi-container">',__p+=spring_clean?""+(null==(__t=__webpack_require__(179)(obj))?"":__t):""+(null==(__t=__webpack_require__(185)(obj))?"":__t),__p+="</div>",__p+="";else{if(__p+='<h3 class="panel-header text-lg clearfix"><div>'+(null==(__t=header_title)?"":__t)+" ",is_loading&&(__p+='<span class="hot-spinner"></span>'),__p+='</div><div class="subtitle text-sm">'+(null==(__t=cabin_class)?"":__t)+", "+(null==(__t=passengers)?"":__t)+"</div></h3>",0===providers_options.length){__p+='<div class="message notavailable"><p class="fss-bold warning-header">'+(null==(__t=translate("ktxtBookingPanel_FareNotAvailableMessage"))?"":__t)+'</p><p class="space text-sm">'+(null==(__t=price_changed_or_sold_out)?"":__t);var item=main_items[0],extra_class="fss-secondary return-to-results";extra_class+=item.fab_cta_colour?" "+item.fab_cta_colour:"",__p+="</p>"+(null==(__t=__webpack_require__(55)({extra_class:extra_class,is_secondary:!0,text:return_to_results,extra_data:{"close-method":"fare_unavailable"}}))?"":__t)+"</p></div>"}else __p+='<div class="message-notification ',obj.message_toggle_top.red_alert&&(__p+="red"),__p+='">'+(null==(__t=__webpack_require__(182)(obj.message_toggle_top))?"":__t)+(null==(__t=__webpack_require__(183)(obj.message_toggle_top))?"":__t)+"</div>",highlight_airline&&(__p+='<h4 class="panel-subheader">'+(null==(__t=translate("ktxt_promotion_airline"))?"":__t)+"<h4>",obj.providers_options=obj.airline_options,__p+=""+(null==(__t=__webpack_require__(186)(obj))?"":__t),obj.providers_options=obj.ota_options,__p+='<h4 class="panel-subheader">'+(null==(__t=translate("ktxtResults_Book_OTA"))?"":__t)+"<h4>"),__p+=""+(null==(__t=__webpack_require__(186)(obj))?"":__t);__p+=""}__p+=""}return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<aside class="rating-icon clearfix" data-agent="'+(null==(__t=agent_name)?"":__t)+'" data-rating="'+(null==(__t=rank)?"":__t)+'" data-container="'+(null==(__t=container)?"":__t)+'" data-viewport="'+(null==(__t=viewport)?"":__t)+'">',feedback_count>0&&(__p+='<span class="stars-bubble"><span class="stars-number">'+(null==(__t=feedback_label)?"":__t)+"</span></span>"),__p+=""+(null==(__t=__webpack_require__(175)({rating:feedback_count>0?rank:0,size:"normal"}))?"":__t),0===feedback_count&&(__p+='<span class="stars-not-enough-ratings">'+(null==(__t=translate("ktxt_pqs_not_enough_ratings"))?"":__t)+"</span>"),__p+="</aside>";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="multibook-ticket"><div class="bookings separator total-section"><div class="passenger-info text-sm">'+(null==(__t=cabin_class)?"":__t)+", "+(null==(__t=passengers)?"":__t)+'</div><div class="item price-total">'+(null==(__t=translate("ktxtMultihop_ResultsView_TotalPrice"))?"":__t)+'</div><div class="item price-info text-lg ',"unavailable"===main_option.status&&(__p+="grayed"),__p+='">            ',__p+="unavailable"===main_option.status?'<span class="price-unavailable">'+(null==(__t=main_option.price)?"":__t)+"</span>":""+(null==(__t=main_option.price)?"":__t),__p+="","pending"===main_option.status?__p+='<span class="hot-spinner" aria-hidden="true"></span>':"estimated"===main_option.status||"failed"===main_option.status?__p+='<span class="fss-price-status estimated" aria-hidden="true"></span>':"unavailable"===main_option.status&&(__p+='<span class="fss-price-status notavailable" aria-hidden="true"></span>'),__p+="</div>"+(null==(__t=__webpack_require__(180)(obj))?"":__t)+"</div>"+(null==(__t=__webpack_require__(184)(obj))?"":__t)+"</div>";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="multibook-message"><div class="clearfix text-sm">'+(null==(__t=__webpack_require__(181)(obj))?"":__t)+'</div><div class="multibook-notif">',has_booking_page||(__p+='<div class="message-notification ',obj.message_toggle_top.transfer_type&&(__p+="red"),__p+='">'+(null==(__t=__webpack_require__(182)(obj.message_toggle_top))?"":__t)+(null==(__t=__webpack_require__(183)(obj.message_toggle_top))?"":__t)+"</div>"),__p+="</div></div>";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj){var book_separate_tickets=translate("ktxtBookingPanel_BookSeparateTickets",{tag1:"<em>",tag2:"</em>"}),check_all_ticket_prices=translate("ktxtBookingPanel_CheckAllTicketPrices",{tag1:"<em>",tag2:"</em>",tag3:"<em>",tag4:"</em>"});if(__p+="","estimated"===main_option.status||"failed"===main_option.status)__p+='<div class="message estimated"><p class="space">'+(null==(__t=book_separate_tickets)?"":__t)+" "+(null==(__t=check_all_ticket_prices)?"":__t)+'</p><p class="icon-text text-sm"><span class="inline-estimated"></span><span class="fss-bold">'+(null==(__t=translate("ktxtBookingPanel_ThisPriceIsEstimated"))?"":__t)+"</span> "+(null==(__t=translate("ktxtBookingPanel_CannotVerifyPrice"))?"":__t)+"</p></div>";else if("unavailable"===main_option.status){__p+='<div class="message notavailable"><p class="fss-bold warning-header">'+(null==(__t=translate("ktxtBookingPanel_FareNotAvailableMessage"))?"":__t)+'</p><p class="space">'+(null==(__t=book_separate_tickets)?"":__t)+" "+(null==(__t=translate("ktxtBookingPanel_PriceChangeMultiPartBooking",{tag1:"<em>",tag2:"</em>"}))?"":__t)+"</p>";var extra_class="fss-secondary return-to-results";extra_class+=main_option.fab_cta_colour?" "+main_option.fab_cta_colour:"",__p+="",has_booking_page||(__p+=""+(null==(__t=__webpack_require__(55)({extra_class:extra_class,is_secondary:!0,text:return_to_results,extra_data:{"close-method":"fare_unavailable"}}))?"":__t)),__p+="</div>"}else{if(__p+='<div class="message">',has_booking_page){__p+="";var instuctions=main_option.multi_instructions;__p+='<p class="fss-bold">'+(null==(__t=instuctions.header)?"":__t)+"</p>",__p+=instuctions.book_separately?'<p class="space">'+(null==(__t=translate("ktxt_BP_Multibook_Soow"))?"":__t)+'</p><p class="space with-icon info-icon">'+(null==(__t=translate("ktxt_BP_Multibook_Soow_tip"))?"":__t)+"</p>":'<p class="space">'+(null==(__t=translate("ktxt_BP_Multibook"))?"":__t)+'</p><p class="space with-icon info-icon">'+(null==(__t=translate("ktxt_BP_Multibook_tip"))?"":__t)+"</p>",__p+="",instuctions.show_transfer&&(__p+='<p class="space with-icon warning-icon">'+(null==(__t=translate("ktxt_BP_Multibook_NoProtection"))?"":__t)+"</p>"),__p+=""}else __p+='<p class="fss-bold notif-header">'+(null==(__t=translate("ktxtDayViewResults_MultiBooking"))?"":__t)+'</p><p class="space">'+(null==(__t=book_separate_tickets)?"":__t)+" "+(null==(__t=check_all_ticket_prices)?"":__t)+"</p>";__p+="</div>"}__p+=""}return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<button class="message-toggle ',red_alert&&(__p+="red"),__p+=" inline ",is_open&&(__p+="opened"),__p+='" data-type="'+(null==(__t=data_type)?"":__t)+'"><span class="icon"></span><span class="title fss-bold">'+(null==(__t=message_toggle_title)?"":__t)+"</span>",red_alert&&(__p+='<span class="subtitle text-sm">'+(null==(__t=translate("ktxt_booking_Warning_SubTitle_Warning"))?"":__t)+"</span>"),__p+='<span class="chevron"></span></button>';return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="message-container inline ',transfer_type&&(__p+="red"),__p+=" clearfix ",is_open||(__p+="hidden"),__p+='" data-type="'+(null==(__t=data_type)?"":__t)+'">',airline_travel_alert&&(__p+="<p>"+(null==(__t=airline_travel_alert)?"":__t)+"</p><br/>"),__p+="",transfer_type&&(__p+="",__p+=combined_enabled?'<p class="fss-bold">'+(null==(__t=translate("ktxt_BP_Warning_SelfTransfer_Title"))?"":__t)+"</p><p>"+(null==(__t=translate("ktxt_BP_Warning_SelfTransfer_Body"))?"":__t)+'</p><p class="fss-bold">'+(null==(__t=translate("ktxt_BP_Warning_SelfTransferCancel_Title"))?"":__t)+"</p><p>"+(null==(__t=translate("ktxt_BP_Warning_SelfTransferCancel_Body"))?"":__t)+"</p>":"st"===transfer_type?""+(null==(__t=translate("ktxt_booking_Warning_SelfTransfer_Warning_new"))?"":__t):""+(null==(__t=translate("ktxt_booking_Warning_NPT"))?"":__t),
__p+='<a href="'+(null==(__t=help_url)?"":__t)+'" target="_black" title="'+(null==(__t=translate("ktxtOpensInNewWindow"))?"":__t)+'" class="more-details">'+(null==(__t=translate(combined_enabled?"ktxt_BP_Warning_FindOutMore":"ktxt_booking_Warning_MoreInfo_Link"))?"":__t)+"</a>"),__p+="",red_alert&&(__p+='<h4 class="fss-bold">'+(null==(__t=translate("ktxt_booking_Warning_BookingAdvice_Title"))?"":__t)+"</h4>"),__p+="<p>"+(null==(__t=important_info_main)?"":__t)+'</p><ul><li><p class="fss-bold">'+(null==(__t=translate("ktxtBookingPanel_ImportantInfo_ExtraFees_Head"))?"":__t)+"</p><p>"+(null==(__t=translate("ktxtBookingPanel_ImportantInfo_ExtraFees_Body",{tag1:"<em>",tag2:"</em>",tag3:"<em>",tag4:"</em>",tag5:"<em>",tag6:"</em>"}))?"":__t)+" "+(null==(__t=translate("ktxtFeeInfo_ViewAirlineFees",{tag1:"<a href='/airlinefees' title='"+translate("ktxtOpensInNewWindow")+"' target='_blank' class='airline-fees-link'>",tag2:"</a>"}))?"":__t)+'</p></li><li><p class="fss-bold">'+(null==(__t=translate("ktxtBookingPanel_ImportantInfo_YoungPassengers_Head"))?"":__t)+"</p><p>"+(null==(__t=translate("ktxtBookingPanel_ImportantInfo_YoungPassengers_Body"))?"":__t)+"</p></li>",is_premium_cabin_class&&(__p+='<li><p class="fss-bold">'+(null==(__t=translate("ktxtBookingPanel_ImportantInfo_CabinClass_Head"))?"":__t)+"</p><p>"+(null==(__t=important_info_cabinclass_detail)?"":__t)+"</p></li>"),__p+="</ul></div>";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)getDomAttributes=__webpack_require__(56).default,__p+="",_.forEach(main_items,function(t,e){__p+='<div class="bookings separator clearfix"><div class="fss-left"><div class="item price-info text-lg ',"unavailable"===t.status&&(__p+="grayed"),__p+='">',__p+="unavailable"===t.status?'<span class="price-unavailable">'+(null==(__t=t.price)?"":__t)+"</span>":""+(null==(__t=t.price)?"":__t),__p+="","pending"===t.status?__p+='<span class="hot-spinner" aria-hidden="true"></span>':"estimated"===t.status||"failed"===t.status?__p+='<span class="mobile-estimated"><span class="fss-price-status estimated" aria-hidden="true"></span><span class="mobile-estimated-text text-sm">'+(null==(__t=estimated)?"":__t)+"</span></span>":"unavailable"===t.status&&(__p+='<span class="fss-price-status notavailable" aria-hidden="true"></span>'),__p+='</div><div class="item">',_.forEach(t.segments_details,function(e){__p+='<div class="text-sm ',"unavailable"===t.status&&(__p+="grayed"),__p+='">'+(null==(__t=e.date_time)?"":__t)+" <span>"+(null==(__t=e.codes)?"":__t)+"</span></div>"}),__p+='</div></div><div class="fss-right exit-section"><div class="clearfix"><div class="logo">',t.show_agent_logo?__p+='<a class="action-select logo-img" href="'+(null==(__t=t.deeplink.url)?"":__t)+'" target="_blank" '+(null==(__t=getDomAttributes(t.exit_link_data,"data-"))?"":__t)+' ><img src="'+(null==(__t=logosDomain)?"":__t)+"/images/websites/bar/"+(null==(__t=t.agent_id)?"":__t)+'.png" alt="'+(null==(__t=t.agent_name)?"":__t)+'" title="'+(null==(__t=t.agent_name)?"":__t)+'" height="30px" width="120px" onerror="__logoReplace__(this)"></a>':(__p+='<span class="text rating-section ',t.pqs_data&&(__p+="rating-trigger"),__p+='">'+(null==(__t=t.agent_name)?"":__t)+"</span>"),__p+="",t.pqs_data&&(__p+=""+(null==(__t=__webpack_require__(178)({feedback_count:t.pqs_data.feedback_count,feedback_label:t.pqs_data.feedback_label,agent_name:t.raw_agent_name,rank:t.pqs_data.rank,container:".fss-bp-content",viewport:t.pqs_viewport}))?"":__t)),__p+="</div>";var n="action-select exit-button";n+=t.fab_cta_colour?" "+t.fab_cta_colour:"",n+=select_clicked?" clicked":"",__p+=""+(null==(__t=__webpack_require__(55)({has_pointer:!0,extra_class:n,deeplink:t.deeplink,title:opens_in_new_window,text:select,extra_data:t.exit_link_data}))?"":__t)+"</div>",t.installments_data&&(__p+='<div class="'+(null==(__t=t.installments_data.class_name)?"":__t)+'">'+(null==(__t=t.installments_data.text)?"":__t)+"</div>"),__p+="",t.jp_customer_support&&(__p+='<div class="provider-feature bg-icon text-sm '+(null==(__t=t.jp_customer_support.class_name)?"":__t)+'">'+(null==(__t=t.jp_customer_support.text)?"":__t)+"</div>"),__p+="</div></div>"}),__p+="";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="bookings separator clearfix"><div class="fss-left main-section"><div class="item price-total">'+(null==(__t=translate("ktxtMultihop_ResultsView_TotalPrice"))?"":__t)+'</div><div class="item price-info ',"unavailable"===main_option.status&&(__p+="grayed"),__p+='">',"pending"===main_option.status?__p+='<span class="hot-spinner" aria-hidden="true"></span>':"estimated"===main_option.status||"failed"===main_option.status?__p+='<span class="fss-price-status estimated" aria-hidden="true"></span>':"unavailable"===main_option.status&&(__p+='<span class="fss-price-status notavailable" aria-hidden="true"></span>'),__p+="",__p+="unavailable"===main_option.status?'<span class="price-unavailable">'+(null==(__t=main_option.price)?"":__t)+"</span>":""+(null==(__t=main_option.price)?"":__t),__p+='</div><div class="item">'+(null==(__t=cabin_class)?"":__t)+'</div><div class="item">'+(null==(__t=passengers)?"":__t)+'</div></div><div class="fss-right clearfix">'+(null==(__t=__webpack_require__(181)(obj))?"":__t),has_booking_page||(__p+=""+(null==(__t=__webpack_require__(182)(obj.message_toggle_top))?"":__t)),__p+="</div>",has_booking_page||(__p+=""+(null==(__t=__webpack_require__(183)(obj.message_toggle_top))?"":__t)),__p+="</div>"+(null==(__t=__webpack_require__(184)(obj))?"":__t);return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)getDomAttributes=__webpack_require__(56).default,__p+="",providers_options.length&&(__p+='<div class="providers"><ul class="agents-list">',_.forEach(providers_options,function(t,e){if(__p+="",show_book_with&&e===promoted_partners&&(__p+='<li class="alt-option promotion-divider clearfix">'+(null==(__t=translate("ktxtResults_OrBookWith"))?"":__t)+"</li>"),__p+='<li class="clearfix alt-option"><div class="agent-section">',t.promotion_types.length&&(__p+='<div class="promotion-type">',t.promotion_types.forEach(function(t){__p+='<span class="promotion-tag">'+(null==(__t=t)?"":__t)+"</span>"}),__p+="</div>"),__p+='<a href="'+(null==(__t=t.deeplink.url)?"":__t)+'" title="'+(null==(__t=opens_in_new_window)?"":__t)+'" target="_blank" '+(null==(__t=getDomAttributes(t.exit_link_data,"data-"))?"":__t)+' class="text-base agent action-none ',t.pqs_data?__p+="rating-trigger":t.is_multi_ticket&&(__p+="action-next-page"),show_agent_logo&&(__p+=" show-agent-logo"),__p+='">',show_airline_icon&&t.is_airline&&(__p+='<div class="airline-badge-left-container"><span class="airline-badge bpk-badge">'+(null==(__t=translate("ktxtDayView_SortOption_Airline"))?"":__t)+"</span></div>"),__p+="",__p+=show_agent_logo&&"swa_"!==t.agent_id?'<img class="action-select" src="'+(null==(__t=logosDomain)?"":__t)+"/images/websites/bar/"+(null==(__t=t.agent_id)?"":__t)+'.png" alt="'+(null==(__t=t.agent_name)?"":__t)+'" title="'+(null==(__t=t.agent_name)?"":__t)+'" height="30px" width="120px" onerror="__logoReplace__(this)">':""+(null==(__t=t.raw_agent_name)?"":__t),__p+="",show_airline_icon&&t.is_airline&&(__p+='<span class="airline-badge bpk-badge">'+(null==(__t=translate("ktxtDayView_SortOption_Airline"))?"":__t)+"</span>"),__p+="</a>",t.currency_shown&&(__p+='<div class="provider-feature text-sm currency clearfix">'+(null==(__t=t.currency_shown)?"":__t)+"</div>"),__p+="",t.pqs_data&&(__p+=""+(null==(__t=__webpack_require__(178)({feedback_count:t.pqs_data.feedback_count,feedback_label:t.pqs_data.feedback_label,agent_name:t.raw_agent_name,rank:t.pqs_data.rank,container:".fss-bp-content",viewport:t.pqs_viewport}))?"":__t)),__p+=""+(null==(__t=__webpack_require__(187)(t))?"":__t)+'</div><div class="price-section clearfix">',t.price){if(__p+='<span class="display-price"><a href="'+(null==(__t=t.deeplink.url)?"":__t)+'" title="'+(null==(__t=opens_in_new_window)?"":__t)+'" target="_blank" '+(null==(__t=getDomAttributes(t.exit_link_data,"data-"))?"":__t)+' class="price ',__p+=t.is_multi_ticket?"action-next-page":"action-select",__p+='">',"pending"===t.status&&(__p+='<span class="hot-spinner"></span>'),__p+=""+(null==(__t=t.price)?"":__t)+"</a>",t.total_price&&(__p+='<a href="'+(null==(__t=t.deeplink.url)?"":__t)+'" target="_blank" '+(null==(__t=getDomAttributes(t.exit_link_data,"data-"))?"":__t)+' class="total-price gray ',__p+=t.is_multi_ticket?"action-next-page":"action-select",__p+='">'+(null==(__t=t.total_price)?"":__t)+"</a>"),__p+="</span>",t.is_multi_ticket){__p+="";var n="action-next-page";n+=select_clicked?" clicked":"",n+=t.fab_cta_colour?" "+t.fab_cta_colour:"",__p+=""+(null==(__t=__webpack_require__(55)({has_pointer:!0,extra_class:n,deeplink:t.deeplink,options:t,text:translate("ktxt_Next"),extra_data:t.exit_link_data}))?"":__t)}else{__p+="";var n="action-select";n+=select_clicked?" clicked":"",n+=t.cta_button_info.textFabBlue?" blue":"",n+=t.fab_cta_colour?" "+t.fab_cta_colour:"",__p+=""+(null==(__t=__webpack_require__(55)({extra_class:n,has_pointer:!0,deeplink:t.deeplink,text:opens_in_new_window,options:t,extra_data:t.exit_link_data}))?"":__t)}__p+="","estimated"!==t.status&&"failed"!==t.status||(__p+='<div class="clearfix status-label"><span class="fss-price-status estimated text-sm" aria-hidden="true">'+(null==(__t=estimated)?"":__t)+"</span></div>"),__p+=""}else __p+='<div class="provider-feature unpriced-label text-sm">'+(null==(__t=t.unpriced_msg)?"":__t)+"</div>";__p+="</div></li>"}),__p+="</ul></div>"),__p+="";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)is_facilitated&&!fab_hide_fabcopy&&(__p+='<div class="provider-feature fab text-sm">'+(null==(__t=translate("ktxtCompResults_BookOnSkyscanner"))?"":__t)+"</div>"),__p+="",meta_info.airline&&(__p+='<div class="provider-feature bg-icon with-airline text-sm">'+(null==(__t=meta_info.airline)?"":__t)+"</div>"),__p+="",meta_info.bookings&&(__p+='<div class="provider-feature bg-icon num-bookings text-sm">'+(null==(__t=meta_info.bookings)?"":__t)+"</div>"),__p+="",meta_info.protection&&(__p+='<div class="provider-feature bg-icon protection_class text-sm '+(null==(__t="npt"===meta_info.protection?"no-protection":"has-protection")?"":__t)+'">',"npt"===meta_info.protection?__p+=""+(null==(__t=translate("ktxt_Provider_TransfersNotProtected"))?"":__t):"pst"===meta_info.protection&&(__p+=" "+(null==(__t=translate("ktxt_Provider_TransfersProtected"))?"":__t)),__p+="</div>"),__p+="",installments_data&&(__p+='<div class="provider-feature bg-icon text-sm '+(null==(__t=installments_data.class_name)?"":__t)+'">'+(null==(__t=installments_data.text)?"":__t)+"</div>"),__p+="",jp_customer_support&&(__p+='<div class="provider-feature bg-icon text-sm '+(null==(__t=jp_customer_support.class_name)?"":__t)+'">'+(null==(__t=jp_customer_support.text)?"":__t)+"</div>"),__p+="",is_mobile_site&&(__p+='<div class="provider-feature bg-icon text-sm mobile-site">'+(null==(__t=translate("ktxtCompResults_MobileSite"))?"":__t)+"</div>"),__p+="",partner_currency&&(__p+='<div class="provider-feature bg-icon text-sm currency">'+(null==(__t=partner_currency)?"":__t)+"</div>"),__p+="";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<h3 class="panel-header text-lg',full_leg_info&&(__p+=" full-leg-info-panel-header"),__p+='">'+(null==(__t=check_your_itinerary)?"":__t)+' <span class="helper text-sm">('+(null==(__t=all_times_are_local)?"":__t)+')</span></h3><section class="panel-content',full_leg_info&&(__p+=" clearfix"),__p+='">',(different_airports_origin||different_airports_destination)&&(__p+='<div class="airports-message"><span class="warning"></span>',different_airports_origin&&(__p+="<p>"+(null==(__t=different_airports_origin)?"":__t)+"</p>"),__p+="",different_airports_destination&&(__p+="<p>"+(null==(__t=different_airports_destination)?"":__t)+"</p>"),__p+="</div>"),__p+="",_.forEach(legs,function(t,e){__p+="";var n=t.stops.count>0?"red":"green";__p+="",spring_clean?(__p+='<div class="leg-heading"><h4 class="new-leg-title leg-'+(null==(__t=e)?"":__t)+" ",multi_dest&&(__p+="multi"),__p+='">'+(null==(__t=t.title)?"":__t)+'</h4><h6 class="text-base leg-date date-label">'+(null==(__t=t.departure_datetime)?"":__t)+'</h6></div><div class="itinerary-leg',less_affordance_spring_clean&&(__p+=" chevron-toggle"),multi_dest&&(__p+=" multi"),is_12hr_format&&(__p+=" long-date-format"),__p+='"><div class="leg-summary"><section data-id="'+(null==(__t=e)?"":__t)+'" class="card-main leg clearfix">'+(null==(__t=__webpack_require__(78)({leg:t,is_bp:!0,is_compact:compact_spring_clean||less_affordance_spring_clean}))?"":__t)+'</section><div class="show-btn '+(null==(__t=t.opened?"opened":"")?"":__t)+' " data-id="'+(null==(__t=e)?"":__t)+"\" data-hide-text='"+(null==(__t=translate("ktxt_BP_Itinerary_Hide"))?"":__t)+"' data-show-text='"+(null==(__t=translate("ktxt_BP_Itinerary_Details"))?"":__t)+"'>",__p+=less_affordance_spring_clean?'<span class="details-chevron"></span>':'<div class="modal-button-section">'+(null==(__t=__webpack_require__(55)({is_secondary:!0,is_selected:t.opened,text:""}))?"":__t)+'</div><div class="split-button-section">'+(null==(__t=__webpack_require__(55)({is_secondary:!0,text:translate("ktxt_BP_Itinerary_Details"),is_selected:t.opened}))?"":__t)+'</div><span class="modal-text">'+(null==(__t=translate("ktxt_BP_Itinerary_Details"))?"":__t)+"</span>",__p+="</div></div>"):full_leg_info?(__p+='<div class="full-leg-info"><div class="leg-header clearfix"><span class="leg-date">'+(null==(__t=t.date_full)?"":__t)+'</span><span class="icon-flight',__p+=multi_dest?" multi-dest":" leg-"+(null==(__t=e)?"":__t),__p+='"></span><span class="leg-places">'+(null==(__t=translate("ktxtBookingPanel_AirportFromTo",{departure_airport:t.departure_name,destination_airport:t.arrival_name}))?"":__t)+'</span></div><button class="leg-container clearfix" data-id="'+(null==(__t=e)?"":__t)+'"><div class="carrier clearfix"><div class="airline">',__p+=t.logo_data.image?'<img src="'+(null==(__t=logo_domain)?"":__t)+"/images/airlines/favicon/"+(null==(__t=t.logo_data.image.src)?"":__t)+'" alt="'+(null==(__t=t.logo_data.image.alt)?"":__t)+'" onerror="__imgErrRemove__(this)"><span>'+(null==(__t=t.logo_data.name)?"":__t)+"</span>":'<span class="no-logo-airline"></span><span>'+(null==(__t=t.logo_data.name)?"":__t)+"</span>",__p+='</div></div><section class="card-main leg clearfix">'+(null==(__t=__webpack_require__(78)(_.extend(obj,{leg:t,leg_index:e})))?"":__t)+'<div class="icon-container"><span class="icon-chevron"></span></div>',_.forEach(t.stops.places,function(t){__p+="",t.change_airport&&(__p+='<div class="change-station">'+(null==(__t=t.message)?"":__t)+"</div>"),__p+=""}),__p+='<div class="icon-container-mobile"><span class="icon-chevron"></span></div></section></button>'):collapsible||multi_dest?(__p+='<div class="itinerary-leg ',multi_dest&&(__p+="multi"),__p+=' "><a data-id="'+(null==(__t=e)?"":__t)+'" class="leg-'+(null==(__t=e)?"":__t)+" leghead clearfix ",t.opened&&(__p+="opened"),__p+='"><div class="leg">',__p+=multi_dest?"<span>"+(null==(__t=e+1)?"":__t)+"</span>":'<span class="icon"></span>',__p+='</div><section class="details clearfix"><div class="date">',__p+=multi_dest?""+(null==(__t=t.departure_datetime)?"":__t):'<span class="date-label">'+(null==(__t=t.title)?"":__t)+'</span><span class="date-separator"> - </span><span class="date-format">'+(null==(__t=t.departure_datetime)?"":__t)+"</span>",__p+='</div><div class="city ',t.departure_warning&&(__p+="highlight"),__p+='">'+(null==(__t=t.departure_alt_id)?"":__t)+'</div><ul class="stop-line">',_.times(t.stops.count,function(){__p+='<li class="stop-dot"></li>'}),__p+='<li class="stop-line"></li></ul><div class="city ',t.arrival_warning&&(__p+="highlight"),__p+='">'+(null==(__t=t.arrival_alt_id)?"":__t)+'</div><div class="direct stops-'+(null==(__t=n)?"":__t)+'">'+(null==(__t=t.stops.label)?"":__t)+"</div>",t.change_airport&&(__p+='<span class="warning">'+(null==(__t=change_airport_label)?"":__t)+"</span>"),__p+='</section><span class="arrow" aria-hidden="true"></span></a>'):(__p+='<div class="itinerary-leg ',multi_dest&&(__p+="multi"),__p+=' "><h4><span class="leg-'+(null==(__t=e)?"":__t)+' leg-bound-icon" aria-hidden="true"></span><span class="date-label">'+(null==(__t=t.title)?"":__t)+'</span><span class="date-separator"> - </span><span class="date-format">'+(null==(__t=t.departure_datetime)?"":__t)+"</span></h4>"),__p+='<div data-id="'+(null==(__t=e)?"":__t)+'" class="expanded-details leg-details leg-'+(null==(__t=e)?"":__t)+" ",collapsible&&(__p+="collapsible"),__p+=" ",(collapsible||multi_dest||full_leg_info)&&!t.opened&&(__p+="hidden"),__p+='">',spring_clean?__p+=""+(null==(__t=__webpack_require__(189)({leg:t,leg_index:e}))?"":__t):(__p+="<table><tbody>",_.forEach(t.segments,function(t){__p+="","flight"===t.type?(__p+='<tr class="airline-minimal"><td colspan="5">'+(null==(__t=t.carrier_name)?"":__t)+" "+(null==(__t=t.flight_number)?"":__t)+" ",t.operated_by&&(__p+=" | "+(null==(__t=t.operated_by)?"":__t)),__p+='</td></tr><tr class="airline"><td rowspan="3"><div class="airline-name">'+(null==(__t=t.carrier_name)?"":__t)+'</div><div class="airline-number">'+(null==(__t=t.flight_number)?"":__t)+'</div></td><td colspan="4" class="operated-by ',t.operated_by||(__p+="empty"),__p+='">',t.operated_by&&(__p+=null==(__t=t.operated_by)?"":__t),__p+='</td></tr><tr class="departure"><td class="times fss-bold">'+(null==(__t=t.departure_time)?"":__t),t.origin_offset&&(__p+='<span data-leg="'+(null==(__t=e)?"":__t)+'" data-segment="'+(null==(__t=t.index)?"":__t)+'" class="destination-day-offset">&nbsp;('+(null==(__t=t.origin_offset)?"":__t)+")</span>"),__p+='</td><td class="route">'+(null==(__t=t.origin_place||"&nbsp;")?"":__t)+'</td><td class="leg-icon" aria-hidden="true"></td><td rowspan="2" class="duration">'+(null==(__t=t.flight_duration)?"":__t)+'</td></tr><tr class="destination"><td class="times">'+(null==(__t=t.arrival_time||"&nbsp;")?"":__t),t.destination_offset&&(__p+='<span data-leg="'+(null==(__t=e)?"":__t)+'" data-segment="'+(null==(__t=t.index)?"":__t)+'" class="destination-day-offset">&nbsp;('+(null==(__t=t.destination_offset)?"":__t)+")</span>"),__p+='</td><td class="route">'+(null==(__t=t.destination_place)?"":__t)+'</td><td class="leg-icon" aria-hidden="true"></td></tr><tr class="duration-minimal"><td>&nbsp;</td><td colspan="4" class="times fss-bold">'+(null==(__t=t.flight_duration)?"":__t)+"</td></tr>"):"connection"===t.type&&(__p+='<tr class="connection"><td>&nbsp;</td><td>&nbsp;</td><td class="connect"><span class="connect-info">'+(null==(__t=t.connection_type)?"":__t)+"</span>",t.is_long_wait&&(__p+='<span class="fss-bold">'+(null==(__t=long_wait)?"":__t)+"</span>"),__p+='</td><td class="leg-icon" aria-hidden="true"></td><td class="connection-time ',t.is_long_wait&&(__p+="fss-bold"),__p+='">'+(null==(__t=t.duration)?"":__t)+'</td></tr><tr class="connection-minimal"><td colspan="5">'+(null==(__t=t.connection_type)?"":__t)+" | ",t.is_long_wait&&(__p+='<span class="fss-bold">'+(null==(__t=long_wait)?"":__t)+"</span> | "),__p+='<span class="fss-bold">'+(null==(__t=t.duration)?"":__t)+"</span></td></tr>"),__p+=""}),__p+="",t.arrival_time&&t.duration&&(__p+='<tr class="arrival-info"><td colspan="5"><span class="arrival">'+(null==(__t=t.arrival_time)?"":__t)+'</span><span class="total-duration">'+(null==(__t=t.duration)?"":__t)+"</span></td></tr>"),__p+="</tbody></table>"),__p+="</div></div>"}),__p+="</section>";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)_.forEach(leg.segments,function(t){__p+="","flight"===t.type?(__p+='<div class="segment-airline segment-row">',t.logo_data&&(__p+='<img class="small-logo" src="'+(null==(__t=leg.logo_domain)?"":__t)+"/images/airlines/favicon/"+(null==(__t=t.logo_data.src)?"":__t)+'" alt="'+(null==(__t=t.logo_data.alt)?"":__t)+'" onerror="__imgErrRemove__(this)">'),__p+='<span class="operated-by text-sm">'+(null==(__t=t.carrier_name)?"":__t)+" "+(null==(__t=t.flight_number)?"":__t)+" ",t.operated_by&&(__p+=" | "+(null==(__t=t.operated_by)?"":__t)),__p+='</span></div><div class="segment-row flight-row"><div class="',t.is_long_wait&&(__p+="fss-bold"),__p+=' col duration text-sm modal-duration">'+(null==(__t=t.flight_duration)?"":__t)+'</div><div class="segment-details"><div class="departure segment-row"><div class="stop-line-vert depart-line col"></div><div class="times fss-bold col">'+(null==(__t=t.departure_time)?"":__t),t.origin_offset&&(__p+='<span data-leg="'+(null==(__t=leg_index)?"":__t)+'" data-segment="'+(null==(__t=t.index)?"":__t)+'" class="destination-day-offset">&nbsp;('+(null==(__t=t.origin_offset)?"":__t)+")</span>"),__p+='</div><div class="route col">'+(null==(__t=t.origin_place||"&nbsp;")?"":__t)+'</div></div><div class="destination segment-row"><div class="stop-line-vert arrival-line col"></div><div class="times col">'+(null==(__t=t.arrival_time||"&nbsp;")?"":__t),t.destination_offset&&(__p+='<span data-leg="'+(null==(__t=leg_index)?"":__t)+'" data-segment="'+(null==(__t=t.index)?"":__t)+'" class="destination-day-offset">&nbsp;('+(null==(__t=t.destination_offset)?"":__t)+")</span>"),__p+='</div><div class="route col">'+(null==(__t=t.destination_place)?"":__t)+'</div></div><div class="segment-row split-duration"><div class="col"></div><div class="duration text-sm col">'+(null==(__t=t.flight_duration)?"":__t)+"</div></div></div></div>\t"):"connection"===t.type&&(__p+='<div class="segment-row connect-row"><div class="',t.is_long_wait&&(__p+="fss-bold"),__p+=' col duration text-sm modal-duration">'+(null==(__t=t.duration)?"":__t)+'</div><div class="segment-details col"><div class="segment-row"><div class="col first-col"></div><div class="col connect"><div><span class="connect-info">'+(null==(__t=t.connection_type)?"":__t)+"</span>",t.is_long_wait&&(__p+='<span class="fss-bold">'+(null==(__t=translate("ktxtMultihop_ResultsView_LongWait"))?"":__t)+"</span>"),__p+='</div><div class="',t.is_long_wait&&(__p+="fss-bold"),__p+=' split-duration duration text-sm">'+(null==(__t=t.duration)?"":__t)+"</div></div></div></div></div>"),__p+=""}),__p+="",leg.arrival_time&&leg.duration&&(__p+='<div class="arrival-info text-sm"><div class="arrival">'+(null==(__t=translate("ktxtBookingPanel_Arrives",{tag1:'<span class="fss-bold">',tag2:"</span>",date:"<span>"+leg.arrival_time+"</span>"}))?"":__t)+'</div><div class="total-duration">'+(null==(__t=translate("ktxtBookingPanel_Duration",{tag1:'<span class="fss-bold">',tag2:"</span>",time:"<span>"+leg.duration+"</span>"}))?"":__t)+"</div></div>");return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<section class="fss-mobile-details',show_header||(__p+=" no-header"),__p+='">',show_header&&(__p+=""+(null==(__t=__webpack_require__(191)({title:translate(spring_clean?"ktxt_BP_FlightDetails":"ktxtSplitBookingPanel_Details"),hide_close:!1}))?"":__t)),__p+='<section class="fss-panel-content">',obj.show_plan_trip=!0,__p+=""+(null==(__t=__webpack_require__(176)(obj))?"":__t)+"</section></section>";return __p}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<header class="fss-panel-header"><button class="header-button header-left action-back" data-close-method="back_arrow"><span class="header-icon panel-back-icon"></span></button><div class="header-title"><h3>'+(null==(__t=title)?"":__t)+"</h3></div>",hide_close||(__p+='<button class="header-button header-right action-close" data-close-method="dismiss"><span class="header-icon panel-close-icon"></span></button>'),__p+="</header>";return __p}},function(t,e,n){var i,r,s,o,a,l,u,c,p,d=function(t,e){function n(){this.constructor=t}for(var i in e)h.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},h={}.hasOwnProperty;o=n(71),i=n(171),r=n(35),s=n(172),p=n(190),a=n(193),l=n(10),c=n(185),u=n(179),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.mixins=[s,r],e.prototype.initMainView=function(){var t;if(this._scroll_msg_hidden=!0,this._scroll_msg_freeze=!1,this.initPanel(),this.addPage(p({show_header:!l.isOn("is_app_bot"),spring_clean:this.refreshedLayout,compact_spring_clean:l.isOn("compact_spring_clean")}),!0),l.isOn("combined_bp")&&(this.addPage(a({hide_close:l.isOn("is_app_bot")})),t=this.refreshedLayout?u:c,this.multiTicket=new o({el:this.$(".fss-bp-ticket-multi"),template:t})),this.refreshedLayout)return this.$el.addClass("bp-refreshed fss-split-bp")},e.prototype.updatePosition=function(){},e.prototype.goTo=function(t){return"details"===t&&2===this.panel_current_page?this.prevPage():"booking"===t&&1===this.panel_current_page?this.nextPage():void 0},e.prototype.show=function(){return this.overlay.show(),this.showPanel()},e.prototype.hide=function(){return this.hideScrollMsg(!0),this._scroll_msg_freeze=!0,this.overlay.hide(this.$el.attr("data-overlay")),this.hidePanel(),this.removeContent(),this.onlyShowSections("loading-message"),setTimeout(function(t){return function(){return t._scroll_msg_freeze=!1}}(this),100)},e.prototype.hideScrollMsg=function(t){var e;if(null==t&&(t=!1),!this._scroll_msg_freeze&&!this._scroll_msg_hidden)return this._scroll_msg_hidden=!0,e=this.$(".fss-bp-scroll-to-price").removeClass("show"),setTimeout(function(){return e.addClass("hidden")},t?0:200)},e.prototype.showScrollMsg=function(){var t;if(!this._scroll_msg_freeze&&this._scroll_msg_hidden)return this._scroll_msg_hidden=!1,t=this.$(".fss-bp-scroll-to-price").removeClass("hidden"),_.defer(function(){return t.addClass("show")})},e.prototype.renderPqsForm=function(t,e,n){return this.$el.append(this.getPqsFormElement(n))},e.prototype.onClickNextPage=function(t){return t.preventDefault(),this.controller.onOpenMultiBookingPanel($(t.currentTarget).attr("data-agent-id"))},e.prototype.reset=function(){return this.goTo("details")},e}(i)},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<section class="fss-mobile-booking">'+(null==(__t=__webpack_require__(191)({title:translate("ktxtSplitBookingPanel_Booking"),hide_close:hide_close}))?"":__t)+'<div class="fss-popup-section fss-bp-content hidden split-panel-content"><div class="fss-bp-ticket fss-bp-section fss-bp-ticket-multi"></div></div></section>';return __p}},function(t,e,n){var i,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;r=n(115).default,i=n(112)("booking"),t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.set("itineraries",new i)}return s(e,t),e.prototype.defaults={clicked_select_buttons:{},opened_legs:{},read_before_info_on_display:!1,read_before_info_modified:!1,transfer_info_on_display:!1,transfer_info_modified:!1,highlight_airline:!1,itineraries:null,current_visible_page:null,pqs_still_searching:null,exit_to_skippy:null,exit_type:null,selected_pricing_option_agent:null},e.prototype.shutdown=function(){return this.get("itineraries").shutdown(),this.set("clicked_select_buttons",{}),this.set("opened_legs",{}),this.set("read_before_info_on_display",!1),this.set("read_before_info_modified",!1),this.set("transfer_info_on_display",!1),this.set("transfer_info_modified",!1),this.set("highlight_airline",!1),this.set("current_visible_page",null),this.set("pqs_still_searching",null),this.set("exit_to_skippy",null),this.set("exit_type",null),this.set("selected_pricing_option_agent",null)},e.prototype.build=function(t,e){return this.get("itineraries").build(t,e),this},e}(r)},function(t,e,n){var i,r,s,o,a=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;i=n(14),r=n(44),s=n(46),o=n(47),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.onLiveUpdateMX=function(){return s.trackMixpanel("Flight Booking Panel Live Update Completed",o.getDetailsLiveUpdate(this.model.get("itineraries")))},e.prototype.onResultSelectedMX=function(t,e,n,i,a){var l,u,c,p,d,h;return l=null!==e?t.get("items").at(e):null,u=this.model.get("itineraries"),n&&l?(p="Flight Day View Multi-part Booking Partner Selected",d=o.getMultiPartResultSelected(this.itineraries.get("itineraries"),this.itineraries.get("pagination"),this.filters,u.getMain().id,t,"Multi-part Booking Panel",e)):(p="Flight Day View Partner Selected",d=o.getResultSelected(this.itineraries.get("itineraries"),this.itineraries.get("pagination"),this.filters,u.getMain().id,t,"Booking Panel",e)),_.extend(d,{"Quote Status":(l||t).getUpdateStatus(),"Itinerary Position":(h=r.getSelectedItineraryRef())?h.get("position")+1:null}),c=d["Partner Meta Data"],(c||i)&&(d["Partner Meta Data"]=_.compact(_.flatten([c,i]))),"Flight Day View Partner Selected"===p&&(d["Airline Position"]=a?a.get("position")+1:null,d["Airline Price"]=a?a.getTotalPrice():null),s.trackMixpanel(p,d)},e.prototype.onRedirectStartedMX=function(t,e){return s.trackMixpanel("Flight Redirect Started",o.getRedirectStarted("Booking Panel",e,t))},e.prototype.onCrossSellSelectedMX=function(t){var e;return e=function(){switch(t){case"carhire":return"car hire";case"hotels":return"hotels";default:return"unknown"}}(),s.trackMixpanel("Flight Cross Sell Selected",{Vertical:e,Position:"none",Source:"booking panel"})},e.prototype.onPartnerListExpandedMX=function(){return s.trackMixpanel("Flight Booking Panel Partner List Expanded")},e.prototype.onMultiBookingPanelLoadedMX=function(t,e,n,i){return s.trackMixpanel("Flight Booking Panel Multi-part Booking Panel Loaded",o.getMultiPartDetailsLoaded(t,e,n,i))},e.prototype.onBookingPanelClosedMX=function(t){return s.trackMixpanel("Flight Booking Panel Closed",{"Method of Closure":function(){switch(t){case"dismiss":return"Dismiss";case"back_arrow":return"Back arrow";case"browser_back":return"Browser back button";case"fare_unavailable":return"Fare unavailable";case"outside":return"Outside"}}()})},e.prototype.onClosePanelGA=function(t){return s.trackGA({action:"booking-panel-close",trackOnce:!1})},e.prototype.onImportantInfoGA=function(t){return s.trackGA({action:"booking-information",label:t?"open":"closed",trackOnce:!0})},e.prototype.onWhoSellsInfoGA=function(t){return s.trackGA({action:"who-sells-information",label:t?"open":"closed",trackOnce:!0})},e.prototype.onBookWithLinkGA=function(t){return s.trackGA({action:"alternate-booking-provider",label:""+t,
trackOnce:!1})},e.prototype.onAirlineFeesGA=function(){return s.trackGA({action:"baggage-fees-click",trackOnce:!1})},e.prototype.onCrossSellSelectedGA=function(t,e){return s.trackGA({category:"booking-panel",action:t,label:e,trackOnce:!1})},e.prototype.onDetailsLoadedGA=function(t){return _.forEach(o.getDetailsLabels(t),function(t){return s.trackGA({action:"booking-panel-open",label:t,trackOnce:!1})})},e.prototype.onDetailsLoadedMX=function(t,e,n){return s.trackMixpanel("Flight Booking Panel Loaded",o.getDetailsLoaded(t,e,n))},e}(i)},function(t,e,n){var i,r,s,o,a,l,u,c,p,d,h,f,g,m,y,v,b,k;i=n(5),o=n(7),k=n(12),b=1,a=0,l=null,d=!1,s=function(){return b=1,a=0,l=null,d=!1,f.session_id=null,g.session_id=null},r=new i,u=function(){return r},m=function(t,e){return r.channel(t).publish(e)},h=function(t){return d=_.all(t.agents,function(t){return"current"===t.update_status})},p=function(){switch(!1){case!(b<5):return 1e3;case!(b<10):return 1500;case!(b<15):return 2e3;case!(b<20):return 2500;default:return 3e3}},f=function(t,e,n,i){var r;if(f.session_id===e)return t&&(t.etag&&(l=t.etag),r=h(t),m("data",{response:t,complete:r,request_number:b})),d||r||k.setTimeout(function(){return v(e,n,i)},p()),b++,a=0},g=function(t,e,n,i){if(g.session_id===e)return 1===b?m("fatal-error",t):3===a++?m("fatal-error",t):(m("error",t),k.setTimeout(function(){return v(e,n,i)},1e3))},v=function(t,e,n){var i,r,s;return s=1===b?["getDetails",[e,JSON.stringify({itinerary_id:n})]]:["pollForDetails",[e,n,l]],r=s[0],i=s[1],o[r].apply(o,i).done(function(i){return f(i.data,t,e,n)}).fail(function(i){return g(i,t,e,n)}).always(function(t){return m("ps-response",{status:t.status,type:"details"})})},c=function(t,e){var n;return b=1,a=0,l=null,d=!1,n=(new Date).getTime(),f.session_id=n,g.session_id=n,v(n,t,e)},y=function(t,e){var n;return a=0,n=(new Date).getTime(),f.session_id=n,g.session_id=n,v(n,t,e)},t.exports={getDetails:c,refreshDetails:y,clear:s,getBus:u}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(26),s=i(r),o=n(10);e.default=function(t){var e=s.default,n=(0,o.getVariant)("jp_customer_support_partners");if(!(0,o.isOn)("jp_customer_support")||!n)return null;var i=(0,o.getVariant)("jp_customer_support");return"b"===i&&_.contains(n,t)?{metadata:"Has JP Support Badge",text:e("ktxt_results_has_jp_customer_support"),class_name:"jp-customer-support"}:"c"!==i||_.contains(n,t)?null:{metadata:"Has JP No-support Badge",text:e("ktxt_results_no_jp_customer_support"),class_name:"no-jp-customer-support"}}},function(t,e,n){var i,r,s,o,a,l;s=n(69),i=n(48),r=n(199),a=n(42),l=n(120),o=n(119),t.exports=function(t){var e,n,u,c,_,p;return u=s(t),e=i(t),n=r(t),_=a(t),p=l(t),c=o(t),function(t){return u.set(t.carriers),e.set(t.agents),n.set(t.alliances),_.set(t.places),p.set(t.segments),c.set(t.legs)}}},function(t,e,n){var i,r,s,o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;r=n(43),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.getTotal=function(){return _.size(this.data)},e}(r),s={},t.exports=function(t){return s[t]||(s[t]=new i)}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj){var duration_label="";duration_label=translate(is_multidestination?"ktxt_filters_total_duration":"ktxtDayViewResults_JourneyDuration");var price_label="";price_label=translate(is_adult_passenger_search?"ktxtDayViewResults_PricePerAdult":"ktxtDayViewResults_PricePerPerson"),__p+='<div id="content-main" class="',is_multidestination&&(__p+="multi-city"),__p+='"><section id="day-flexible-days-section" class="fss-flexible-days hidden"></section><section id="day-section" class="day-content hidden state-loading state-no-results',is_fqs_tab_sorting&&(__p+=" fqs-switcher"),__p+='"><header class="clearfix day-header',show_month_view&&(__p+=" show-month-view-btn"),__p+='"></header><div class="day-cols clearfix"><div id="nav-header" class="day-nav-header clearfix"><div class="day-btns-header clearfix"><div id="day-header-btns" class="day-btns-primary"><div class="day-btns-primary-wrapper clearfix"><div class="day-btns-filter"><div class="day-btns-filter-wrapper"><button class="day-header-btn fss-secondary" title="'+(null==(__t=translate("ktxtDayView_Filter"))?"":__t)+'"><span class="day-header-btn-label">'+(null==(__t=translate("ktxtDayView_Filter"))?"":__t)+"</span></button></div></div>",is_fqs_tab_sorting||(__p+='<div class="day-btns-sort"><div class="day-btns-sort-wrapper"><button class="day-header-btn fss-secondary" title="'+(null==(__t=translate("ktxtDayView_Sort"))?"":__t)+'"><span class="day-header-btn-label">'+(null==(__t=translate("ktxtDayView_Sort"))?"":__t)+"</span></button></div></div>"),__p+="</div></div>",is_multidestination||(__p+='<button id="price-alert-button1" class="fss-alerts-button ',__p+=is_fqs_tab_sorting?"fss-alerts-button-fqs":"fss-alerts-button-mini",__p+=' fss-secondary" title="'+(null==(__t=translate("ktxtPriceAlerts_MainLinkText_Titleize"))?"":__t)+'"><span class="price-alerts-icon" aria-hidden="true"></span>',__p+=is_fqs_tab_sorting?'<span class="price-alerts-message">'+(null==(__t=translate("ktxt_PriceAlerts_ShortText"))?"":__t)+"</span>":'<span class="price-alerts-message">'+(null==(__t=translate("ktxtPriceAlerts_MainLinkText_Titleize"))?"":__t)+"</span>",__p+="</button>"),__p+='</div><div id="cols-header" class="day-cols-header"><div class="day-list-info info-top clearfix">',is_fqs_tab_sorting||(__p+='<div class="day-list-sorting"><label for="sort-select">'+(null==(__t=translate("ktxtDayView_Header_SortBy"))?"":__t)+'</label>&nbsp;<select id="sort-select" disabled><option value="price">'+(null==(__t=price_label)?"":__t)+'</option><option value="duration">'+(null==(__t=translate("ktxtDayView_SortOption_TotalJourneyTime"))?"":__t)+"</option>",is_multidestination||(__p+='<option value="outbound_departure_time">'+(null==(__t=translate("ktxtDayView_SortOption_OutboundDepartureTime"))?"":__t)+"</option>","return"===trip_type&&(__p+='<option value="return_departure_time">'+(null==(__t=translate("ktxtDayView_SortOption_ReturnDepartureTime"))?"":__t)+"</option>"),__p+=""),__p+='<option value="airlines">'+(null==(__t=translate("ktxtDayView_SortOption_Airline"))?"":__t)+'</option><option value="stops">'+(null==(__t=translate("ktxtDayView_SortOption_Stops"))?"":__t)+"</option></select></div>"),__p+='<div class="day-list-progress"></div><div class="day-list-count">&nbsp;</div></div><div class ="save-filter-info hidden"><div class="save-filter-applied-icon"></div><div class="save-filter-applied-msg">'+(null==(__t=translate("ktxtDayView_FiltersAppliedMsg"))?"":__t)+"</div></div></div>",is_fqs_tab_sorting&&(__p+='<div class="indirects-info hidden"><div class="indirects-info-exclamation" aria-label="'+(null==(__t=translate("ktxtInformation"))?"":__t)+'"></div><div class="indirects-info-msg"></div><div class="indirects-info-close" aria-label="'+(null==(__t=translate("ktxt_close"))?"":__t)+'"></div></div>'),__p+='<div id="fqs-info" class="hidden"><section id="fqs-tabs" class="fqs-header"><table class="fqs-opts"><tr><td class="fqs-tabs"></td><td class="fqs-more"></td></tr></table></section></div></div><div class="day-filters">',is_multidestination||(__p+='<div class="price-alerts"><button id="price-alert-button2" class="fss-alerts-button fss-secondary" title="'+(null==(__t=translate("ktxtPriceAlerts_MainLinkText_Titleize"))?"":__t)+'"><span class="price-alerts-icon" aria-hidden="true"></span><span class="price-alerts-message">'+(null==(__t=translate("ktxtPriceAlerts_MainLinkText_Titleize"))?"":__t)+"</span></button></div>"),__p+='<div id="filter-controls" class="fss-flight-controls inline"><div class="flight-controls-cover"><div class="hot-spinner medium"></div><div>'+(null==(__t=translate("ktxtLoading"))?"":__t)+'</div></div><div class="flight-controls-content"><dl data-id="stops" class="mobile-filters-stops"><dt><a href="#" class="clearfix"><span>'+(null==(__t=translate("ktxtDayView_Filters_Stops"))?"":__t)+'</span><span class="chevron" aria-hidden="true"></span></a></dt><dd class="filter-opts"><ol><li><label class="disabled clearfix two-line"><span class="label-text">'+(null==(__t=translate("ktxtDayViewResults_NonStop"))?"":__t)+'</span><input type="checkbox" disabled="disabled"><span class="filter-sub">'+(null==(__t=translate("ktxtDayViewResultsNoneShort"))?"":__t)+'</span></label></li><li><label class="disabled clearfix two-line"><span class="label-text">'+(null==(__t=translate("ktxtDayViewResults_OneStop"))?"":__t)+'</span><input type="checkbox" disabled="disabled"><span class="filter-sub">'+(null==(__t=translate("ktxtDayViewResultsNoneShort"))?"":__t)+'</span></label></li><li><label class="disabled clearfix two-line"><span class="label-text">'+(null==(__t=translate("ktxtDayViewResults_TwoPlusStops"))?"":__t)+'</span><input type="checkbox" disabled="disabled"><span class="filter-sub">'+(null==(__t=translate("ktxtDayViewResultsNoneShort"))?"":__t)+'</span></label></li></ol></dd></dl><dl data-id="departure_times" class="mobile-filters-departure-times hidden"><dt><a href="#" class="clearfix"><span>'+(null==(__t=translate("ktxtDayViewResults_DepartureTimes"))?"":__t)+'</span><span class="chevron" aria-hidden="true"></span></a></dt><dd class="filter-opts slider-opts"><h4></h4><div class="time-range"></div><div class="departure-times-slider"></div></dd><dd class="filter-opts slider-opts hidden"><h4></h4><div class="time-range"></div><div class="departure-times-slider"></div></dd><dd class="filter-opts slider-opts hidden"><h4></h4><div class="time-range"></div><div class="departure-times-slider"></div></dd><dd class="filter-opts slider-opts hidden"><h4></h4><div class="time-range"></div><div class="departure-times-slider"></div></dd><dd class="filter-opts slider-opts hidden"><h4></h4><div class="time-range"></div><div class="departure-times-slider"></div></dd><dd class="filter-opts slider-opts hidden"><h4></h4><div class="time-range"></div><div class="departure-times-slider"></div></dd></dl><dl data-id="duration" class="mobile-filters-journey-duration hidden"><dt><a href="#" class="clearfix"><span>'+(null==(__t=duration_label)?"":__t)+'</span><span class="chevron" aria-hidden="true"></span></a></dt><dd class="filter-opts slider-opts">',"multi-destination"===trip_type&&(__p+="<h4>"+(null==(__t=translate("ktxt_filters_total_duration_title"))?"":__t)+"</h4>"),__p+='<div class="time-range"></div><div class="duration-slider"></div></dd></dl><dl data-id="airlines" class="mobile-filters-airlines hidden"></dl><dl data-id="airports" class="mobile-filters-airports hidden"></dl></div></div></div><div class="day-main-content"><div class="day-list-info pagination-top hidden clearfix"></div><div class ="seo-airline-filter-info hidden"><div class ="filter-applied-info hidden"><div class="filter-applied-icon"></div><div class="filter-applied-msg">'+(null==(__t=translate("ktxtSEOAirlineFiltered_Succeed"))?"":__t)+'</div></div><div class ="filter-not-applied-info hidden"><div class="filter-not-applied-icon"></div><div class="filter-not-applied-msg"> '+(null==(__t=translate("ktxtSEOAirlineFiltered_Failed"))?"":__t)+'</div></div><div class="filter-info-close"></div></div>',is_fqs_tab_sorting||(__p+='<div class="indirects-info hidden"><div class="indirects-info-exclamation" aria-label="'+(null==(__t=translate("ktxtInformation"))?"":__t)+'"></div><div class="indirects-info-msg"></div><div class="indirects-info-close" aria-label="'+(null==(__t=translate("ktxt_close"))?"":__t)+'"></div></div>'),__p+='<div class="day-searching"><div class="hot-spinner medium"></div><div class="day-searching-message">'+(null==(__t=translate("ktxt_results_searching"))?"":__t)+'</div><ul></ul></div><ul class="day-list clearfix hidden"></ul><div class="fss-no-results hidden"></div><div class="day-list-info info-bottom clearfix hidden"></div></div></div></section><section id="day-searching" class="day-searching"><div class="hot-spinner medium"></div><div class="day-searching-message">'+(null==(__t=translate("ktxt_results_searching"))?"":__t)+'</div></section></div><div id="mobile-sort-controls" data-overlay="mobile-sort" class="fss-flight-controls fss-mobile-panel mobile-controls hidden"><header class="flight-controls-header split-panel-header"><nav class="clearfix"><h3>'+(null==(__t=translate("ktxtDayView_Header_SortBy"))?"":__t)+'</h3><button class="apply fss-secondary">'+(null==(__t=translate("ktxtDayView_Filters_Done"))?"":__t)+'</button></nav></header><div class="flight-controls-content split-panel-content"><ol>',is_fqs_tab_sorting&&(__p+='<li><label class="clearfix"><span class="label-text">'+(null==(__t=translate("ktxt_fqs_BestValue"))?"":__t)+'</span><input name="mobile-sort" type="radio" value="fqs"></label></li>'),__p+='<li><label class="clearfix"><span class="label-text">'+(null==(__t=price_label)?"":__t)+'</span><input name="mobile-sort" type="radio" value="price" checked="checked"></label></li><li><label class="clearfix"><span class="label-text">'+(null==(__t=translate("ktxtDayView_SortOption_TotalJourneyTime"))?"":__t)+'</span><input name="mobile-sort" type="radio" value="duration"></label></li>',is_multidestination||(__p+='<li><label class="clearfix"><span class="label-text">'+(null==(__t=translate("ktxtDayView_SortOption_OutboundDepartureTime"))?"":__t)+'</span><input name="mobile-sort" type="radio" value="outbound_departure_time"></label></li>',"return"===trip_type&&(__p+='<li><label class="clearfix"><span class="label-text">'+(null==(__t=translate("ktxtDayView_SortOption_ReturnDepartureTime"))?"":__t)+'</span><input name="mobile-sort" type="radio" value="return_departure_time"></label></li>'),__p+=""),__p+='<li><label class="clearfix"><span class="label-text">'+(null==(__t=translate("ktxtDayView_SortOption_Airline"))?"":__t)+'</span><input name="mobile-sort" type="radio" value="airlines"></label></li><li><label class="clearfix"><span class="label-text">'+(null==(__t=translate("ktxtDayView_SortOption_Stops"))?"":__t)+'</span><input name="mobile-sort" type="radio" value="stops"></label></li></ol></div></div><div id="mobile-filter-controls" data-overlay="mobile-filter" class="fss-flight-controls fss-mobile-panel mobile-controls hidden"><header class="flight-controls-header split-panel-header"><nav class="clearfix"><h3>'+(null==(__t=translate("ktxtDayView_Tabs_Filters"))?"":__t)+'</h3><button class="apply fss-secondary">'+(null==(__t=translate("ktxtDayView_Filters_Done"))?"":__t)+'</button></nav><div class="total-results clearfix"><span></span><button>'+(null==(__t=translate("ktxtDayView_Filters_ResetAllFilters"))?"":__t)+'</button></div></header><div class="flight-controls-content extended split-panel-content"><dl data-id="stops" class="mobile-filters-stops hidden"></dl><dl data-id="departure_times" class="mobile-filters-departure-times hidden"><dt><a href="#" class="clearfix"><span>'+(null==(__t=translate("ktxtDayViewResults_DepartureTimes"))?"":__t)+'</span><span class="chevron" aria-hidden="true"></span></a></dt><dd class="filter-opts slider-opts"><h4></h4><div class="time-range"></div><div class="departure-times-slider"></div></dd><dd class="filter-opts slider-opts hidden"><h4></h4><div class="time-range"></div><div class="departure-times-slider"></div></dd><dd class="filter-opts slider-opts hidden"><h4></h4><div class="time-range"></div><div class="departure-times-slider"></div></dd><dd class="filter-opts slider-opts hidden"><h4></h4><div class="time-range"></div><div class="departure-times-slider"></div></dd><dd class="filter-opts slider-opts hidden"><h4></h4><div class="time-range"></div><div class="departure-times-slider"></div></dd><dd class="filter-opts slider-opts hidden"><h4></h4><div class="time-range"></div><div class="departure-times-slider"></div></dd></dl><dl data-id="duration" class="mobile-filters-journey-duration hidden"><dt><a href="#" class="clearfix"><span>'+(null==(__t=duration_label)?"":__t)+'</span><span class="chevron" aria-hidden="true"></span></a></dt><dd class="filter-opts slider-opts">',is_multidestination&&(__p+="<h4>"+(null==(__t=translate("ktxt_filters_total_duration_title"))?"":__t)+"</h4>"),__p+='<div class="time-range"></div><div class="duration-slider"></div></dd></dl><dl data-id="airlines" class="mobile-filters-airlines hidden"></dl><dl data-id="airports" class="mobile-filters-airports hidden"></dl></div></div><div id="details-panel" data-overlay="details" class="fss-dayview fss-popup-container hidden fss-modal"></div><div id="details-mobile-panel" data-overlay="mobile-details" class="fss-bp fss-mobile-panel fss-dayview fss-split hidden fss-bp-single"></div><div id="upsell-panel" data-overlay="upsell" class="fss-dayview fss-popup-container hidden"><div class="fss-popup fss-upsell-panel"><button class="close-panel action-close" title="'+(null==(__t=translate("ktxt_close"))?"":__t)+'"></button><div class="fss-popup-section loading-message">'+(null==(__t=translate("ktxtLoading"))?"":__t)+'</div><div class="fss-airport-transfer fss-popup-section hidden"></div><div class="fss-cross-sell-panel fss-popup-section hidden"></div></div></div><section id="price-alerts-section" data-overlay="price-alert" class="fss-dayview fss-popup-container hidden"><div class="fss-popup fss-alerts-panel"></div></section><section id="session-expiry-panel" data-overlay="session-expiry" class="fss-dayview fss-expiry-container fss-popup-container hidden"><div class="fss-popup fss-session-expiry-panel"><div class="expiry-title">'+(null==(__t=translate("ktxtSessionExpiry_Title"))?"":__t)+'</div><div class="expiry-message">'+(null==(__t=translate("ktxtSessionExpiry_Message"))?"":__t)+"</div>"+(null==(__t=__webpack_require__(55)({extra_class:"refresh-button",is_secondary:!0,text:translate("ktxtSessionExpiry_RefreshButton")}))?"":__t)+'</div></section><section id="apd-popup-section" data-overlay="apd-popup" class="fss-dayview fss-popup-container hidden"><div class="fss-popup fss-apd-popup"></div></section><div id="css-content" class="hidden"></div><p class="prices-checked-msg">'+(null==(__t=translate("ktxtMetasearch_ExactDates_PriceMessage"))?"":__t)+'</p><p class="additional-fees',show_month_view&&(__p+=" show-month-view-btn"),__p+='"><b>'+(null==(__t=translate("ktxtFeeInfo_CheckingBags"))?"":__t)+"</b>&nbsp;<a target='_blank' title=\""+(null==(__t=translate("ktxtOpensInNewWindow"))?"":__t)+'" href="/airlinefees">'+(null==(__t=translate("ktxt_results_AdditionalBagFeesMayApply"))?"":__t)+'</a></p><aside id="fss-avg-price-toast" class="toast clearfix toast-hidden" data-overlay="avg-price-toast"><div class="toast-content"><div class="toast-text"><p>'+(null==(__t=translate("ktxtGroupPrice_Mobile_Long"))?"":__t)+"</p><p>"+(null==(__t=translate("ktxtGroupPriceModal_Infants"))?"":__t)+'</p></div><button class="close-button toast-dismiss" aria-hidden="true"></button><footer class="toast-controls"><div class="open-controls">'+(null==(__t=__webpack_require__(55)({extra_class:"toast-dismiss dismiss-trigger got-it",is_secondary:!0,text:translate("ktxtGroupPrice_Modal_Gotit")}))?"":__t)+(null==(__t=__webpack_require__(55)({is_link:!0,extra_class:"find-more",has_icon:!0,icon_type:"chevron-right",deeplink:{url:avg_price_help_link},text:translate("ktxtGroupPrice_Modal_More")}))?"":__t)+"</div></footer></div></aside>"}return __p}},function(t,e,n){var i,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=n(33),t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.render=function(t){return this.$el.replaceWith(this.getHtml(t)),this},e.prototype.removeSearching=function(){return $("#day-searching").remove()},e.prototype.showResults=function(){return $("#day-section").removeClass("hidden")},e.prototype.showError=function(){return $("#day-section").removeClass("hidden")},e}(i)},function(t,e,n){var i,r,s,o,a,l,u=function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;s=n(115).default,o=n(203),a=n(204),i=n(205),r=n(112)("results"),l=n(19)("itineraries"),t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.set("itineraries",new r),this.set("pagination",new o),this.set("pqsForm",new a),this.set("fqsTabs",new i),l.setStorage(this.get("itineraries"))}return u(e,t),e.prototype.defaults={itineraries:null,pagination:null,pqsForm:null,fqsTabs:null},e.prototype.collectBestPrices=function(){return this.get("itineraries").collectBestPrices()},e.prototype.shutdown=function(){return this.get("pagination").shutdown(),this.get("itineraries").shutdown()},e.prototype.build=function(t,e){return this.get("itineraries").build(t,e),this},e.prototype.resetPagination=function(){return this.get("pagination").set("page",1)},e.prototype.getSortedItineraries=function(){return this.get("itineraries").sort_modified&&this.get("itineraries").sort(),this.get("itineraries").models},e.prototype.getPaginatedItineraries=function(t){return this.get("pagination").getItineraries(t)},e.prototype.getBestItemForAgent=function(t){return this.get("itineraries").getBestItemForAgent(t)},e.prototype.getItineraryFromCid=function(t){return this.get("itineraries").get(t)},e.prototype.getTransferPickUp=function(t){var e;return(e=this.getItineraryFromCid(t))?e.getTransferPickUp():null},e}(s)},function(t,e,n){var i,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=n(115).default,t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.defaults={top:!1,page:1,per_page:10},e.prototype.shutdown=function(){return this.set("page",1),this.set("top",!1)},e.prototype.getItineraries=function(t){var e,n,i,r,s;return t.length?(this.get("page")>(s=Math.ceil(t.length/this.get("per_page")))&&this.set("page",s),n=this.get("page"),i=this.get("per_page"),e=(n-1)*i,r=e+i,t.slice(e,r)):(this.set("page",1),[])},e}(i)},function(t,e,n){var i,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=n(115).default,t.exports=function(t){function e(){this.shutdown()}return r(e,t),e.prototype.defaults={created_at:null,submitted_at:null,section:null,pricing_option:null,unique_airline_ids:null,max_stop_count:null,has_NPT:null,has_PST:null,is_multipart_booking:null,submitted:null,negative:{not_available:null,price_matching:null,unexpected_extras:null,hard_to_use:null,other:!0,feedback_text:null,is_feedback_focused:null}},e.prototype.shutdown=function(){return this.data=_.merge({},this.defaults)},e.prototype.getBookingAgent=function(){var t;return null!=(t=this.get("pricing_option"))?t.getAgentNames()[0]:void 0},e.prototype.hasNPT=function(){return this.get("has_NPT")},e.prototype.hasPST=function(){return this.get("has_PST")},e}(i)},function(t,e,n){var i,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=n(115).default,t.exports=function(t){function e(){this.shutdown()}return r(e,t),e.prototype.defaults={tab:null,option:null,offset:null,onboarding_shown:!1},e.prototype.shutdown=function(){return this.data=_.merge({},this.defaults)},e}(i)},function(t,e,n){var i,r,s,o,a,l,u,c,p,d,h,f,g,m,y,v,b=function(t,e){function n(){this.constructor=t}for(var i in e)k.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},k={}.hasOwnProperty,w=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};c=n(115).default,y=n(44),f=n(41),p=n(207),i=n(209),s=n(211),r=n(213),a=n(215),l=n(217),o=n(218),u=n(219),h=n(149),v=n(23),d=n(170).default,m=n(40),g=n(167),t.exports=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.set("stops",new p),this.set("airlines",new i),this.set("alliances",new s),this.set("airports",new r),this.set("departure_times",new a),this.set("duration",new l),this.set("change_airport",new o),this.set("mixed_airports",new u),this.resetInteractions(),this.setCollapsed()}return b(e,t),e.prototype.collapsed=function(){return v.isMultiDestination()?{stops:!1,departure_times:!1,duration:!0,airlines:!0,alliances:!1,airports:!0}:{stops:!1,departure_times:!1,duration:!1,airlines:!1,alliances:!1,airports:!1}}(),e.prototype.defaults={stops:null,departure_times:null,duration:null,airlines:null,alliances:null,airports:null,change_airport:null,mixed_airports:null},e.prototype.setCollapsed=function(){return _.forEach(this.collapsed,function(t,e){return this.set(e+"_collapsed",t)},this)},e.prototype.shutdown=function(){return this.setCollapsed(),_.forEach(this.defaults,function(t,e){return this.get(e).reset()},this)},e.prototype.resetUserChanges=function(){return _.forEach(this.defaults,function(t,e){return this.get(e).resetUserChanges()},this)},e.prototype.build=function(t){var e,n,i,r;return r=t.stats,e=t.alliances,this.get("stops").build(r.itineraries.stops,r.filter_hints,f.get("prefer_directs")),this.get("departure_times").length||this.get("departure_times").build(f.get("legs").length),this.get("airlines").build(r.carriers),this.get("alliances").build(e,r.carriers),this.get("airports").build(r.legs,r.itineraries.has_city_open_jaw||!1),this.get("duration").build(r.itineraries),this.get("change_airport").build(r.itineraries),this.get("mixed_airports").build(r.itineraries),(n=g.getSEOAirlineId(this.get("airlines")))&&g.isTestEnabled()&&"full"===y.getHasSEOAirlineInResults()&&this.applySEOAirline(this.get("airlines"),n),f.get("prefer_directs")&&m.removeSavedStopsFilter(),(i=m.loadSessionFilters())&&this.applySavedFilters(i),this},e.prototype.applySEOAirline=function(t,e){return t.forEach(function(t){var n,i;return t.set("check","multi"===(n=t.id)||n===e),t.set("highlight","multi"===(i=t.id)||i===e)})},e.prototype.applySavedFilters=function(t){return _.forEach(this.defaults,function(e,n){var i;if((null!=(i=this.get(n))?i.applyFilter:void 0)&&null!=t[n]&&(this.get(n).applyFilter(t[n]),"alliances"===n))return this.applySavedAlliancesData(t[n])},this)},e.prototype.applySavedAlliancesData=function(t){var e,n;return n=this.get("alliances"),e=this.get("airlines"),_.forEach(t,function(t){return function(i,r){return t.applyAlliancesFilterChange(e,n,r,"true")}}(this),this)},e.prototype.applyAlliancesFilterChange=function(t,e,n,i){var r,s;return s=e.getCheckedAlliancesCarriers(),r=e.getAllianceCarriers(n),_.keys(s).length>0?this.checkAndHighlightAirlines(t,s,r,i):t.resetUserChanges()},e.prototype.checkAndHighlightAirlines=function(t,e,n,i){return t.forEach(function(t){return t.set("check","multi"===t.id||t.id in e),t.set("highlight",i&&("multi"===t.id||t.id in n))})},e.prototype.getItineraries=function(t){var e,n,i,r,s,o,a,l,u;return u=this.get("stops"),s=this.get("departure_times"),e=this.get("airlines"),n=this.get("airports"),i=this.get("alliances"),o=this.get("duration"),r=this.get("change_airport"),l=this.get("mixed_airports"),a=[],u.isModified()&&a.push(this.isStopsQualified),s.isModified()&&a.push(this.isDepartureTimesQualified),e.isModified()&&a.push(this.isAirlinesQualified),n.isModified()&&a.push(this.isAirportsQualified),i.isModified()&&a.push(this.isAllianceQualified),o.isModified()&&a.push(this.isDurationQualified),r.isModified()&&a.push(this.isChangeAirportQualified),l.isModified()&&a.push(this.isMixedAirportsQualified),a.push(d),a.length?_.filter(t,function(t){return _.compose.apply(_,a).call(this,t)},this):t},e.prototype.isStopsQualified=function(t){var e,n,i,r,s;return!!t&&(i=this.get("stops"),e=i.get("direct"),n=i.get("one_stop"),s=i.get("two_plus_stops"),r=t.get("legs").getMaxNumberOfStops(),0===r&&e.isChecked()&&e.isEnabled()?t:1===r&&n.isChecked()&&n.isEnabled()?t:!!(r>1&&s.isChecked()&&s.isEnabled())&&t)},e.prototype.isAirlinesQualified=function(t){var e,n;return!!t&&(e=t.get("legs").getUniqueMarketingCarrierIds(),!(w.call(this.get("airlines").getChecked(),"multi")<0&&e.length>1)&&(n=this.get("airlines").getUnchecked(),!_.any(e,function(t){return w.call(n,t)>=0})&&t))},e.prototype.isAirportsQualified=function(t){var e,n,i,r,s,o,a,l,u;if(!t)return!1;for(n=this.get("airports"),l=t.get("legs").getUniquePlaces(),i=0,s=l.length;i<s;i++)for(a=l[i],u=n.models,r=0,o=u.length;r<o;r++)if(e=u[r],e.get("id")===a.id&&!e.isChecked())return!1;return t},e.prototype.isAllianceQualified=function(t){var e,n,i;return!!t&&(e=this.get("alliances"),n=e.getCheckedAlliancesCarriersIds(),i=t.get("legs").getUniqueMarketingCarrierIds(),_.intersection(n,i).length===i.length&&t)},e.prototype.isDepartureTimesQualified=function(t){return!!t&&(!!this.get("departure_times").all(function(e,n){var i,r,s;return!e.isModified()||(i=t.get("legs").at(n).getDepartureSliderDateTime(),s=e.getMinSliderDateTime(),r=e.getMaxSliderDateTime(),s<=i&&i<=r)})&&t)},e.prototype.isDurationQualified=function(t){var e,n,i,r,s,o;return!!t&&(e=this.get("duration"),o=e.get("current")||e.get("max"),i=t.get("legs"),v.isMultiDestination()?(r=i.getTotalDuration(),r<=o&&t):(n=i.getLegDuration(0),s=i.getLegDuration(1),(!n||n<=o)&&(!s||s<=o)&&t))},e.prototype.isChangeAirportQualified=function(t){return!!t&&(!t.hasChangeAirport()&&t)},e.prototype.isMixedAirportsQualified=function(t){return!!t&&(1===t.get("legs").length?t:!h.isOpenJaw(t.get("legs").models,"getDeparturePlaceId","getArrivalPlaceId")&&t)},e.prototype.resetInteractions=function(){return this.set("interactions",{with_header:!1,with_stops:!1,with_departure_time:!1,with_duration:!1,with_airlines:!1,with_alliances:!1,with_airports:!1,with_change_airport:!1,with_mixed_airports:!1,with_reset_filters:!1})},e}(c)},function(t,e,n){var i,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;i=n(113),r=n(208),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.build=function(t,n,i){return this.length?(this.get("direct").set("data",t.direct).setState(n.enable_direct_filter,!0),this.get("one_stop").set("data",t.one_stop).setState(n.enable_one_stop_filter,!i||n.check_one_stop_filter),this.get("two_plus_stops").set("data",t.two_plus_stops).setState(n.enable_two_plus_stops_filter,!i||n.check_two_plus_stops_filter)):e.__super__.build.call(this,[(new r).build({id:"direct",data:t.direct,enable:n.enable_direct_filter,check:!0}),(new r).build({id:"one_stop",data:t.one_stop,enable:n.enable_one_stop_filter,check:!i||n.check_one_stop_filter}),(new r).build({id:"two_plus_stops",data:t.two_plus_stops,enable:n.enable_two_plus_stops_filter,check:!i||n.check_two_plus_stops_filter})]),this},e.prototype.isModified=function(){return this.any(function(t){return!t.isChecked()})},e.prototype.resetUserChanges=function(){return this.forEach(function(t){return t.resetUserChanges()})},e.prototype.setAllModified=function(){return this.forEach(function(t){return t.set("is_user_modified",!0)})},e.prototype.getUnchecked=function(){return this.isModified()?this.reduce(function(t,e){return e.isChecked()||t.push(e.get("id")),t},[]):[]},e.prototype.applyFilter=function(t){return this.forEach(function(e){if(_.indexOf(t,e.id)!==-1)return e.applySavedChange()}),this},e}(i)},function(t,e,n){var i,r=function(t,e){function n(){
this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=n(115).default,t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.defaults={id:null,data:null,enable:!0,check:!0,is_user_modified:!1},e.prototype.isChecked=function(){return this.get("check")},e.prototype.isEnabled=function(){return this.get("enable")},e.prototype.getPrice=function(t){var e;return null==t&&(t=1),(e=this._getPrice())?e/t:null},e.prototype.getCount=function(){var t;return(t=this._getKey("count")).length?_.reduce(t,function(t,e){return t+e},0):null},e.prototype.resetUserChanges=function(){if(this.get("enable"))return this.set("check",!0)},e.prototype.setState=function(t,e){return this.get("is_user_modified")||this.set("check",e),this.set("enable",t),this},e.prototype._getKey=function(t){var e,n,i,r;return r=this.get("data").ticket,i=r.single_ticket[t],e=r.multi_ticket_non_npt[t],n=r.multi_ticket_npt[t],_.compact([i,e,n])},e.prototype._getPrice=function(){var t;return(t=this._getKey("min_price")).length?_.min(t):null},e.prototype.applySavedChange=function(){return this.set("check",!1)},e}(i)},function(t,e,n){var i,r,s,o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty,l=[].slice,u=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};r=n(113),i=n(210),s=n(69)("results"),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.build=function(t){var n,r;return n=t.multiple_carriers,r=this.getUnchecked(),e.__super__.build.call(this,_.map(_.compact(l.call(t.single_carriers).concat([n&&n.count>0?n:void 0])),function(t){var e,n;return(new i).build({id:t.id||"multi",name:(e=t.id)?s.get(e).name:"",min_price:t.min_price,check:(n=t.id||"multi",u.call(r,n)<0)})})).sort(),this},e.prototype.comparator=function(t){return"multi"===t.get("id")?-1:t.get("name").toLowerCase()},e.prototype.resetUserChanges=function(){return this.forEach(function(t){return t.resetUserChanges()}),this},e.prototype.resetHighlight=function(){return this.forEach(function(t){return t.set("highlight",!1)}),this},e.prototype.unselectAll=function(){return this.forEach(function(t){return t.set("check",!1),t.set("highlight",!1)}),this},e.prototype.isModified=function(){return this.any(function(t){return!t.isChecked()})},e.prototype.getUnchecked=function(){return this.reduce(function(t,e){return e.isChecked()||t.push(e.get("id")),t},[])},e.prototype.getChecked=function(){return this.reduce(function(t,e){return e.isChecked()&&t.push(e.get("id")),t},[])},e.prototype.applyFilter=function(t){return this.forEach(function(e){if(_.indexOf(t,e.id)!==-1)return e.applySavedChange()}),this},e}(r)},function(t,e,n){var i,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=n(115).default,t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.defaults={id:null,name:null,min_price:null,check:!0,highlight:!1},e.prototype.getPrice=function(t){var e;return null==t&&(t=1),(e=this.get("min_price"))?e/t:null},e.prototype.resetUserChanges=function(){return this.set("check",!0),this.set("highlight",!1),this},e.prototype.isChecked=function(){return this.get("check")},e.prototype.applySavedChange=function(){return this.set("check",!1)},e}(i)},function(t,e,n){var i,r,s,o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;r=n(113),i=n(212),s=n(199)("results"),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.build=function(t,n){var r,s;return s=this.getCheckedAlliances(),r=_.map(n.single_carriers,"id"),e.__super__.build.call(this,_.map(t,function(t){return(new i).build({id:t.id,name:t.name,carrier_ids:t.carrier_ids,disabled:0===_.intersection(t.carrier_ids,r).length,check:t.id in s})})),this},e.prototype.isModified=function(){return this.any(function(t){return t.isChecked()})},e.prototype.resetUserChanges=function(){return this.forEach(function(t){return t.resetUserChanges()}),this},e.prototype.getAllianceCarriers=function(t){return _.reduce(s.get(t).carrier_ids,function(t,e){return t[e]=!0,t},{})},e.prototype.getTotalChecked=function(){return this.filter(function(t){return t.get("check")}).length},e.prototype.getCheckedAlliances=function(){return this.reduce(function(t,e){return e.get("check")&&(t[e.get("id")]=!0),t},{})},e.prototype.getCheckedAlliancesCarriers=function(){return _.reduce(this.getCheckedAlliancesCarriersIds(),function(t,e){return t[e]=!0,t},{})},e.prototype.getCheckedAlliancesCarriersIds=function(){return this.reduce(function(t,e){return e.get("check")&&(t=t.concat(e.get("carrier_ids"))),t},[])},e.prototype.applyFilter=function(t){return this.forEach(function(e){if(_.has(t,e.id))return e.applySavedChange(t[e.id])}),this},e}(r)},function(t,e,n){var i,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=n(115).default,t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.defaults={id:null,name:null,check:!1,carrier_ids:[]},e.prototype.resetUserChanges=function(){return this.set("check",!1),this},e.prototype.isChecked=function(){return this.get("check")},e.prototype.applySavedChange=function(t){return this.set("check",t)},e}(i)},function(t,e,n){var i,r,s,o,a=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};r=n(113),i=n(214),s=n(42)("results"),o=n(23),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.build=function(t,n){var r,a,l,c,p,d,h;return o.isMultiDestination()?(p=1,r=this.getAirports(this.getAirportIds(t)),a={},h=this.getUnchecked(),e.__super__.build.call(this,_.map(r,function(t){var e,n;return e=s.get(t.parent_id),_.has(a,e.id)?a[e.id].count++:a[e.id]={count:1,order:p++,info:e},(new i).build({id:t.id,name:t.name,type:"Airport",city:a[e.id],display_code:t.display_code,check:(n=t.id||"multi",u.call(h,n)<0),disabled:!1})})).sort(),this):(l=function(t){return function(t,e){return _.uniq(t.concat(e),"id")}}(this),d=n?l(t[0].origins,t[1].destinations):t[0].origins,c=n?l(t[0].destinations,t[1].origins):t[0].destinations,e.__super__.build.call(this,this.buildModels(d,1).concat(this.buildModels(c,2))).sort(),this)},e.prototype.buildModels=function(t,e){var n;return n=this.getUnchecked(),_.map(t,function(r){var o,a;return a=s.get(r.id),(new i).build({id:a.id,name:a.name,type:a.type,display_code:a.display_code,check:(o=a.id||"multi",u.call(n,o)<0),disabled:0===r.count,city:{count:t.length,order:e,info:{id:e}}})})},e.prototype.comparator=function(t){return[t.get("city").order,t.get("display_code")]},e.prototype.resetUserChanges=function(){return this.forEach(function(t){return t.resetUserChanges()}),this},e.prototype.getAirportIds=function(t){return _.uniq(_.flatten(_.map(t,function(t){return[_.pluck(t.origins||[],"id"),_.pluck(t.destinations||[],"id")]})))},e.prototype.getAirports=function(t){return _.reduce(t,function(t,e){var n;return n=s.get(e),"Airport"===n.type&&t.push(n),t},[])},e.prototype.isModified=function(){return this.any(function(t){return!t.isChecked()})},e.prototype.isShown=function(){return this.some(function(t){return t.isShown()})},e.prototype.getUnchecked=function(){return this.reduce(function(t,e){return e.isChecked()||t.push(e.get("id")),t},[])},e.prototype.applyFilter=function(t){return this.forEach(function(e){if(_.indexOf(t,e.id)!==-1)return e.applySavedChange()}),this},e}(r)},function(t,e,n){var i,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=n(115).default,t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.defaults={id:null,city:null,type:null,name:null,display_code:null,check:!0,disabled:!1},e.prototype.resetUserChanges=function(){return this.set("check",!0),this},e.prototype.isShown=function(){return this.get("city").count>1},e.prototype.isChecked=function(){return this.get("check")},e.prototype.isDisabled=function(){return this.get("disabled")},e.prototype.applySavedChange=function(){if(!this.isDisabled())return this.set("check",!1)},e}(i)},function(t,e,n){var i,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;i=n(113),r=n(216),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.build=function(t){return e.__super__.build.call(this,_.times(t,function(){return new r})),this},e.prototype.resetUserChanges=function(){return this.forEach(function(t){return t.resetUserChanges()})},e.prototype.isModified=function(){return this.any(function(t){return t.isModified()})},e.prototype.getUserChanges=function(){return this.isModified()?this.reduce(function(t,e,n){return t[n]={min:e.get("min"),max:e.get("max")},t},{}):{}},e.prototype.applyFilter=function(t){return _.forEach(t,function(t){return function(e,n){var i;return null!=(i=t.at(n))?i.applySavedChanges(e):void 0}}(this)),this},e}(i)},function(t,e,n){var i,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;i=n(115).default,r=n(8),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.defaults={min:0,max:1439,step:30},e.prototype.resetUserChanges=function(){return this.set("min",this.defaults.min),this.set("max",this.defaults.max),this.set("step",this.defaults.step)},e.prototype.isModified=function(){return this.defaults.min!==this.get("min")||this.defaults.max!==this.get("max")},e.prototype.getMinSliderDateTime=function(){return r.getSliderDateTime(this.get("min"))},e.prototype.getMaxSliderDateTime=function(){return r.getSliderDateTime(this.get("max"))},e.prototype.applySavedChanges=function(t){return this.set("min",t.min),this.set("max",t.max)},e}(i)},function(t,e,n){var i,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;i=n(115).default,r=n(23),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.defaults={min:0,max:60,step:30,current:null},e.prototype.build=function(t){return e.__super__.build.call(this,{min:this._round(t[r.isMultiDestination()?"min_duration":"min_longest_itinerary_leg_duration"]),max:this._round(t[r.isMultiDestination()?"max_duration":"max_longest_itinerary_leg_duration"])}),this},e.prototype.resetUserChanges=function(){return this.set("current",null)},e.prototype.restoreDefaults=function(){return this.set("min",this.defaults.min),this.set("max",this.defaults.max),this.set("step",this.defaults.step),this.set("current",this.defaults.current)},e.prototype.isModified=function(){return null!==this.get("current")},e.prototype.reset=function(){return this.set("current",null)},e.prototype._round=function(t){var e;return e=this.get("step"),t%e?Math.floor(t/e)*e+e:t},e.prototype.getUserChanges=function(){return this.get("current")!==this.get("max")?this.get("current"):null},e.prototype.applyFilter=function(t){return this.set("current",t)},e}(i)},function(t,e,n){var i,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=n(115).default,t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.defaults={checked:!1,visible:!1,modified:!1},e.prototype.build=function(t){return e.__super__.build.call(this,{visible:t.has_change_airport_transfer||!1,checked:!!this.get("modified")&&this.get("checked")})},e.prototype.resetUserChanges=function(){return this.set("checked",this.defaults.checked)},e.prototype.restoreDefaults=function(){return _.forEach(this.defaults,function(t,e){return this.set(e,t)},this)},e.prototype.isModified=function(){return this.get("checked")===!0},e.prototype.isChecked=function(){return this.get("visible")&&this.get("checked")},e.prototype.reset=function(){return this.restoreDefaults()},e.prototype.applyFilter=function(t){if(this.get("visible"))return this.set("checked",t)},e}(i)},function(t,e,n){var i,r=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=n(115).default,t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.defaults={checked:!1,visible:!1,modified:!1},e.prototype.build=function(t){return e.__super__.build.call(this,{visible:t.has_city_open_jaw||!1,checked:!!this.get("modified")&&this.get("checked")})},e.prototype.resetUserChanges=function(){return this.set("checked",this.defaults.checked)},e.prototype.restoreDefaults=function(){return _.forEach(this.defaults,function(t,e){return this.set(e,t)},this)},e.prototype.isModified=function(){return this.get("checked")===!0},e.prototype.isChecked=function(){return this.get("visible")&&this.get("checked")},e.prototype.reset=function(){return this.restoreDefaults()},e.prototype.applyFilter=function(t){if(this.get("visible"))return this.set("checked",t)},e}(i)},function(t,e,n){var i,r,s,o,a,l;a=n(50),r=n(8),i=n(27),s=n(19)("initial_query"),o=n(21),l="1.0",t.exports={_getCheapestPriceDirection:function(t){var e,n,i,r,s,o;return i=function(){var e;e=[];for(n in t)o=t[n],e.push({price:o.total.min_price,isDirect:"direct"===n});return e}(),e=i.filter(function(t){return!t.isDirect}),{cheapestDirect:this._getSinglePrice(null!=(r=t.direct)?r.total.min_price:void 0)||null,cheapestIndirect:this._getSinglePrice(null!=(s=_.min(e,function(t){return t.price}))?s.price:void 0)||null}},_getSinglePrice:function(t){if(t)return t/o.getTotal()},_purgeStaleData:function(t,e){var n,i,r,s,o,a;if(n=t.tryGetValue("browsePriceTracking")){if(n.version!==l)return void t.trySetValue("browsePriceTracking",null);i=e.getTime()-3e5,r=[],o=n.routedates;for(s in o)a=o[s],a&&parseInt(a.storageTime)<i&&r.push(s);return r.forEach(function(e){return t.trySetValue("browsePriceTracking.routedates."+e,null)})}},updateBrowsePrices:function(){var t,e,n,o,u,c,_,p,d,h,f;if(f=i.getLocalStorage("ins.browsePrices"),c=r.now(),t=s.data,o=t.legs[0],this._purgeStaleData(f,c),("one-way"===(_=t.trip_type)||"return"===_)&&(h=a.get("itineraries.stops")))return p=this._getCheapestPriceDirection(h),p.storageTime=c.getTime(),u=t.currency+"_"+t.market,n=o.origin+"_"+o.destination,e=""+o.date+(o.return_date?"_"+o.return_date:""),d=u+"_"+n+"_"+e,f.trySetValue("browsePriceTracking.version",l),f.trySetValue("browsePriceTracking.routedates."+d,p)}}},function(t,e){t.exports=[{id:-31999,name:"Star Alliance",type:"Alliance",about:"Aliance of 27 members, 192 countries, 1300 airports (good src of lat,long), plus ? affiliates.",partners_url:"http://www.staralliance.com/member-airlines",carrier_ids:[-11111,-32757,-32756,-32695,-32690,-32672,-32646,-32571,-32558,-32544,-32540,-32478,-32401,-32407,-32353,-32340,-32331,-32093,-32090,-31901,-31880,-31876,-31833,-31799,-31781,-31767,-31734,-31722]},{id:-32e3,name:"oneworld",type:"Alliance",about:"Alliance of 16 members, ? affiliates, OneWorld have a juicy SFN time table pdf on their site, terminal maps, etc ...",partners_url:"https://www.oneworld.com/member-airlines/overview",carrier_ids:[-32702,-32573,-32480,-32456,-32317,-32222,-32184,-32115,-31787,-32080,-31940,-31939,-31923,-31913,-31821,-32054]},{id:-31998,name:"SkyTeam",type:"Alliance",about:"20 members, ? countries, ? airports, ? affiliates, direct flight time tables, flight status, .",partners_url:"http://www.skyteam.com/en/",carrier_ids:[-32741,-32737,-32733,-32680,-32677,-32588,-32444,-32442,-32439,-32397,-32385,-32283,-32139,-32132,-32128,-32062,-31896,-31779,-31703,-31664]}]},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.AdsContract=function(){function t(e){n(this,t),this.bus=e,this.reducer=null,this.slots=[this.nativeBookingPanelSlot(),this.nativeResultSlot()]}return i(t,[{key:"getSlots",value:function(){return this.slots}},{key:"nativeBookingPanelSlot",value:function(){var t=this,e=$.Deferred();return e.done(function(e){e.partner&&t.bus.channel("set-sponsorship").publish(e)}),{type:"sponsoredPartner",deferred:e}}},{key:"nativeResultSlot",value:function(){var t=this,e=$.Deferred();return e.done(function(e){e.partner&&(t.reducer=t.buildReducer(e),t.bus.channel("re-apply-data").publish())}),{type:"sponsoredResult",deferred:e}}},{key:"buildReducer",value:function(t){var e=this;return function(n){var i=e.findCheapestOption(n,t.partner),r=i&&e.repositionOption(n,i.itineraryIndex,i.pricingOptionIndex);return r&&e.customizeItinerary(r,t),n}}},{key:"getReducer",value:function(){return this.reducer}},{key:"findCheapestOption",value:function(t,e){var n=null;return _.find(t,function(t,i){return _.find(t.pricing_options,function(t,r){var s=t.agent_ids;if(s&&1===s.length&&s[0]===e)return n={itineraryIndex:i,pricingOptionIndex:r},!0})}),n}},{key:"repositionOption",value:function(t,e,n){var i=_.merge({},t[e]);return i.id=i.id+"-SPONSORED",i.pricing_options=[i.pricing_options[n]],t.unshift(i),i}},{key:"customizeItinerary",value:function(t,e){var n=t.pricing_options[0];e.url=n.items[0].url,e.urlTransform&&(e.url=e.urlTransform(e.url)),t.sponsorship=e}}]),t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Recommendations=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(17),a=i(o),l=n(27),u=i(l),c=n(46),p=i(c),d=function(t){return"https://gateway.skyscanner.net/search-signals-api/api/v1/signals/"+t},h=function(t,e){return"https://gateway.skyscanner.net/dest-rec-service/api/alternatives?origin_code="+t+"&destination_code="+e+"&size="+m},f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v,n=e(),i=n.originCityId,r=n.market,s=n.currency,o=n.locale,a=n.outboundDate,l=n.inboundDate;return"/dataservices/browse/v3/dvweb/"+r+"/"+s+"/"+o+"/routes/"+i+"/"+t+"/"+a+"/"+l+"?profile=minimalcityrollupwithnamesv2&include=image;countryInfo&includePrices=false"},g=3,m=6,y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.default.error({message:"JS Log",fields:{Error:"Recommendations Failed",Reason:t,Properties:e}})},v=function(){return _.pick(Skyscanner.Api.componentContext(),"originCityId","destinationCityId","market","locale","currency","outboundDate","inboundDate")},b=function(t){p.default.trackMixpanel("Flight Day View User Search Signal",{"Search Signal":t})};e.Recommendations=function(){function t(){r(this,t)}return s(t,[{key:"setBus",value:function(t){return this.bus=t,this}},{key:"loadRecommendations",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,n=this.getPreferenceId();n&&$.get(d(n)).done(function(e){t.onSearchSignalResponse(e)}).fail(function(){e("search signal API call failed")})}},{key:"onSearchSignalResponse",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y,n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:b,s=i(),o=s.originCityId,a=s.destinationCityId;if(!o&&!a)return void e("origin or destination id not detected");if(!t||!t.search_signal)return void e("user state not found in search signal API response");var l=t.search_signal;return r(l),"destination_explorer"!==l?void e("not in specified search signal",{Signal:l}):void $.get(h(o,a)).done(function(t){n.onRecommendationResponse(t)}).fail(function(){e("recommendations API call failed")})}},{key:"onRecommendationResponse",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;return t.length<g?void e("not enough recommendations",{"Recommendations Count":t.length}):void this.callBrowseService(_.map(t,function(t){return t.alternative_destination_city_code}))}},{key:"callBrowseService",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;$.get(f(t.join(";"))).done(function(n){e.onBrowseServiceResponse(t,n)}).fail(function(){n("browse-service call failed")})}},{key:"onBrowseServiceResponse",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;if(!e||!e.PlacePrices)return void n("wrong browse-service response format");var i=e.PlacePrices.length;if(i<g)return void n("not enough browse-service records",{"Browse Service Records Count":i});var r=this.processBrowseServiceResponse(t,e.PlacePrices);return r.length<g?void n("not enough valid browse-service records",{"Valid Browse Service Records Count":r.length}):void this.bus.channel("get-recommendations").publish(r)}},{key:"processBrowseServiceResponse",value:function(t,e){return _(e).filter(function(t){return t.Id&&t.ImageUrl&&t.Name}).sort(function(e,n){return t.indexOf(e.Id)-t.indexOf(n.Id)}).take(g).map(function(t){return{imageUrl:t.ImageUrl,price:t.DirectPrice||t.IndirectPrice,destinationPlaceName:t.Name,destinationCountryName:t.CountryName,destinationId:t.Id}}).value()}},{key:"getPreferenceId",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,e=u.default.getCookieValue("preferences");return e?e:(t("preference id not found in cookies"),!1)}}]),t}()},function(t,e,n){var i,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;i=n(10),r=n(23),t.exports=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.initialize=function(t){return this.controller=t,this.check_before_going_back=!0,this.stack=[]},e.prototype.routes={filters:"onFilters",sort:"onSort",results:"onDefault","details(/:id)(/:page)":"onDetails","price-alert":"onPriceAlert","price-alert/auto":"onAutoPriceAlert","average-price":"onAvgPrice","*actions":"onDefault"},e.prototype.navigateTo=function(t,e){if(null==e&&(e={}),_.defaults(e,{replace:!1,trigger:!0}),this.check_before_going_back&&this.stack.push(this.getCurrent()),this.navigate(t,{replace:e.replace,trigger:e.trigger}),"results"===t)return this.check_before_going_back=!1},e.prototype.goBack=function(t){return null==t&&(t=1),this.check_before_going_back?(this.stack.length>1?this._goBack(t):this._goToResults(),void(this.check_before_going_back=!1)):(this.getCurrent()&&this._goBack(t),this.check_before_going_back=!1)},e.prototype.getCurrent=function(){return Backbone.history.getFragment()},e.prototype.onFilters=function(){return this.controller.onRouteFilters()},e.prototype.onSort=function(){return this.controller.onRouteSort()},e.prototype.onDetails=function(t,e){if(t)return this.controller.onRouteDetails(t,e)},e.prototype.onPriceAlert=function(t){if(!r.isMultiDestination())return this.controller.onRoutePriceAlert(t===!0)},e.prototype.onAutoPriceAlert=function(){return this.onPriceAlert(!0)},e.prototype.onAvgPrice=function(){return this.controller.onRouteAvgPrice()},e.prototype.onDefault=function(){return this.controller.onRouteDefault()},e.prototype.isOnPriceAlert=function(t){return null==t&&(t=this.getCurrent()),/^price-alert(.*)/.test(t)},e.prototype.isOnDetails=function(t){return null==t&&(t=this.getCurrent()),/^details\/.+/.test(t)},e.prototype._goBack=function(t){return Backbone.history.history.go(-t)},e.prototype._goToResults=function(){return this.navigate("results",{trigger:!0,replace:!0})},e}(Backbone.Router)},function(t,e,n){var i,r;i=n(10),r=n(29),t.exports=function(){function t(){this.logs=[],this.max_seconds=i.getVariant("max_ajax_allowed_time")||0,this.max_ajax_count=i.getVariant("max_ajax_allowed_count")||0,this.max_seconds>0&&this.max_ajax_count>0&&$(document).ajaxSend(_.bind(this.track,this))}return t.prototype.logError=_.throttle(function(t){return r.log({"Error Message":"Increase in Ajax Calls","Error Request Url":t.url})},1e4),t.prototype.track=function(t,e,n){if(this.logs.unshift(this.now()),!(this.logs.length<this.max_ajax_count))return this.logs.length=this.max_ajax_count,this.shouldlogError()?this.logError(n):void 0},t.prototype.shouldlogError=function(t){return new Date(_.first(this.logs)-1e3*this.max_seconds)<this.logs[this.logs.length-1]},t.prototype.now=function(){return("function"==typeof Date.now?Date.now():void 0)||(new Date).valueOf()||null},t}()},function(t,e,n){var i,r,s;i=n(27),s=n(46),r="fss_offline",t.exports=new(function(){function t(){}return t.prototype.is_online=i.isOnline(),t.prototype.initialize=function(){var t;if($(window).on("online offline",_.bind(this.onOnline,this)),t=this.getTimestamp())return this.trackMixpanel(t,this.now()),this.setTimestamp(null)},t.prototype.getTimestamp=function(){return i.getLocalStorage(r).tryGetValue("timestamp")||null},t.prototype.setTimestamp=function(t){return i.getLocalStorage(r).trySetValue("timestamp",t)},t.prototype.trackMixpanel=function(t,e){return s.trackMixpanel("Flight Day View Disconnected",{"Time To Reconnection":this.formatTime(e-t)})},t.prototype.onOnline=function(t){return this.is_online&&"offline"===t.type&&this.setTimestamp(this.now()),this.is_online||"online"!==t.type||(this.trackMixpanel(this.getTimestamp(),this.now()),this.setTimestamp(null)),this.is_online="online"===t.type},t.prototype.now=function(){return("function"==typeof Date.now?Date.now():void 0)||(new Date).valueOf()||null},t.prototype.formatTime=function(t){return Math.round(t/10)/100},t}())},function(t,e,n){var i,r,s,o,a,l,u,c,p;l=n(19)("initial_query"),u=n(149),s=n(8),p=n(228),c=n(25),a=n(18).default,o=function(t){var e,n,i,o,d,h;return i=l.get("legs"),h=l.get("trip_type"),e=i[0]||{},d={"Prefer Directs":l.get("prefer_directs"),"Leg Count":i.length,"Open Jaw":u.isOpenJaw(i,"origin","destination"),"Trip Duration":r(i,h),"Date Offset Leg 1":s.daysBetweenDates(s.now(),s.parseDateTime(e.date||"")),"Loading Complete":c.get("loading_complete")===!0},_.assign(d,a()),_.forEach(i,function(t,e){return d["Origin Code Leg "+(e+1)]=t.origin,d["Destination Code Leg "+(e+1)]=t.destination,d["Date Leg "+(e+1)]=t.date,d["Day of Week Leg "+(e+1)]=s.getDayOfWeek(s.parseDateTime(t.date))}),"multi-destination"!==h&&(d["Alternative Origins"]=e.alternative_origins||null,d["Alternative Destinations"]=e.alternative_destinations||null),"return"===h&&(d["Inbound Date"]=e.return_date,d["Inbound Day of Week"]=s.getDayOfWeek(s.parseDateTime(e.return_date||""))),_.contains(["Flight Day View Loaded","Flight Day View Completed","Flight Day View First Result Shown (Sampled)","Flight Day View Partner Selected","Flight Booking Panel Loaded"],t)&&"Flight Day View Loaded"===t&&p.isUser()&&(d["TravelPro User"]=!0),"multi-destination"!==h&&(e.alternative_origins||e.alternative_destinations)&&(d["Nearby Alts Checked"]=function(){return e.alternative_origins&&e.alternative_destinations?"both":e.alternative_origins?"outbound":e.alternative_destinations?"inbound":null}()),"Flight Day View Completed"===t&&"multi-destination"!==h&&(o=(e.alternative_origins||[]).length,n=(e.alternative_destinations||[]).length,d["Number Of Alts Returned Outbound"]=o,d["Number Of Alts Returned Inbound"]=n,d["Number Of Alts Returned Total"]=o+n),d},r=function(t,e){var n,r;switch(n=t[0]||{},r=t[t.length-1]||{},e){case"multi-destination":return i(n.date,r.date);case"return":return i(n.date,n.return_date);default:return-1}},i=function(t,e){return s.daysBetweenDates(s.parseDateTime(t||""),s.parseDateTime(e||""))},t.exports={getAll:o}},function(t,e,n){var i,r;i=n(27),r=function(){var t;if(t=i.getLocalStorage("travelpro_user"))return t.tryGetValue(void 0,!0)},t.exports={isUser:r}},function(t,e,n){var i,r,s,o,a,l,u,c,_,p;r=n(27),c=n(10),p=n(46),i=n(28),_=function(){return p.trackMixpanel("Flight Price Alert Sign Up Panel Suppressed")},a=function(t,e,n){return t>=600&&!n.isOnDetails(e)},s=function(){var t,e,n;return e=r.getLocalStorage(),n=e.tryGetValue("visit"),t=!1,n?1===n&&(e.trySetValue("visit",2),t=!0):(e.trySetValue("visit",1),t=!1),t},u=function(t,e,n,i){if(a(t,e,n)&&s())return i()},l=function(t,e,n,s,o){var l,u,c,p,d,h,f,g;if(h=r.getLocalStorage(),p=Date.now(),d=864e5,l="paPopupLastShownTimestamp",u=h.tryGetValue(l),f="c"===o,c=function(){return!u||u+d<p},a(t,e,n)&&c())if(g=h.tryGetValue("visit"),1===g){if(h.trySetValue(l,p),h.trySetValue("visit",2),!f||f&&!u)return s();if(f)return i(this,_)}else if(h.trySetValue("visit",1),g&&!u)return h.trySetValue(l,p-d)},o=function(t,e,n,i,r){return c.isOn("price_alerts_once_a_day")?l(e,n,i,r,c.getVariant("price_alerts_once_a_day")):u(e,n,i,r)},t.exports={checkShow:o}},function(t,e,n){var i,r,s,o;o=n(46),s=function(t){return o.trackMixpanel("Flight Search Day View Print",{Action:t})},r=function(){return s("beforePrint")},i=function(){return s("afterPrint")},t.exports=function(){var t;return window.matchMedia&&(t=window.matchMedia("print"),t.addListener(function(t){return t.matches?r():i()})),window.onbeforeprint=r,window.onafterprint=i}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=parseInt(t,10);return _.isNaN(n)?e:n}},function(t,e){t.exports={xsell_clickout_ttl:"off",performance_stats:"off",partner_promotion:"off",fab_cta_colour:"off",fab_cta_fabcopy:"off",bp_scroll_to_price:"off",bp_collapse_itineraries:"off",show_airport_transfers:"on",new_skippy:"off",new_skippy_variant:"off",expiry_timer:"off",dayview_canned_data:"off",dayview_canned_data_delay:"off",booking_canned_data:"off",booking_canned_data_delay:"off",max_ajax_allowed_time:"off",max_ajax_allowed_count:"off",flexible_days:"off",cta_button:"off",show_intercom_live_chat:"off",pqs_increment:"off",installments:"off",installments_partners_list:"off",jp_customer_support:"off",jp_customer_support_partners:"off",ticket_style_results:"off",prevent_auto_price_alerts:"off",save_filters:"off",highlight_airline:"off",seo_airline_filter:"off",show_avg_price_indicator:"off",combined_bp:"off",results_cta_label:"off",booking_panel_cta_label:"off",price_messaging_fees_dv:"off",spring_clean:"off",compact_spring_clean:"off",less_affordance_spring_clean:"off",prod_bp_spring_clean:"off",downrank_indirects:"off",alternative_destinations:"off",
fb_messenger_button:"off",highlight_brand_or_airline:"off",partner_currency:"off"}},function(t,e,n){var i,r;i=n(27),r=n(10),t.exports=function(t,e,n){var r,s,o;if(s=n.originalEvent.key,s&&_.contains(["fss_refresh","fss_pqs","fss_redirect_started"],s)&&(o={fss_refresh:"refresh",fss_pqs:"show-pqs",fss_redirect_started:"timestamp"},(r=i.getLocalStorage(s).tryGetValue(o[s]))&&r.app_id===""+e))return"refresh"===o[s]&&t("refresh-app").publish({create_new_session:r.create_session,reason:"light_redirect_lu"+(r.create_session?"_error":"")}),"show-pqs"===o[s]&&r.itinerary_id&&r.agent_id&&t("show-pqs").publish(r.itinerary_id,r.agent_id,r.exit_origin),"timestamp"===o[s]&&t("redirect-started-timestamp").publish(r.value),i.getLocalStorage(s).trySetValue(o[s],null)}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var s=n(23),o=r(s),a=n(21),l=i(a),u=n(46),c=i(u),p=n(29),d=i(p),h=n(235),f=i(h),g=n(17),m=i(g),y=n(19),v=i(y),b=(0,v.default)("options"),k=(0,v.default)("initial_query");e.default=function(t,e,n){o.init(t.tripType),l.default.init({adults:t.adultsV2,child_ages:t.childrenV2,adults_v1:t.originalAdults||t.adults,children_v1:t.originalChildren||t.children,infants_v1:t.originalInfants||t.infants});var i=function(t,e){return"City"===t[e+"Type"]?t[e+"CityId"]:t[e+"Id"]},r=function(t,e){return"City"===t[e+"Type"]?t[e+"CityName"]:t[e+"Name"]},s=[{origin:i(t,"origin"),origin_name:r(t,"origin"),origin_iata:t.originIataCode,destination:i(t,"destination"),destination_name:r(t,"destination"),destination_iata:t.destinationIataCode,date:t.outboundDate}];o.isReturn()&&s[0]&&(s[0].return_date=t.inboundDate),o.isMultiDestination()&&(s=_.map(t.legs,function(t){return{origin:i(t,"origin"),destination:i(t,"destination"),date:t.date}}));var a={market:t.market,currency:t.currency,locale:t.locale,cabin_class:t.cabinclass,prefer_directs:t.preferDirects,trip_type:o.getType(),legs:s};_.assign(a,l.default.getQuery()),k.setStorage(a),b.setStorage({nodeName:e.nodeName||"",tripType:t.tripType,cabinClass:t.cabinclass}),d.default.filterFiles(RegExp(n.toLowerCase()+".")).addLogHandler(function(t){c.default.trackMixpanel("Flight Day View Error Logged",t)}).addLogHandler(function(t){m.default.error({message:"JS Error",fields:_.assign(t,{Component:n})})}).initialize(),f.default.initialize()}},function(t,e,n){var i,r,s;i=n(29),r=function(t){var e;return e=t.nodeName.toLowerCase(),t.id&&(e=e+"#"+t.id),"string"==typeof t.className&&(e=e+"."+t.className.replace(/  /g," ").replace(/ /g,".").replace(/\.clearfix/,"")),e},s=function(){return $(window).on("click",function(t){var e,n,s;for(e=t.target,n=0,s=r(e);n++<2&&e.parentNode&&!e.id;)s=r(e.parentNode)+">"+s,e=e.parentNode;return i.addEvent(s)})},t.exports={initialize:s}},function(t,e){t.exports=_.curry(function(t,e){var n;return n={transfer:"206028971",pqs:"208437869",avg_price:"201151562"},"https://help.skyscanner.net/hc/"+t+"/articles/"+n[e]})},function(t,e){t.exports=function(t){var e,n,i,r;return i=t.place_id,n=t.locale,r=t.radius,e=t.exclude,$.ajax({url:"/dataservices/"+n+"/geo/v1.1/nearby/code/skyscanner/"+i,type:"GET",dataType:"JSON",data:{type:"airport",limit:3,maxDistanceKm:""+r}}).then(function(t){return _.chain((t||{}).Nearby||[]).map(function(t){return t.Entity.DisplayCode.toUpperCase()}).filter(function(t){return t!==e.toUpperCase()}).value().join(",")}).promise()}},function(t,e,n){var i,r,s,o,a;a=n(26),o=n(239),i=n(152).default,r=function(t){return"/dataservices/whosells/v1.1/"+t.market+"/"+t.currency+"/"+t.locale+("/"+t.departPlace+"/"+(t.returnPlace||"anywhere"))+("/"+(t.departDate||"anytime"))+("/"+(t.isReturn?(t.returnDate||"anytime")+"/":""))+("?src=routespons&requestId="+(t.requestId||""))+("&adults="+t.adults+"&children="+t.children+"&infants="+t.infants)},s=function(t,e){return t?t=i(t,e):null},t.exports=function(t){return $.ajax({dataType:"JSON",url:r(t)}).then(function(t){return _.map(t.Agents,function(t,e){var n;return{url:s(null!=(n=t.Routes[0])?n.DeepLink:void 0,t.Name),alt:t.Name,logo:t.AgentId,odd:e%2===0}})}).then(function(t){return _.map(t,o).join("")}).then(function(e){return t.$section.find("ul").html(e)}).then(function(t){return t.closest("div").removeClass("hidden").find("h4").text(a("ktxtTopRouteOperators"))}).fail(function(){return t.$section.addClass("hidden")})}},function(module,exports,__webpack_require__){var translate=__webpack_require__(26);module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<li class="',odd&&(__p+="odd"),__p+='"><a href="'+(null==(__t=url)?"":__t)+'" target="_blank" title=\''+(null==(__t=alt)?"":__t)+"'>",logo&&(__p+='<img src="/images/websites/bar/'+(null==(__t=logo)?"":__t)+'.png" alt="'+(null==(__t=alt)?"":__t)+'" />'),__p+="</a></li>";return __p}}]);