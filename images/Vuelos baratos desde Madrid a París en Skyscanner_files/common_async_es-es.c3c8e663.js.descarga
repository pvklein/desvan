Skyscanner.Common.Helpers.Url=function(){function a(a){return a.split("?")[0]}var b=function(a){var b=window.location.search;return c(b,a)},c=function(a,b){var c,d="";if(a.indexOf("?")>-1){var e=a.substr(a.indexOf("?")).toLowerCase(),f=e.split("&");for(c=0;c<f.length;c++)if(f[c].indexOf(b.toLowerCase()+"=")>-1){var g=f[c].split("=");d=g[1];break}}return unescape(d)},d=function(a){return a.match(/:\/\/(.[^\/]+)/)[1]};appendParamToUrl=function(a,b,c){var d=b+"="+c,e="",f=a,g=new RegExp("(&|\\?)"+b+"=[^&]*");return a.indexOf("#")>0&&(e=a.substring(a.indexOf("#")),a=a.substring(0,a.indexOf("#"))),f=a.replace(g,"$1"+d),f===a&&(f+=(a.indexOf("?")>-1?"&":"?")+d),f+e};var e=function(a,b){if(null===a||"undefined"==typeof a||""===a)return"";var c=a.split("?");if(c.length>=2){for(var d=c[1],e=encodeURIComponent(b)+"=",f=d.split(/[&;]/g),g=f.length;g-->0;)-1!==f[g].lastIndexOf(e,0)&&f.splice(g,1);return d=f.join("&"),d&&d.length>0?c[0]+"?"+d:c[0]+d}return a},f=function(a){return a.indexOf("#")>-1&&(a=a.substring(0,a.indexOf("#"))),a},g=function(a,b,c){return null!=a&&null!=c&&null!=b&&""!=b&&(a.indexOf("?")<0?a+="?":"&"!=a[a.length-1]&&(a+="&"),a+=b+"="+encodeURIComponent(c)),a},h=function(){var a,b,c=window.location;"replaceState"in window.history?window.history.replaceState({},window.document.title,c.pathname+c.search):(a=window.document.body.scrollTop,b=window.document.body.scrollLeft,c.hash="",window.document.body.scrollTop=a,window.document.body.scrollLeft=b)},i=function(){for(var a=window.location.hash.substr(1).split("&"),b={},c=0;c<a.length;c++){var d=a[c].split("=");b[d[0]]=d[1]}return b},j=function(){return window.location.href},k=function(a){window.location.href=a};return{getUrlParam:b,getDomainFromUrl:d,getParamFromUrl:c,appendParamToUrl:appendParamToUrl,appendParamToUrlIncludeEmpty:g,getPathFromUrl:a,removeParamFromUrl:e,stripHashFromUrl:f,removeHash:h,getHashParamFromUrl:i,getLocationHref:j,setLocationHref:k}}();;Skyscanner.Common.Helpers.String=function(){var a=function(a){var a=""+a;return 1==a.length?"0"+a:a},b=function(a){return null==a?!0:""==a},c=function(a){var b=0;if(0==a.length)return b;for(i=0;i<a.length;i++){var c=a.charCodeAt(i);b=(b<<5)-b+c,b&=b}return b};return{pad0:a,getHashCode:c,strNullOrEmpty:b}}();;!function(){var a=new RegExp(/(\d{4})-?(\d{2})-?(\d{2})[Tt\s]?(\d{2}):?(\d{2}):?(\d{2})([Zz+-]{1})?(\d{2})?:?(\d{2})?/i),b=Skyscanner.Common.Helpers.String,c=Skyscanner.Common.Helpers.I18n,d=function(b,c){if(!b)return null;var d,e,f,g,h,i,j=b.match(a);return d=j.length>1?j[1]:0,e=j.length>2?j[2]:1,f=j.length>3?j[3]:1,g=j.length>4?j[4]:0,h=j.length>5?j[5]:0,i=j.length>6?j[6]:0,c?new Date(Date.UTC(d,e-1,f,g,h,i)):new Date(d,e-1,f,g,h,i)},e=function(a){if(null==a)return"";var c,d;return c=a.getYear()<1900?a.getYear()-100:a.getYear()-2e3,d=b.pad0(c)+b.pad0(a.getMonth()+1)+b.pad0(a.getDate())},f=function(a){var b=a.getHours(),c=a.getMinutes(),d=(10>b?"0"+b:b)+":"+(10>c?"0"+c:c);return d},g=function(a){var b=Math.floor(a/60),d=Math.floor(a%60);return c.gettext("ktxtPeriod_Format_Short",{hours:b,minutes:d})},h=function(a){return Globalize.format(a,"d")},i=function(a){return Globalize.format(a,"D")},j=function(a,b){return Globalize.format(a,b)},k=function(a){var b,d;return a>59?(b=Math.floor(a/60),d=c.gettext("ktxtPeriod_Format_Long",{hours:b,minutes:Math.round(a)%60}),c.gettext("ktxtLiveUpdate_Price_Last_Checked",{period:d})):a<=SS.domainConstants.MaxLivePriceQuoteAge?c.gettext("ktxtLiveUpdate_Price_Is_Live"):c.gettext("ktxtLiveUpdate_Price_Last_Checked_Minutes",{min:a})},l=function(a){return new Date(a.getTime())};$.extend(SS.namespace("Skyscanner.Common.Helpers.DateTime"),{formatTime:f,formatDate:j,formatPeriod:k,formatDuration:g,formatShortDate:h,formatLongDate:i,parseIsoDateTime:d,toDateCode:e,clone:l})}();;(function(){Skyscanner.namespace("Skyscanner.tracking").TravelProperties=function(){function a(){}var b,c,d,e;return d=function(a,b){var c,d,e,f,g,h;return"multi-destination"===b&&a.length>1?(c=a[0],f=a[a.length-1],e=c.originId,d=c.destinationId,h=f.originId,g=f.destinationId,e&&d&&h&&g?e!==g||d!==h:!1):!1},c=function(a,b){var c,d,e,f;return e=864e5,c=new Date(a),c=new Date(c.getFullYear(),c.getMonth(),c.getDate(),0,0,0),f=new Date(b),f=new Date(f.getFullYear(),f.getMonth(),f.getDate(),0,0,0),d=Math.abs((f.getTime()-c.getTime())/e+1)},e=function(a,b,c){return{originId:a,destinationId:b,date:c}},b=function(a,b,c){return a["Origin Code Leg "+c]=b.originId,a["Destination Code Leg "+c]=b.destinationId,a["Date Leg "+c]=b.date,a},a.prototype.getCommonProperties=function(a,f){var g,h,i,j,k,l,m,n,o;for(j=a.legs,l=a.tripType,g=_.filter(a.childrenV2||[],function(a){return a>=2}),k={"Leg Count":j&&j.length||{"return":2,"one-way":1}[l],"Trip Type":l,"Prefer Directs":a.preferDirects,"Cabin Class":a.cabinclass,Adults:a.adultsV2,Children:g.length,Infants:(a.childrenV2||[]).length-g.length,"Open Jaw":d(j,l)},(null===j||void 0===j||0===j.length)&&(j=[],j.push(e(a.originId,a.destinationId||"everywhere",a.outboundDate)),"return"===l&&j.push(e(a.destinationId||"everywhere",a.originId,a.inboundDate))),o=j||[],h=m=0,n=o.length;n>m;h=++m)i=o[h],b(k,i,h+1);return k["Date Offset Leg 1"]=c(f,j[0].date),k},a}()}).call(this);;(function(){var a;a={"Trip Type":"56","Origin Code Leg 1":"52","Destination Code Leg 1":"53","Date Leg 1":"54","Origin Code Leg 2":"73","Destination Code Leg 2":"74","Date Leg 2":"75","Cabin Class Leg 2":"76","Origin Code Leg 3":"77","Destination Code Leg 3":"78","Date Leg 3":"79","Cabin Class Leg 3":"80","Origin Code Leg 4":"81","Destination Code Leg 4":"82","Date Leg 4":"83","Cabin Class Leg 4":"84","Origin Code Leg 5":"85","Destination Code Leg 5":"86","Date Leg 5":"87","Cabin Class Leg 5":"88","Origin Code Leg 6":"89","Destination Code Leg 6":"90","Date Leg 6":"91","Cabin Class Leg 6":"92"},Skyscanner.namespace("Skyscanner.tracking").gaMultiDestProperties=function(b,c,d,e){var f,g,h,i,j,k;i=e.getCommonProperties(b,c),j={};for(h in a)f=a[h],i[h]&&(j[f]=i[h]);for(j[57]=_.reduce([i.Adults,i.Children,i.Infants],function(a,b){return a+b}),j[58]=d,g=k=2;6>=k;g=++k)j[a["Date Leg "+g]]&&(j[a["Cabin Class Leg "+g]]=b.cabinclass);return j}}).call(this);;"undefined"==typeof Skyscanner.Common&&(Skyscanner.Common={});var _gaq=_gaq||[],getGAFeatureTestString=function(){var a=/^.*_V\d+$/i,b=_.reduce(Skyscanner.config.featureTests,function(b,c,d){return null==d?b:(d.match(a)&&(b[d]=c),b)},{});return _.map(b,function(a,b){return b+"-"+a}).join("&&")};Skyscanner.Common.pageLoadedGATracking=function(a,b){var c=function(a,c){ga(b+"set","dimension"+a,c)},d=Skyscanner.Tracking,e=Skyscanner.Api.componentContext();if(ga(b+"require","linker"),ga(b+"linker:autoLink",d.GaSkyscannerDomains),ga(b+"require","displayfeatures"),c(1,d.WebNode),c(2,"POD_UNKNOWN"),c(3,d.SvnBuildRevision),c(5,d.CurrentUserLanguage),c(143,e.market),c(145,Skyscanner.Api.user.getUserId()),c(146,Skyscanner.Api.tracking.getPreferencesId()),c(130,Skyscanner.Api.browser.visibilityState()),c(148,e.deviceModel),c(149,document.location.pathname),Skyscanner.Tracking.ShouldLogGaFeatureSetInDimension===!0&&(c(7,d.GAFeatureTestString),c(19,getGAFeatureTestString())),Skyscanner.config.skippy){var f={0:[45,46,47,50],1:[93,94,95,96],2:[97,98,99,100],3:[101,102,103,104],4:[105,106,107,108],5:[109,110,111,112]},g=Skyscanner.config.skippy.itineraryLegs;if(g)for(i=0,length=g.length;i<length;i++){var h=g[i],j=f[i];c(j[0],h.Outbound),c(j[1],h.Inbound),c(j[2],h.Date),c(j[3],h.Carrier)}c(44,Skyscanner.config.skippy.redirectId),c(48,e.inboundDate),c(49,Skyscanner.config.skippy.websiteId),c(51,"transport")}var k=Skyscanner.Common.getViewport();if(c(10,k.width+"x"+k.height),"UNKNOWN"!=d.VarnishABGroup&&c(18,d.VarnishABGroup),Skyscanner.page_specific_ga_dimensions)for(var l in Skyscanner.page_specific_ga_dimensions)ga(b+"set",l,Skyscanner.page_specific_ga_dimensions[l]);if(c(62,e.cabinClass),e.priceAlertId&&c(129,e.priceAlertId),"airli"==Skyscanner.ancillary){var m=Skyscanner.tracking.gaMultiDestProperties(e,new Date,Skyscanner.analyticsPageName,new Skyscanner.tracking.TravelProperties);for(var n in m)c(n,m[n])}Skyscanner.Common.trackPageView(a,b)},Skyscanner.Common.trackPageView=function(a,b){var c=document.location,d=c.pathname,e=c.search,f=document.location.search.indexOf("?")>-1?"&":"?",g=d+e+f+"gaPage=["+a+"]",h=Skyscanner.Common.getTrackId();null!==h&&ga(b+"set","userId",h),ga(b+"send","pageview",g)},Skyscanner.Common.getViewport=function(){var a,b;return"undefined"!=typeof window.innerWidth?(b=window.innerWidth,a=window.innerHeight):"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?(b=document.documentElement.clientWidth,a=document.documentElement.clientHeight):(b=document.getElementsByTagName("body")[0].clientWidth,a=document.getElementsByTagName("body")[0].clientHeight),{width:b,height:a}},ga("create","UA-246109-81","auto",{allowLinker:!0,name:"uatracker",siteSpeedSampleRate:0}),ga("create","UA-246109-1","auto",{allowLinker:!0,siteSpeedSampleRate:0}),function(){var a=Skyscanner.uaPageView||"/";Skyscanner.Common.pageLoadedGATracking(a,""),Skyscanner.Common.pageLoadedGATracking(a,"uatracker."),Skyscanner.Common.GATracking.initListeners()}();;!function(){var a={ktxtSearchControls_Everywhere:"Cualquier lugar",ktxtCabinClassTerm_Economy:"Turista",ktxtCabinClassTerm_PremiumEconomy:"Turista superior",ktxtCabinClassTerm_Business:"Business",ktxtCabinClassTerm_First:"Primera",ktxtTripPlanning_RecentSearchesTitle:"Búsquedas recientes",ktxtTripPlanning_RecentSearchesEmptyContainerBlurb:"Tus búsquedas recientes se guardarán aquí y podrás acceder a ellas cuando quieras. ¡Comienza tu búsqueda aquí abajo!",ktxtTripPlanning_RecentSearchesLinkClearAll:"Eliminar todas las búsquedas recientes",ktxtTripPlanning_RecentSearchesLinkTurnOn:"Activar búsquedas recientes",ktxtTripPlanning_RecentSearchesLinkTurnOff:"Desactivar búsquedas recientes",ktxtSearchControls_Search:"Buscar",ktxtLoading:"Cargando...",ktxtFooterLangFlightsFrom_To:"",ktxtTripPlanning_FailureGetRecentSearches:"No hemos podido recuperar tus búsquedas recientes. Vuelve a intentarlo en unos momentos.",ktxtTripPlanning_FailureDeleteRecentSearchItem:"No hemos podido eliminar esa búsqueda reciente. Vuelve a intentarlo en unos momentos.",ktxtTripPlanning_FailureClearRecentSearches:"No hemos podido eliminar todas tus búsquedas recientes. Vuelve a intentarlo en unos momentos.",ktxtTripPlanning_RecentSearchesConfirmClearAll:"¿Estás seguro de que quieres borrar todas tus búsquedas recientes?",ktxtTripPlanning_ClearAllCards:"Borrar todo",ktxtTripPlanning_RecentSearchesConfirmTurnOff:"¿Estás seguro de que quieres desactivar tus búsquedas recientes? Tu historial reciente habrá desaparecido.",ktxtTripPlanning_TurnOffPriceAlerts:"Desactivar",ktxtTripPlanning_TurnOnPriceAlerts:"Activar",ktxtTripPlanning_Cancel:"Cancelar",ktxtTripPlanning_LabelFrom:"DESDE",ktxtTripPlanning_LabelTo:"A",ktxtTripPlanning_LabelDriversAge:"EDAD DEL CONDUCTOR",ktxtTripPlanning_LabelDropOff:"ENTREGA",ktxtTripPlanning_LabelPickup:"RECOGIDA",ktxtTripPlanning_LabelWhere:"DONDE",ktxtTripPlanning_LabelGuests:"HUÉSPEDES",ktxtTripPlanning_LabelRooms:"HABITACIONES",ktxtTripPlanning_Anytime:"cualquiera",ktxtTripPlanning_TurnOnRecentSearchesBlurb:"¡Guarda tus búsquedas recientes y consúltalas cuando quieras!",ktxtTripPlanning_FlightSearchTitle:"Vuelos desde @@departure@@ a @@destination@@",ktxtTripPlanning_HotelsSearchTitle:"Hoteles en @@place@@",ktxtTripPlanning_CarHireSearchTitle:"Alquiler de coches en @@place@@",ktxtAdults:"Adultos",ktxtChildren:"Niños",ktxtInfants:"Bebés",ktxtClose_LowerCase:"cerrar",ktxt_close:"Cerrar",ktxtDayView_Filters_Depart:"Ida",ktxtDayView_Filters_Return:"Regreso",ktxtTripPlanning_Pickup:"Recogida",ktxtTripPlanning_DropOff:"Entrega",ktxtTripPlanning_Previous:"Anterior",ktxtTripPlanning_Next:"Siguiente",ktxtTripPlanning_MyDestinationsTitle:"Mis destinos",ktxtTripPlanning_WishlistTitle:"Lista de deseos",ktxtTripPlanning_ShortlistBannerHeader:"Todos tus planes en el mismo sitio",ktxtTripPlanning_ShortlistBannerSubheader:"Selecciona, compara, reserva",ktxtTripPlanning_ShortlistCreateTripButton:"Crear viaje",ktxtTripPlanning_ShortlistEmptyHeader:"No hay mucho que ver aquí; es mejor que comiences a planificar tu próximo viaje.",ktxtTripPlanning_ShortlistEmptyListBook:"Haz la reserva cuando estés listo",ktxtTripPlanning_ShortlistEmptyListRevisit:"Revisa y compara tus opciones más tarde",ktxtTripPlanning_ShortlistEmptyListShortlist:"Selecciona cualquier vuelo y hotel a partir de los resultados de tu búsqueda",ktxtTripPlanning_ShortlistEmptySummary:"Comienza a planificar tu viaje ahora.",ktxtTripPlanning_ShortlistLink:"Selección previa del viaje",ktxtUserAccount_Login:"Iniciar sesión",ktxtUserAccount_Account:"Cuenta",ktxtUserAccount_Register:"Regístrate",ktxtUserAccount_Logout:"Cierra la sesión",ktxtUserAccount_LogoutWithEmail:"Cerrar sesión (@@email@@)",ktxtUserAccount_or:"o",ktxtUserAccount_RegisterOrLoginText:"Regístrate en Skyscanner para sacarle el máximo provecho a tus búsquedas recientes",ktxtUserAccount_LogInOrRegister:"Iniciar sesión o registrarse",ktxtUserAccount_LoginRegister:"Iniciar sesión/registrarse",ktxtPriceAlerts_SorryAnErrorHasOccured:"Lo sentimos, ha ocurrido un error",ktxtTripPlanning_FailureMigrateSearchHistory:"No hemos podido actualizar tus búsquedas recientes. Por favor, vuelve a intentarlo de aquí a un momento.",ktxtPriceAlerts_LogInOrRegister:"Inicia sesión o regístrate para crear una alerta de precio para @@destination@@",ktxtPriceAlerts_LogInHeader:"Inicia sesión para crear una alerta de precios",ktxtPriceAlerts_CreateSummary:"Cada día te enviamos un informe detallado con la actualización de los mejores precios para los viajes que has seleccionado. Puedes cancelar tu suscripción en cualquier momento.",ktxtPriceAlerts_SuccessSummary:"Se ha creado tu alerta de precios.",ktxtPriceAlerts_CreatingHeader:"Creando...",ktxtPriceAlerts_CreatingSummary:"Estamos añadiendo tu alerta",ktxtPriceAlerts_FailureHeader:"Perdona, se ha producido un error",ktxtPriceAlerts_FailureSummary:"En este momento no podemos crear tu alerta de precios. Por favor, vuelve a intentarlo más tarde.",ktxtPriceAlerts_AlertLimitReached:"Ya has alcanzado el número máximo de alertas de precios. Borra algunas para poder añadir nuevas.",ktxtPriceAlerts_Thanks:"¡Gracias!",ktxtPriceAlerts_TooManyAlerts:"Demasiadas alertas",ktxtRecentSearches_MenuClearAll:"Borrar todo",ktxtRecentSearches_MenuTurnOff:"Desactivar",ktxtRecentSearches_MenuClose:"Cerrar"},b=new Skyscanner.Common.Translate;b.add(a)}();;Skyscanner.Common.Helpers.TripPlanningConstants={toggleContainerEvent:"tripplanning-toggle-container",historyMigrateEvent:"tripplanning-history-migrate",historyMigrated:"tripplanning-history-migrated",historyReceived:"tripplanning-history-received",triggerContainerDelete:"tripplanning-trigger-container-delete",containerDeleted:"tripplanning-container-deleted",triggerHistoryItemDelete:"tripplanning-trigger-history-item-delete",historyItemDeleted:"tripplanning-history-item-deleted",requestFailed:"tripplanning-request-failed",containerModelChanged:"tripplanning-container-model-changed",carouselShowPrevious:"tripplanning-carousel-show-previous",carouselShowNext:"tripplanning-carousel-show-next",turnOffHistory:"turn-off-history",turnOnHistory:"turn-on-history",confirmationDialogCanceled:"confirmation-dialog-canceled",turnOffConfirmed:"turn-off-confirmed",trackItemByRoute:"track-item-by-route",userPreferencesCookieName:"sspref",authenticationHistoryItemRegister:"authentication-history-item-register",authenticationHistoryItemLogin:"authentication-history-item-login",myTripsOpened:"trip-shortlist-opened",recentSearchesOpened:"recent-searches-opened"};;Skyscanner.Common.ConfirmationDialogView=Backbone.View.extend({template:_.template($("#confirmation-dialog-template").html()),el:$("#confirmation-dialog"),render:function(){this.$el.html(this.template(this.model)),this.displayConfirmationDialog()},events:{"click #confirmation-dialog-apply":"applyConfirmationDialog","click #confirmation-dialog-cancel":"closeConfirmationDialog","click .close":"closeConfirmationDialog","click #confirmation-dialog-container":"closeConfirmationDialog"},applyConfirmationDialog:function(){this.model.ApplyEvent(),this.closeConfirmationDialog()},closeConfirmationDialog:function(){this.$el.addClass("hidden")},displayConfirmationDialog:function(){this.$el.removeClass("hidden")}}),Skyscanner.Common.ConfirmationDialogModel=Backbone.Model.extend({defaults:{Prompt:"",Image:"",ImageAlt:"",ApplyLabel:"",ApplyEvent:function(){}}}),"undefined"==typeof Skyscanner.ConfirmationDialog&&(Skyscanner.ConfirmationDialog=new Skyscanner.Common.ConfirmationDialogView);;if("undefined"==typeof Skyscanner&&(Skyscanner={}),"undefined"==typeof Skyscanner.Auth&&(Skyscanner.Auth={}),"undefined"==typeof Skyscanner.Common&&(Skyscanner.Common={}),"undefined"==typeof Skyscanner.Data&&(Skyscanner.Data={}),"undefined"==typeof Skyscanner.Auth.Base&&(Skyscanner.Auth.Base={}),"undefined"==typeof Skyscanner.Auth.Base.Password&&(Skyscanner.Auth.Base.Password={}),"undefined"==typeof Skyscanner.Auth.Login&&(Skyscanner.Auth.Login={}),"undefined"==typeof Skyscanner.Auth.Login.Weibo&&(Skyscanner.Auth.Login.Weibo={}),"undefined"==typeof Skyscanner.Auth.Login.YahooJapan&&(Skyscanner.Auth.Login.YahooJapan={}),"undefined"==typeof Skyscanner.Auth.Login.Facebook&&(Skyscanner.Auth.Login.Facebook={}),"undefined"==typeof Skyscanner.Auth.Login.Google&&(Skyscanner.Auth.Login.Google={}),"undefined"==typeof Skyscanner.Auth.Login.VKontakte&&(Skyscanner.Auth.Login.VKontakte={}),"undefined"==typeof Skyscanner.Auth.Login.LinkedIn&&(Skyscanner.Auth.Login.LinkedIn={}),"undefined"==typeof Skyscanner.Auth.Login.Skyscanner&&(Skyscanner.Auth.Login.Skyscanner={}),"undefined"==typeof Skyscanner.Auth.Login.Info&&(Skyscanner.Auth.Login.Info={}),"undefined"==typeof Skyscanner.Auth.LoginResponse&&(Skyscanner.Auth.LoginResponse={}),"undefined"==typeof Skyscanner.Auth.LoginResponse.Weibo&&(Skyscanner.Auth.LoginResponse.Weibo={}),"undefined"==typeof Skyscanner.Auth.LoginResponse.YahooJapan&&(Skyscanner.Auth.LoginResponse.YahooJapan={}),"undefined"==typeof Skyscanner.Auth.LoginResponse.VKontakte&&(Skyscanner.Auth.LoginResponse.VKontakte={}),"undefined"==typeof Skyscanner.Auth.Registration&&(Skyscanner.Auth.Registration={}),"undefined"==typeof Skyscanner.Auth.CookiesEnabled&&(Skyscanner.Auth.CookiesEnabled={}),"undefined"==typeof Skyscanner.Auth.ForgetPassword&&(Skyscanner.Auth.ForgetPassword={}),"undefined"==typeof Skyscanner.Auth.ChangeEmail&&(Skyscanner.Auth.ChangeEmail={}),"undefined"==typeof Skyscanner.Auth.ChangePassword&&(Skyscanner.Auth.ChangePassword={}),"undefined"==typeof Skyscanner.Auth.ResetPassword&&(Skyscanner.Auth.ResetPassword={}),"undefined"==typeof Skyscanner.Auth.ResendConfirmation&&(Skyscanner.Auth.ResendConfirmation={}),"undefined"==typeof Skyscanner.Auth.PriceAlerts&&(Skyscanner.Auth.PriceAlerts={}),"undefined"==typeof Skyscanner.Auth.PriceAlerts.Cancellation&&(Skyscanner.Auth.PriceAlerts.Cancellation={}),"undefined"==typeof Skyscanner.Auth.PriceAlerts.Item&&(Skyscanner.Auth.PriceAlerts.Item={}),"undefined"==typeof Skyscanner.Auth.PriceAlerts.Create&&(Skyscanner.Auth.PriceAlerts.Create={}),"undefined"==typeof Skyscanner.Auth.PriceAlerts.ActivateAccount&&(Skyscanner.Auth.PriceAlerts.ActivateAccount={}),"undefined"==typeof Skyscanner.Auth.PriceAlerts.AccountActivated&&(Skyscanner.Auth.PriceAlerts.AccountActivated={}),"undefined"==typeof Skyscanner.Auth.PriceAlerts.AccountConfirmed&&(Skyscanner.Auth.PriceAlerts.AccountConfirmed={}),"undefined"==typeof Skyscanner.Translations&&(Skyscanner.Translations={}),"undefined"==typeof Skyscanner.Autosuggest&&(Skyscanner.Autosuggest={}),"undefined"==typeof Skyscanner.Auth.Manage&&(Skyscanner.Auth.Manage={}),"undefined"==typeof Skyscanner.Auth.Manage.Password&&(Skyscanner.Auth.Manage.Password={}),"undefined"==typeof Skyscanner.Auth.Manage.Email&&(Skyscanner.Auth.Manage.Email={}),"undefined"==typeof Skyscanner.Auth.Manage.User&&(Skyscanner.Auth.Manage.User={}),"undefined"==typeof Skyscanner.Auth.Manage.UserDetails&&(Skyscanner.Auth.Manage.UserDetails={}),"undefined"==typeof Skyscanner.Auth.ManageAccount&&(Skyscanner.Auth.ManageAccount={}),"undefined"==typeof Skyscanner.Auth.ManageAccount.View&&(Skyscanner.Auth.ManageAccount.View={}),"undefined"==typeof Skyscanner.Auth.ManageAccountMaster&&(Skyscanner.Auth.ManageAccountMaster={}),"undefined"==typeof Skyscanner.Auth.ManageAccountMaster.View&&(Skyscanner.Auth.ManageAccountMaster.View={}),"undefined"==typeof Skyscanner.Auth.ManageAccount.UserDetails&&(Skyscanner.Auth.ManageAccount.UserDetails={}),"undefined"==typeof Skyscanner.Auth.ManageAccount.UserDetails.Model&&(Skyscanner.Auth.ManageAccount.UserDetails.Model={}),"undefined"==typeof Skyscanner.Auth.ManageAccount.UserDetails.View&&(Skyscanner.Auth.ManageAccount.UserDetails.View={}),"undefined"==typeof Skyscanner.Auth.ManageAccount.ChangePassword&&(Skyscanner.Auth.ManageAccount.ChangePassword={}),"undefined"==typeof Skyscanner.Auth.ManageAccount.ChangePassword.Model&&(Skyscanner.Auth.ManageAccount.ChangePassword.Model={}),"undefined"==typeof Skyscanner.Auth.ManageAccount.ChangePassword.View&&(Skyscanner.Auth.ManageAccount.ChangePassword.View={}),"undefined"==typeof Skyscanner.Auth.ManageAccount.Delete&&(Skyscanner.Auth.ManageAccount.Delete={}),"undefined"==typeof Skyscanner.Auth.ManageAccount.Notification&&(Skyscanner.Auth.ManageAccount.Notification={}),"undefined"==typeof Skyscanner.Auth.ManageAccount.Subscriptions&&(Skyscanner.Auth.ManageAccount.Subscriptions={}),"undefined"==typeof Skyscanner.Auth.ManageAccount.SubscriptionCategory&&(Skyscanner.Auth.ManageAccount.SubscriptionCategory={}),"undefined"==typeof Skyscanner.Auth.ForgetPasswordv2&&(Skyscanner.Auth.ForgetPasswordv2={}),"undefined"==typeof Skyscanner.Auth.ResetPasswordv2&&(Skyscanner.Auth.ResetPasswordv2={}),"undefined"==typeof Skyscanner.Auth.PriceAlerts.ActivateAccountv2&&(Skyscanner.Auth.PriceAlerts.ActivateAccountv2={}),"undefined"==typeof Skyscanner.Auth.Notifications&&(Skyscanner.Auth.Notifications={}),"undefined"==typeof Skyscanner.Auth.EmailConfirmation&&(Skyscanner.Auth.EmailConfirmation={}),"undefined"==typeof Skyscanner.Auth.Navigation&&(Skyscanner.Auth.Navigation={}),"undefined"==typeof Skyscanner.Auth.HamburgerMenu&&(Skyscanner.Auth.HamburgerMenu={}),"undefined"==typeof console)var console={log:function(){}};!function(){Skyscanner.Auth.Constants=function(){this.eventOnAuthentication="auth-event-on-authentication",this.eventOnLoginSuccess="auth-event-on-login-success",this.eventOnLoginFailure="auth-event-on-login-failure",this.eventOnLogout="auth-event-on-logout",this.eventOnRegistered="auth-event-on-registered",this.eventGooglePlusSignIn="auth-event-on-google-login",this.eventOnVKontakteLoginSuccess="auth-event-on-vkontakte-login-success",this.eventOnVKontakteLoginFailure="auth-event-on-vkontakte-login-failure",this.eventOnLinkedInLoginSuccess="auth-event-on-linkedin-login-success",this.eventOnLinkedInLoginFailure="auth-event-on-linkedin-login-failure",this.eventOnWeiboLoginSuccess="auth-event-on-weibo-login-success",this.eventOnWeiboLoginFailure="auth-event-on-weibo-login-failure",this.eventOnMixPanelTrack="auth-event-on-mixpanel-track",this.eventOnTrack="auth-event-on-track",this.eventOnYahooJapanLoginSuccess="auth-event-on-yahoojapan-login-success",this.eventOnYahooJapanLoginFailure="auth-event-on-yahoojapan-login-failure",this.widgetLogin="auth-widget-login",this.widgetRegister="auth-widget-register",this.XDMessageDelimiter=";",this.messageLoginSuccess="auth-login-success",this.messageLoginFailure="auth-login-failure",this.messageRegistrationSuccess="auth-registration-success",this.messageRegistrationSuccess="auth-registration-success",this.messageMixPanelTrack="auth-mixpanel-track",this.messageTrack="auth-tracking-event",this.emailRegex=/^(([^\u0101-\uffff<>()[\]\\.,;:\s@\"]+(\.[^\u0101-\uffff<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,this.emailSpaces=/^\s+|\s+$/g,this.maximumEmailLength=175,this.minimumPasswordLength=8,this.maximumPasswordLength=100,this.minimumPasswordFactor=.8,this.emailPrompt="ktxtAccounts_EmailPrompt",this.passwordRegisterPrompt="ktxtAccounts_TooShortPrompt",this.passwordRetypePrompt="ktxtAccounts_PasswordRetypePrompt",this.emailRequired="ktxtAccounts_Validation_EmailRequired",this.emailInvalid="ktxtAccounts_Validation_EmailInvalid",this.emailTooLong="ktxtAccounts_Validation_MaximumEmailLength",this.emailChangeInvalid="ktxtAccounts_Validation_EmailChangeInvalid",this.passwordRequired="ktxtAccounts_Validation_PasswordRequired",this.passwordLength="ktxtAccounts_Validation_PasswordLength",this.passwordTooLong="ktxtAccounts_Validation_MaximumPasswordLength",this.passwordMatchesEmailMessage="ktxtAccounts_Validation_PasswordMatchesEmailAddress",this.passwordsDoNotMatchMessage="ktxtAccounts_Validation_PasswordsDoNotMatchMessage",this.passwordInvalidMessage="ktxtAccounts_ChangePasswordInvalidPassword",this.passwordStrengthLabel="ktxtAccounts_Validation_PasswordStrength_Label",this.passwordStrengthTooShort="ktxtAccounts_Validation_PasswordStrength_TooShort",this.passwordStrength00="ktxtAccounts_Validation_PasswordStrength_00",this.passwordStrength50="ktxtAccounts_Validation_PasswordStrength_50",this.passwordStrength75="ktxtAccounts_Validation_PasswordStrength_75",this.authResponseCode200="ktxtAccounts_AuthResponseCode_200",this.authResponseCode201="ktxtAccounts_AuthResponseCode_201",this.authResponseCode202="ktxtAccounts_AuthResponseCode_202",this.authResponseCodeSuccessDefault="ktxtAccounts_AuthResponseCode_SuccessDefault",this.authResponseCode400="ktxtAccounts_AuthResponseCode_400",this.authResponseCode401="ktxtAccounts_AuthResponseCode_401",this.authResponseCodeSocial401="ktxtAccounts_AuthResponseCode_Social401",this.authResponseCode403="ktxtAccounts_AuthResponseCode_403",this.authResponseCode403IpBlocked="ktxtAccounts_AuthResponseCode_IpBlocked403",this.authResponseCode409="ktxtAccounts_AuthResponseCode_409",this.authResponseCodeErrorDefault="ktxtAccounts_AuthResponseCode_ErrorDefault",this.authResponseCodeErrorCancel="ktxtAccounts_AuthResponseCode_ErrorCancel"}}(),function(){Skyscanner.Auth.State=function(){this.loggedIn="auth-state-loggedIn",this.loggedOut="auth-state-loggedOut",this.unverified="auth-state-unverified"}}(),Skyscanner.Auth.Constants=new Skyscanner.Auth.Constants,Skyscanner.Auth.State=new Skyscanner.Auth.State,function(){String.prototype.replaceTokens=function(){for(var a=this,b=arguments[0],c=0;c<b.length;c++){var d=b[c][0],e=b[c][1];a=a.replace(d,e)}return a},String.prototype.toDate=function(){var a=this.substring(0,10).split("-");return new Date(a[0],a[1]-1,a[2])}}(),function(){Skyscanner.Auth.Translate=function(){};var a=window.jQuery;Skyscanner.Auth.Translate.prototype.translateRemoveInflections=function(a){var b=this.translate(a);return""!==b&&b.indexOf("|inf")>-1&&(b=b.replace(/(\|inf:\w+@)/g,"@")),b},Skyscanner.Auth.Translate.prototype.translate=function(a){return Skyscanner.Translations.hasOwnProperty(a)?unescape(Skyscanner.Translations[a]):a},Skyscanner.Auth.Translate.prototype.__loadTranslationsFromUrl=function(b,c){a.ajax({url:b,dataType:"json"}).done(function(a){c(a)})},Skyscanner.Auth.Translate.prototype.add=function(a){for(var b in a)a.hasOwnProperty(b)&&(Skyscanner.Translations[b]=a[b])},Skyscanner.Auth.Translate.prototype.enqueue=function(a,b){this.__loadTranslationsFromUrl(a,function(a){this.add(a.translations),b&&b()})}}(),function(){Skyscanner.Auth.XD=function(){var a,b,c,d=1,e={validateOrigin:!0,intervalTime:100},f=function(a){for(var b in a)e[b]=a[b]},g=function(){return window.postMessage},h=function(a,b,c){if(b)if(c=c||parent,g())c.postMessage(a,b.replace(/([^:]+:\/\/[^\/]+).*/,"$1"));else{var e=b.replace(/#.*$/,"")+"#"+ +new Date+d++ +"&"+a;c.location=e}},i=function(d,f){g()?(d&&(c=function(a){return e.validateOrigin&&("string"==typeof f&&a.origin!==f||"[object Function]"===Object.prototype.toString.call(f)&&f(a.origin)===!1)?!1:void d(a)}),window.addEventListener?window[d?"addEventListener":"removeEventListener"]("message",c,!1):window[d?"attachEvent":"detachEvent"]("onmessage",c)):(a&&clearInterval(a),a=null,d&&(a=setInterval(function(){var a=document.location.hash,c=/^#?\d+&/;a!==b&&c.test(a)&&(b=a,d({data:a.replace(c,"")}))},e.intervalTime)))};return{configure:f,postMessage:h,receiveMessage:i}}}(),function(){var a;a=function(){function a(){this._cache={}}return a.prototype.publish=function(a,b,c){var d,e;for(e=this._cache[a],d=e?e.length:0;d--;)e[d].apply(c||this,[b]);return this},a.prototype.subscribe=function(a,b){return this._cache[a]||(this._cache[a]=[]),this._cache[a].push(b),[a,b]},a.prototype.unsubscribe=function(a){var b,c;for(c=this._cache[a[0]],b=c?c.length:0;b--;)c[b]===a[1]&&c.splice(b,1);return this},a.prototype.flush=function(){return this._cache={}},a}(),void 0==Skyscanner.Auth.observer&&(Skyscanner.Auth.observer=new a)}.call(this),function(){Skyscanner.Auth.Cookie=function(d,e){this.getName=function(){return d},this.isSingleValueCookie=function(){return e};var f=document.cookie;if(""!=f){for(var g=f.split(";"),h=null,i=0;i<g.length;i++)if(g[i].substring(0,this.getName().length+1)==this.getName()+"="||g[i].substring(0,this.getName().length+2)==" "+this.getName()+"="){h=g[i];break}if(h){var j=" "==h.substring(0,1)?h.substring(this.getName().length+2):h.substring(this.getName().length+1);if(this.isSingleValueCookie())this[c]=j;else{for(var k=j.split(a),i=0;i<k.length;i++)k[i]=k[i].split(b);for(var i=0;i<k.length;i++)this[k[i][0]]=decodeURIComponent(k[i][1])}}}};var a="&",b=":::",c="_value",d=function(d,e){var f="";if(e)f=encodeURIComponent(d[c]);else for(var g in d)"function"!=typeof d[g]&&g!=c&&(""!=f&&(f+=a),f+=g+b+encodeURIComponent(d[g]));return f};Skyscanner.Auth.Cookie.enabled=function(){if(void 0!=navigator.cookieEnabled)return navigator.cookieEnabled;if(void 0!=Cookie.enabled.cache)return Cookie.enabled.cache;document.cookie="testcookie=test; max-age=10000";var a=document.cookie;return-1==a.indexOf("testcookie=test")?Cookie.enabled.cache=!1:(document.cookie="testcookie=test; max-age=0",Cookie.enabled.cache=!0)},Skyscanner.Auth.Cookie.prototype={store:function(a,b,c,e){var f=d(this,this.isSingleValueCookie());b=b||"/";var g=this.getName()+"="+f;if(a||0==a){g+="; max-age="+3600*a;var h=new Date;h.setHours(h.getHours()+a),g+="; expires="+h.toGMTString()}g+="; path="+b,c&&(g+="; domain="+c),e&&(g+="; secure"),document.cookie=g},storeExact:function(a){var b=d(this,this.isSingleValueCookie()),c=this.getName()+"="+b;c+="; expires="+a.toGMTString(),c+="; path=/",document.cookie=c},_clear:function(a,b,c,e){var f=d(this,this.isSingleValueCookie()),g=this.getName()+"="+f;g+="; max-age=0";var h=new Date;h.setHours(h.getHours()+a),g+="; expires="+h.toGMTString(),b&&(g+="; path=/"),c&&(g+='; domain=""'),e&&(g+="; secure"),document.cookie=g},setSingleCookieValue:function(a){this[c]=a},getSingleCookieValue:function(){return this[c]},remove:function(a,b,c){for(var d in this)"function"!=typeof this[d]&&delete this[d];this._clear(0,a,b,c)}}}(),function(){Skyscanner.Auth.GATracking=function(){var a=!0,b=1,c=function(a){if(null!=a){var b=a.trackOnce?f:Skyscanner.Auth.GATracking.trackEvent;b(a.category,a.action,a.label,a.value)}},d=function(a,b,c,d,e){try{h(a,b,c,d),i(a,b,c,d)}catch(f){l("Tracking.trackEvent",f)}e&&setTimeout(function(){document.location=e},200)},e=[],f=function(a,b,c,d){var f=a+b+c+d;-1==e.indexOf(f)&&(e.push(f),Skyscanner.Auth.GATracking.trackEvent(a,b,c,d))},g=function(a,b,c){var e=Skyscanner.Common.stateManager.getPageType();d(e,a,b,c)},h=function(b,c,d,e){try{""===e&&(e=null),window.gaSt&&_gaq.push(["gaSt._trackEvent",b,c,d,e,a])}catch(f){}},i=function(a,c,d,e){""===e&&(e=null),ga("send","event",a,c,d,{eventValue:e,nonInteraction:b})},j=function(a){return ga&&ga(function(b){window.linker=window.linker||new window.gaplugins.Linker(b),a=window.linker.decorate(a)}),a},k=function(a){try{_gaq&&_gaq.push(["_trackPageview",a]),ga&&ga("send","pageview",a)}catch(b){l("Tracking.trackPageview",b)}},l=function(a,b){};return{trackEvent:d,handleAnalyticsEvents:c,trackEventWithCurrentPageName:g,trackPageview:k,universalAnalyticsUrlDecorate:j}}()}(),function(){Skyscanner.Auth.Jsonp=function(){var a={},b=function(a,b,c){c=c||"Skyscanner.Auth.Jsonp.callback";var d=a+b+"?callback="+c,e=document.createElement("script");e.src=d,document.getElementsByTagName("head")[0].appendChild(e)},c=function(b){for(var c in a)a[c](b)},d=function(b,c){a[b]=c},e=function(){return a={}};return{getData:b,callback:c,attachCallback:d,flush:e}},Skyscanner.Auth.Jsonp=new Skyscanner.Auth.Jsonp}(),function(){Skyscanner.Auth.Widget=function(a){var b={accountsDomain:"accounts.test.skyscanner.net",accountsProtocol:"https",iframeId:"accountsFrame",market:"uk",locale:"en",channel:null,campaign:null,preferences:null,sessionid:null,loadImmediately:!1,sendUserIdWithLoginSuccessMessage:!1},c=void 0,d=void 0,e="ssauth",f="sspref",g="authcheckedexpiry",h=3,i={},j=Skyscanner.Auth.State.unverified,k=function(a){for(var e in a)b[e]=a[e];c={},d=new Skyscanner.Auth.XD,d.configure({validateOrigin:!0}),d.receiveMessage(w,I()),Skyscanner.Auth.Jsonp.attachCallback("skyscanner-auth",function(a){x(a)}),y(b.loadImmediately)},l=function(){return j},m=function(a){var c="/widgets/login";a===Skyscanner.Auth.Constants.widgetRegister&&(c="/widgets/registration");var d=G(c),e=document.getElementById(b.iframeId);e.setAttribute("src",d)},n=function(a,b,d){c[a]={Topic:b,Callback:d}},o=function(){Skyscanner.Auth.Jsonp.getData(I(),"/logout","Skyscanner.Auth.Jsonp.callback"),p(),q(),F(Skyscanner.Auth.Constants.eventOnLogout,{})},p=function(){var a=new Skyscanner.Auth.Cookie(e,!0);a.remove("/")},q=function(){var a=new Skyscanner.Auth.Cookie(f);a[g]=(new Date).getTime(),a.storeExact(E())},r=function(){var a=G("/Manage"),c=G("/PriceAlerts"),d=G("/Subscriptions"),e={accountsDomain:b.accountsDomain,accountsProtocol:b.accountsProtocol,iframeId:b.iframeId,settingsURl:a,priceAlertUrl:c,subscriptionsUrl:d,market:b.market,locale:b.locale,channel:b.channel,campaign:b.campaign};return e},s=function(a,c){b[a]=c},t=function(){return i},u=function(a){a?v():window.addEventListener?window.addEventListener("DOMContentLoaded",v,!1):window.attachEvent("onload",v)},v=function(){Skyscanner.Auth.Jsonp.getData(I(),"/accessToken","Skyscanner.Auth.Jsonp.callback")},w=function(a){if(0==a.data.indexOf(Skyscanner.Auth.Constants.messageLoginSuccess)){var b=J(a.data,1);F(Skyscanner.Auth.Constants.eventOnLoginSuccess,{UserId:b}),u(!0)}else if(a.data===Skyscanner.Auth.Constants.messageLoginFailure)F(Skyscanner.Auth.Constants.eventOnLoginFailure,{});else if(0==a.data.indexOf(Skyscanner.Auth.Constants.messageRegistrationSuccess)){var b=J(a.data,1);F(Skyscanner.Auth.Constants.eventOnRegistered,{UserId:b})}else if(0==a.data.indexOf(Skyscanner.Auth.Constants.messageMixPanelTrack)){var c=J(a.data,1);c&&F(Skyscanner.Auth.Constants.eventOnMixPanelTrack,{data:JSON.parse(c)})}else if(0==a.data.indexOf(Skyscanner.Auth.Constants.messageTrack)){var c=J(a.data,1);c&&F(Skyscanner.Auth.Constants.eventOnTrack,{data:JSON.parse(c)})}},x=function(a){if(void 0===a||void 0===a.token||null==a.token)return j=Skyscanner.Auth.State.loggedOut,void p();var b=new Skyscanner.Auth.Cookie(e,!0);b.setSingleCookieValue(a.token.AccessToken);var c=new Date(a.token.UnixExpiry);b.storeExact(c),i.email=a.token.Email,i.userId=a.token.UserId,j=Skyscanner.Auth.State.loggedIn,F(Skyscanner.Auth.Constants.eventOnAuthentication,a)},y=function(a){var b=new Skyscanner.Auth.Cookie(e,!0),c=new Skyscanner.Auth.Cookie(f);return void 0!==b.getSingleCookieValue()||z(c)?void u(a):void(j=Skyscanner.Auth.State.loggedOut)},z=function(a){var b=a[g];return void 0===b||A(b)?(B(a),!0):!1},A=function(a){var b=(new Date).getTime();return b>=a},B=function(a){a[g]=C(),a.storeExact(E())},C=function(){var a=new Date;return D(a,h).getTime()},D=function(a,b){return new Date(a.getTime()+6e4*b)},E=function(){var a=new Date;return a.setDate(a.getDate()+365),a},F=function(a,b){var d={type:a,data:b};for(var e in c){var f=c[e];f.Topic===a&&f.Callback(d)}},G=function(a){var c=Math.floor(1e4*Math.random()+1),d=null==b.channel?"":"&channel="+b.channel,e=null==b.campaign?"":"&campaign="+b.campaign,f=null==b.sessionid?"":"&sssessionid="+b.sessionid,g=null==b.preferences?"":"&preferences="+b.preferences,h=b.sendUserIdWithLoginSuccessMessage?"&sendUserId=true":"";return H()+a+"?"+c+d+e+g+f+h+"#"+document.location},H=function(){return I()+"/"+b.market+"/"+b.locale},I=function(){return b.accountsProtocol+"://"+b.accountsDomain},J=function(a,b){var c=a.split(Skyscanner.Auth.Constants.XDMessageDelimiter),d=null;return c.length>b&&(d=c[b]),d},K=function(a,c){b.channel=a,b.campaign=c},L=function(a){F("auth-mixpanel-track",a)};return k(a),{getUserDetails:t,getSettings:r,setProperty:s,showWidget:m,subscribe:n,logout:o,getState:l,setChannelAndCampaign:K,getAccessToken:v,trackMixPanelEvent:L}}}();;!function(){Skyscanner.Auth.LocalStorageKeyLoginService="login-service-client-state",Skyscanner.Auth.login=function(){var a=Math.random().toString(36).substr(2,6);Skyscanner.Api.localStorage.init("web").trySetValue(Skyscanner.Auth.LocalStorageKeyLoginService,a);var b=Skyscanner.config.remoteConfiguration.TravellerIdentity;b&&b.loginServiceAuthorizeUrl&&b.loginServiceClientId&&Skyscanner.Common.Helpers.Url.setLocationHref(b.loginServiceAuthorizeUrl+"?redirect_uri="+Skyscanner.Common.Helpers.Url.getLocationHref()+"&client_id="+b.loginServiceClientId+"&state="+a+"&locale="+Skyscanner.ComponentContext.locale+"&market="+Skyscanner.ComponentContext.market)},Skyscanner.Auth.logout=function(){$.ajax({url:Skyscanner.config.auth.accountsProtocol+"://"+Skyscanner.config.auth.accountsDomain+"/logout",dataType:"jsonp",jsonpCallback:"logout",success:function(a){document.cookie="ssauth=; expires="+(new Date).toGMTString()+"; path=/",Skyscanner.Api.user.authWidget=null,Skyscanner.HistoryView.emptyElements(Skyscanner.HistoryView),Skyscanner.Auth.logoutWithLoginService()}})},Skyscanner.Auth.logoutWithLoginService=function(){var a=new Skyscanner.Common.Cookie("access_token");a.remove("/","",!1);var b=Skyscanner.config.remoteConfiguration.TravellerIdentity;b&&b.loginServiceLogoutUrl&&Skyscanner.Common.Helpers.Url.setLocationHref(b.loginServiceLogoutUrl+"?locale="+Skyscanner.ComponentContext.locale+"&market="+Skyscanner.ComponentContext.market)}}();;!function(){"use strict";Skyscanner.Common.AuthenticationModel=Backbone.Model.extend({defaults:{auth:{}},getAuthState:function(){return this.get("auth").getState()},getAuthSettings:function(){return this.get("auth").getSettings()},getAuthUserDetails:function(){return this.get("auth").getUserDetails()},setAuthProperties:function(){var a=this.getCookieValue("preferences"),b=this.getCookieValue("ASP.NET_SessionId");this.get("auth").setProperty("preferences",a),this.get("auth").setProperty("sessionid",b)},setAuthSubscribe:function(a,b,c){this.get("auth").subscribe(a,b,c)},setAuthLogout:function(){this.get("auth").logout()},setAuthWidgetType:function(a){this.get("auth").showWidget(a)},getCookieValue:function(a){try{var b="; "+document.cookie,c=b.split("; "+a+"=");if(2==c.length)return c.pop().split(";").shift()}catch(d){return null}return null}})}();;!function(){"use strict";Skyscanner.Common.AuthenticationView=Backbone.View.extend({translator:new Skyscanner.Common.Translate,initialize:function(){this.maxEmailLength=30,this.model.bind("change",this.render,this),this.confirmationDialog=Skyscanner.ConfirmationDialog,this.createOverlay();var a=this;this.model.setAuthSubscribe("auth-callback",Skyscanner.Auth.Constants.eventOnAuthentication,function(b){a.migrateUserHistory(),a.render(b)}),this.model.setAuthSubscribe("on-login-success",Skyscanner.Auth.Constants.eventOnLoginSuccess,function(a){Skyscanner.Common.GATracking.setDimension("dimension9",a.data.UserId),Skyscanner.Common.GATracking.trackEvent("authentication","login","success"),Skyscanner.Common.observer.publish("auth-user-logged-in")}),this.model.setAuthSubscribe("on-mixpanel-track",Skyscanner.Auth.Constants.eventOnMixPanelTrack,function(a){Skyscanner.Common.observer.publish("tracking-event",{mixpanel:[a.data.data]})}),this.model.setAuthSubscribe("on-track",Skyscanner.Auth.Constants.eventOnTrack,function(a){Skyscanner.Common.observer.publish("tracking-event",a.data.data)}),this.options.initialiseLoginContainer.length?this.options.initialiseLoginContainer.click(function(b){a.options.initialiseElement&&a.options.initialiseElement.hasClass("login")?a.login(b,!1,"login"):a.account(b)}):this.options.initialiseElement&&this.options.initialiseElement.click(function(b){$(b.currentTarget).hasClass("login")?a.login(b,!1,"login"):a.account(b)}),this.options.initialiseRegistrationElement&&this.options.initialiseRegistrationElement.click(function(b){$(b.currentTarget).hasClass("login")?a.login(b,!1,"register"):a.account(b)}),Skyscanner.Common.observer.subscribe("touch-authentication-link-clicked",function(b){b.loggedIn?a.login(null,!1,"login"):a.logout(null)}),Skyscanner.Common.observer.subscribe("touch-account-settings-link-clicked",function(b){return a.loginBeforeFunctionCall(null,a.manageAccountSettings)}),Skyscanner.Common.observer.subscribe("touch-price-alerts-link-clicked",function(b){return a.loginBeforeFunctionCall(null,a.managePriceAlerts)}),Skyscanner.Common.observer.subscribe("touch-subscriptions-link-clicked",function(b){return a.loginBeforeFunctionCall(null,a.manageAccountSubscriptions)}),Skyscanner.Common.observer.subscribe(Skyscanner.Common.Helpers.TripPlanningConstants.authenticationHistoryItemRegister,function(b){a.register(b)}),Skyscanner.Common.observer.subscribe(Skyscanner.Common.Helpers.TripPlanningConstants.authenticationHistoryItemLogin,function(b){a.login(b,!0)}),Skyscanner.Auth&&(Skyscanner.Auth.logout=a.logoutWithLoginService.bind(a)),this.render()},createOverlay:function(){var a=$('<div id="accounts-overlay">');a.addClass("lightbox"),a.addClass("darkbg"),a.addClass("hide"),$("body").append(a),this.overlaySelector="#accounts-overlay",this.overlay=$(this.overlaySelector)},events:{"click #login-close":"hideLoginRegisterWidget","click #account-close":"hideAccountWidget","click #manage-price-alerts":"managePriceAlerts","click #account-settings":"manageAccountSettings","click #manage-subscriptions":"manageAccountSubscriptions","click #logout":"logout"},loginChecks:0,render:function(a,b){switch(_.assign(this.options,b||{}),this.model.getAuthState()){case Skyscanner.Auth.State.loggedIn:this.userLoggedIn(a);break;case Skyscanner.Auth.State.loggedOut:this.userLoggedOut();break;default:if(this.loginChecks<10){this.loginChecks++;var c=this;window.setTimeout(function(){c.render(a)},1e3)}else this.userLoggedOut()}},loginBeforeFunctionCall:function(a,b){var c=this,d=this.model.getAuthState(),e=d===Skyscanner.Auth.State.loggedOut,f=function(){b.call(c,a,e?"login":"account")};return a&&a.preventDefault(),e?(this.login(a),this.model.setAuthSubscribe("auth-redirect",Skyscanner.Auth.Constants.eventOnAuthentication,f)):f(),!1},userLoggedIn:function(a){var b=(((a||{}).data||{}).token||{}).UserId||void 0;this.renderLoggedInLink(a),Skyscanner.Common.GATracking.setDimension("dimension42","LoggedIn"),b&&Skyscanner.Common.GATracking.setDimension("dimension9",b)},userLoggedOut:function(){this.renderLoggedOutLink(),Skyscanner.Common.GATracking.setDimension("dimension42","LoggedOut")},renderLoggedInLink:function(a){this.hideLoginRegisterWidget(a,!0),this.options.initialiseElement&&(this.options.initialiseElement.removeClass("login").addClass("account global-header_secondary-nav-account"),Skyscanner.config.featureTests&&"b"===Skyscanner.config.featureTests.TRON_MyTravelLinkLoggedIn?this.options.initialiseElement.text("My Travel"):this.options.initialiseElement.text(this.translator.translate("ktxtUserAccount_Account"))),this.options.initialiseTouchElement&&(this.options.initialiseTouchElement.attr("class","logout"),this.options.initialiseTouchElement.text(this.translator.translate("ktxtUserAccount_Logout")));var b=this.model.getAuthUserDetails(),c=this.trimEmail(b.email,this.maxEmailLength);this.setUserEmailText(c,b.email),this.options.initialiseLoginContainer&&this.options.initialiseLoginContainer.removeClass("hidden")},renderLoggedOutLink:function(){this.options.initialiseElement&&(this.options.initialiseElement.removeClass("account").addClass("login global-header_secondary-nav-account"),Skyscanner.config.featureTests&&"b"===Skyscanner.config.featureTests.TRON_MyTravelLinkNotLoggedIn?this.options.initialiseElement.text("My Travel"):this.options.initialiseElement.text(this.translator.translate("ktxtUserAccount_Login"))),this.options.initialiseTouchElement&&(this.options.initialiseTouchElement.attr("class","login"),this.options.initialiseTouchElement.text(this.translator.translate("ktxtUserAccount_LoginRegister"))),this.setUserEmailText("",""),this.options.initialiseLoginContainer&&this.options.initialiseLoginContainer.length&&this.options.initialiseLoginContainer.removeClass("hidden")},setUserEmailText:function(a,b){$("#userEmail").find("h2").text(a),$("#userEmail").find("h2").prop("title",b),a&&this.options.initialiseTouchElement&&this.options.initialiseTouchElement.text(this.translator.translate("ktxtUserAccount_LogoutWithEmail").replace("@@email@@",a))},trimEmail:function(a,b){return a.length>b&&(a=a.substr(0,b-3)+"..."),a},login:function(a,b,c){a&&a.preventDefault(),b||Skyscanner.Common.GATracking.trackEvent("authentication",c||"login","opened"),this.showLoginRegisterWidget(),this.model.setAuthWidgetType(Skyscanner.Auth.Constants.widgetLogin)},register:function(a){a&&a.preventDefault(),this.showLoginRegisterWidget(),this.model.setAuthWidgetType(Skyscanner.Auth.Constants.widgetRegister)},showLoginRegisterWidget:function(){this.resetPreferencesCookieExpiry(),this.adjustBackgroundOverlaySize(),this.model.setAuthProperties(),window.scrollTo(0,0),$("#account-login-widget").removeClass("hide"),Skyscanner.Common.observer.publish("toggle-lightbox-open",{selector:this.overlaySelector}),this.attachOverlayEvent()},hideLoginRegisterWidget:function(a,b){if(!b){var c={mixpanel:[{name:"Account Widget Button Clicked",props:{Action:"Login Close"}}],ga:[{category:"authentication",action:"login",label:"close"}]};Skyscanner.Common.observer.publish("tracking-event",c)}$("#widget-frame").attr("src","about:blank"),$("#account-login-widget").addClass("hide"),Skyscanner.Common.observer.publish("toggle-lightbox-closed",{selector:this.overlaySelector})},account:function(a){a&&a.preventDefault(),Skyscanner.Common.GATracking.trackEvent("authentication","account","opened"),this.resetPreferencesCookieExpiry(),this.adjustBackgroundOverlaySize(),$("#account-settings-widget").removeClass("hide"),Skyscanner.Common.observer.publish("toggle-lightbox-open",{selector:this.overlaySelector}),this.attachOverlayEvent()},managePriceAlerts:function(a,b){var c=this.model.getAuthSettings(),d=c?c.priceAlertUrl:"";return this.manageAccount(a,b,d,"pricealert")},manageAccountSettings:function(a,b){var c=this.model.getAuthSettings(),d=c?c.settingsURl:"";return this.manageAccount(a,b,d,"settings")},manageAccountSubscriptions:function(a,b){var c=this.model.getAuthSettings(),d=c?c.subscriptionsUrl:"";return this.manageAccount(a,b,d,"subscriptions")},manageAccount:function(a,b,c,d){return a&&a.preventDefault(),b=b||"account",Skyscanner.Common.GATracking.trackEvent("authentication",b,d),this.hideAccountWidget(a,!0),"undefined"!=c&&""!=c&&null!=c&&this.redirect(c),!1},redirect:function(a){document.location=a},logout:function(a){return a&&a.preventDefault(),Skyscanner.Common.GATracking.trackEvent("authentication","account","logout"),Skyscanner.Common.observer.publish("auth-user-logged-out"),this.model.setAuthLogout(),this.hideAccountWidget(a),this.userLoggedOut(),!1},logoutWithLoginService:function(){if((Skyscanner.config.featureTests&&"b"===Skyscanner.config.featureTests.TID_LoginService)===!0){var a=new Skyscanner.Common.Cookie("access_token");a.remove("/","",!1),Skyscanner.config.remoteConfiguration.TravellerIdentity&&Skyscanner.config.remoteConfiguration.TravellerIdentity.loginServiceLogoutUrl&&this.navigate(Skyscanner.config.remoteConfiguration.TravellerIdentity.loginServiceLogoutUrl)}},navigate:function(a){window.location.href=a},hideAccountWidget:function(a,b){if(a&&a.preventDefault(),!b){var c={mixpanel:[{name:"Account Widget Button Clicked",props:{Action:"Account Close"}}],ga:[{category:"authentication",action:"account",label:"close"}]};Skyscanner.Common.observer.publish("tracking-event",c)}$("#account-settings-widget").addClass("hide"),Skyscanner.Common.observer.publish("toggle-lightbox-closed",{selector:this.overlaySelector})},adjustBackgroundOverlaySize:function(){var a=$("#overlay");a.height(0),a.width(0),a.height($(document).height()),a.width($(document).width())},hideOverlay:function(a){this.hideLoginRegisterWidget(a,!0),this.hideAccountWidget(a,!0),this.overlay.unbind()},attachOverlayEvent:function(){var a=this;this.overlay.click(function(b){a.hideOverlay(b)})},resetPreferencesCookieExpiry:function(){var a=new Skyscanner.Auth.Cookie("sspref");a.authcheckedexpiry=(new Date).getTime(),a.storeExact(this.getPreferencesCookieExpiry())},getPreferencesCookieExpiry:function(){var a=new Date;return a.setDate(a.getDate()+365),a},migrateUserHistory:function(){var a=this;$.ajax({type:"POST",url:"/userorchestration/usersearchhistory/migrate",data:{},success:function(){Skyscanner.Common.GATracking.trackEvent("socialsearch","historymigrated","confirmed")},error:function(){var b=a.translator.translate("ktxtTripPlanning_FailureGetRecentSearches");$("#history-response").html(b)},dataType:"json"})}})}();;!function(){addLoadEventHandler(function(){if(window.authenticationView,Skyscanner.config.featureTests&&"b"===Skyscanner.config.featureTests.TID_LoginService){var a=Skyscanner.config.auth.accountsProtocol+"://"+Skyscanner.config.auth.accountsDomain,b=a+"/"+Skyscanner.market+"/"+Skyscanner.cultureName(),c=new Skyscanner.Common.Translate,d="BEARER",e=Skyscanner.Common.Helpers.Url.getHashParamFromUrl(),f=Skyscanner.Api.localStorage.init("web").tryGetValue(Skyscanner.Auth.LocalStorageKeyLoginService);if(Skyscanner.Common.Helpers.Url.removeHash(),e.state===f&&e.access_token&&""!==e.access_token&&e.expires_in&&""!==e.expires_in&&e.token_type===d){var g=new Skyscanner.Common.Cookie("access_token");g.value=e.access_token,g.store(e.expires_in/60/60,"/","",!1)}Skyscanner.Common.observer.subscribe("utid-available",function(){var a=c.translate("ktxtUserAccount_Account"),d=c.translate("ktxtUserAccount_Login"),e=c.translate("ktxtUserAccount_LoginRegister"),f=c.translate("ktxtUserAccount_Logout"),g=Skyscanner.Api.traveller.isLoggedIn(),h=Skyscanner.Api.traveller.getUtid();$(".account-controls-init").removeClass("hidden").text(g?a:d),Skyscanner.Common.observer.subscribe("touch-authentication-link-clicked",function(a){return a.loggedIn?Skyscanner.Auth.logout():Skyscanner.Auth.login()}),Skyscanner.Common.observer.subscribe("hamburger-menu-loaded",function(){$("#touch-authentication-link").addClass("account-controls-init").text(g?f:e),$("#touch-account-settings").attr("href",b+"/manage"),$("#touch-manage-price-alerts").attr("href",b+"/pricealerts"),$("#touch-manage-subscriptions").attr("href",b+"/subscriptions")}),Skyscanner.Common.GATracking.setDimension("dimension42",g?"LoggedIn":"LoggedOut"),Skyscanner.Common.GATracking.setDimension("dimension9",h),$("body").on("click",".account-controls-init",g?function(){$.ajax({url:Skyscanner.config.remoteConfiguration.TravellerOnboarding.accountControlsUrl+"account-controls.min."+Skyscanner.cultureName().toLowerCase()+".js",cache:!0,dataType:"script"})}:Skyscanner.Auth.login);var i={details:{userId:g?h:null},getUserDetails:function(){return this.details}};Skyscanner.Common.observer.publish("api-auth-widget-loaded",i)})}else{Skyscanner.Auth.widget=new Skyscanner.Auth.Widget({accountsDomain:Skyscanner.config.auth.accountsDomain,accountsProtocol:Skyscanner.config.auth.accountsProtocol,iframeId:"widget-frame",market:Skyscanner.config.auth.market,locale:Skyscanner.config.auth.locale,sendUserIdWithLoginSuccessMessage:!0,loadImmediately:!0});var h=null,i=[];Skyscanner.config.auth.authEnabled&&(h=$("#authentication-link")),Skyscanner.config.auth.dynamicLoginLink&&(i=$("#login-button-container")),authenticationView=new Skyscanner.Common.AuthenticationView({model:new Skyscanner.Common.AuthenticationModel({auth:Skyscanner.Auth.widget}),initialiseElement:h,initialiseRegistrationElement:$("#registration-link"),initialiseLoginContainer:i,registrationToggle:$("#registration-toggle"),initialiseTouchElement:$("#touch-authentication-link"),touchWidgets:$("#touch-authentication-widgets-container"),el:$("#authentication-widgets")}),Skyscanner.Auth.widget.subscribe("auth-callback-local-storage-init",Skyscanner.Auth.Constants.eventOnAuthentication,function(a){Skyscanner.Common.observer.publish("api-auth-widget-loaded",Skyscanner.Auth.widget)}),Skyscanner.Common.observer.subscribe("hamburger-menu-loaded",function(){authenticationView.render(null,{initialiseTouchElement:$("#touch-authentication-link")})})}})}();;!function(){if(Skyscanner.config.onboarding.showOnboardingMessenger){var a=Skyscanner.Api.localStorage.init("web");a.trySetValue("feature-detect","feature-detect");var b=a.tryGetValue("feature-detect");"feature-detect"==b&&(a.trySetValue("feature-detect",""),$.ajax({url:Skyscanner.config.onboarding.onboardingMessengerUrl,cache:!0,dataType:"script",success:function(){OnboardingMessenger.observer=Skyscanner.Common.observer}}))}}();;!function(){Skyscanner.config.newsletter.enabled&&addLoadEventHandler(function(){setTimeout(function(){$.ajax({url:Skyscanner.config.newsletter.js,cache:!0,dataType:"script",success:function(){}})},0)})}();;(function(a,b){"use strict";b._sstrack=b._sstrack||[];var c=function(){function c(){}var d,e,f;return d=function(a,c){b._sstrack.push(["addProperty",a,c])},e=function(a){b._sstrack.push(["record",a])},f=function(){var b="airli"===a.ancillary&&a.view_action?a.view_action:a.ancillary;return SS.data&&SS.data.seoTrackingData&&SS.data.seoTrackingData.ViewName?SS.data.seoTrackingData.ViewName:((b||"").match(/dayview/gi)||[]).length?"Day View":((b||"").match(/monthview/gi)||[]).length?"Month View (Chart)":((b||"").match(/browse/gi)||[]).length?"Browse View (Day)":((b||"").match(/index/gi)||[]).length?"Homepage":b},c.prototype.recordBasicRequest=function(b){if(!b)return void(a.isDebugMode&&console.error("ERROR: type must be provided"));var c=a.Common.stateManager.getState(),d=Skyscanner.ComponentContext;"multi-destination"==d.tripType?(this.addMultiDestinationProperties(d.legs),b="multidestinationtransportsearch"):this.addNonMultidestinationProperties(c),this.addCommonProperties(c,b)},c.prototype.addCommonProperties=function(c,g){this.getReferralUrl()&&d("ReferralUrl",b.encodeURIComponent(this.getReferralUrl())),d("Adults",c.adults),d("Children",c.children),d("Infants",c.infants),d("CabinClass",c.cabinclass),d("IsReturn",c.isReturn),d("UserCountryId",c.market),d("LandingUrl",b.encodeURIComponent(b.location.href)),d("ViewName",f()),d("RequestId",b.tracking.getRequestId()),d("NodeName",a.scaffoldNode),d("ScaffoldVersion",a.scaffoldversion),d("Platform","website"),e(g)},c.prototype.addNonMultidestinationProperties=function(b){var c=a.funnelConfiguration,e=a.SearchControlsParameters;c?(d("Origin",c.from),d("Destination",c.to)):e&&(d("Origin",e.originId),d("Destination",e.destinationId)),b.isReturn===!0&&d("InboundDatePart",b.iDate.getSkyscannerFormat()),d("OutboundDatePart",b.oDate.getSkyscannerFormat())},c.prototype.addMultiDestinationProperties=function(a){for(var b=0,c=a.length;c>b;b++){var e=a[b];d("Origin",e.originId),d("Destination",e.destinationId),d("OutboundDatePart",e.date)}},c.prototype.getReferralUrl=function(){return b.document.referrer},c}();a.Common.UserOrchestration=c,a.Common.userOrchestration=new a.Common.UserOrchestration}).call(this,window.Skyscanner,window);;!function(a){var b=function(a){var b="";for(var c in a.getProperties())b+=c+":"+a[c]+"\n";return b},c=function(a){var c="",d=new Skyscanner.Common.Cookie("scanner"),e=new Skyscanner.Common.Cookie("ssculture");return c+="skyCookie="+encodeURIComponent(b(d)),c+="&skyCulture="+encodeURIComponent(b(e)),c+="&skyPreferences="+new Skyscanner.Common.Cookie("preferences")[0],c+="&skyNode="+Skyscanner.scaffoldNode,c+="&skyURL="+encodeURIComponent(document.URL),c+="&skyDropbox="+a},d=function(a){a.each(function(a){this.href=this.href.replace("skyDBG=1","skyDBG=2")}),a.on("mousedown",function(a){this.href=this.href.replace("skyDBG=2","skyDBG=3");var b=-1!=this.href.indexOf("?")?"&":"?";this.href+=b+c("zenbox_tab"==this.id),this.href=this.href.replace("skyDBG=3","skyDBG=4")})};SS.namespace("Skyscanner.Common.Zendesk").RegisterHelpClickHandlers=d,a(document).ready(function(){d(a("#ss-footer-links-faq, #ss-header-links-faq, #ss-page-not-found-help, #ss-page-not-found-contact, #ss-browse-contact"))})}(jQuery);;!function(a,b,c,d,e){function f(a,b){return function(c){return"function"==typeof a&&(a=a(c)),$.extend(a,b),a}}var g=(new Skyscanner.tracking.TravelProperties).getCommonProperties(a.ComponentContext,new Date);b.subscribe("mixpanel-register",function(a){e.regregisterProperties(service,a)}),b.subscribe("auth-widget-loaded",function(){var a=c.getUserId();a&&(e.registerProperties({"Skyscanner User Id":a}),e.registerProperties({"Skyscanner UTID":a}));var b=c.getAuthState();b&&e.registerProperties({"Skyscanner UTID Status":b})}),b.subscribe("mixpanel-track",function(b){if(b&&b.name){null==b.props&&(b.props={});var c={};b.preserve||$.extend(c,g),c["Scaffold Node"]=(a.scaffoldNode||"").toUpperCase(),c["Scaffold Version"]=(a.scaffoldversion||"").toUpperCase();var h=new Skyscanner.Common.Cookie("ssab");for(var i in h.getProperties())c["Test-"+i]=h[i];var j=new Skyscanner.Common.Cookie("sstrack");c["Skyscanner Track Id"]=j[0];var k=new Skyscanner.Common.Cookie("preferences");c["Skyscanner Preferences"]=k[0],c["Page Type"]=Skyscanner.analyticsPageName,c["Page URL"]=document.URL,c["User Agent"]=navigator.userAgent,c["Page Visibility State"]=d.visibilityState(),c["Page Hidden"]="boolean"==typeof document.hidden?document.hidden:"N/A",b.track_links?e.trackLinks(b.track_links,b.name,f(b.props,c)):e.track(b.name,$.extend(b.props,c))}});var h=Skyscanner.mixpanel.getCookieValue();null==h&&e.track("New User Session Started")}(window.Skyscanner,window.Skyscanner.Common.observer,Skyscanner.Api.user,Skyscanner.Api.browser,_exposedModules.analytics.mixpanel);;(function(a){"use strict";a.MixpanelSuperProperties=function(){function b(a){this._mixpanelService=a}return b.prototype.registerUserLocale=function(){return this._mixpanelService.registerProperties({"User Locale":(a.constants.culture||"").toUpperCase()}),this},b.prototype.registerUserMarket=function(){var a=Skyscanner.Common.stateManager.getState();return this._mixpanelService.registerProperties({"User Market":(a.market||"").toUpperCase()}),this},b.prototype.registerUserCurrency=function(){var a=Skyscanner.Common.stateManager.getState();return this._mixpanelService.registerProperties({"User Currency":(a.currency||"").toUpperCase()}),this},b.prototype.registerNewUserState=function(){var a=Skyscanner.mixpanel.getCookieValue();null==a&&Skyscanner.Api.localStorage.init("web").trySetValue("newUser",!0,!0,!0);var b=1==Skyscanner.Api.localStorage.init("web").tryGetValue("newUser",!0,!0);return this._mixpanelService.registerProperties({"New User":null==a||b}),this},b.prototype.registerInternalUser=function(){var a=Skyscanner.ComponentContext;return this._mixpanelService.registerProperties({"Internal User":(a.internalUser||"").toUpperCase()}),this},b.prototype.registerIsMobile=function(){var a=Skyscanner.Api,b="mobile"==a.contextValue("deviceType")?"true":"false";return this._mixpanelService.registerProperties({Mobile:b.toUpperCase()}),this},b.prototype.registerIsTablet=function(){var a=Skyscanner.Api,b="tablet"==a.contextValue("deviceType")?"true":"false";return this._mixpanelService.registerProperties({Tablet:b.toUpperCase()}),this},b.prototype.registerOSVersion=function(){var a=Skyscanner.ComponentContext;return this._mixpanelService.registerProperties({"OS Version":(a.osVersion||"").toUpperCase()}),this},b.prototype.registerDeviceModel=function(){var a=Skyscanner.ComponentContext;return this._mixpanelService.registerProperties({"Device Model":(a.deviceModel||"").toUpperCase()}),this},b.prototype.registerBrowserVersion=function(){var a=Skyscanner.ComponentContext;return this._mixpanelService.registerProperties({"Browser Version":(a.browserVersion||"").toUpperCase()}),this},b.prototype.registerCookiePolicyAlert=function(){var a=Skyscanner.Api.localStorage.init("web"),b=a.tryGetValue("user.cookiePolicyAcknowledged",!0)===!0;return this._mixpanelService.registerProperties({"Cookie Policy Alert Acknowledged":b}),this},b}()}).call(this,window.Skyscanner),$(function(){new Skyscanner.MixpanelSuperProperties(_exposedModules.analytics.mixpanel).registerUserLocale().registerUserMarket().registerUserCurrency().registerNewUserState().registerInternalUser().registerIsMobile().registerIsTablet().registerOSVersion().registerDeviceModel().registerBrowserVersion().registerCookiePolicyAlert()});;(function(){Skyscanner.namespace("Skyscanner.url").queryParameters={parametersToString:function(a){return _.map(a,function(a,b){return""+b+"="+a}).join("&")}}}).call(this);;addLoadEventHandler(function(){!function(a,b,c,d,e,f){e=a.createElement(b),f=a.getElementsByTagName(b)[0],e.async=1,e.src=c,f.parentNode.insertBefore(e,f)}(document,"script","//www.google-analytics.com/analytics.js","ga")});;function TabItem(a,b,c){this.tabItemID=a,this.tabItemConfig=b,this.tabItemRootUrlOverride=c,this._self=this,this.onItineraryChanged=function(){$log(this.tabItemConfig.remoteUrl),this.buildAncillaryUrl()},this.BuildHotelsParams=function(){var a={},b=Skyscanner.Common.stateManager.getState(),c=Skyscanner.Common.Helpers.DateTime;if(a.na=parseInt(b.adults),!b.wholeYear){var d=null!=b.oDate&&void 0!=b.oDate?b.oDate.getSkyscannerFormat():null;if(null!=d&&void 0!=d&&d)if(a.sd=Skyscanner.Api.internalDate.format(c.parseDateFromCode(d),"yyyy-MM-dd"),b.isReturn){var e=b.iDate.getSkyscannerFormat(),f=c.parseDateFromCode(e),g=(f-c.parseDateFromCode(d))/864e5;g>30&&(f.setFullYear("20"+d.substring(0,2),d.substring(2,4)-1,d.substring(4,6)),f.setDate(f.getDate()+1)),a.ed=Skyscanner.Api.internalDate.format(c.parseDateFromCode(c.toDateCode(f)),"yyyy-MM-dd")}else{var f=c.parseDateFromCode(d);f.setDate(f.getDate()+1),a.ed=Skyscanner.Api.internalDate.format(c.parseDateFromCode(c.toDateCode(f)),"yyyy-MM-dd")}}var h=Skyscanner.Common.Translate();return isEverywhereSearch=b.iPlace==h.translate("ktxt_as_everywhere"),isEverywhereSearch||(b.iPlaceId&&"null"!=b.iPlaceId&&(a["s-f_iplace"]=b.iPlaceId),destinationName=Skyscanner.ComponentContext.destinationName,b.iPlace?a.fileName=b.iPlace:destinationName&&"unknown"!==destinationName&&(a.fileName=destinationName)),a},this.BuildCarhireParams=function(){var a={},b=Skyscanner.Common.stateManager.getState();if(a.pick_up=b.iPlaceId,b.oDate){var c=b.oDate.getServiceFormat();null!=c&&void 0!=c&&(a.pick_up_date=c)}if(b.isReturn&&(a.drop_off=b.iPlaceId,b.iDate)){var c=b.iDate.getServiceFormat();null!=c&&void 0!=c&&(a.drop_off_date=c)}return a},this.BuildDefaultParams=function(){var a={},b=Skyscanner.Common.stateManager.getState(),c=b.currency||"",d=Skyscanner.Common.Helpers.DateTime;if(b.oPlace&&(a.oplace=getIATACityID(b.oPlaceId),a.f_oplace=a.oplace,a.f_oa=3==b.oPlaceId.length?"1":""),b.iPlace&&(a.iplace=getIATACityID(b.iPlaceId),a.f_iplace=a.iplace,a.f_ia=3==b.iPlaceId.length?"1":""),!b.wholeYear&&b.oDate){var e=b.oDate.getSkyscannerFormat();if(null!=e&&void 0!=e)if(a.odate=e,a.f_odate=e,b.isReturn){var f=b.iDate.getSkyscannerFormat();a.idate=f,a.f_idate=f}else{var g=new Date;g.setFullYear("20"+e.substring(0,2),e.substring(2,4)-1,e.substring(4,6)),g.setDate(g.getDate()+7),e=d.toDateCode(g),a.idate=e,a.f_idate=e}}return a.adults=b.adults,a.f_adults=b.adults,a.children=b.children,a.f_children=b.children,a.infants=b.infants,a.f_infants=b.infants,a.ucy=this.fixUcyForOldWebsiteIntegration(Skyscanner.userCountry).toUpperCase(),a.lang=Skyscanner.lang,a.ccy=c,a.mode=Skyscanner.Common.stateManager.getPageType(),a.view=Skyscanner.Common.stateManager.getPageView(),a.rtn=b.isReturn?"1":"0",a.f_rtn=a.rtn,a},this.buildAncillaryUrl=function(){var a,b,c=this.tabItemID,d={},e=this.tabItemRootUrlOverride?this.tabItemRootUrlOverride:this.tabItemConfig.remoteUrl,f=this.tabItemConfig.localUrl,g=!1,h=!1,i=$("#"+this.tabItemID),j=Skyscanner.Common.stateManager,k=j.getState();if("undefined"!=typeof Skyscanner.lang)if("skhot"===c?(h=!0,e=f,d=this.BuildHotelsParams()):"carhi"===c?(h=!0,d=this.BuildCarhireParams()):"buses"===c?(h=!0,d={}):(h=null!=k.oPlace,g=!0,d=this.BuildDefaultParams()),h){b=e,g&&(b=Skyscanner.Common.Helpers.Url.appendParamToUrl(b,"anccat",c));for(a in d)""!=d[a]&&(b=Skyscanner.Common.Helpers.Url.appendParamToUrlIncludeEmpty(b,a,d[a]))}else b=f;else b=e;b=this.appendUrlToDomainName(i,b),i.attr("href",b)},this.appendUrlToDomainName=function(a,b){b=b||"";var c=0==b.indexOf("http");if(c)return b;originalUrl=a.attr("href")||"";var d=originalUrl.match(/^(https?)\:\/\/([^\/?#]+)(?:[\/?#]|$)/i),e=d&&d[1],f=d&&d[2];return f&&e?(0==b.indexOf("/")&&(b=b.slice(1)),"{scheme}://{domain}/{pathandquery}".replace("{scheme}",e).replace("{domain}",f).replace("{pathandquery}",b.trim("/"))):b},this.fixUcyForOldWebsiteIntegration=function(a){return"GB"==a.toUpperCase()?"UK":a},this.getIATACityID=function(a){if(Skyscanner.Common.Helpers.String.strNullOrEmpty(a)||4!=a.length)return a;var b=a.substring(0,3),c=SS.lookupdata;return c&&c.iataCities&&c.iataCities[a.toUpperCase()]&&(b=c.iataCities[a.toUpperCase()]),b},this.setBookingSpecificUrlParameters=function(a,b){var c=a.getAttribute("bookingSpecificOPlace"),d=a.getAttribute("bookingSpecificIPlace"),e=a.getAttribute("bookingSpecificODate"),f=a.getAttribute("bookingSpecificIDate");return c&&(c=c.toLowerCase(),b=b.replace(/(s-oplace=)[^&]{3,4}/,"$1"+c),b=b.replace(/(s-f_oplace=)[^&]{3,4}/,"$1"+c)),d&&(d=d.toLowerCase(),b=b.replace(/(s-iplace=)[^&]{3,4}/,"$1"+d),b=b.replace(/(s-f_iplace=)[^&]{3,4}/,"$1"+d)),e&&(b=b.replace(/(s-odate=)[^&]{6}/,"$1"+e),b=b.replace(/(s-f_odate=)[^&]{6}/,"$1"+e)),f&&(b=b.replace(/(s-idate=)[^&]{6}/,"$1"+f),b=b.replace(/(s-f_idate=)[^&]{6}/,"$1"+f)),b},this.getStandardLanguageCode=function(a){switch(a){case"gr":return"el";case"zh":return"cs";case"zw":return"cn";default:return a}},this.isValidSeoCulture=function(a,b,c){var d=function(a,b){if(!a)return!0;for(var c=0;c<a.length;c++)if(b.toLowerCase()==a[c].toLowerCase())return!0;return!1};return d(a.seoLanguages,b)?d(a.seoMarkets,c):!1}}var tabCollection=function(){var a,b,c,d,e=function(d,e,f){return a=e,b=d,c=f,this},f=function(){if(!d){d=[];for(var a=0;a<b.length;a++){var c=b[a],e=i(c);e&&d.push(e)}}},g=function(){d=null},h=function(){f();for(var a=0;a<d.length;a++)d[a].onItineraryChanged()},i=function(b){for(var d,e=0;e<a.length;e++)if(b===a[e].name){var f=c&&c[b]?c[b]:null;d=new TabItem(b,a[e],f);break}return d};return{onItineraryChanged:h,create:e,clearTabs:g}}(),registerAncillaryEvents=function(){var a=$("#nav-container"),b=$("#secondary-nav"),c=$("header");Skyscanner.Common.AncillaryNavigation.trackToggleClick=function(){Skyscanner.Common.GATracking.trackEvent("navigation","click","navigation_toggle",a.hasClass("display")?1:0)},Skyscanner.Common.AncillaryNavigation.trackClick=function(a){var b=Skyscanner.analyticsPageName||null;b&&a&&Skyscanner.Common.GATracking.trackEvent(b,"ProductTabClick",a)},Skyscanner.Common.AncillaryNavigation.onNavButtonClick=function(d){a.toggleClass("display"),b.toggleClass("display"),c.toggleClass("nav-displayed"),Skyscanner.Common.AncillaryNavigation.trackToggleClick()},Skyscanner.Common.AncillaryNavigation.onCurrentCategoryButtonClick=function(d){a.removeClass("display"),b.removeClass("display"),c.removeClass("nav-displayed")},Skyscanner.Common.AncillaryNavigation.onClick=function(a){var b=$(a.currentTarget).attr("data-analytics-name")||null;b&&(Skyscanner.Common.AncillaryNavigation.trackClick(b),Skyscanner.Common.logging.logger.logEvent("handlers.default.numberOfClicks.header."+b))},$("#nav-toggle").on("click",Skyscanner.Common.AncillaryNavigation.onNavButtonClick),$("#current-category").on("click",Skyscanner.Common.AncillaryNavigation.onCurrentCategoryButtonClick),$("#main-nav li a").on("click",Skyscanner.Common.AncillaryNavigation.onClick)},getYearMonthAndDay=function(a){var b="",c="";null==a&&(a="");var d,e=Skyscanner.Common.Helpers.DateTime;return 10===a.length?(d=e.toDateCode(Skyscanner.Api.internalDate.parse(a,"yyyy-MM-dd")),b=d.substr(0,4),c=d.substr(4)):7===a.length?(d=e.toDateCode(Skyscanner.Api.internalDate.parse(a,"yyyy-MM")),b=d.substr(0,4)):4===a.length&&(b=a.substr(2)),{ym:b,day:c}},updateStateManagerWithSearchControlsData=function(a){if(null==a&&(a={}),a.originId&&a.originName&&(!a.destinationId||a.destinationName)){var b=Skyscanner.Common.stateManager,c=a.outboundDate;"multi-destination"===a.tripType&&a.legs&&a.legs[0]&&(a=a.legs[0],c=a.date);var d=getYearMonthAndDay(c);if("return"===a.tripType){var e=getYearMonthAndDay(a.inboundDate);b.setInboundRouteDateDetails(e.ym,e.day)}else b.setInboundRouteDateDetails("","");b.setOutboundRouteDateDetails(d.ym,d.day),b.setNewRouteOriginAndDestinationDetails(a.originId,a.originName,a.destinationId,a.destinationName)}};Skyscanner.documentReady.addHandler(function(){if($log("ancillary-navigation load"),Skyscanner){var a=Skyscanner.constants.availableAncillaries,b=Skyscanner.constants.ancillaryConfiguration,c=Skyscanner.ancillaryRootUrlOverrides,d=tabCollection.create(a,b,c);d.onItineraryChanged(),registerAncillaryEvents(),this.observer=Skyscanner.Common.observer,this.observer.subscribe("search-controls-place-set",function(a){d.onItineraryChanged()}),this.observer.subscribe("flights-search-controls-changed",function(a){updateStateManagerWithSearchControlsData(a),d.onItineraryChanged()})}});;!function(){var a=function(){function a(a){this.$touchMenuToggle=$("#toggle-touch-menu"),this.touchMenuToggleClass="open",this.rightPos=$(".hamburger-menu").css("right"),this.$touchMenuToggle.click($.proxy(this._onToggle,this)),$("#overlay, .hamburger-menu li").click($.proxy(function(a){$(".hamburger-menu").hasClass("open")&&this._onToggle(a)},this))}return a.prototype._onToggle=function(a){var b=$(".hamburger-menu");b.toggleClass(this.touchMenuToggleClass),this.$touchMenuToggle.toggleClass(this.touchMenuToggleClass),b.hasClass(this.touchMenuToggleClass)?(b.css("display","block"),b.css("right","0px"),Skyscanner.turnOnLightbox()):(b.css("right",this.rightPos),$(a.currentTarget).hasClass("turn-lightbox-off")&&Skyscanner.turnOffLightbox())},a}();Skyscanner.Common.TouchMenuToggle=a}();;!function(){addLoadEventHandler(function(){$("#toggle-touch-menu").one("click",function(){var a=$("<div>"),b={market:Skyscanner.ComponentContext.market,locale:Skyscanner.ComponentContext.locale,currency:Skyscanner.ComponentContext.currency,ancillary:Skyscanner.ancillary};Skyscanner.ComponentContext.region&&(b.region=Skyscanner.ComponentContext.region),a.load("/transport/menu/?"+_.map(b,function(a,b){return b+"="+a}).join("&"),function(){$("body").append(a),Skyscanner.Common.observer.publish("hamburger-menu-loaded"),SS.namespace("Skyscanner.header").initTracking(a)})})})}();;!function(){var a=function(){Skyscanner.Common.userOrchestration.recordBasicRequest(Skyscanner.config.tracking.userTrackingType)};addLoadEventHandler(a)}();;addLoadEventHandler(function(){injectScript("//cdn.mxpnl.com/libs/mixpanel-2.2.min.js")});;window.addLoadEventHandler(function(){var a=!1,b=function(){if(!a){a=!0;var b=new Skyscanner.Common.UrlBuilder(null,{version:Skyscanner.scaffoldversion});b.buildStaticResourceUrl("partials/usersearchhistory.htm");$.ajax({url:"/transport/usersearchhistory",success:function(a){$("body").append(a)}})}};$("#history-toggle").on("click",function(a){b()}),Skyscanner.Common.observer.subscribe("touch-recent-searches-link-clicked",function(){b()})});;!function(){var a=Skyscanner.config.zendesk;a.enabledForMarket&&a.showTab&&addLoadEventHandler(function(){var b=$("<a id='zenbox_tab'>").attr("href",a.url).attr("target","_blank").html("<span>"+a.helpText+"</span>");$("body").append(b),Skyscanner.Common.Zendesk.RegisterHelpClickHandlers(b)})}();;!function(a,b,c,d,e,f,g){a[b]=a[b]||(a[b]={});var h,i,j,k;j=function(a){return a?10!=a.length||"0001-01-01"==a?null:parseInt(a.replace(/-/g,"")):null},i=function(a,b,c,d){if("hotels_home"===d||"home"===d||"news_site"===d||"month-view"===d||"carhire_home"===d||"browse-view"===d&&null!==c.InboundCountryIATA)return{};var e={currency:b.currency};return"day-view"===d?$.extend(e,{content_type:"product, flight",destination_ids:c.UserCountry+"_"+c.OutboundCode+"_"+c.InboundCode,destination:c.InboundCityName,num_adults:parseInt(a.adults),num_children:parseInt(a.children),num_infants:parseInt(a.infants),departing_departure_date:j(c.OutboundDate),returning_departure_date:j(c.InboundDate),origin_airport:c.OutboundCityIATA,origin:c.OutboundCityName,destination_airport:c.InboundCityIATA,travel_class:"PremiumEconomy"===a.cabinclass?"Premium-Economy":a.cabinclass}):($.extend(e,{arriving_into:c.InboundCityName,num_of_adults:parseInt(a.adults),num_of_children:parseInt(a.children),num_of_infants:parseInt(a.infants),outbound_date:j(c.OutboundDate),return_date:j(c.InboundDate)}),"hotels_results"!==d&&$.extend(e,{departing_from_code:c.OutboundCityIATA,departing_from:c.OutboundCityName,arriving_into_code:c.InboundCityIATA,class_of_travel:"PremiumEconomy"===a.cabinclass?"Premium-Economy":a.cabinclass})),e},k=function(a,b,c,d,e,f){var g=$.extend(i(c,d,e,f),b||{});window.fbq?window.fbq("trackCustom",a,g):_fbq.push(["track",a,g])},h=function(){function b(a,b,c){this._stateManager=a,this._context=b,this._advertData=c,this.init()}return b.prototype.sendPageLoadEvent=function(a){var b={hotels_results:"Hotels_Search",news_site:"News_Site","day-view":"Search",flights_seo_landing_page:"Flights_SEO_landing_page",carhire_results:"CarHire_Search","browse-view":null==this._advertData.InboundCountryIATA?"Flights_Everywhere_Search":null},c=b[a]||"PixelInitialized";k(c,{},this._stateManager.getState(),this._context,this._advertData,a)},b.prototype.init=function(){var b=this;a.Common.observer.subscribe("facebook-event",function(a){b.sendEvent(a.name,a.data)})},b.prototype.sendEvent=function(a,b){k(a,b,this._stateManager.getState(),this._context,this._advertData)},b}(),a[b].facebookEvents=new h(e,f,g)}(Skyscanner,"tracking",window,"_fbq",Skyscanner.Common.stateManager,Skyscanner.ComponentContext||{},SS.advertData||{});;!function(a,b,c){addLoadEventHandler(function(){"cn"!=(Skyscanner.market||"").toLowerCase()&&(window.fbq_script_called||!function(a,b,c,d,e,f,g){a.fbq||(e=a.fbq=function(){e.callMethod?e.callMethod.apply(e,arguments):e.queue.push(arguments)},a._fbq||(a._fbq=e),e.push=e,e.loaded=!0,e.version="2.0",e.queue=[],f=b.createElement(c),f.async=!0,f.src=d,g=b.getElementsByTagName(c)[0],g.parentNode.insertBefore(f,g),window.fbq_script_called=!0)}(window,document,"script","//connect.facebook.net/en_US/fbevents.js"),fbq.alreadyLoaded||(fbq("init","561358470665569"),fbq("track","PageView"),fbq.alreadyLoaded=!0),Skyscanner.tracking.facebookEvents.sendPageLoadEvent(Skyscanner.analyticsPageName||""))})}(Skyscanner.Common.stateManager,Skyscanner.ComponentContext||{},SS.advertData||{});;!function(){$(".culture-info").one("click",function(){var a={version:2,ancillary:Skyscanner.ancillary,market:Skyscanner.ComponentContext.market,language:Skyscanner.ComponentContext.locale.split("-")[0].toUpperCase(),locale:Skyscanner.ComponentContext.locale,currency:Skyscanner.ComponentContext.currency};Skyscanner.ComponentContext.region&&(a.region=Skyscanner.ComponentContext.region);var b="/transport/cultureselector?"+_.map(a,function(a,b){return b+"="+a}).join("&");$(".culture-info").click(function(){Skyscanner.Common.observer.publish("request-culture-selector")}),$.ajax({url:b,success:function(a){$("body").append(a)}})})}();;!function(){addLoadEventHandler(function(){var a=Skyscanner.Api.localStorage.init("web"),b="user.cookiePolicyAcknowledged";if(Skyscanner.config.tracking.showCookiePolicyMessage&&a.tryGetValue(b,!0)!==!0){var c=new Skyscanner.Common.UrlBuilder(null,{version:Skyscanner.staticVersion||Skyscanner.scaffoldversion}),d=c.buildStaticResourceUrl("partials/cookiepolicy.htm");$.ajax({url:d,cache:!0,success:function(a){$("body").append(a)}}),"b"==Skyscanner.config.featureTests.WebApps_CookieBarVariation&&a.trySetValue(b,!0,!0)}})}();;(function(){var a,b,c;a={"#identity a":"Logo","#airli":"Flights","#skhot":"Hotels","#carhi":"Car Hire","#culture-info":"Culture Selector","#news-link":"News","#authentication-link, #touch-authentication-link":"Login","#touch-account-settings":"Account Settings","#touch-manage-price-alerts":"Price Alerts","#touch-manage-subscriptions":"Manage Subscriptions","#history-toggle, #history-toggle-touch":"Recent Searches","#toggle-touch-menu":"Hamburger Menu","#ss-header-links-faq":"Help"},b=function(b){return null==b&&(b=$()),$.each(a,function(a,d){return b.find(a).on("click",function(a){return c(a,d)})})},c=function(a,b){var c;return null==b&&(b=null),null!==b?(2!==a.which&&a.preventDefault(),Skyscanner.Common.observer.publish("tracking-event",{mixpanel:[{name:"Header Item Clicked",props:{"Header Item":b}}],ga:[{category:"Header Item Clicked",action:b}]}),(c=$(a.currentTarget).attr("href"))&&2!==a.which?"_blank"===a.target.target?setTimeout(function(){return window.open(c,"_blank")},100):setTimeout(function(){return window.location.href=c},100):void 0):void 0},b($("body")),SS.namespace("Skyscanner.header").initTracking=b}).call(this);;!function(){var a=Skyscanner.config.remoteConfiguration?Skyscanner.config.remoteConfiguration.WebApps:null,b=(Skyscanner.Api.contextValue("osName")||"").toLowerCase();if(a&&"ios"==b){var c=a.disableAppDynamicsGlobal;if(c===!0)return;var d=(Skyscanner.Api.contextValue("osVersion")||"").toLowerCase();if(0==d.indexOf("10_")){var e=a.AppDynamicsiOSv10AllowedVersions||"",f=e.indexOf("|"+d+"|")>-1;if(!f)return}}!new function(){if(!window.ADRUM&&!0!==window["adrum-disable"]){var a=window.ADRUM={};window["adrum-start-time"]=window["adrum-start-time"]||(new Date).getTime(),function(a){!function(a){a.Zc=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];for(b=0;b<a.length;b++){var c=a[b];c&&c.setUp()}}}(a.monitor||(a.monitor={}))}(a||(a={})),function(a){a=a.conf||(a.conf={}),a.beaconUrlHttp="http://col.eum-appdynamics.com",a.beaconUrlHttps="https://col.eum-appdynamics.com",a.corsEndpointPath="/eumcollector/beacons/browser/v1",a.imageEndpointPath="/eumcollector/adrum.gif?",a.appKey=window["adrum-app-key"]||"AD-AAB-AAA-SVY";var b="https:"===document.location.protocol;if(a.adrumExtUrl=(b?"https://cdn.appdynamics.com":"http://cdn.appdynamics.com")+"/adrum-ext.f13718297ad3d9e6b80d6bc11e953001.js",a.adrumXdUrl="https://cdn.appdynamics.com/adrum-xd.f13718297ad3d9e6b80d6bc11e953001.html",a.agentVer="4.2.6.2",a.sendImageBeacon="false",window["adrum-geo-resolver-url"]){var c=window["adrum-geo-resolver-url"],d=c.indexOf("://");-1!=d&&(c=c.substring(d+3)),c=(b?"https://":"http://")+c}else c="";a.geoResolverUrl=c,a.useStrictDomainCookies=!0===window["adrum-use-strict-domain-cookies"],a.userConf=window["adrum-config"],a.$d=10}(a||(a={})),function(a){!function(b){function c(a){return"undefined"!=typeof a&&null!==a}function d(a){return"[object Array]"===Object.prototype.toString.apply(a)}function e(a){return"object"==typeof a&&!d(a)&&null!==a}function f(a){return"string"==typeof a}function g(a,b){for(var f in b){var h=b[f];if(b.hasOwnProperty(f)&&c(h)){var i=a[f];e(h)&&e(i)?g(i,h):a[f]=d(i)&&d(h)?i.concat(h):h}}return a}function h(a){return f(a)?a.replace(/^\s*/,"").replace(/\s*$/,""):a}b.isDefined=c,b.isArray=d,b.isObject=e,b.isFunction=function(a){return"function"==typeof a||!1},b.isString=f,b.isNumber=function(a){return"number"==typeof a},b.Ta=function(a){setTimeout(a,0)},b.addEventListener=function(b,c,d){function e(){try{return d.apply(this,Array.prototype.slice.call(arguments))}catch(e){a.exception(e,"M1",c,b,e)}}a.isDebug&&a.log("M0",c,b),b.addEventListener?b.addEventListener(c,e,!1):b.attachEvent&&b.attachEvent("on"+c,e)},b.loadScriptAsync=function(b){var c=document.createElement("script");c.async=!0,c.src=b;var d=document.getElementsByTagName("script")[0];d?(d.parentNode.insertBefore(c,d),a.log("M2",b)):a.log("M3",b)},b.mergeJSON=g,b.od=function(a){var c=[];return a&&(b.isObject(a)?c=[a]:b.isArray(a)&&(c=a)),c},b.generateGUID="undefined"!=typeof window.crypto&&"undefined"!=typeof window.crypto.getRandomValues?function(){function a(a){for(a=a.toString(16);4>a.length;)a="0"+a;return a}var b=new Uint16Array(8);return window.crypto.getRandomValues(b),a(b[0])+a(b[1])+"_"+a(b[2])+"_"+a(b[3])+"_"+a(b[4])+"_"+a(b[5])+a(b[6])+a(b[7])}:function(){return"xxxxxxxx_xxxx_4xxx_yxxx_xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:3&b|8).toString(16)})},b.fd=function(a){return a&&(a=a.stack)&&"string"==typeof a?a:null},b.trim=h,b.wg=function(a){var b,c,d={};if(!a)return d;var e=a.split("\n");for(c=0;c<e.length;c++){var f=e[c];b=f.indexOf(":"),a=h(f.substr(0,b)).toLowerCase(),b=h(f.substr(b+1)),a&&(d[a]=d[a]?d[a]+(", "+b):b)}return d},b.tryPeriodically=function(a,b,c,d){function e(){if(b())c&&c();else{var g=a(++f);g>0?setTimeout(e,g):d&&d()}}var f=0;e()},b.Qb=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},b.Ic=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return function(){for(var c=[],d=0;d<arguments.length;d++)c[d-0]=arguments[d];return a.apply(this,b.concat(c))}},b.now=Date&&Date.now||function(){return(new Date).getTime()}}(a.utils||(a.utils={}))}(a||(a={})),function(a){function b(b,c,d,e){return b=a.conf.beaconUrlHttps+"/eumcollector/error.gif?version=1&appKey="+d+"&msg="+encodeURIComponent(b.substring(0,500)),e&&(b+="&stack=",b+=encodeURIComponent(e.substring(0,1500-b.length))),b}function c(c,d){f>=2||(document.createElement("img").src=b(c,0,a.conf.appKey,d),f++)}function d(a){return 0<=a.location.search.indexOf("ADRUM_debug=true")||0<=a.cookie.search(/(^|;)\s*ADRUM_debug=true/)}a.iDR=d,a.isDebug=d(document);var e=[];a.logMessages=e,a.log=function(b){for(var c=1;c<arguments.length;c++);a.isDebug&&e.push(Array.prototype.slice.call(arguments).join(" | "))},a.error=function(b){for(var d=1;d<arguments.length;d++);d=Array.prototype.slice.call(arguments).join(" | "),a.log(d),c(d,null)},a.exception=function(){for(var b=[],d=0;d<arguments.length;d++)b[d-0]=arguments[d];1>arguments.length||(b=Array.prototype.slice.call(arguments),d=a.utils.fd(b[0]),b=b.slice(1).join(" | "),a.log(b),c(b,d))},a.assert=function(b,c){b||a.error("Assert fail: "+c)},a.dumpLog=a.isDebug?function(){for(var a="",b=0;b<e.length;b++)a+=e[b].replace(RegExp("<br/>","g"),"\n	")+"\n";return a}:function(){},a.cIEBU=b;var f=0;a.log("M4")}(a||(a={})),function(a){var b=function(){function a(a){this.max=a,this.za=0}return a.prototype.Mf=function(){this.la()||this.za++},a.prototype.la=function(){return this.za>=this.max},a.prototype.reset=function(){this.za=0},a}(),c=function(){function c(){this.ha=[],this.Va=new b(c.oe),this.Ka=new b(c.ce)}return c.prototype.submit=function(b){this.push(b)&&a.initEXTDone&&this.processQ()},c.prototype.processQ=function(){for(var b=this.ef(),c=0;c<b.length;c++){var d=b[c];"function"==typeof a.commands[d[0]]?(a.isDebug&&a.log("M5",d[0],d.slice(1).join(", ")),a.commands[d[0]].apply(a,d.slice(1))):a.error("M6",d[0])}},c.prototype.ag=function(a){return"reportXhr"===a||"reportPageError"===a},c.prototype.push=function(b){var c=b[0],d=this.ag(c),e=d?this.Va:this.Ka;return e.la()?(a.log("M7",d?"spontaneous":"non spontaneous",c),!1):(this.ha.push(b),e.Mf(),!0)},c.prototype.ef=function(){var a=this.ha;return this.reset(),a},c.prototype.size=function(){return this.ha.length},c.prototype.reset=function(){this.ha=[],this.Va.reset(),this.Ka.reset()},c.prototype.isSpontaneousQueueDead=function(){return this.Va.la()},c.prototype.isNonSpontaneousQueueDead=function(){return this.Ka.la()},c.oe=100,c.ce=100,c}();a.Cd=c}(a||(a={})),function(a){a.q=new a.Cd,a.command=function(b){for(var c=1;c<arguments.length;c++);a.isDebug&&a.log("M8",b,Array.prototype.slice.call(arguments).slice(1).join(", ")),a.q.submit(Array.prototype.slice.call(arguments))}}(a||(a={})),function(a){!function(a){var b=function(){function a(){this.status={}}return a.prototype.setUp=function(){},a.prototype.set=function(a,b){this.status[a]=b},a}();a.mb=b}(a.monitor||(a.monitor={}))}(a||(a={})),function(a){!function(b){window.ADRUM.aop=b,b.support=function(a){return!a||"apply"in a},b.around=function(c,d,e,f){return a.assert(b.support(c),"aop.around called on a function which does not support interception"),c=c||function(){},function(){a.isDebug&&a.log("M9",f,Array.prototype.slice.call(arguments).join(", "));var b,g=Array.prototype.slice.call(arguments);try{d&&(b=d.apply(this,g))}catch(h){a.exception(h,"M10",f,h)}a.assert(!b||"[object Array]"===Object.prototype.toString.call(b));var i=void 0;try{i=c.apply(this,b||g)}finally{try{e&&e.apply(this,g)}catch(j){a.exception(j,"M11",f,j)}}return i}},b.before=function(a,c){return b.around(a,c)},b.after=function(a,c){return b.around(a,null,c)}}(a.aop||(a.aop={}))}(a||(a={})),function(a){a=a.EventType||(a.EventType={}),a[a.BASE_PAGE=0]="BASE_PAGE",a[a.IFRAME=1]="IFRAME",a[a.XHR=2]="XHR",a[a.VIRTUAL_PAGE=3]="VIRTUAL_PAGE",a[a.PAGE_ERROR=4]="PAGE_ERROR",a[a.ABSTRACT=100]="ABSTRACT",a[a.ADRUM_XHR=101]="ADRUM_XHR",a[a.NG_VIRTUAL_PAGE=102]="NG_VIRTUAL_PAGE"}(a||(a={})),function(a){a=a.events||(a.events={}),a.l={},a.l[100]={guid:"string",url:"string",parentGUID:"string",parentUrl:"string",parentType:"number",timestamp:"number"},a.l[3]={resTiming:"object"},a.l[102]={digestCount:"number"},a.l[2]={method:"string",parentPhase:"string",parentPhaseId:"number",error:"object"},a.l[101]={xhr:"object"},a.l[4]={msg:"string",line:"number",stack:"string"}}(a||(a={})),function(a){var b=function(){function a(){this.w={}}return a.prototype.mark=function(a,b){c.mark.apply(this,arguments)},a.prototype.getTiming=function(a){return(a=this.getEntryByName(a))&&a.startTime},a.prototype.measure=function(a,b,d){c.measure.apply(this,arguments)},a.prototype.getEntryByName=function(a){return c.getEntryByName.call(this,a)},a.ia=function(a){return c.ia(a)},a}();a.PerformanceTracker=b;var c;!function(b){b.mark,b.measure,b.getEntryByName,b.ia;var c=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance,d=c&&c.timing&&c.timing.navigationStart?c.timing.navigationStart:window["adrum-start-time"],e=a.utils.now;b.mark=function(b,c){this.w[b]={name:b,entryType:"mark",startTime:a.utils.isDefined(c)?c:e(),duration:0}},b.measure=function(b,c,f){this.w.hasOwnProperty(c)&&this.w.hasOwnProperty(f)?this.w[b]={name:b,entryType:"measure",startTime:c?this.w[c].startTime:d,duration:(f?this.w[f].startTime:e())-(c?this.w[c].startTime:d)}:a.error("M12"+(this.w.hasOwnProperty(c)?f:c)+" does not exist. ")},b.getEntryByName=function(a){return this.w[a]||null},b.ia=function(a){return a+d}}(c||(c={}))}(a||(a={})),function(a){!function(b){function c(b,c){b=b||{};for(var d in b)c[d]=function(){var c=d,e=b[d];return function(b){var d="_"+c,f=this[d];if(a.utils.isDefined(b)){if(typeof b!==e)throw TypeError("wrong type of "+c+" value, "+typeof b+" passed in but should be a "+e+".");this[d]=b}return f}}()}function d(a){var b,c={};for(b in a){var d=a[b];c[d.start]=!0,c[d.end]=!0}return c}var e=function(){function b(b){this.perf=new a.PerformanceTracker,this.timestamp(a.utils.now()),this.guid(a.utils.generateGUID()),this.url(document.URL),this.Yc(b)}return b.prototype.type=function(){return 100},b.prototype.Yc=function(b){if(a.utils.isObject(b))for(var c in b){var d=this[c]||this["mark"+a.utils.Qb(c)];d&&a.utils.isFunction(d)&&d.call(this,b[c])}},b.Mb=function(a,b,c){return{guid:function(){return a},url:function(){return b},type:function(){return c}}},b.prototype.Cf=function(){return b.Mb(this.parentGUID(),this.parentUrl(),this.parentType())},b.prototype.parent=function(b){var c=this.Cf();return a.utils.isDefined(b)&&(this.parentGUID(b.guid()),this.parentUrl(b.url()),this.parentType(b.type())),c},b}();b.EventTracker=e,b.W=c,b.Nb=function(b,c){b=b||{};var e,f=d(b);for(e in f)f=a.utils.Qb(e),c["mark"+f]=a.utils.Ic(function(a,b){this.perf.mark(a,b)},e),c["get"+f]=a.utils.Ic(function(a){return this.perf.getTiming(a)},e)},c(b.l[100],e.prototype)}(a.events||(a.events={}))}(a||(a={}));var b=this.He||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};!function(a){!function(a){var c=function(a){function c(b){a.call(this,b)}return b(c,a),c.prototype.type=function(){return 4},c}(a.EventTracker);a.Error=c,a.W(a.l[4],c.prototype)}(a.events||(a.events={}))}(a||(a={})),function(a){!function(c){var d=function(c){function d(){c.apply(this,arguments)}return b(d,c),d.prototype.setUp=function(){c.prototype.setUp.call(this),a.listenForErrors=this.Ac,this.Ac()},d.prototype.Ac=function(){if(a.aop.support(window.onerror)){var b=this;window.onerror=a.aop.around(window.onerror,function(c,e,f,g,h){d.Ia||(d.errorsSent>=a.conf.$d?a.log("M13"):(g=a.utils.fd(h),a.command("reportPageError",new a.events.Error(a.utils.mergeJSON({msg:c,url:e,line:f,stack:g},b.status))),d.errorsSent++,d.Ia=!0))},function(){d.Ia=!1},"onerror"),a.log("M14")}else a.log("M15")},d.Ia=!1,d.errorsSent=0,d}(c.mb);c.ErrorMonitor=d,c.Zb=new c.ErrorMonitor}(a.monitor||(a.monitor={}))}(a||(a={})),function(a){var b=function(){function b(){this.ta=[],this.oa(b.wa,0)}return b.prototype.og=function(a){this.oa(b.Gb,a)},b.prototype.qg=function(a){this.oa(b.Ob,a)},b.prototype.pg=function(a){this.oa(b.Ib,a)},b.prototype.oa=function(a,b){this.ta.push({mg:(new Date).getTime(),lg:b,Jc:a}),this.af=a},b.prototype.getPhaseName=function(){return this.af},b.prototype.getPhaseID=function(a){for(var c=0;c<b.Lb.length;c++)if(b.Lb[c]===a)return c;return null},b.prototype.getPhaseCallbackTime=function(a){for(var b=this.ta,c=0;c<b.length;c++)if(b[c].Jc===a)return b[c].mg;return null},b.prototype.findPhaseAtNominalTime=function(c){a.assert(c>=0);for(var d=this.ta,e=d.length-1;e>=0;e--)if(c>=d[e].lg)return d[e].Jc;return a.error("M16",c,a.utils.ff(d)),b.wa},b.wa="AFTER_FIRST_BYTE",b.Gb="AFTER_DOM_INTERACTIVE",b.Ob="AT_ONLOAD",b.Ib="AFTER_ONLOAD",b.Lb=[b.wa,b.Gb,b.Ob,b.Ib],b}();a.oh=b,a.lifecycle=new b,a.lifecycle=a.lifecycle}(a||(a={})),function(a){!function(a){var c=function(a){function c(){a.apply(this,arguments)}return b(c,a),c.prototype.type=function(){return 0},c}(a.EventTracker);a.PageView=c}(a.events||(a.events={}))}(a||(a={})),function(a){!function(b){var c=function(){function c(){}return c.prototype.setUp=function(){c.Kg(),c.Jg()},c.Jg=function(){a.utils.addEventListener(window,"load",c.pa),a.utils.addEventListener(window,"load",c.tg)},c.tg=function(c){a.lifecycle.qg(c&&c.timeStamp),a.utils.Ta(function(){var c=(new Date).getTime();a.lifecycle.pg(c),a.command("mark","onload",c),b.yb.perf&&(b.perfMonitor.Xe(),b.perfMonitor.Ye()),a.command("reportOnload",new a.events.PageView),a.utils.loadScriptAsync(a.conf.adrumExtUrl)}),a.log("M17")},c.Kg=function(){if(document.addEventListener)document.addEventListener("DOMContentLoaded",c.ca,!1);else{document.attachEvent("onreadystatechange",c.ca);var b=null;try{b=null===window.frameElement?document.documentElement:null}catch(d){}null!=b&&b.doScroll&&function e(){if(!c.isReady){try{b.doScroll("left")}catch(a){return void setTimeout(e,10)}c.pa()}}()}a.log("M18")},c.pa=function(b){c.Dc||(a.lifecycle.og(b&&b.timeStamp),a.command("mark","onready",(new Date).getTime()),c.Dc=!0)},c.ca=function(a){document.addEventListener?(document.removeEventListener("DOMContentLoaded",c.ca,!1),c.pa(a)):"complete"===document.readyState&&(document.detachEvent("onreadystatechange",c.ca),c.pa(a))},c.isReady=!1,c.Dc=!1,c}();b.Ed=c,b.df=new b.Ed}(a.monitor||(a.monitor={}))}(a||(a={})),function(a){!function(b){var c=function(){function b(){this.navTiming=this.resTiming=null}return b.prototype.setUp=function(){b.perf=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance},b.prototype.Xe=function(){var c=b.perf;if(c=c&&c.timing)if(c.navigationStart&&c.navigationStart<=c.loadEventEnd){var d,e={};for(d in c){var f=c[d];"number"==typeof f&&(e[d]=f)}this.navTiming=e}else a.log("M20");else a.log("M19")},b.prototype.Ye=function(){this.resTiming=this.hc()},b.prototype.hc=function(){var c=b.perf,d=[];return c&&c.getEntriesByType&&(c=c.getEntriesByType("resource"))&&c.length&&0<c.length&&c.unshift&&(d=c),0==d.length&&a.log("M21"),d},b.perf=null,b}();b.yb=c,b.perfMonitor=new b.yb}(a.monitor||(a.monitor={}))}(a||(a={})),function(a){a=a.events||(a.events={}),a=a.b||(a.b={}),a.navigationStart="navigationStart",a.domainLookupStart="domainLookupStart",a.domainLookupEnd="domainLookupEnd",a.connectStart="connectStart",a.secureConnectionStart="secureConnectionStart",a.connectEnd="connectEnd",a.requestStart="requestStart",a.responseStart="responseStart",a.responseEnd="responseEnd",a.domContentLoadedEventStart="domContentLoadedEventStart",a.loadEventEnd="loadEventEnd",a.Wc="sendTime",a.ac="firstByteTime",a.Sc="respAvailTime",a.Tc="respProcTime",a.cb="viewChangeStart",a.kd="viewChangeEnd",a.eb="viewDOMLoaded",a.qd="xhrRequestsCompleted",a.Vh="viewFragmentsLoaded",a.Wh="viewResourcesLoaded",a.fb="virtualPageStart",a.dh="virtualPageEnd"}(a||(a={})),function(a){a=a.events||(a.events={}),a.B={},a.B[0]={lf:{start:a.b.navigationStart,end:a.b.loadEventEnd,name:"PLT"},qf:{start:a.b.navigationStart,end:a.b.responseStart,name:"FBT"},Rh:{start:a.b.navigationStart,end:a.b.requestStart,name:"SCT"},Sh:{start:a.b.secureConnectionStart,end:a.b.connectEnd,name:"SHT"},yh:{start:a.b.domainLookupStart,end:a.b.domainLookupEnd,name:"DLT"},Uh:{start:a.b.connectStart,end:a.b.connectEnd,name:"TCP"},Ph:{start:a.b.requestStart,end:a.b.responseStart,name:"RAT"},Ah:{start:a.b.responseStart,end:a.b.loadEventEnd,name:"FET"},Ch:{start:a.b.responseStart,end:a.b.domContentLoadedEventStart,name:"DRT"},sh:{start:a.b.responseStart,end:a.b.responseEnd,name:"DDT"},wh:{start:a.b.responseEnd,end:a.b.domContentLoadedEventStart,name:"DPT"},Oh:{start:a.b.domContentLoadedEventStart,end:a.b.loadEventEnd,name:"PRT"},xh:{start:a.b.navigationStart,end:a.b.domContentLoadedEventStart,name:"DOM"}},a.B[2]={qf:{start:a.b.Wc,end:a.b.ac,name:"FBT"},Bh:{start:a.b.ac,end:a.b.Sc,name:"DDT"},rh:{start:a.b.Sc,end:a.b.Tc,name:"DPT"},lf:{start:a.b.Wc,end:a.b.Tc,name:"PLT"}},a.B[3]={Ih:{start:a.b.fb,end:a.b.dh,name:"PLT"},uh:{start:a.b.cb,end:a.b.kd,name:"DDT"},Fh:{start:a.b.cb,end:a.b.eb,name:"DRT"},jh:{start:a.b.kd,end:a.b.eb,name:"DPT"},kh:{start:a.b.cb,end:a.b.eb,name:"DOM"},Nh:{start:"viewChangeEnd",end:"xhrRequestsCompleted",name:null},Gh:{start:"viewChangeEnd",end:"viewPartialsLoaded",name:null},Eh:{start:"viewPartialsLoaded",end:"viewFragmentsLoaded",name:null},Hh:{start:"viewPartialsLoaded",end:"viewResourcesLoaded",name:null}},a.B[102]=a.B[3]}(a||(a={})),function(a){!function(a){var c=function(a){function c(b){a.call(this,b)}return b(c,a),c.prototype.type=function(){return 2},c}(a.EventTracker);a.Ajax=c,a.W(a.l[2],c.prototype),a.Nb(a.B[2],c.prototype)}(a.events||(a.events={}))}(a||(a={})),function(a){!function(a){var c=function(a){function c(b){a.call(this,b)}return b(c,a),c.prototype.type=function(){return 2},c}(a.Ajax);a.AdrumAjax=c,a.W(a.l[101],c.prototype)}(a.events||(a.events={}))}(a||(a={})),function(a){!function(c){var d=function(c){function d(){c.call(this),this.conf=null,this.Wa=!1,!0===window["adrum-xhr-disable"]?a.log("M22"):window.XMLHttpRequest?(this.conf={exclude:[{urls:[{pattern:a.conf.beaconUrlHttp+a.conf.corsEndpointPath},{pattern:a.conf.beaconUrlHttps+a.conf.corsEndpointPath}]}],include:[]},d.Mc(this.conf,a.conf.userConf&&a.conf.userConf.xhr),(this.d=window.XMLHttpRequest.prototype)?"open"in this.d&&"send"in this.d?(this.Wa=a.aop.support(this.d.open)&&a.aop.support(this.d.send))||a.log("M26"):a.log("M25"):a.log("M24")):a.log("M23")}return b(d,c),d.Mc=function(b,c){c&&(c.include=a.utils.od(c.include),c.exclude=a.utils.od(c.exclude),a.utils.mergeJSON(b,c));var e=b.exclude;if(e)for(var f=0;f<e.length;f++){var g=e[f].urls;g&&0<g.length&&(e[f].urls=d.Ub(g))}if(e=b.include)for(f=0;f<e.length;f++)(g=e[f].urls)&&0<g.length&&(e[f].urls=d.Ub(g))},d.Ub=function(b){for(var c=[],d=0;d<b.length;d++){var e=b[d].pattern;if("string"==typeof e)try{c.push(new RegExp(e))}catch(f){a.exception(f,"Parse regex pattern failed.")}else a.error("xhr filter pattern should be a string")}return c},d.$c=function(a,b,c){var e=c&&c.include;return c=c&&c.exclude,e&&0<e.length&&!d.xc(b,a,e)||c&&0<c.length&&d.xc(b,a,c)},d.prototype.setUp=function(){if(this.Wa){a.log("M27"),a.xhrConstructor=window.XMLHttpRequest,a.xhrOpen=this.xhrOpen=this.d.open,a.xhrSend=this.xhrSend=this.d.send;var b=this;this.d.open=a.aop.around(this.d.open,function(){var c=1<=arguments.length?String(arguments[0]):"",e=2<=arguments.length?String(arguments[1]):"";d.$c(e,c,b.conf)||(this._adrumAjaxT=new a.events.AdrumAjax(a.utils.mergeJSON({method:c,url:e,xhr:this},b.status)))},null,"XHR.open"),this.d.send=a.aop.around(this.d.send,function(){var c=this,e=c._adrumAjaxT;if(e){var f=a.utils.now(),g=e.getSendTime();a.assert(null===g,"M28"),e.timestamp(f),e.markSendTime(g||f),e.parentPhase(a.lifecycle.getPhaseName()),d.Zf(e.url())?c.setRequestHeader("ADRUM","isAjax:true"):a.log("M29",document.location.href,e.url());var h=0,i=function(){if(4==c.readyState)a.log("M30"),b.ua(c);else{var e=null;try{e=c.onreadystatechange}catch(f){return a.log("M31",f),void b.ua(c)}h++,e?a.aop.support(e)?(c.onreadystatechange=b.Vb(e,c,"XHR.onReadyStateChange"),a.log("M32",h)):(a.log("M33"),b.ua(c)):h<d.Fe?a.utils.Ta(i):(a.log("M34"),b.ua(c))}};i()}},null,"XHR.send"),"addEventListener"in this.d&&"removeEventListener"in this.d&&a.aop.support(this.d.addEventListener)&&a.aop.support(this.d.removeEventListener)?(this.d.addEventListener=a.aop.around(this.d.addEventListener,this.$e(),null,"XHR.addEventListener"),this.d.removeEventListener=a.aop.around(this.d.removeEventListener,function(b,c){if(this._adrumAjaxT){var d=Array.prototype.slice.call(arguments);return c.__adrumInterceptor?(d[1]=c.__adrumInterceptor,a.log("M35")):a.log("M36"),d}},null,"XHR.removeEventListener")):a.log("M37"),a.log("M38")}},d.jg=function(a,b){for(var c=!1,d=0;d<b.length;d++){var e=b[d];if(e&&e.test(a)){c=!0;break}}return c},d.xc=function(a,b,c){var e=!1;if(b&&c)for(var f=0;f<c.length;f++){var g=c[f];if(!(g.method&&a!==g.method||g.urls&&!d.jg(b,g.urls))){e=!0;break}}return e},d.Zf=function(a){var b=document.createElement("a");return b.href=a,a=document.location,":"===b.protocol&&""===b.hostname&&""===b.port||b.protocol===a.protocol&&b.hostname===a.hostname&&b.port===a.port},d.nc=function(b){var c=b._adrumAjaxT;if(c){var d=(new Date).getTime();2==b.readyState?c.markFirstByteTime(c.getFirstByteTime()||d):4==b.readyState&&(a.assert(null===c.getRespAvailTime(),"M39"),c.markRespAvailTime(c.getRespAvailTime()||d),c.markFirstByteTime(c.getFirstByteTime()||d))}},d.prototype.Vb=function(b,c,e){return d.hh(b,function(){d.nc(this)},function(){var b=c._adrumAjaxT;if(b&&4==c.readyState){var e=(new Date).getTime();a.assert(null===b.getRespProcTime(),"M40"),b.markRespProcTime(b.getRespProcTime()||e),d.a(c,b)}},e)},d.a=function(b,c){var d=b.status;if(d>=400){var e=b.responseText;c.error({status:d,msg:a.utils.isString(e)?e:""})}a.command("reportXhr",c)},d.prototype.ua=function(b){if(b._adrumAjaxT){var c=(new Date).getTime()+3e4,e=function(){d.nc(b);var f=b._adrumAjaxT;if(f){var g=(new Date).getTime();4==b.readyState?(a.assert(null===f.getRespProcTime(),"M41"),f.markRespProcTime(f.markRespProcTime()||g),a.log("M42"),d.a(b,f),delete b._adrumAjaxT):c>g?setTimeout(e,d.lb):(delete b._adrumAjaxT,a.log("M43"))}};e()}},d.hh=function(b,c,d,e){var f=b;return b&&"object"==typeof b&&"toString"in b&&"[xpconnect wrapped nsIDOMEventListener]"===b.toString()&&"handleEvent"in b&&(f=function(){b.handleEvent.apply(this,Array.prototype.slice.call(arguments))}),a.aop.around(f,c,d,e)},d.prototype.$e=function(){for(var b=0;b<arguments.length;b++);var c=this;return function(b,d){if(("load"===b||"error"===b)&&d&&this._adrumAjaxT){var e;if(e=d,e.__adrumInterceptor)e=e.__adrumInterceptor;else if(a.aop.support(e)){var f=c.Vb(e,this,"XHR.invokeEventListener");e=e.__adrumInterceptor=f}else e=null;if(e)return f=Array.prototype.slice.call(arguments),f[1]=e,a.log("M44"),f;a.log("M45",b,d)}}},d.Fe=5,d.lb=50,d}(c.mb);c.fa=d,c.hb=new c.fa}(a.monitor||(a.monitor={}))}(a||(a={})),function(a){!function(b){function c(a,b){var c=[],d=/^\s*(ADRUM_BT\w*)=(.*)\s*$/i.exec(a);if(d){var e=d[1],d=d[2].replace(/^"|"$/g,""),d=decodeURIComponent(d).split("|"),g=d[0].split(":");if("R"===g[0]&&Number(g[1])===b)for(f(e),e=1;e<d.length;e++)c.push(d[e])}return c}function d(a,b){var c=/^\s*(ADRUM_(\d+)_(\d+)_(\d+))=(.*)\s*$/i.exec(a);if(c){var d=c[1],e=c[4],g=c[5];if(Number(c[3])===b)return f(d),{index:Number(e),value:g}}return null}function e(b){var c=/^\s*ADRUM=s=([\d]+)&r=(.*)\s*/.exec(b);return c?(a.log("M48",b),3===c.length?(f("ADRUM"),{startTime:Number(c[1]),startPage:c[2]}):(a.error("M49",b),null)):void 0}function f(b){a.log("M47",b);var c=new Date;c.setTime(c.getTime()-1e3),document.cookie=b+"=;Expires="+c.toUTCString()}b.startTimeCookie=null,b.cookieMetadataChunks=null,b.Xb=function(f,g){a.log("M46");for(var h=g?g.length:0,i=[],j=f.split(";"),k=0;k<j.length;k++){var l=j[k],m=d(l,h);m?i.push(m):(l=e(l),null!=l&&(b.startTimeCookie=l))}for(Array.prototype.sort.call(i,function(a,b){return a.index-b.index}),l=[],k=0;k<i.length;k++)l.push(i[k].value);for(k=0;k<j.length;k++)(i=c(j[k],h))&&0<i.length&&(l=l.concat(i));b.cookieMetadataChunks=l},a.correlation.eck=b.Xb}(a.correlation||(a.correlation={}))}(a||(a={})),function(a){a.report=function(b){a.utils.Ta(function(){a.command("reportEvent",b)})}}(a||(a={})),function(a){"APP_KEY_NOT_SET"===a.conf.appKey&&"undefined"!=typeof console&&"undefined"!=typeof console.log&&console.log("AppDynamics EUM cloud application key missing. Please specify window['adrum-app-key']"),a.correlation.Xb(document.cookie,document.referrer),a.command("mark","firstbyte",window["adrum-start-time"]),a.monitor.Zc(a.monitor.Zb,a.monitor.df,a.monitor.perfMonitor,a.monitor.hb)}(a||(a={})),function(a){a=a.ng||(a.ng={}),a=a.c||(a.c={}),a.Bc="locationChangeStart",a.gg="locationChangeSuccess",a.Uc="routeChangeStart",a.Vc="routeChangeSuccess",a.bd="stateChangeStart",a.cd="stateChangeSuccess",a.ld="viewContentLoaded",a.Jf="includeContentRequested",a.If="includeContentLoaded",a.Wb="digest",a.Kh="outstandingRequestsComplete",a.Pb="beforeNgXhrRequested",a.Hb="afterNgXhrRequested",a.Jh="ngXhrLoaded",a.Sb="$$completeOutstandingRequest"}(a||(a={})),function(a){!function(a){function b(b,c,d,e,f,g){if(c)try{return c.apply(b,[d,e,f].concat(g))}catch(h){return b.error(d,e,f,g,a.Error.Md,"an exception occurred in a caller-provided callback function",h)}}function c(c,d){return function(){var e=this.current,f=d[e]||d[a.ea]||e,g=Array.prototype.slice.call(arguments);if(this.Ve(c))return this.error(c,e,f,g,a.Error.Nd,"event "+c+" inappropriate in current state "+this.current);if(!1===b(this,this["onbefore"+c],c,e,f,g))return a.da.ib;if(f===a.ea&&(f=e),e===f)return b(this,this["onafter"+c]||this["on"+c],c,e,f,g),a.da.qe;var h=this;return this.transition=function(){return h.transition=null,h.current=f,b(h,h["onenter"+f]||h["on"+f],c,e,f,g),b(h,h["onafter"+c]||h["on"+c],c,e,f,g),a.da.ye},!1===b(this,this["onleave"+e],c,e,f,g)?(this.transition=null,a.da.ib):this.transition?this.transition():void 0}}a.VERSION="2.3.5",a.da={ye:1,qe:2,ib:3,mh:4},a.Error={Nd:100,nh:200,Md:300},a.ea="*",a.create=function(b,d){function e(b){var c=b.from instanceof Array?b.from:b.from?[b.from]:[a.ea];j[b.name]=j[b.name]||{};for(var d=0;d<c.length;d++)k[c[d]]=k[c[d]]||[],k[c[d]].push(b.name),j[b.name][c[d]]=b.to||c[d]}var f="string"==typeof b.initial?{state:b.initial}:b.initial,g=d||b.target||{},h=b.events||[],i=b.callbacks||{},j={},k={};f&&(f.event=f.event||"startup",e({name:f.event,from:"none",to:f.state}));for(var l=0;l<h.length;l++)e(h[l]);for(var m in j)j.hasOwnProperty(m)&&(g[m]=c(m,j[m]));for(m in i)i.hasOwnProperty(m)&&(g[m]=i[m]);return g.current="none",g.Dh=function(a){return a instanceof Array?0<=a.indexOf(this.current):this.current===a},g.Ue=function(b){return!this.transition&&(j[b].hasOwnProperty(this.current)||j[b].hasOwnProperty(a.ea))},g.Ve=function(a){return!this.Ue(a)},g.ta=function(){return k[this.current]},g.error=b.error||function(a,b,c,d,e,f,g){throw g||f},f&&!f.defer&&g[f.event](),g}}(a.Bb||(a.Bb={}))}(a||(a={})),function(a){!function(c){var d=function(d){function e(b){d.call(this,b),this.perf=new a.PerformanceTracker,this.start()}return b(e,d),e.prototype.type=function(){return 3},e.prototype.yf=function(){return c.EventTracker.Mb(this.guid(),this.url(),this.type())},e.prototype.ad=function(b){var c=this.yf();b.set("parent",c),a.log("M50",c.guid(),c.url())},e.prototype.startCorrelatingXhrs=function(){a.log("M51"),this.ad(a.monitor.hb)},e.prototype.stopCorrelatingXhrs=function(){a.monitor.hb.set("parent",null),a.log("M52")},e.prototype.Ng=function(){a.log("M53"),this.ad(a.monitor.Zb)},e.prototype.start=function(){this.markVirtualPageStart(),this.startCorrelatingXhrs()},e.prototype.end=function(){this.markVirtualPageEnd(),this.stopCorrelatingXhrs()},e}(c.EventTracker);c.VPageView=d,c.W(c.l[3],d.prototype),c.Nb(c.B[3],d.prototype)}(a.events||(a.events={}))}(a||(a={})),function(a){var b=a.ng||(a.ng={}),b=b.conf||(b.conf={});b.disabled=a.conf.userConf&&a.conf.userConf.spa&&a.conf.userConf.spa.angular&&a.conf.userConf.spa.angular.disable,b.distinguishVPwithItsTemplateUrl=a.conf.userConf&&a.conf.userConf.spa&&a.conf.userConf.spa.angular&&!0===a.conf.userConf.spa.angular.distinguishVPwithItsTemplateUrl?!0:!1,b.xhr={},b.metrics={includeResTimingInEndUserResponseTiming:!0},a.conf.userConf&&a.conf.userConf.spa&&a.conf.userConf.spa.angular&&a.conf.userConf.spa.angular.vp&&(a.conf.userConf.spa.angular.vp.xhr&&a.monitor.fa.Mc(b.xhr,a.conf.userConf.spa.angular.vp.xhr),a.conf.userConf.spa.angular.vp.metrics&&a.utils.mergeJSON(b.metrics,a.conf.userConf.spa.angular.vp.metrics))}(a||(a={})),function(a){!function(c){var d=function(d){function e(a){d.call(this,a),this.vc=!0,this.Y={},this.U=0,this.stopCorrelatingXhrs()}return b(e,d),e.prototype.type=function(){return 3},e.prototype.fb=function(){this.markViewChangeStart(),this.markVirtualPageStart(this.getViewChangeStart()),this.timestamp(this.getViewChangeStart())},e.prototype.Kf=function(){this.digestCount(this.digestCount()+1)},e.prototype.Lf=function(){this.U++,a.log("increasing xhr count "+this.U+" pending xhr requests")},e.prototype.bf=function(){this.U--,a.log("decreasing xhr count "+this.U+" pending xhr requests")},e.prototype.Ff=function(){var b=this.perf.getEntryByName(a.events.b.qd);return a.log("xhrCount "+this.U+" xhrReuqestCompleted "+b),0<this.U},e.prototype.Re=function(){var a={sa:0},b=document.querySelectorAll("ng-view, [ng-view], .ng-view, [ui-view]");if(b&&0<b.length)for(var c in e.Rc)for(var d=0;d<b.length;d++){var f=angular.element(b[d]).find(c);if(0<f.length)for(var g=0;g<f.length;g++){var h=f[g][e.Rc[c].Ya];(h=h?decodeURIComponent(h):null)&&!a[h]&&(a[h]=c,a.sa++)}}this.Y=a},e.prototype.Qe=function(a){return!!this.Y[decodeURIComponent(a.name)]},e.prototype.Se=function(){var b=[],c=this;0<this.Y.sa&&(b=a.monitor.perfMonitor.hc().filter(function(a){return c.Qe(a)})),this.resTiming(b)},e.nf=function(b){for(var d=[],e=0;e<b.length;e++){var f=b[e];2!==b[e].eventType&&101!==b[e].eventType||a.monitor.fa.$c(f.eventUrl,f.method,c.conf.xhr)||d.push(b[e])}return d},e.zf=function(a){var b,c,d=-1;for(b=0,c=a.length;c>b;b++)d=Math.max(d,a[b].timestamp+a[b].metrics.PLT);return d},e.prototype.Le=function(){if(c.conf.xhr){var b=e.nf(a.channel.getEventsWithParentGUID(this.guid())),b=e.zf(b);if(b>0){var d=this.perf.getEntryByName(a.events.b.qd);this.markXhrRequestsCompleted(Math.min(d&&d.startTime||Number.MAX_VALUE,b))}}},e.prototype.adjustTimings=function(){this.Le();var b=this.getViewDOMLoaded(),d=this.getXhrRequestsCompleted(),b=Math.max(b,d);c.conf.metrics.includeResTimingInEndUserResponseTiming&&(this.Ke(),d=this.getViewResourcesLoaded(),d=Math.max(b,d),a.log("adjust this.end from %s to %s",b,d),b=d),this.markVirtualPageEnd(b)},e.prototype.Ke=function(){if(0<this.Y.sa){this.Se();var b=this.resTiming();if(b&&b.length>=this.Y.sa){for(var c=[],d=0;d<b.length;d++)c.push(b[d].responseEnd);b=Math.max.apply(Math,c),this.markViewResourcesLoaded(a.PerformanceTracker.ia(b))}}},e.prototype.identifier=function(b){var c=this.nd;return a.utils.isDefined(b)&&(this.nd=e.mf(b),this.url(this.nd.url)),c},e.mf=function(b){var c={};return b&&b.g?(c.g={Ma:""},a.utils.mergeJSON(c.g,{Ma:b.g.originalPath,Z:b.g.template,$:b.g.templateUrl})):b&&b.state&&(c.state={url:""},a.utils.mergeJSON(c.state,{url:b.state.url,name:b.state.name,Z:b.state.template,$:b.state.templateUrl})),c},e.Rc={img:{Ya:"src"},script:{Ya:"src"},link:{Ya:"href"}},e}(a.events.VPageView);c.NgVPageView=d,a.events.W(a.events.l[102],d.prototype)}(a.ng||(a.ng={}))}(a||(a={})),function(a){!function(b){var c=function(){function c(){this.e=new b.NgVPageView}return c.prototype.Dg=function(){var d=this;b.conf.metrics.includeResTimingInEndUserResponseTiming?(a.log("M54"),setTimeout(function(){d.Pa()},c.Ae)):setTimeout(function(){d.Pa()},c.Be)},c.prototype.Pa=function(){a.log("M55");var b=this.e;a.command("call",function(){b.adjustTimings(),
a.reporter.reportEvent(b)})},c.prototype.Ig=function(a){this.e=a},c.Ae=5e3,c.Be=2*a.monitor.fa.lb,c}();b.VirtualPageStateMachine=c,a.Bb.create({events:[{name:"start",from:"none",to:"ChangeView"},{name:"viewLoaded",from:"ChangeView",to:"XhrPending"},{name:"xhrCompleted",from:"XhrPending",to:"End"},{name:"abort",from:"*",to:"none"},{name:"init",from:"*",to:"none"},{name:"locChange",from:"*",to:"*"},{name:"beforeXhrReq",from:"*",to:"*"},{name:"afterXhrReq",from:"*",to:"*"}],error:function(b){a.log("M56"+b)},callbacks:{onChangeView:function(){this.e.fb(),this.e.Ng()},onviewLoaded:function(){this.e.markViewDOMLoaded()},onXhrPending:function(){this.e.vc&&this.xhrCompleted()},onleaveXhrPending:function(a,b,c){return"abort"===a?(this.Pa(),!0):"xhrCompleted"===a&&"End"===c?this.e.Ff()?!1:(this.e.markXhrRequestsCompleted(),!0):void 0},onEnd:function(){this.e.Re(),this.Dg()},oninit:function(a,b,c,d){this.Ig(d)},onlocChange:function(a,b,c,d){this.e.identifier.url=d},onbeforeXhrReq:function(b,c,d,e){var f=this.e;return f.vc=!1,a.log("M57",e&&e[1]||"",f.guid()),f.Lf(),f.startCorrelatingXhrs(),e[3]&&(e[3]=a.aop.before(e[3],function(b,c,d){a.log("M58"),f.bf(),d&&(b=a.utils.wg(d)["content-type"])&&0<=b.indexOf("text/html")&&f.markViewFragmentsLoaded()})),e},onafterXhrReq:function(){this.e.stopCorrelatingXhrs()}}},c.prototype)}(a.ng||(a.ng={}))}(a||(a={})),function(a){!function(b){var c=function(){function c(){this.k=new b.VirtualPageStateMachine,this.distinguishVPwithItsTemplateUrl=a.ng.conf.distinguishVPwithItsTemplateUrl}return c.prototype.h=function(d,e){switch(a.log("M59",d),d){case b.c.Uc:case b.c.bd:this.k.start();var f=new b.NgVPageView({url:e.next.url,identifier:e.next});this.distinguishVPwithItsTemplateUrl&&c.Tf(this.k.e,f)?this.k.e.Yc({url:e.next.url,identifier:e.next}):this.Sg(f);break;case b.c.Vc:case b.c.cd:this.k.e.markViewChangeEnd();break;case b.c.ld:this.k.viewLoaded();break;case b.c.Pb:this.k.beforeXhrReq(e);break;case b.c.Hb:this.k.afterXhrReq();break;case b.c.Sb:this.k.xhrCompleted();break;case b.c.Bc:this.k.locChange(e.next.url);break;case b.c.Wb:this.k.e.Kf()}},c.prototype.Sg=function(a){this.k.abort(),this.k.init(a),this.k.start()},c.Tf=function(b,c){var d=b.identifier(),e=c.identifier(),f=!1;return f=!a.utils.isDefined(d)&&!a.utils.isDefined(e)||d===e?!0:a.utils.isDefined(d)&&a.utils.isDefined(e)?d.state||e.state?a.utils.isDefined(d.state)&&a.utils.isDefined(e.state)?d.state.name===e.state.name&&d.state.Z===e.state.Z&&d.state.$===e.state.$&&d.state.url===e.state.url:!1:d.g&&e.g?d.g.Ma===e.g.Ma&&d.g.Z===e.g.Z&&d.g.$===e.g.$:d.url===e.url:!1},c}();b.De=c}(a.ng||(a.ng={}))}(a||(a={})),function(a){!function(b){var c=function(){function c(){this.j=new b.De}return c.prototype.setUp=function(){var b=this;a.utils.addEventListener(document,"DOMContentLoaded",function(){a.log("M60"),b.init()})},c.prototype.init=function(){if("undefined"!=typeof angular){a.log("M61");var b=this,c=angular.module("ng");c.config(["$provide",function(a){b.Qf(a),b.Pf(a)}]),c.run(["$browser",function(a){b.Of(a)}]),a.log("M62")}},c.prototype.Pf=function(c){var d=a.aop,e=this;c.decorator("$httpBackend",["$delegate",function(a){return a=d.around(a,function(){var a=Array.prototype.slice.call(arguments);return e.j.h(b.c.Pb,a),a},function(){e.j.h(b.c.Hb)})}])},c.prototype.Qf=function(c){var d=a.aop,e=this;c.decorator("$rootScope",["$delegate",function(a){return a.$digest=d.after(a.$digest,function(){e.j.h(b.c.Wb)}),a.$on("$locationChangeStart",function(a,c){var d={url:c},f=a&&a.X&&a.X.$state&&a.X.$state.current;f&&(d.state=f),e.j.h(b.c.Bc,{next:d})}),a.$on("$locationChangeSuccess",function(){e.j.h(b.c.gg)}),a.$on("$routeChangeStart",function(a,c){var d={url:location.href},f=c&&c.$$route;f&&(d.g=f),e.j.h(b.c.Uc,{next:d})}),a.$on("$routeChangeSuccess",function(){e.j.h(b.c.Vc)}),a.$on("$stateChangeStart",function(a,c){e.j.h(b.c.bd,{next:{state:c}})}),a.$on("$stateChangeSuccess",function(){e.j.h(b.c.cd)}),a.$on("$viewContentLoaded",function(a){var c={url:location.href};(a=a&&a.X&&a.X.$state&&a.X.$state.current)&&(c.state=a),e.j.h(b.c.ld,{next:c})}),a.$on("$includeContentRequested",function(){e.j.h(b.c.Jf)}),a.$on("$includeContentLoaded",function(){e.j.h(b.c.If)}),a}])},c.prototype.Of=function(c){var d=this;c.$$completeOutstandingRequest=a.aop.before(c.$$completeOutstandingRequest,function(){d.j.h(b.c.Sb)})},c}();b.ih=c,b.ngMonitor=new c}(a.ng||(a.ng={}))}(a||(a={})),function(a){var b=a.ng||(a.ng={});b.conf.disabled||a.monitor.Zc(b.ngMonitor)}(a||(a={}))}}}();;(function(){var a;a=Skyscanner.analyticsPageName.replace(/-/g,"_").toLowerCase()||"no page name",window.ADRUM&&window.ADRUM.command("setPageName",""+a),window.ADRUM&&window.ADRUM.command("addUserData","DataCenter",""+Skyscanner.scaffoldNode.slice(5,8))}).call(this);;(function(){window.addLoadEventHandler(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;if(document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")&&window.localStorage&&(h="xsell",n=Skyscanner.Api.localStorage.init(h),p="HighlightHeader_V1",i="nvue",g="hvue",o=n.tryGetValue(p),o!==g)){if(c=Skyscanner.ancillary,"skhot"===c)return void(o===i&&n.trySetValue(p,g));d=(Skyscanner&&Skyscanner.config||{}).featureTests,f=d&&d.Xsell_HighlightHeader_V1,f&&(q={b:"xsell-header-star-icon",c:"xsell-header-circle-icon"},j=q[f],j&&(o!==i&&n.trySetValue(p,i),k='<div class="xsell-header-notification '+j+'"><div></div></div>',a=$("#main-nav a#skhot"),b=$(k),a.prepend(b),r=Skyscanner.Common||{},l=r.observer,m=r.stateManager,e={category:m&&m.getPageType(),action:"hotels_xsellHighlightHeaderImp",label:j},l&&l.publish("tracking-event",{ga:[e]}),a.one("click",function(){e.action="hotels_xsellHighlightHeaderClick",l&&l.publish("tracking-event",{ga:[e]})})))}})}).call(this);;(function(){$(document).on("spinner.wc_button",".wc-button-spinner",function(a){var b,c,d,e,f;return b=$(a.currentTarget),c=b.find(".wc-button-text"),d=(null!=(e=c.get(0))&&null!=(f=e.getBoundingClientRect())?f.width:void 0)||c.width(),c.css({width:d}),b.attr("disabled",!0)})}).call(this);;!function(){!function(){$("#advisory a.acknowledge").click(function(a){return a.stopPropagation(),Skyscanner.Api.localStorage.init("web").trySetValue("user.cubaMessageAcknowledge",!0,!0,!0),$("#advisory").hide(),!1})}(),$("#cubaBannerMoreInfo").click(function(a){$("#moreinfo").toggleClass("visible")}),Skyscanner.Api.localStorage.init("web").tryGetValue("user.cubaMessageAcknowledge",!0,!0)!==!0&&$("#advisory").removeClass("hidden")}();;(function(){addLoadEventHandler(function(){return injectScript("/userorchestration/resources/scripts/skyscanner.user.track.min.js")})}).call(this);;!function(){addLoadEventHandler(function(){var a=Skyscanner.Common.stateManager.getPageType(),b="day-view"===a,c="airli"===Skyscanner.ancillary,d=b&&c,e=Skyscanner.config.featureTests.SJ_wa_greet,f="b"===e,g=Skyscanner.Api.localStorage.init("web").tryGetValue("ssjpGreetClosed")===!0,h=d&&f&&!g;if(h){var i=new Skyscanner.Common.UrlBuilder(null,{version:Skyscanner.staticVersion}),j=i.buildStaticResourceUrl("partials/ssjpgreet.htm"),k=function(a){$("body").append(a)};$.ajax({url:j,cache:!0,success:k})}})}();;var DeviceAtlas=DeviceAtlas||{};DeviceAtlas=function(a,b,c,d,e,f){var g={apiVersion:"1.3",propsCache:"",cookieName:DeviceAtlas.cookieName||"DAPROPS",cookieExpiryDays:DeviceAtlas.cookieExpiryDays||1,cookieDomain:DeviceAtlas.cookieDomain||null,cookiePath:DeviceAtlas.cookiePath||"/",divStyle:null,ns:{svg:"http://www.w3.org/2000/svg"},cssPrfxs:["Webkit","Moz","O","ms","Khtml"],fncPrfxs:["webkit","moz","o","ms","khtml"],properties:DeviceAtlas.properties||{},getPropertiesAsString:function(){return this.propsCache},getBattery:function(){return"undefined"==typeof this.battery?null:this.battery}},h={},i={"js.webGl":function(){return!!a.WebGLRenderingContext},"js.geoLocation":function(){return!!c.geolocation},"js.webSqlDatabase":function(){return!!a.openDatabase},"js.indexedDB":function(){return l(a,"indexedDB")},"js.webSockets":function(){return l(a,"WebSocket")},"js.localStorage":function(){try{return!!d.getItem}catch(a){return!1}},"js.sessionStorage":function(){try{return!!e.getItem}catch(a){return!1}},"js.webWorkers":function(){return!!a.Worker},"js.applicationCache":function(){return!!a.applicationCache},"js.supportBasicJavaScript":function(){return"function"!=typeof alert||"function"!=typeof confirm||"function"!=typeof setTimeout||"function"!=typeof setInterval?!1:!!b.location&&!!b.forms},"js.modifyDom":function(){if(!b.createElement||!b.appendChild)return!1;var a,c;return a=b.createElement("span"),c=b.createElement("div"),c.appendChild(a),c==a.parentNode},"js.modifyCss":function(){if(!b.createElement)return!1;var a;return a=b.createElement("div"),"object"!=typeof a.style||"undefined"==typeof a.style.display?!1:(a.style.display="none","none"==a.style.display)},"js.supportEvents":function(){var a={submit:"form",click:"input",change:"input",load:"img",select:"input"};for(var b in a)if(!m(b,a[b]))return!1;return!0},"js.supportEventListener":function(){return!!a.addEventListener},"js.xhr":function(){return"function"==typeof XMLHttpRequest||"object"==typeof XMLHttpRequest},"js.supportConsoleLog":function(){return"object"==typeof console&&"function"==typeof console.log},"js.json":function(){return"object"==typeof JSON&&"function"==typeof JSON.stringify},"js.deviceOrientation":function(){return"js.deviceOrientation"in h?h["js.deviceOrientation"]:!1},"js.deviceMotion":function(){return!!a.DeviceMotionEvent},"js.touchEvents":function(){return"ontouchstart"in a},"js.querySelector":function(){return!!b.querySelector},"js.battery":function(){if(!("js.battery"in h)){var a=c.battery||c.webkitBattery||c.mozBattery;a&&(g.battery=a)}return!!g.battery},"html.canvas":function(){if(!b.createElement)return!1;var a;return a=b.createElement("canvas"),!(!a.getContext||!a.getContext("2d"))},"html.video":function(){if(!b.createElement)return!1;var a,c=new Boolean;a=b.createElement("video");try{if(c=!!a.canPlayType){c.ogg=a.canPlayType('video/ogg; codecs="theora"');var d='video/mp4; codecs="avc1.42E01E';c.h264=a.canPlayType(d+'"')||a.canPlayType(d+', mp4a.40.2"'),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"')}}catch(e){}return c.valueOf()},"html.audio":function(){if(!b.createElement)return!1;var a,c=new Boolean;a=b.createElement("audio");try{(c=!!a.canPlayType)&&(c.ogg=a.canPlayType('audio/ogg; codecs="vorbis"'),c.mp3=a.canPlayType("audio/mpeg;"),c.wav=a.canPlayType('audio/wav; codecs="1"'),c.m4a=a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;"))}catch(d){}return c.valueOf()},"html.svg":function(){return!!b.createElementNS&&!!b.createElementNS(g.ns.svg,"svg").createSVGRect},"html.inlinesvg":function(){if(!b.createElement)return!1;var a;return a=b.createElement("div"),a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==g.ns.svg},"css.animations":function(){return k("animationName")},"css.columns":function(){return k("columnCount")},"css.transforms":function(){return!!j(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])},"css.transitions":function(){return k("transitionProperty")},displayColorDepth:function(){return screen.colorDepth},cookieSupport:function(){return"undefined"==typeof c.cookieEnabled&&"string"==typeof b.cookie?!0:!!c.cookieEnabled},orientation:function(){return"undefined"!=typeof a.orientation?a.orientation:null},devicePixelRatio:function(){var b=1;try{b=a.devicePixelRatio}catch(c){}return b+""},deviceAspectRatio:function(){var a=["2/3","40/71","3/4","16/9","16/10","375/667","9/16","10/16"];return n("device-aspect-ratio",a)},flashCapable:function(){try{if(c.plugins&&c.plugins.length>0&&c.mimeTypes){var a="application/x-shockwave-flash";if(c.mimeTypes[a]&&c.mimeTypes[a].enabledPlugin)return!0}if("function"==typeof ActiveXObject||"object"==typeof ActiveXObject){var b=["ShockwaveFlash.ShockwaveFlash.7","ShockwaveFlash.ShockwaveFlash.7","ShockwaveFlash.ShockwaveFlash"];for(var d in b)try{new ActiveXObject(b[d]);return!0}catch(e){}}}catch(e){}return!1},accessDom:function(){return!!b.getElementById&&!!b.getElementsByTagName&&!!b.getElementsByName},userMedia:function(){return l(c,"getUserMedia")}},j=function(a){if(!b.createElement)return null;if(null==g.divStyle&&(g.divStyle=b.createElement("div").style),"undefined"==typeof g.divStyle)return null;for(var c in a)if("undefined"!=typeof g.divStyle[a[c]])return!0;return!1},k=function(a){var b=a.charAt(0).toUpperCase()+a.substr(1),c=(a+" "+g.cssPrfxs.join(b+" ")+b).split(" ");return j(c)},l=function(a,b){var c=!!a[b];if(c)return!0;for(var d=b.charAt(0).toUpperCase()+b.substr(1),e=-1,f=g.fncPrfxs.length;++e<f;)if(a[g.fncPrfxs[e]+d])return f>1&&(g.fncPrfxs=[g.fncPrfxs[e]],g.cssPrfxs=[g.cssPrfxs[e]]),!0;return!1},m=function(a,c){if(!b.createElement)return!1;var d,e;return d=b.createElement(c),a="on"+a,e=a in d,e||(d.setAttribute||(d=b.createElement("div")),d.setAttribute&&d.removeAttribute&&(d.setAttribute(a,""),e="function"==typeof d[a])),e},n=function(b,c){if("undefined"==typeof a.matchMedia)return null;for(var d in c){var e=a.matchMedia("("+b+":"+c[d]+")");if(e.matches)return c[d]+""}return null},o=function(){if(a.addEventListener&&a.removeEventListener){var b=function(c){null!=c&&null!=c.alpha&&(s("js.deviceOrientation",!0),u(h)),a.removeEventListener("deviceorientation",b,!1)};a.addEventListener("deviceorientation",b,!1)}},p=function(){("undefined"==typeof g.battery||null==g.battery)&&c.getBattery&&c.getBattery().then(function(a){g.battery=a,s("js.battery",!0),u(h)},function(a){})},q=function(){var a;for(var b in g.properties)i[b]=g.properties[b];for(var b in i)a=i[b](),null!=a&&"undefined"!=typeof a&&s(b,a)},r=function(){o(),p()},s=function(a,b){var c;-1!=a.indexOf(".")?(c=a.split("."),"undefined"==typeof g[c[0]]&&(g[c[0]]={}),g[c[0]][c[1]]=b):g[a]=b,h[a]=b},t=function(a,b){return"boolean"==typeof b?"b":"number"==typeof b?"i":"s"},u=function(a){var c=v(a),d=new Date;d.setDate(d.getDate()+g.cookieExpiryDays);var e="";null!=g.cookieDomain&&(e=";domain="+g.cookieDomain),b.cookie=g.cookieName+'="'+c+'";expires='+d.toUTCString()+";path="+g.cookiePath+e},v=function(a){var b,c="";for(var d in a)b=t(d,a[d]),c+=b+d+":"+("b"==b?a[d]+0:a[d])+"|";return g.propsCache=c.slice(0,-1),g.propsCache},w=function(){r(),q(),h.cookieSupport&&u(h)};return w(),g}(window,document,navigator,localStorage,sessionStorage);